"use strict";var RNe=Object.defineProperty,ANe=(so,Ir,Ut)=>Ir in so?RNe(so,Ir,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):so[Ir]=Ut,yO=(so,Ir,Ut)=>(ANe(so,"symbol"!=typeof Ir?Ir+"":Ir,Ut),Ut);(self.webpackChunkejercicio_covid=self.webpackChunkejercicio_covid||[]).push([[179],{40:(so,Ir,Ut)=>{function me(i){return"function"==typeof i}function it(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ln=it(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,s)=>`${s+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Yn(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class nn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(me(n))try{n()}catch(r){e=r instanceof Ln?r.errors:[r]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const r of s)try{e1(r)}catch(o){e=e??[],o instanceof Ln?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ln(e)}}add(e){var t;if(e&&e!==this)if(this.closed)e1(e);else{if(e instanceof nn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Yn(t,e)}remove(e){const{_finalizers:t}=this;t&&Yn(t,e),e instanceof nn&&e._removeParent(this)}}nn.EMPTY=(()=>{const i=new nn;return i.closed=!0,i})();const ro=nn.EMPTY;function Tr(i){return i instanceof nn||i&&"closed"in i&&me(i.remove)&&me(i.add)&&me(i.unsubscribe)}function e1(i){me(i)?i():i.unsubscribe()}const pc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qf={setTimeout(i,e,...t){const{delegate:n}=Qf;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=Qf;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function W4(i){Qf.setTimeout(()=>{const{onUnhandledError:e}=pc;if(!e)throw i;e(i)})}function $4(){}const _O=Zy("C",void 0,void 0);function Zy(i,e,t){return{kind:i,value:e,error:t}}let fc=null;function Jf(i){if(pc.useDeprecatedSynchronousErrorHandling){const e=!fc;if(e&&(fc={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=fc;if(fc=null,t)throw n}}else i()}class Qy extends nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tr(e)&&e.add(this)):this.destination=CO}static create(e,t,n){return new t1(e,t,n)}next(e){this.isStopped?e_(function kO(i){return Zy("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?e_(function vO(i){return Zy("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?e_(_O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xO=Function.prototype.bind;function Jy(i,e){return xO.call(i,e)}class MO{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){eg(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){eg(n)}else eg(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){eg(t)}}}class t1 extends Qy{constructor(e,t,n){let s;if(super(),me(e)||!e)s={next:e??void 0,error:t??void 0,complete:n??void 0};else{let r;this&&pc.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&Jy(e.next,r),error:e.error&&Jy(e.error,r),complete:e.complete&&Jy(e.complete,r)}):s=e}this.destination=new MO(s)}}function eg(i){pc.useDeprecatedSynchronousErrorHandling?function wO(i){pc.useDeprecatedSynchronousErrorHandling&&fc&&(fc.errorThrown=!0,fc.error=i)}(i):W4(i)}function e_(i,e){const{onStoppedNotification:t}=pc;t&&Qf.setTimeout(()=>t(i,e))}const CO={closed:!0,next:$4,error:function bO(i){throw i},complete:$4},t_="function"==typeof Symbol&&Symbol.observable||"@@observable";function gc(i){return i}function Y4(i){return 0===i.length?gc:1===i.length?i[0]:function(t){return i.reduce((n,s)=>s(n),t)}}let Kn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,s){const r=function IO(i){return i&&i instanceof Qy||function SO(i){return i&&me(i.next)&&me(i.error)&&me(i.complete)}(i)&&Tr(i)}(t)?t:new t1(t,n,s);return Jf(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=K4(n))((s,r)=>{const o=new t1({next:a=>{try{t(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[t_](){return this}pipe(...t){return Y4(t)(this)}toPromise(t){return new(t=K4(t))((n,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>n(r))})}}return i.create=e=>new i(e),i})();function K4(i){var e;return null!==(e=i??pc.Promise)&&void 0!==e?e:Promise}const TO=it(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Xn=(()=>{class i extends Kn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new X4(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new TO}next(t){Jf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Jf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Jf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:s,observers:r}=this;return n||s?ro:(this.currentObservers=null,r.push(t),new nn(()=>{this.currentObservers=null,Yn(r,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:s,isStopped:r}=this;n?t.error(s):r&&t.complete()}asObservable(){const t=new Kn;return t.source=this,t}}return i.create=(e,t)=>new X4(e,t),i})();class X4 extends Xn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:ro}}function Z4(i){return me(i?.lift)}function Mi(i){return e=>{if(Z4(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function pi(i,e,t,n,s){return new DO(i,e,t,n,s)}class DO extends Qy{constructor(e,t,n,s,r,o){super(e),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _t(i,e){return Mi((t,n)=>{let s=0;t.subscribe(pi(n,r=>{n.next(i.call(e,r,s++))}))})}function gl(i){return this instanceof gl?(this.v=i,this):new gl(i)}function e3(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=t.apply(i,e||[]),r=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(p){return function(f){return Promise.resolve(f).then(p,u)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(p,f){n[p]&&(s[p]=function(g){return new Promise(function(m,y){r.push([p,g,m,y])>1||l(p,g)})},f&&(s[p]=f(s[p])))}function l(p,f){try{!function c(p){p.value instanceof gl?Promise.resolve(p.value.v).then(h,u):d(r[0][2],p)}(n[p](f))}catch(g){d(r[0][3],g)}}function h(p){l("next",p)}function u(p){l("throw",p)}function d(p,f){p(f),r.shift(),r.length&&l(r[0][0],r[0][1])}}function t3(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function r_(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(o){return new Promise(function(a,l){!function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}(a,l,(o=i[r](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const n3=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function s3(i){return me(i?.then)}function r3(i){return me(i[t_])}function o3(i){return Symbol.asyncIterator&&me(i?.[Symbol.asyncIterator])}function a3(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const l3=function iN(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function c3(i){return me(i?.[l3])}function h3(i){return e3(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:s}=yield gl(t.read());if(s)return yield gl(void 0);yield yield gl(n)}}finally{t.releaseLock()}})}function u3(i){return me(i?.getReader)}function oo(i){if(i instanceof Kn)return i;if(null!=i){if(r3(i))return function sN(i){return new Kn(e=>{const t=i[t_]();if(me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(n3(i))return function rN(i){return new Kn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(s3(i))return function oN(i){return new Kn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,W4)})}(i);if(o3(i))return d3(i);if(c3(i))return function aN(i){return new Kn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(u3(i))return function lN(i){return d3(h3(i))}(i)}throw a3(i)}function d3(i){return new Kn(e=>{(function cN(i,e){var t,n,s,r;return function Q4(i,e,t,n){return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):function s(r){return r instanceof t?r:new t(function(o){o(r)})}(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=t3(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){s={error:o}}finally{try{n&&!n.done&&(r=t.return)&&(yield r.call(t))}finally{if(s)throw s.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function va(i,e,t,n=0,s=!1){const r=e.schedule(function(){t(),s?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(r),!s)return r}function Li(i,e,t=1/0){return me(e)?Li((n,s)=>_t((r,o)=>e(n,r,s,o))(oo(i(n,s))),t):("number"==typeof e&&(t=e),Mi((n,s)=>function hN(i,e,t,n,s,r,o,a){const l=[];let c=0,h=0,u=!1;const d=()=>{u&&!l.length&&!c&&e.complete()},p=g=>c<n?f(g):l.push(g),f=g=>{r&&e.next(g),c++;let m=!1;oo(t(g,h++)).subscribe(pi(e,y=>{s?.(y),r?p(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<n;){const y=l.shift();o?va(e,o,()=>f(y)):f(y)}d()}catch(y){e.error(y)}}))};return i.subscribe(pi(e,p,()=>{u=!0,d()})),()=>{a?.()}}(n,s,i,t)))}function Vh(i=1/0){return Li(gc,i)}const ka=new Kn(i=>i.complete());function a_(i){return i[i.length-1]}function p3(i){return me(a_(i))?i.pop():void 0}function n1(i){return function dN(i){return i&&me(i.schedule)}(a_(i))?i.pop():void 0}function f3(i,e=0){return Mi((t,n)=>{t.subscribe(pi(n,s=>va(n,i,()=>n.next(s),e),()=>va(n,i,()=>n.complete(),e),s=>va(n,i,()=>n.error(s),e)))})}function g3(i,e=0){return Mi((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function m3(i,e){if(!i)throw new Error("Iterable cannot be null");return new Kn(t=>{va(t,e,()=>{const n=i[Symbol.asyncIterator]();va(t,e,()=>{n.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function si(i,e){return e?function vN(i,e){if(null!=i){if(r3(i))return function fN(i,e){return oo(i).pipe(g3(e),f3(e))}(i,e);if(n3(i))return function mN(i,e){return new Kn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(s3(i))return function gN(i,e){return oo(i).pipe(g3(e),f3(e))}(i,e);if(o3(i))return m3(i,e);if(c3(i))return function yN(i,e){return new Kn(t=>{let n;return va(t,e,()=>{n=i[l3](),va(t,e,()=>{let s,r;try{({value:s,done:r}=n.next())}catch(o){return void t.error(o)}r?t.complete():t.next(s)},0,!0)}),()=>me(n?.return)&&n.return()})}(i,e);if(u3(i))return function _N(i,e){return m3(h3(i),e)}(i,e)}throw a3(i)}(i,e):oo(i)}function l_(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new t1({next:()=>{n.unsubscribe(),i()}});return e(...t).subscribe(n)}function hn(i){for(let e in i)if(i[e]===hn)return e;throw Error("Could not find renamed property on target object.")}function c_(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function un(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(un).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function h_(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const xN=hn({__forward_ref__:hn});function Ct(i){return i.__forward_ref__=Ct,i.toString=function(){return un(this())},i}function Xe(i){return u_(i)?i():i}function u_(i){return"function"==typeof i&&i.hasOwnProperty(xN)&&i.__forward_ref__===Ct}class re extends Error{constructor(e,t){super(function tg(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function rt(i){return"string"==typeof i?i:null==i?"":String(i)}function ng(i,e){throw new re(-201,!1)}function Qs(i,e){null==i&&function Wt(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Le(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ct(i){return{providers:i.providers||[],imports:i.imports||[]}}function ig(i){return y3(i,sg)||y3(i,v3)}function y3(i,e){return i.hasOwnProperty(e)?i[e]:null}function _3(i){return i&&(i.hasOwnProperty(d_)||i.hasOwnProperty(RN))?i[d_]:null}const sg=hn({\u0275prov:hn}),d_=hn({\u0275inj:hn}),v3=hn({ngInjectableDef:hn}),RN=hn({ngInjectorDef:hn});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let p_;function Dr(i){const e=p_;return p_=i,e}function k3(i,e,t){const n=ig(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&We.Optional?null:void 0!==e?e:void ng(un(i))}function ml(i){return{toString:i}.toString()}var ao=(()=>((ao=ao||{})[ao.OnPush=0]="OnPush",ao[ao.Default=1]="Default",ao))(),lo=(()=>{return(i=lo||(lo={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",lo;var i})();const mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zh={},Vt=[],rg=hn({\u0275cmp:hn}),f_=hn({\u0275dir:hn}),g_=hn({\u0275pipe:hn}),w3=hn({\u0275mod:hn}),xa=hn({\u0275fac:hn}),s1=hn({__NG_ELEMENT_ID__:hn});let LN=0;function $t(i){return ml(()=>{const t=!0===i.standalone,n={},s={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===ao.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Vt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||lo.Emulated,id:"c"+LN++,styles:i.styles||Vt,_:null,setInput:null,schemas:i.schemas||null,tView:null},r=i.dependencies,o=i.features;return s.inputs=b3(i.inputs,n),s.outputs=b3(i.outputs),o&&o.forEach(a=>a(s)),s.directiveDefs=r?()=>("function"==typeof r?r():r).map(x3).filter(M3):null,s.pipeDefs=r?()=>("function"==typeof r?r():r).map(ls).filter(M3):null,s})}function x3(i){return sn(i)||as(i)}function M3(i){return null!==i}function vt(i){return ml(()=>({type:i.type,bootstrap:i.bootstrap||Vt,declarations:i.declarations||Vt,imports:i.imports||Vt,exports:i.exports||Vt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function b3(i,e){if(null==i)return zh;const t={};for(const n in i)if(i.hasOwnProperty(n)){let s=i[n],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),t[s]=n,e&&(e[s]=r)}return t}const Ve=$t;function Rs(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function sn(i){return i[rg]||null}function as(i){return i[f_]||null}function ls(i){return i[g_]||null}function Js(i,e){const t=i[w3]||null;if(!t&&!0===e)throw new Error(`Type ${un(i)} does not have '\u0275mod' property.`);return t}function As(i){return Array.isArray(i)&&"object"==typeof i[1]}function ho(i){return Array.isArray(i)&&!0===i[1]}function __(i){return 0!=(8&i.flags)}function cg(i){return 2==(2&i.flags)}function hg(i){return 1==(1&i.flags)}function uo(i){return null!==i.template}function zN(i){return 0!=(256&i[2])}function kc(i,e){return i.hasOwnProperty(xa)?i[xa]:null}class jN{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Pi(){return S3}function S3(i){return i.type.prototype.ngOnChanges&&(i.setInput=GN),qN}function qN(){const i=T3(this),e=i?.current;if(e){const t=i.previous;if(t===zh)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function GN(i,e,t,n){const s=T3(i)||function UN(i,e){return i[I3]=e}(i,{previous:zh,current:null}),r=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[t],l=o[a];r[a]=new jN(l&&l.currentValue,e,o===zh),i[n]=e}Pi.ngInherit=!0;const I3="__ngSimpleChanges__";function T3(i){return i[I3]||null}function ri(i){for(;Array.isArray(i);)i=i[0];return i}function ug(i,e){return ri(e[i])}function tr(i,e){return ri(e[i.index])}function M_(i,e){return i.data[e]}function Gh(i,e){return i[e]}function nr(i,e){const t=e[i];return As(t)?t:t[0]}function dg(i){return 64==(64&i[2])}function yl(i,e){return null==e?null:i[e]}function D3(i){i[18]=0}function b_(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const st={lFrame:H3(null),bindingsEnabled:!0};function A3(){return st.bindingsEnabled}function oe(){return st.lFrame.lView}function Tt(){return st.lFrame.tView}function U(i){return st.lFrame.contextLView=i,i[8]}function W(i){return st.lFrame.contextLView=null,i}function fi(){let i=L3();for(;null!==i&&64===i.type;)i=i.parent;return i}function L3(){return st.lFrame.currentTNode}function Bo(i,e){const t=st.lFrame;t.currentTNode=i,t.isParent=e}function C_(){return st.lFrame.isParent}function E_(){st.lFrame.isParent=!1}function cs(){const i=st.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Uh(){return st.lFrame.bindingIndex++}function ba(i){const e=st.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function oF(i,e){const t=st.lFrame;t.bindingIndex=t.bindingRootIndex=i,S_(e)}function S_(i){st.lFrame.currentDirectiveIndex=i}function F3(){return st.lFrame.currentQueryIndex}function T_(i){st.lFrame.currentQueryIndex=i}function lF(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function V3(i,e,t){if(t&We.SkipSelf){let s=e,r=i;for(;!(s=s.parent,null!==s||t&We.Host||(s=lF(r),null===s||(r=r[15],10&s.type))););if(null===s)return!1;e=s,i=r}const n=st.lFrame=z3();return n.currentTNode=e,n.lView=i,!0}function D_(i){const e=z3(),t=i[1];st.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function z3(){const i=st.lFrame,e=null===i?null:i.child;return null===e?H3(i):e}function H3(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function B3(){const i=st.lFrame;return st.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const j3=B3;function R_(){const i=B3();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function hs(){return st.lFrame.selectedIndex}function _l(i){st.lFrame.selectedIndex=i}function Pn(){const i=st.lFrame;return M_(i.tView,i.selectedIndex)}function pg(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const r=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=r;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=h&&(i.destroyHooks||(i.destroyHooks=[])).push(t,h)}}function fg(i,e,t){q3(i,e,3,t)}function gg(i,e,t,n){(3&i[2])===t&&q3(i,e,t,n)}function A_(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function q3(i,e,t,n){const r=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<r||-1==r)&&(yF(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function yF(i,e,t,n){const s=t[n]<0,r=t[n+1],a=i[s?-t[n]:t[n]];if(s){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{r.call(a)}finally{}}}else try{r.call(a)}finally{}}class h1{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function mg(i,e,t){let n=0;for(;n<t.length;){const s=t[n];if("number"==typeof s){if(0!==s)break;n++;const r=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,r)}else{const r=s,o=t[++n];U3(r)?i.setProperty(e,r,o):i.setAttribute(e,r,o),n++}}return n}function G3(i){return 3===i||4===i||6===i}function U3(i){return 64===i.charCodeAt(0)}function yg(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const s=e[n];"number"==typeof s?t=s:0===t||W3(i,t,s,null,-1===t||2===t?e[++n]:null)}}return i}function W3(i,e,t,n,s){let r=0,o=i.length;if(-1===e)o=-1;else for(;r<i.length;){const a=i[r++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=r-1;break}}}for(;r<i.length;){const a=i[r];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==s&&(i[r+1]=s));if(n===i[r+1])return void(i[r+2]=s)}r++,null!==n&&r++,null!==s&&r++}-1!==o&&(i.splice(o,0,e),r=o+1),i.splice(r++,0,t),null!==n&&i.splice(r++,0,n),null!==s&&i.splice(r++,0,s)}function $3(i){return-1!==i}function Wh(i){return 32767&i}function $h(i,e){let t=function xF(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let P_=!0;function _g(i){const e=P_;return P_=i,e}let MF=0;const jo={};function d1(i,e){const t=N_(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,O_(n.data,i),O_(e,null),O_(n.blueprint,null));const s=vg(i,e),r=i.injectorIndex;if($3(s)){const o=Wh(s),a=$h(s,e),l=a[1].data;for(let c=0;c<8;c++)e[r+c]=a[o+c]|l[o+c]}return e[r+8]=s,r}function O_(i,e){i.push(0,0,0,0,0,0,0,0,e)}function N_(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function vg(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,s=e;for(;null!==s;){if(n=n5(s),null===n)return-1;if(t++,s=s[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function kg(i,e,t){!function bF(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(s1)&&(n=t[s1]),null==n&&(n=t[s1]=MF++);const s=255&n;e.data[i+(s>>5)]|=1<<s}(i,e,t)}function X3(i,e,t){if(t&We.Optional||void 0!==i)return i;ng()}function Z3(i,e,t,n){if(t&We.Optional&&void 0===n&&(n=null),0==(t&(We.Self|We.Host))){const s=i[9],r=Dr(void 0);try{return s?s.get(e,n,t&We.Optional):k3(e,n,t&We.Optional)}finally{Dr(r)}}return X3(n,0,t)}function Q3(i,e,t,n=We.Default,s){if(null!==i){if(1024&e[2]){const o=function TF(i,e,t,n,s){let r=i,o=e;for(;null!==r&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=J3(r,o,t,n|We.Self,jo);if(a!==jo)return a;let l=r.parent;if(!l){const c=o[21];if(c){const h=c.get(t,jo,n);if(h!==jo)return h}l=n5(o),o=o[15]}r=l}return s}(i,e,t,n,jo);if(o!==jo)return o}const r=J3(i,e,t,n,jo);if(r!==jo)return r}return Z3(e,t,n,s)}function J3(i,e,t,n,s){const r=function SF(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(s1)?i[s1]:void 0;return"number"==typeof e?e>=0?255&e:IF:e}(t);if("function"==typeof r){if(!V3(e,i,n))return n&We.Host?X3(s,0,n):Z3(e,t,n,s);try{const o=r(n);if(null!=o||n&We.Optional)return o;ng()}finally{j3()}}else if("number"==typeof r){let o=null,a=N_(i,e),l=-1,c=n&We.Host?e[16][6]:null;for((-1===a||n&We.SkipSelf)&&(l=-1===a?vg(i,e):e[a+8],-1!==l&&t5(n,!1)?(o=e[1],a=Wh(l),e=$h(l,e)):a=-1);-1!==a;){const h=e[1];if(e5(r,a,h.data)){const u=EF(a,e,t,o,n,c);if(u!==jo)return u}l=e[a+8],-1!==l&&t5(n,e[1].data[a+8]===c)&&e5(r,a,e)?(o=h,a=Wh(l),e=$h(l,e)):a=-1}}return s}function EF(i,e,t,n,s,r){const o=e[1],a=o.data[i+8],h=wg(a,o,t,null==n?cg(a)&&P_:n!=o&&0!=(3&a.type),s&We.Host&&r===a);return null!==h?p1(e,o,h,a):jo}function wg(i,e,t,n,s){const r=i.providerIndexes,o=e.data,a=1048575&r,l=i.directiveStart,h=r>>20,d=s?a+h:i.directiveEnd;for(let p=n?a:a+h;p<d;p++){const f=o[p];if(p<l&&t===f||p>=l&&f.type===t)return p}if(s){const p=o[l];if(p&&uo(p)&&p.type===t)return l}return null}function p1(i,e,t,n){let s=i[t];const r=e.data;if(function _F(i){return i instanceof h1}(s)){const o=s;o.resolving&&function MN(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new re(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Ft(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():rt(i)}(r[t]));const a=_g(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Dr(o.injectImpl):null;V3(i,n,We.Default);try{s=i[t]=o.factory(void 0,r,i,n),e.firstCreatePass&&t>=n.directiveStart&&function mF(i,e,t){const{ngOnChanges:n,ngOnInit:s,ngDoCheck:r}=e.type.prototype;if(n){const o=S3(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,s),r&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,r),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,r))}(t,r[t],e)}finally{null!==l&&Dr(l),_g(a),o.resolving=!1,j3()}}return s}function e5(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function t5(i,e){return!(i&We.Self||i&We.Host&&e)}class Yh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return Q3(this._tNode,this._lView,e,n,t)}}function IF(){return new Yh(fi(),oe())}function F_(i){return u_(i)?()=>{const e=F_(Xe(i));return e&&e()}:kc(i)}function n5(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}const Xh="__parameters__";function Qh(i,e,t){return ml(()=>{const n=function V_(i){return function(...t){if(i){const n=i(...t);for(const s in n)this[s]=n[s]}}}(e);function s(...r){if(this instanceof s)return n.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,h){const u=l.hasOwnProperty(Xh)?l[Xh]:Object.defineProperty(l,Xh,{value:[]})[Xh];for(;u.length<=h;)u.push(null);return(u[h]=u[h]||[]).push(o),l}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=i,s.annotationCls=s,s})}class Fe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ir(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),ir(n,e)):e!==i&&e.push(n)}return e}function Ca(i,e){i.forEach(t=>Array.isArray(t)?Ca(t,e):e(t))}function r5(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function xg(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function y1(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function sr(i,e,t){let n=Jh(i,e);return n>=0?i[1|n]=t:(n=~n,function LF(i,e,t,n){let s=i.length;if(s==e)i.push(t,n);else if(1===s)i.push(n,i[0]),i[0]=t;else{for(s--,i.push(i[s-1],i[s]);s>e;)i[s]=i[s-2],s--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function H_(i,e){const t=Jh(i,e);if(t>=0)return i[1|t]}function Jh(i,e){return function l5(i,e,t){let n=0,s=i.length>>t;for(;s!==n;){const r=n+(s-n>>1),o=i[r<<t];if(e===o)return r<<t;o>e?s=r:n=r+1}return~(s<<t)}(i,e,1)}const _1={},j_="__NG_DI_FLAG__",bg="ngTempTokenPath",BF=/\n/gm,c5="__source";let v1;function eu(i){const e=v1;return v1=i,e}function qF(i,e=We.Default){if(void 0===v1)throw new re(-203,!1);return null===v1?k3(i,void 0,e):v1.get(i,e&We.Optional?null:void 0,e)}function be(i,e=We.Default){return(function AN(){return p_}()||qF)(Xe(i),e)}function Zn(i,e=We.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),be(i,e)}function q_(i){const e=[];for(let t=0;t<i.length;t++){const n=Xe(i[t]);if(Array.isArray(n)){if(0===n.length)throw new re(900,!1);let s,r=We.Default;for(let o=0;o<n.length;o++){const a=n[o],l=GF(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}e.push(be(s,r))}else e.push(be(n))}return e}function k1(i,e){return i[j_]=e,i.prototype[j_]=e,i}function GF(i){return i[j_]}const tu=k1(Qh("Optional"),8),w1=k1(Qh("SkipSelf"),4);var Ls=(()=>((Ls=Ls||{})[Ls.Important=1]="Important",Ls[Ls.DashCase=2]="DashCase",Ls))();const Y_=new Map;let lV=0;const X_="__ngContext__";function Wi(i,e){As(e)?(i[X_]=e[20],function hV(i){Y_.set(i[20],i)}(e)):i[X_]=e}function Q_(i,e){return undefined(i,e)}function C1(i){const e=i[3];return ho(e)?e[3]:e}function J_(i){return D5(i[13])}function ev(i){return D5(i[4])}function D5(i){for(;null!==i&&!ho(i);)i=i[4];return i}function iu(i,e,t,n,s){if(null!=n){let r,o=!1;ho(n)?r=n:As(n)&&(o=!0,n=n[0]);const a=ri(n);0===i&&null!==t?null==s?N5(e,t,a):wc(e,t,a,s||null,!0):1===i&&null!==t?wc(e,t,a,s||null,!0):2===i?function av(i,e,t){const n=Sg(i,e);n&&function AV(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=r&&function OV(i,e,t,n,s){const r=t[7];r!==ri(t)&&iu(e,i,n,r,s);for(let a=10;a<t.length;a++){const l=t[a];E1(l[1],l,i,e,n,r)}}(e,i,r,t,s)}}function nv(i,e,t){return i.createElement(e,t)}function A5(i,e){const t=i[9],n=t.indexOf(e),s=e[3];512&e[2]&&(e[2]&=-513,b_(s,-1)),t.splice(n,1)}function iv(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const s=n[17];null!==s&&s!==i&&A5(s,n),e>0&&(i[t-1][4]=n[4]);const r=xg(i,10+e);!function bV(i,e){E1(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=r[19];null!==o&&o.detachView(r[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function L5(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&E1(i,e,t,3,null,null),function SV(i){let e=i[13];if(!e)return sv(i[1],i);for(;e;){let t=null;if(As(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)As(e)&&sv(e[1],e),e=e[3];null===e&&(e=i),As(e)&&sv(e[1],e),t=e&&e[4]}e=t}}(e)}}function sv(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function RV(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const s=e[t[n]];if(!(s instanceof h1)){const r=t[n+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];try{l.call(a)}finally{}}else try{r.call(s)}finally{}}}}(i,e),function DV(i,e){const t=i.cleanup,n=e[7];let s=-1;if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const o=t[r+1],a="function"==typeof o?o(e):ri(e[o]),l=n[s=t[r+2]],c=t[r+3];"boolean"==typeof c?a.removeEventListener(t[r],l,c):c>=0?n[s=c]():n[s=-c].unsubscribe(),r+=2}else{const o=n[s=t[r+1]];t[r].call(o)}if(null!==n){for(let r=s+1;r<n.length;r++)(0,n[r])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&ho(e[3])){t!==e[3]&&A5(t,e);const n=e[19];null!==n&&n.detachView(i)}!function uV(i){Y_.delete(i[20])}(e)}}function P5(i,e,t){return function O5(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const s=i.data[n.directiveStart].encapsulation;if(s===lo.None||s===lo.Emulated)return null}return tr(n,t)}(i,e.parent,t)}function wc(i,e,t,n,s){i.insertBefore(e,t,n,s)}function N5(i,e,t){i.appendChild(e,t)}function F5(i,e,t,n,s){null!==n?wc(i,e,t,n,s):N5(i,e,t)}function Sg(i,e){return i.parentNode(e)}function V5(i,e,t){return H5(i,e,t)}let uv,H5=function z5(i,e,t){return 40&i.type?tr(i,t):null};function Ig(i,e,t,n){const s=P5(i,n,e),r=e[11],a=V5(n.parent||e[6],n,e);if(null!=s)if(Array.isArray(t))for(let l=0;l<t.length;l++)F5(r,s,t[l],a,!1);else F5(r,s,t,a,!1)}function Tg(i,e){if(null!==e){const t=e.type;if(3&t)return tr(e,i);if(4&t)return ov(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return Tg(i,n);{const s=i[e.index];return ho(s)?ov(-1,s):ri(s)}}if(32&t)return Q_(e,i)()||ri(i[e.index]);{const n=j5(i,e);return null!==n?Array.isArray(n)?n[0]:Tg(C1(i[16]),n):Tg(i,e.next)}}return null}function j5(i,e){return null!==e?i[16][6].projection[e.projection]:null}function ov(i,e){const t=10+i+1;if(t<e.length){const n=e[t],s=n[1].firstChild;if(null!==s)return Tg(n,s)}return e[7]}function lv(i,e,t,n,s,r,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&Wi(ri(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)lv(i,e,t.child,n,s,r,!1),iu(e,i,s,a,r);else if(32&l){const c=Q_(t,n);let h;for(;h=c();)iu(e,i,s,h,r);iu(e,i,s,a,r)}else 16&l?q5(i,e,n,t,s,r):iu(e,i,s,a,r);t=o?t.projectionNext:t.next}}function E1(i,e,t,n,s,r){lv(t,n,i.firstChild,e,s,r,!1)}function q5(i,e,t,n,s,r){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)iu(e,i,s,l[c],r);else lv(i,e,l,o[3],s,r,!0)}function G5(i,e,t){i.setAttribute(e,"style",t)}function cv(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function kl(i){return i instanceof class K5{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?i.changingThisBreaksApplicationSecurity:i}const _v=new Fe("ENVIRONMENT_INITIALIZER"),iE=new Fe("INJECTOR",-1),sE=new Fe("INJECTOR_DEF_TYPES");class rE{get(e,t=_1){if(t===_1){const n=new Error(`NullInjectorError: No provider for ${un(e)}!`);throw n.name="NullInjectorError",n}return t}}function hz(...i){return{\u0275providers:oE(0,i)}}function oE(i,...e){const t=[],n=new Set;let s;return Ca(e,r=>{const o=r;vv(o,t,[],n)&&(s||(s=[]),s.push(o))}),void 0!==s&&aE(s,t),t}function aE(i,e){for(let t=0;t<i.length;t++){const{providers:s}=i[t];Ca(s,r=>{e.push(r)})}}function vv(i,e,t,n){if(!(i=Xe(i)))return!1;let s=null,r=_3(i);const o=!r&&sn(i);if(r||o){if(o&&!o.standalone)return!1;s=i}else{const l=i.ngModule;if(r=_3(l),!r)return!1;s=l}const a=n.has(s);if(o){if(a)return!1;if(n.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)vv(c,e,t,n)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let c;n.add(s);try{Ca(r.imports,h=>{vv(h,e,t,n)&&(c||(c=[]),c.push(h))})}finally{}void 0!==c&&aE(c,e)}if(!a){const c=kc(s)||(()=>new s);e.push({provide:s,useFactory:c,deps:Vt},{provide:sE,useValue:s,multi:!0},{provide:_v,useValue:()=>be(s),multi:!0})}const l=r.providers;null==l||a||Ca(l,h=>{e.push(h)})}}return s!==i&&void 0!==i.providers}const uz=hn({provide:String,useValue:hn});function kv(i){return null!==i&&"object"==typeof i&&uz in i}function Mc(i){return"function"==typeof i}const wv=new Fe("Set Injector scope."),Lg={},pz={};let xv;function Pg(){return void 0===xv&&(xv=new rE),xv}class wl{}class hE extends wl{constructor(e,t,n,s){super(),this.parent=t,this.source=n,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bv(e,o=>this.processProvider(o)),this.records.set(iE,su(void 0,this)),s.has("environment")&&this.records.set(wl,su(void 0,this));const r=this.records.get(wv);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(sE.multi,Vt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=eu(this),n=Dr(void 0);try{return e()}finally{eu(t),Dr(n)}}get(e,t=_1,n=We.Default){this.assertNotDestroyed();const s=eu(this),r=Dr(void 0);try{if(!(n&We.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function _z(i){return"function"==typeof i||"object"==typeof i&&i instanceof Fe}(e)&&ig(e);a=l&&this.injectableDefInScope(l)?su(Mv(e),Lg):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&We.Self?Pg():this.parent).get(e,t=n&We.Optional&&t===_1?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[bg]=o[bg]||[]).unshift(un(e)),s)throw o;return function UF(i,e,t,n){const s=i[bg];throw e[c5]&&s.unshift(e[c5]),i.message=function WF(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let s=un(e);if(Array.isArray(e))s=e.map(un).join(" -> ");else if("object"==typeof e){let r=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):un(a)))}s=`{${r.join(", ")}}`}return`${t}${n?"("+n+")":""}[${s}]: ${i.replace(BF,"\n  ")}`}("\n"+i.message,s,t,n),i.ngTokenPath=s,i[bg]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{Dr(r),eu(s)}}resolveInjectorInitializers(){const e=eu(this),t=Dr(void 0);try{const n=this.get(_v.multi,Vt,We.Self);for(const s of n)s()}finally{eu(e),Dr(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(un(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){let t=Mc(e=Xe(e))?e:Xe(e&&e.provide);const n=function gz(i){return kv(i)?su(void 0,i.useValue):su(uE(i),Lg)}(e);if(Mc(e)||!0!==e.multi)this.records.get(t);else{let s=this.records.get(t);s||(s=su(void 0,Lg,!0),s.factory=()=>q_(s.multi),this.records.set(t,s)),t=e,s.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Lg&&(t.value=pz,t.value=t.factory()),"object"==typeof t.value&&t.value&&function yz(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Xe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Mv(i){const e=ig(i),t=null!==e?e.factory:kc(i);if(null!==t)return t;if(i instanceof Fe)throw new re(204,!1);if(i instanceof Function)return function fz(i){const e=i.length;if(e>0)throw y1(e,"?"),new re(204,!1);const t=function TN(i){const e=i&&(i[sg]||i[v3]);if(e){const t=function DN(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new re(204,!1)}function uE(i,e,t){let n;if(Mc(i)){const s=Xe(i);return kc(s)||Mv(s)}if(kv(i))n=()=>Xe(i.useValue);else if(function cE(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...q_(i.deps||[]));else if(function lE(i){return!(!i||!i.useExisting)}(i))n=()=>be(Xe(i.useExisting));else{const s=Xe(i&&(i.useClass||i.provide));if(!function mz(i){return!!i.deps}(i))return kc(s)||Mv(s);n=()=>new s(...q_(i.deps))}return n}function su(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function vz(i){return!!i.\u0275providers}function bv(i,e){for(const t of i)Array.isArray(t)?bv(t,e):vz(t)?bv(t.\u0275providers,e):e(t)}class dE{}class xz{resolveComponentFactory(e){throw function wz(i){const e=Error(`No component factory found for ${un(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let D1=(()=>{class i{}return i.NULL=new xz,i})();function Mz(){return ru(fi(),oe())}function ru(i,e){return new rn(tr(i,e))}let rn=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=Mz,i})();function bz(i){return i instanceof rn?i.nativeElement:i}class R1{}let Ps=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Cz(){const i=oe(),t=nr(fi().index,i);return(As(t)?t:i)[11]}(),i})(),Ez=(()=>{class i{}return i.\u0275prov=Le({token:i,providedIn:"root",factory:()=>null}),i})();class A1{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Sz=new A1("14.3.0"),Cv={};function Sv(i){return i.ngOriginalError}class ou{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Sv(e);for(;t&&Sv(t);)t=Sv(t);return t||null}}function Sa(i){return i instanceof Function?i():i}function gE(i,e,t){let n=i.length;for(;;){const s=i.indexOf(e,t);if(-1===s)return s;if(0===s||i.charCodeAt(s-1)<=32){const r=e.length;if(s+r===n||i.charCodeAt(s+r)<=32)return s}t=s+1}}const mE="ng-template";function Vz(i,e,t){let n=0;for(;n<i.length;){let s=i[n++];if(t&&"class"===s){if(s=i[n],-1!==gE(s.toLowerCase(),e,0))return!0}else if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function yE(i){return 4===i.type&&i.value!==mE}function zz(i,e,t){return e===(4!==i.type||t?i.value:mE)}function Hz(i,e,t){let n=4;const s=i.attrs||[],r=function qz(i){for(let e=0;e<i.length;e++)if(G3(i[e]))return e;return i.length}(s);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!zz(i,l,t)||""===l&&1===e.length){if(po(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!Vz(i.attrs,c,t)){if(po(n))return!1;o=!0}continue}const u=Bz(8&n?"class":l,s,yE(i),t);if(-1===u){if(po(n))return!1;o=!0;continue}if(""!==c){let d;d=u>r?"":s[u+1].toLowerCase();const p=8&n?d:null;if(p&&-1!==gE(p,c,0)||2&n&&c!==d){if(po(n))return!1;o=!0}}}}else{if(!o&&!po(n)&&!po(l))return!1;if(o&&po(l))continue;o=!1,n=l|1&n}}return po(n)||o}function po(i){return 0==(1&i)}function Bz(i,e,t,n){if(null===e)return-1;let s=0;if(n||!t){let r=!1;for(;s<e.length;){const o=e[s];if(o===i)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function Gz(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function _E(i,e,t=!1){for(let n=0;n<e.length;n++)if(Hz(i,e[n],t))return!0;return!1}function Uz(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let s=0;s<i.length;s++)if(i[s]!==n[s])continue e;return!0}}return!1}function vE(i,e){return i?":not("+e.trim()+")":e}function Wz(i){let e=i[0],t=1,n=2,s="",r=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?s+="."+o:4&n&&(s+=" "+o);else""!==s&&!po(o)&&(e+=vE(r,s),s=""),n=o,r=r||!po(n);t++}return""!==s&&(e+=vE(r,s)),e}const ot={};function C(i){kE(Tt(),oe(),hs()+i,!1)}function kE(i,e,t,n){if(!n)if(3==(3&e[2])){const r=i.preOrderCheckHooks;null!==r&&fg(e,r,t)}else{const r=i.preOrderHooks;null!==r&&gg(e,r,0,t)}_l(t)}function bE(i,e=null,t=null,n){const s=CE(i,e,t,n);return s.resolveInjectorInitializers(),s}function CE(i,e=null,t=null,n,s=new Set){const r=[t||Vt,hz(i)];return n=n||("object"==typeof i?void 0:un(i)),new hE(r,e||Pg(),n||null,s)}let rr=(()=>{class i{static create(t,n){if(Array.isArray(t))return bE({name:""},n,t,"");{const s=t.name??"";return bE({name:s},t.parent,t.providers,s)}}}return i.THROW_IF_NOT_FOUND=_1,i.NULL=new rE,i.\u0275prov=Le({token:i,providedIn:"any",factory:()=>be(iE)}),i.__NG_ELEMENT_ID__=-1,i})();function Y(i,e=We.Default){const t=oe();return null===t?be(i,e):Q3(fi(),t,Xe(i),e)}function Av(){throw new Error("invalid")}function Ng(i,e){return i<<17|e<<2}function fo(i){return i>>17&32767}function Lv(i){return 2|i}function Ia(i){return(131068&i)>>2}function Pv(i,e){return-131069&i|e<<2}function Ov(i){return 1|i}function jE(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const s=t[n],r=t[n+1];if(-1!==r){const o=i.data[r];T_(s),o.contentQueries(2,e[r],r)}}}function zg(i,e,t,n,s,r,o,a,l,c,h){const u=e.blueprint.slice();return u[0]=s,u[2]=76|n,(null!==h||i&&1024&i[2])&&(u[2]|=1024),D3(u),u[3]=u[15]=i,u[8]=t,u[10]=o||i&&i[10],u[11]=a||i&&i[11],u[12]=l||i&&i[12]||null,u[9]=c||i&&i[9]||null,u[6]=r,u[20]=function cV(){return lV++}(),u[21]=h,u[16]=2==e.type?i[16]:u,u}function cu(i,e,t,n,s){let r=i.data[e];if(null===r)r=function qv(i,e,t,n,s){const r=L3(),o=C_(),l=i.data[e]=function IH(i,e,t,n,s,r){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,t,e,n,s);return null===i.firstChild&&(i.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l)),l}(i,e,t,n,s),function rF(){return st.lFrame.inI18n}()&&(r.flags|=64);else if(64&r.type){r.type=t,r.value=n,r.attrs=s;const o=function c1(){const i=st.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return Bo(r,!0),r}function hu(i,e,t,n){if(0===t)return-1;const s=e.length;for(let r=0;r<t;r++)e.push(n),i.blueprint.push(n),i.data.push(null);return s}function Gv(i,e,t){D_(e);try{const n=i.viewQuery;null!==n&&Qv(1,n,t);const s=i.template;null!==s&&qE(i,e,s,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&jE(i,e),i.staticViewQueries&&Qv(2,i.viewQuery,t);const r=i.components;null!==r&&function CH(i,e){for(let t=0;t<e.length;t++)GH(i,e[t])}(e,r)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,R_()}}function Hg(i,e,t,n){const s=e[2];if(128!=(128&s)){D_(e);try{D3(e),function O3(i){return st.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&qE(i,e,t,2,n);const o=3==(3&s);if(o){const c=i.preOrderCheckHooks;null!==c&&fg(e,c,null)}else{const c=i.preOrderHooks;null!==c&&gg(e,c,0,null),A_(e,0)}if(function jH(i){for(let e=J_(i);null!==e;e=ev(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const s=t[n],r=s[3];0==(512&s[2])&&b_(r,1),s[2]|=512}}}(e),function BH(i){for(let e=J_(i);null!==e;e=ev(e))for(let t=10;t<e.length;t++){const n=e[t],s=n[1];dg(n)&&Hg(s,n,s.template,n[8])}}(e),null!==i.contentQueries&&jE(i,e),o){const c=i.contentCheckHooks;null!==c&&fg(e,c)}else{const c=i.contentHooks;null!==c&&gg(e,c,1),A_(e,1)}!function MH(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const s=t[n];if(s<0)_l(~s);else{const r=s,o=t[++n],a=t[++n];oF(o,r),a(2,e[r])}}}finally{_l(-1)}}(i,e);const a=i.components;null!==a&&function bH(i,e){for(let t=0;t<e.length;t++)qH(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&Qv(2,l,n),o){const c=i.viewCheckHooks;null!==c&&fg(e,c)}else{const c=i.viewHooks;null!==c&&gg(e,c,2),A_(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,b_(e[3],-1))}finally{R_()}}}function qE(i,e,t,n,s){const r=hs(),o=2&n;try{_l(-1),o&&e.length>22&&kE(i,e,22,!1),t(n,s)}finally{_l(r)}}function GE(i,e,t){if(__(e)){const s=e.directiveEnd;for(let r=e.directiveStart;r<s;r++){const o=i.data[r];o.contentQueries&&o.contentQueries(1,t[r],r)}}}function Uv(i,e,t){!A3()||(function LH(i,e,t,n){const s=t.directiveStart,r=t.directiveEnd;i.firstCreatePass||d1(t,e),Wi(n,e);const o=t.initialInputs;for(let a=s;a<r;a++){const l=i.data[a],c=uo(l);c&&VH(e,t,l);const h=p1(e,i,a,t);Wi(h,e),null!==o&&zH(0,a-s,h,l,0,o),c&&(nr(t.index,e)[8]=h)}}(i,e,t,tr(t,e)),128==(128&t.flags)&&function PH(i,e,t){const n=t.directiveStart,s=t.directiveEnd,r=t.index,o=function aF(){return st.lFrame.currentDirectiveIndex}();try{_l(r);for(let a=n;a<s;a++){const l=i.data[a],c=e[a];S_(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&ZE(l,c)}}finally{_l(-1),S_(o)}}(i,e,t))}function Wv(i,e,t=tr){const n=e.localNames;if(null!==n){let s=e.index+1;for(let r=0;r<n.length;r+=2){const o=n[r+1],a=-1===o?t(e,i):i[o];i[s++]=a}}}function UE(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=$v(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function $v(i,e,t,n,s,r,o,a,l,c){const h=22+n,u=h+s,d=function EH(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:ot);return t}(h,u),p="function"==typeof c?c():c;return d[1]={type:i,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function WE(i,e,t,n){const s=nS(e);null===t?s.push(n):(s.push(t),i.firstCreatePass&&iS(i).push(n,s.length-1))}function $E(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const s=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,s):t[n]=[e,s]}return t}function YE(i,e){const n=e.directiveEnd,s=i.data,r=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const h=s[c],u=h.inputs,d=null===r||yE(e)?null:HH(u,r);o.push(d),a=$E(u,c,a),l=$E(h.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function or(i,e,t,n,s,r,o,a){const l=tr(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[n])?(Jv(i,t,h,n,s),cg(e)&&KE(t,e.index)):3&e.type&&(n=function TH(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),s=null!=o?o(s,e.value||"",n):s,r.setProperty(l,n,s))}function KE(i,e){const t=nr(e,i);16&t[2]||(t[2]|=32)}function Yv(i,e,t,n){let s=!1;if(A3()){const r=function OH(i,e,t){const n=i.directiveRegistry;let s=null;if(n)for(let r=0;r<n.length;r++){const o=n[r];_E(t,o.selectors,!1)&&(s||(s=[]),kg(d1(t,e),i,o.type),uo(o)?(QE(i,t),s.unshift(o)):s.push(o))}return s}(i,e,t),o=null===n?null:{"":-1};if(null!==r){s=!0,JE(t,i.data.length,r.length);for(let h=0;h<r.length;h++){const u=r[h];u.providersResolver&&u.providersResolver(u)}let a=!1,l=!1,c=hu(i,e,r.length,null);for(let h=0;h<r.length;h++){const u=r[h];t.mergedAttrs=yg(t.mergedAttrs,u.hostAttrs),eS(i,t,e,c,u),FH(c,u,o),null!==u.contentQueries&&(t.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=128);const d=u.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(d.ngOnChanges||d.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}YE(i,t)}o&&function NH(i,e,t){if(e){const n=i.localNames=[];for(let s=0;s<e.length;s+=2){const r=t[e[s+1]];if(null==r)throw new re(-301,!1);n.push(e[s],r)}}}(t,n,o)}return t.mergedAttrs=yg(t.mergedAttrs,t.attrs),s}function XE(i,e,t,n,s,r){const o=r.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function AH(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,s,o)}}function ZE(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function QE(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function FH(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;uo(e)&&(t[""]=i)}}function JE(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function eS(i,e,t,n,s){i.data[n]=s;const r=s.factory||(s.factory=kc(s.type)),o=new h1(r,uo(s),Y);i.blueprint[n]=o,t[n]=o,XE(i,e,0,n,hu(i,t,s.hostVars,ot),s)}function VH(i,e,t){const n=tr(e,i),s=UE(t),r=i[10],o=Bg(i,zg(i,s,null,t.onPush?32:16,n,e,r,r.createRenderer(n,t),null,null,null));i[e.index]=o}function qo(i,e,t,n,s,r){const o=tr(i,e);!function Kv(i,e,t,n,s,r,o){if(null==r)i.removeAttribute(e,s,t);else{const a=null==o?rt(r):o(r,n||"",s);i.setAttribute(e,s,a,t)}}(e[11],o,r,i.value,t,n,s)}function zH(i,e,t,n,s,r){const o=r[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],h=o[l++],u=o[l++];null!==a?n.setInput(t,u,c,h):t[h]=u}}}function HH(i,e){let t=null,n=0;for(;n<e.length;){const s=e[n];if(0!==s)if(5!==s){if("number"==typeof s)break;i.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,i[s],e[n+1])),n+=2}else n+=2;else n+=4}return t}function tS(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function qH(i,e){const t=nr(e,i);if(dg(t)){const n=t[1];48&t[2]?Hg(n,t,n.template,t[8]):t[5]>0&&Xv(t)}}function Xv(i){for(let n=J_(i);null!==n;n=ev(n))for(let s=10;s<n.length;s++){const r=n[s];if(dg(r))if(512&r[2]){const o=r[1];Hg(o,r,o.template,r[8])}else r[5]>0&&Xv(r)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const s=nr(t[n],i);dg(s)&&s[5]>0&&Xv(s)}}function GH(i,e){const t=nr(e,i),n=t[1];(function UH(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),Gv(n,t,t[8])}function Bg(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function Zv(i){for(;i;){i[2]|=32;const e=C1(i);if(zN(i)&&!e)return i;i=e}return null}function jg(i,e,t,n=!0){const s=e[10];s.begin&&s.begin();try{Hg(i,e,i.template,t)}catch(o){throw n&&rS(e,o),o}finally{s.end&&s.end()}}function Qv(i,e,t){T_(0),e(i,t)}function nS(i){return i[7]||(i[7]=[])}function iS(i){return i.cleanup||(i.cleanup=[])}function rS(i,e){const t=i[9],n=t?t.get(ou,null):null;n&&n.handleError(e)}function Jv(i,e,t,n,s){for(let r=0;r<t.length;){const o=t[r++],a=t[r++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,s,n,a):l[a]=s}}function Ta(i,e,t){const n=ug(e,i);!function R5(i,e,t){i.setValue(e,t)}(i[11],n,t)}function qg(i,e,t){let n=t?i.styles:null,s=t?i.classes:null,r=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:1==r?s=h_(s,a):2==r&&(n=h_(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=s:i.classesWithoutHost=s}function Gg(i,e,t,n,s=!1){for(;null!==t;){const r=e[t.index];if(null!==r&&n.push(ri(r)),ho(r))for(let a=10;a<r.length;a++){const l=r[a],c=l[1].firstChild;null!==c&&Gg(l[1],l,c,n)}const o=t.type;if(8&o)Gg(i,e,t.child,n);else if(32&o){const a=Q_(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=j5(e,t);if(Array.isArray(a))n.push(...a);else{const l=C1(e[16]);Gg(l[1],l,a,n,!0)}}t=s?t.projectionNext:t.next}return n}class L1{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Gg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ho(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(iv(e,n),xg(t,n))}this._attachedToViewContainer=!1}L5(this._lView[1],this._lView)}onDestroy(e){WE(this._lView[1],this._lView,null,e)}markForCheck(){Zv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){jg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function EV(i,e){E1(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e}}class WH extends L1{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;jg(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class ek extends D1{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=sn(e);return new P1(t,this.ngModule)}}function oS(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class YH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const s=this.injector.get(e,Cv,n);return s!==Cv||t===Cv?s:this.parentInjector.get(e,t,n)}}class P1 extends dE{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $z(i){return i.map(Wz).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return oS(this.componentDef.inputs)}get outputs(){return oS(this.componentDef.outputs)}create(e,t,n,s){let r=(s=s||this.ngModule)instanceof wl?s:s?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const o=r?new YH(e,r):e,a=o.get(R1,null);if(null===a)throw new re(407,!1);const l=o.get(Ez,null),c=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",u=n?function SH(i,e,t){return i.selectRootElement(e,t===lo.ShadowDom)}(c,n,this.componentDef.encapsulation):nv(c,h,function $H(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),d=this.componentDef.onPush?288:272,p=$v(0,null,null,1,0,null,null,null,null,null),f=zg(null,p,null,d,null,null,a,c,l,o,null);let g,m;D_(f);try{const y=function ZH(i,e,t,n,s,r){const o=t[1];t[22]=i;const l=cu(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(qg(l,c,!0),null!==i&&(mg(s,i,c),null!==l.classes&&cv(s,i,l.classes),null!==l.styles&&G5(s,i,l.styles)));const h=n.createRenderer(i,e),u=zg(t,UE(e),null,e.onPush?32:16,t[22],l,n,h,r||null,null,null);return o.firstCreatePass&&(kg(d1(l,t),o,e.type),QE(o,l),JE(l,t.length,1)),Bg(t,u),t[22]=u}(u,this.componentDef,f,a,c);if(u)if(n)mg(c,u,["ng-version",Sz.full]);else{const{attrs:_,classes:v}=function Yz(i){const e=[],t=[];let n=1,s=2;for(;n<i.length;){let r=i[n];if("string"==typeof r)2===s?""!==r&&e.push(r,i[++n]):8===s&&t.push(r);else{if(!po(s))break;s=r}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);_&&mg(c,u,_),v&&v.length>0&&cv(c,u,v.join(" "))}if(m=M_(p,22),void 0!==t){const _=m.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const k=t[v];_.push(null!=k?Array.from(k):null)}}g=function QH(i,e,t,n){const s=t[1],r=function RH(i,e,t){const n=fi();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),eS(i,n,e,hu(i,e,1,null),t),YE(i,n));const s=p1(e,i,n.directiveStart,n);Wi(s,e);const r=tr(n,e);return r&&Wi(r,e),s}(s,t,e);if(i[8]=t[8]=r,null!==n)for(const a of n)a(r,e);if(e.contentQueries){const a=fi();e.contentQueries(1,r,a.directiveStart)}const o=fi();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_l(o.index),XE(t[1],o,0,o.directiveStart,o.directiveEnd,e),ZE(e,r)),r}(y,this.componentDef,f,[JH]),Gv(p,f,null)}finally{R_()}return new XH(this.componentType,g,ru(m,f),f,m)}}class XH extends class kz{}{constructor(e,t,n,s,r){super(),this.location=n,this._rootLView=s,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new WH(s),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let s;if(null!==n&&(s=n[e])){const r=this._rootLView;Jv(r[1],r,s,e,t),KE(r,this._tNode.index)}}get injector(){return new Yh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function JH(){const i=fi();pg(oe()[1],i)}function on(i){let e=function aS(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let s;if(uo(i))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);s=e.\u0275dir}if(s){if(t){n.push(s);const o=i;o.inputs=tk(i.inputs),o.declaredInputs=tk(i.declaredInputs),o.outputs=tk(i.outputs);const a=s.hostBindings;a&&iB(i,a);const l=s.viewQuery,c=s.contentQueries;if(l&&tB(i,l),c&&nB(i,c),c_(i.inputs,s.inputs),c_(i.declaredInputs,s.declaredInputs),c_(i.outputs,s.outputs),uo(s)&&s.data.animation){const h=i.data;h.animation=(h.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(i),a===on&&(t=!1)}}e=Object.getPrototypeOf(e)}!function eB(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const s=i[n];s.hostVars=e+=s.hostVars,s.hostAttrs=yg(s.hostAttrs,t=yg(t,s.hostAttrs))}}(n)}function tk(i){return i===zh?{}:i===Vt?[]:i}function tB(i,e){const t=i.viewQuery;i.viewQuery=t?(n,s)=>{e(n,s),t(n,s)}:e}function nB(i,e){const t=i.contentQueries;i.contentQueries=t?(n,s,r)=>{e(n,s,r),t(n,s,r)}:e}function iB(i,e){const t=i.hostBindings;i.hostBindings=t?(n,s)=>{e(n,s),t(n,s)}:e}let Ug=null;function bc(){if(!Ug){const i=mn.Symbol;if(i&&i.iterator)Ug=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ug=n)}}}return Ug}function O1(i){return!!nk(i)&&(Array.isArray(i)||!(i instanceof Map)&&bc()in i)}function nk(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Go(i,e,t){return i[e]=t}function N1(i,e){return i[e]}function $i(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function Cc(i,e,t,n){const s=$i(i,e,t);return $i(i,e+1,n)||s}function Wg(i,e,t,n,s){const r=Cc(i,e,t,n);return $i(i,e+2,s)||r}function Lr(i,e,t,n,s,r){const o=Cc(i,e,t,n);return Cc(i,e+2,s,r)||o}function tt(i,e,t,n){const s=oe();return $i(s,Uh(),e)&&(Tt(),qo(Pn(),s,i,e,t,n)),tt}function du(i,e,t,n){return $i(i,Uh(),t)?e+rt(t)+n:ot}function pu(i,e,t,n,s,r){const a=Cc(i,function Ma(){return st.lFrame.bindingIndex}(),t,s);return ba(2),a?e+rt(t)+n+rt(s)+r:ot}function A(i,e,t,n,s,r,o,a){const l=oe(),c=Tt(),h=i+22,u=c.firstCreatePass?function uB(i,e,t,n,s,r,o,a,l){const c=e.consts,h=cu(e,i,4,o||null,yl(c,a));Yv(e,t,h,yl(c,l)),pg(e,h);const u=h.tViews=$v(2,h,n,s,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,h),u.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,n,s,r,o):c.data[h];Bo(u,!1);const d=l[11].createComment("");Ig(c,l,d,u),Wi(d,l),Bg(l,l[h]=tS(d,l,d,u)),hg(u)&&Uv(c,l,u),null!=o&&Wv(l,u,a)}function dn(i){return Gh(function sF(){return st.lFrame.contextLView}(),22+i)}function M(i,e,t){const n=oe();return $i(n,Uh(),e)&&or(Tt(),Pn(),n,i,e,n[11],t,!1),M}function ik(i,e,t,n,s){const o=s?"class":"style";Jv(i,t,e.inputs[o],o,n)}function B(i,e,t,n){const s=oe(),r=Tt(),o=22+i,a=s[11],l=s[o]=nv(a,e,function gF(){return st.lFrame.currentNamespace}()),c=r.firstCreatePass?function pB(i,e,t,n,s,r,o){const a=e.consts,c=cu(e,i,2,s,yl(a,r));return Yv(e,t,c,yl(a,o)),null!==c.attrs&&qg(c,c.attrs,!1),null!==c.mergedAttrs&&qg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,r,s,0,e,t,n):r.data[o];Bo(c,!0);const h=c.mergedAttrs;null!==h&&mg(a,l,h);const u=c.classes;null!==u&&cv(a,l,u);const d=c.styles;return null!==d&&G5(a,l,d),64!=(64&c.flags)&&Ig(r,s,l,c),0===function JN(){return st.lFrame.elementDepthCount}()&&Wi(l,s),function eF(){st.lFrame.elementDepthCount++}(),hg(c)&&(Uv(r,s,c),GE(r,c,s)),null!==n&&Wv(s,c),B}function H(){let i=fi();C_()?E_():(i=i.parent,Bo(i,!1));const e=i;!function tF(){st.lFrame.elementDepthCount--}();const t=Tt();return t.firstCreatePass&&(pg(t,i),__(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function kF(i){return 0!=(16&i.flags)}(e)&&ik(t,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function wF(i){return 0!=(32&i.flags)}(e)&&ik(t,e,oe(),e.stylesWithoutHost,!1),H}function Ze(i,e,t,n){return B(i,e,t,n),H(),Ze}function ze(i,e,t){const n=oe(),s=Tt(),r=i+22,o=s.firstCreatePass?function fB(i,e,t,n,s){const r=e.consts,o=yl(r,n),a=cu(e,i,8,"ng-container",o);return null!==o&&qg(a,o,!0),Yv(e,t,a,yl(r,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(r,s,n,e,t):s.data[r];Bo(o,!0);const a=n[r]=n[11].createComment("");return Ig(s,n,a,o),Wi(a,n),hg(o)&&(Uv(s,n,o),GE(s,o,n)),null!=t&&Wv(n,o),ze}function He(){let i=fi();const e=Tt();return C_()?E_():(i=i.parent,Bo(i,!1)),e.firstCreatePass&&(pg(e,i),__(i)&&e.queries.elementEnd(i)),He}function _e(i,e,t){return ze(i,e,t),He(),_e}function Te(){return oe()}function F1(i){return!!i&&"function"==typeof i.then}const sk=function yS(i){return!!i&&"function"==typeof i.subscribe};function le(i,e,t,n){const s=oe(),r=Tt(),o=fi();return function vS(i,e,t,n,s,r,o,a){const l=hg(n),h=i.firstCreatePass&&iS(i),u=e[8],d=nS(e);let p=!0;if(3&n.type||a){const m=tr(n,e),y=a?a(m):m,_=d.length,v=a?w=>a(ri(w[n.index])):n.index;let k=null;if(!a&&l&&(k=function gB(i,e,t,n){const s=i.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===t&&s[r+1]===n){const a=e[7],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(i,e,s,n.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=r,k.__ngLastListenerFn__=r,p=!1;else{r=wS(n,e,u,r,!1);const w=t.listen(y,s,r);d.push(r,w),h&&h.push(s,v,_,_+1)}}else r=wS(n,e,u,r,!1);const f=n.outputs;let g;if(p&&null!==f&&(g=f[s])){const m=g.length;if(m)for(let y=0;y<m;y+=2){const I=e[g[y]][g[y+1]].subscribe(r),b=d.length;d.push(r,I),h&&h.push(s,n.index,b,-(b+1))}}}(r,s,s[11],o,i,e,0,n),le}function kS(i,e,t,n){try{return!1!==t(n)}catch(s){return rS(i,s),!1}}function wS(i,e,t,n,s){return function r(o){if(o===Function)return n;Zv(2&i.flags?nr(i.index,e):e);let l=kS(e,0,n,o),c=r.__ngNextListenerFn__;for(;c;)l=kS(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return s&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function x(i=1){return function cF(i){return(st.lFrame.contextLView=function hF(i,e){for(;i>0;)e=e[15],i--;return e}(i,st.lFrame.contextLView))[8]}(i)}function mB(i,e){let t=null;const n=function jz(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let s=0;s<e.length;s++){const r=e[s];if("*"!==r){if(null===n?_E(i,r,!0):Uz(n,r))return s}else t=s}return t}function go(i){const e=oe()[16][6];if(!e.projection){const n=e.projection=y1(i?i.length:1,null),s=n.slice();let r=e.child;for(;null!==r;){const o=i?mB(r,i):0;null!==o&&(s[o]?s[o].projectionNext=r:n[o]=r,s[o]=r),r=r.next}}}function Yi(i,e=0,t){const n=oe(),s=Tt(),r=cu(s,22+i,16,null,t||null);null===r.projection&&(r.projection=e),E_(),64!=(64&r.flags)&&function PV(i,e,t){q5(e[11],0,e,t,P5(i,t,e),V5(t.parent||e[6],t,e))}(s,n,r)}function rk(i,e,t){return ok(i,"",e,"",t),rk}function ok(i,e,t,n,s){const r=oe(),o=du(r,e,t,n);return o!==ot&&or(Tt(),Pn(),r,i,o,r[11],s,!1),ok}function DS(i,e,t,n,s){const r=i[t+1],o=null===e;let a=n?fo(r):Ia(r),l=!1;for(;0!==a&&(!1===l||o);){const h=i[a+1];vB(i[a],e)&&(l=!0,i[a+1]=n?Ov(h):Lv(h)),a=n?fo(h):Ia(h)}l&&(i[t+1]=n?Lv(r):Ov(r))}function vB(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&Jh(i,e)>=0}const mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function RS(i){return i.substring(mi.key,mi.keyEnd)}function kB(i){return i.substring(mi.value,mi.valueEnd)}function AS(i,e){const t=mi.textEnd;return t===e?-1:(e=mi.keyEnd=function MB(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,mi.key=e,t),ku(i,e,t))}function LS(i,e){const t=mi.textEnd;let n=mi.key=ku(i,e,t);return t===n?-1:(n=mi.keyEnd=function bB(i,e,t){let n;for(;e<t&&(45===(n=i.charCodeAt(e))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)e++;return e}(i,n,t),n=OS(i,n,t),n=mi.value=ku(i,n,t),n=mi.valueEnd=function CB(i,e,t){let n=-1,s=-1,r=-1,o=e,a=o;for(;o<t;){const l=i.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=NS(i,l,o,t):e===o-4&&85===r&&82===s&&76===n&&40===l?a=o=NS(i,41,o,t):l>32&&(a=o),r=s,s=n,n=-33&l}return a}(i,n,t),OS(i,n,t))}function PS(i){mi.key=0,mi.keyEnd=0,mi.value=0,mi.valueEnd=0,mi.textEnd=i.length}function ku(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function OS(i,e,t,n){return(e=ku(i,e,t))<t&&e++,e}function NS(i,e,t,n){let s=-1,r=t;for(;r<n;){const o=i.charCodeAt(r++);if(o==e&&92!==s)return r;s=92==o&&92===s?0:o}throw new Error}function V1(i,e,t){return mo(i,e,t,!1),V1}function Da(i,e){return mo(i,e,null,!0),Da}function ai(i){yo(zS,EB,i,!1)}function EB(i,e){for(let t=function xB(i){return PS(i),LS(i,ku(i,0,mi.textEnd))}(e);t>=0;t=LS(e,t))zS(i,RS(e),kB(e))}function ut(i){yo(sr,Uo,i,!0)}function Uo(i,e){for(let t=function wB(i){return PS(i),AS(i,ku(i,0,mi.textEnd))}(e);t>=0;t=AS(e,t))sr(i,RS(e),!0)}function mo(i,e,t,n){const s=oe(),r=Tt(),o=ba(2);r.firstUpdatePass&&VS(r,i,o,n),e!==ot&&$i(s,o,e)&&HS(r,r.data[hs()],s,s[11],i,s[o+1]=function LB(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=un(kl(i)))),i}(e,t),n,o)}function yo(i,e,t,n){const s=Tt(),r=ba(2);s.firstUpdatePass&&VS(s,null,r,n);const o=oe();if(t!==ot&&$i(o,r,t)){const a=s.data[hs()];if(jS(a,n)&&!FS(s,r)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=h_(l,t||"")),ik(s,a,o,t,n)}else!function AB(i,e,t,n,s,r,o,a){s===ot&&(s=Vt);let l=0,c=0,h=0<s.length?s[0]:null,u=0<r.length?r[0]:null;for(;null!==h||null!==u;){const d=l<s.length?s[l+1]:void 0,p=c<r.length?r[c+1]:void 0;let g,f=null;h===u?(l+=2,c+=2,d!==p&&(f=u,g=p)):null===u||null!==h&&h<u?(l+=2,f=h):(c+=2,f=u,g=p),null!==f&&HS(i,e,t,n,f,g,o,a),h=l<s.length?s[l]:null,u=c<r.length?r[c]:null}}(s,a,o,o[11],o[r+1],o[r+1]=function RB(i,e,t){if(null==t||""===t)return Vt;const n=[],s=kl(t);if(Array.isArray(s))for(let r=0;r<s.length;r++)i(n,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&i(n,r,s[r]);else"string"==typeof s&&e(n,s);return n}(i,e,t),n,r)}}function FS(i,e){return e>=i.expandoStartIndex}function VS(i,e,t,n){const s=i.data;if(null===s[t+1]){const r=s[hs()],o=FS(i,t);jS(r,n)&&null===e&&!o&&(e=!1),e=function SB(i,e,t,n){const s=function I_(i){const e=st.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}(i);let r=n?e.residualClasses:e.residualStyles;if(null===s)0===(n?e.classBindings:e.styleBindings)&&(t=z1(t=ak(null,i,e,t,n),e.attrs,n),r=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==s)if(t=ak(s,i,e,t,n),null===r){let l=function IB(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Ia(n))return i[fo(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=ak(null,i,e,l[1],n),l=z1(l,e.attrs,n),function TB(i,e,t,n){i[fo(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else r=function DB(i,e,t){let n;const s=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<s;r++)n=z1(n,i[r].hostAttrs,t);return z1(n,e.attrs,t)}(i,e,n)}return void 0!==r&&(n?e.residualClasses=r:e.residualStyles=r),t}(s,r,e,n),function yB(i,e,t,n,s,r){let o=r?e.classBindings:e.styleBindings,a=fo(o),l=Ia(o);i[n]=t;let h,c=!1;if(Array.isArray(t)){const u=t;h=u[1],(null===h||Jh(u,h)>0)&&(c=!0)}else h=t;if(s)if(0!==l){const d=fo(i[a+1]);i[n+1]=Ng(d,a),0!==d&&(i[d+1]=Pv(i[d+1],n)),i[a+1]=function pH(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=Ng(a,0),0!==a&&(i[a+1]=Pv(i[a+1],n)),a=n;else i[n+1]=Ng(l,0),0===a?a=n:i[l+1]=Pv(i[l+1],n),l=n;c&&(i[n+1]=Lv(i[n+1])),DS(i,h,n,!0),DS(i,h,n,!1),function _B(i,e,t,n,s){const r=s?i.residualClasses:i.residualStyles;null!=r&&"string"==typeof e&&Jh(r,e)>=0&&(t[n+1]=Ov(t[n+1]))}(e,h,i,n,r),o=Ng(a,l),r?e.classBindings=o:e.styleBindings=o}(s,r,e,t,o,n)}}function ak(i,e,t,n,s){let r=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(r=e[a],n=z1(n,r.hostAttrs,s),r!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function z1(i,e,t){const n=t?1:2;let s=-1;if(null!==e)for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?s=o:s===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),sr(i,o,!!t||e[++r]))}return void 0===i?null:i}function zS(i,e,t){sr(i,e,kl(t))}function HS(i,e,t,n,s,r,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];$g(function PE(i){return 1==(1&i)}(c)?BS(l,e,t,s,Ia(c),o):void 0)||($g(r)||function LE(i){return 2==(2&i)}(c)&&(r=BS(l,null,t,s,a,o)),function NV(i,e,t,n,s){if(e)s?i.addClass(t,n):i.removeClass(t,n);else{let r=-1===n.indexOf("-")?void 0:Ls.DashCase;null==s?i.removeStyle(t,n,r):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Ls.Important),i.setStyle(t,n,s,r))}}(n,o,ug(hs(),t),s,r))}function BS(i,e,t,n,s,r){const o=null===e;let a;for(;s>0;){const l=i[s],c=Array.isArray(l),h=c?l[1]:l,u=null===h;let d=t[s+1];d===ot&&(d=u?Vt:void 0);let p=u?H_(d,n):h===n?d:void 0;if(c&&!$g(p)&&(p=H_(l,n)),$g(p)&&(a=p,o))return a;const f=i[s+1];s=o?fo(f):Ia(f)}if(null!==e){let l=r?e.residualClasses:e.residualStyles;null!=l&&(a=H_(l,n))}return a}function $g(i){return void 0!==i}function jS(i,e){return 0!=(i.flags&(e?16:32))}function ke(i,e=""){const t=oe(),n=Tt(),s=i+22,r=n.firstCreatePass?cu(n,s,1,e,null):n.data[s],o=t[s]=function tv(i,e){return i.createText(e)}(t[11],e);Ig(n,t,o,r),Bo(r,!1)}function zt(i){return _n("",i,""),zt}function _n(i,e,t){const n=oe(),s=du(n,i,e,t);return s!==ot&&Ta(n,hs(),s),_n}function lk(i,e,t,n,s){const r=oe(),o=pu(r,i,e,t,n,s);return o!==ot&&Ta(r,hs(),o),lk}const Ec=void 0;var JB=["en",[["a","p"],["AM","PM"],Ec],[["AM","PM"],Ec,Ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ec,"{1} 'at' {0}",Ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QB(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let wu={};function ds(i){const e=function ej(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=c8(e);if(t)return t;const n=e.split("-")[0];if(t=c8(n),t)return t;if("en"===n)return JB;throw new re(701,!1)}function c8(i){return i in wu||(wu[i]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[i]),wu[i]}var we=(()=>((we=we||{})[we.LocaleId=0]="LocaleId",we[we.DayPeriodsFormat=1]="DayPeriodsFormat",we[we.DayPeriodsStandalone=2]="DayPeriodsStandalone",we[we.DaysFormat=3]="DaysFormat",we[we.DaysStandalone=4]="DaysStandalone",we[we.MonthsFormat=5]="MonthsFormat",we[we.MonthsStandalone=6]="MonthsStandalone",we[we.Eras=7]="Eras",we[we.FirstDayOfWeek=8]="FirstDayOfWeek",we[we.WeekendRange=9]="WeekendRange",we[we.DateFormat=10]="DateFormat",we[we.TimeFormat=11]="TimeFormat",we[we.DateTimeFormat=12]="DateTimeFormat",we[we.NumberSymbols=13]="NumberSymbols",we[we.NumberFormats=14]="NumberFormats",we[we.CurrencyCode=15]="CurrencyCode",we[we.CurrencySymbol=16]="CurrencySymbol",we[we.CurrencyName=17]="CurrencyName",we[we.Currencies=18]="Currencies",we[we.Directionality=19]="Directionality",we[we.PluralCase=20]="PluralCase",we[we.ExtraData=21]="ExtraData",we))();const xu="en-US";let h8=xu;function uk(i,e,t,n,s){if(i=Xe(i),Array.isArray(i))for(let r=0;r<i.length;r++)uk(i[r],e,t,n,s);else{const r=Tt(),o=oe();let a=Mc(i)?i:Xe(i.provide),l=uE(i);const c=fi(),h=1048575&c.providerIndexes,u=c.directiveStart,d=c.providerIndexes>>20;if(Mc(i)||!i.multi){const p=new h1(l,s,Y),f=pk(a,e,s?h:h+d,u);-1===f?(kg(d1(c,o),r,a),dk(r,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),t.push(p),o.push(p)):(t[f]=p,o[f]=p)}else{const p=pk(a,e,h+d,u),f=pk(a,e,h,h+d),g=p>=0&&t[p],m=f>=0&&t[f];if(s&&!m||!s&&!g){kg(d1(c,o),r,a);const y=function Zj(i,e,t,n,s){const r=new h1(i,t,Y);return r.multi=[],r.index=e,r.componentProviders=0,O8(r,s,n&&!t),r}(s?Xj:Kj,t.length,s,n,l);!s&&m&&(t[f].providerFactory=y),dk(r,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),t.push(y),o.push(y)}else dk(r,i,p>-1?p:f,O8(t[s?f:p],l,!s&&n));!s&&n&&m&&t[f].componentProviders++}}}function dk(i,e,t,n){const s=Mc(e),r=function dz(i){return!!i.useClass}(e);if(s||r){const l=(r?Xe(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!s&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[n,l]):c[h+1].push(n,l)}else c.push(t,l)}}}function O8(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function pk(i,e,t,n){for(let s=t;s<n;s++)if(e[s]===i)return s;return-1}function Kj(i,e,t,n){return fk(this.multi,[])}function Xj(i,e,t,n){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=p1(t,t[1],this.providerFactory.index,n);r=a.slice(0,o),fk(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],fk(s,r);return r}function fk(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function Et(i,e=[]){return t=>{t.providersResolver=(n,s)=>function Yj(i,e,t){const n=Tt();if(n.firstCreatePass){const s=uo(i);uk(t,n.data,n.blueprint,s,!0),uk(e,n.data,n.blueprint,s,!1)}}(n,s?s(i):i,e)}}class Sc{}class N8{}class F8 extends Sc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ek(this);const n=Js(e);this._bootstrapComponents=Sa(n.bootstrap),this._r3Injector=CE(e,t,[{provide:Sc,useValue:this},{provide:D1,useValue:this.componentFactoryResolver}],un(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gk extends N8{constructor(e){super(),this.moduleType=e}create(e){return new F8(this.moduleType,e)}}class Jj extends Sc{constructor(e,t,n){super(),this.componentFactoryResolver=new ek(this),this.instance=null;const s=new hE([...e,{provide:Sc,useValue:this},{provide:D1,useValue:this.componentFactoryResolver}],t||Pg(),n,new Set(["environment"]));this.injector=s,s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Qg(i,e,t=null){return new Jj(i,e,t).injector}let eq=(()=>{class i{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=oE(0,t.type),s=n.length>0?Qg([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,s)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Le({token:i,providedIn:"environment",factory:()=>new i(be(wl))}),i})();function V8(i){i.getStandaloneInjector=e=>e.get(eq).getOrCreateStandaloneInjector(i)}function Ki(i,e,t){const n=cs()+i,s=oe();return s[n]===ot?Go(s,n,t?e.call(t):e()):N1(s,n)}function xe(i,e,t,n){return function W8(i,e,t,n,s,r){const o=e+t;return $i(i,o,s)?Go(i,o+1,r?n.call(r,s):n(s)):W1(i,o+1)}(oe(),cs(),i,e,t,n)}function Lt(i,e,t,n,s){return $8(oe(),cs(),i,e,t,n,s)}function ar(i,e,t,n,s,r){return function Y8(i,e,t,n,s,r,o,a){const l=e+t;return Wg(i,l,s,r,o)?Go(i,l+3,a?n.call(a,s,r,o):n(s,r,o)):W1(i,l+3)}(oe(),cs(),i,e,t,n,s,r)}function Ra(i,e,t,n,s,r,o){return function K8(i,e,t,n,s,r,o,a,l){const c=e+t;return Lr(i,c,s,r,o,a)?Go(i,c+4,l?n.call(l,s,r,o,a):n(s,r,o,a)):W1(i,c+4)}(oe(),cs(),i,e,t,n,s,r,o)}function U1(i,e,t,n,s,r,o,a){const l=cs()+i,c=oe(),h=Lr(c,l,t,n,s,r);return $i(c,l+4,o)||h?Go(c,l+5,a?e.call(a,t,n,s,r,o):e(t,n,s,r,o)):N1(c,l+5)}function Mu(i,e,t,n,s,r,o,a,l){const c=cs()+i,h=oe(),u=Lr(h,c,t,n,s,r);return Cc(h,c+4,o,a)||u?Go(h,c+6,l?e.call(l,t,n,s,r,o,a):e(t,n,s,r,o,a)):N1(h,c+6)}function yk(i,e,t,n){return function X8(i,e,t,n,s,r){let o=e+t,a=!1;for(let l=0;l<s.length;l++)$i(i,o++,s[l])&&(a=!0);return a?Go(i,o,n.apply(r,s)):W1(i,o)}(oe(),cs(),i,e,t,n)}function W1(i,e){const t=i[e];return t===ot?void 0:t}function $8(i,e,t,n,s,r,o){const a=e+t;return Cc(i,a,s,r)?Go(i,a+2,o?n.call(o,s,r):n(s,r)):W1(i,a+2)}function Jg(i,e){const t=Tt();let n;const s=i+22;t.firstCreatePass?(n=function hq(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[s]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(s,n.onDestroy)):n=t.data[s];const r=n.factory||(n.factory=kc(n.type)),o=Dr(Y);try{const a=_g(!1),l=r();return _g(a),function dB(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,oe(),s,l),l}finally{Dr(o)}}function e0(i,e,t,n){const s=i+22,r=oe(),o=Gh(r,s);return function $1(i,e){return i[1].data[e].pure}(r,s)?$8(r,cs(),e,o.transform,t,n,o):o.transform(t,n)}function _k(i){return e=>{setTimeout(i,void 0,e)}}const ie=class gq extends Xn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let s=e,r=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=_k(r),s&&(s=_k(s)),o&&(o=_k(o)));const a=super.subscribe({next:s,error:r,complete:o});return e instanceof nn&&e.add(a),a}};function mq(){return this._results[bc()]()}class vk{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=bc(),n=vk.prototype;n[t]||(n[t]=mq)}get changes(){return this._changes||(this._changes=new ie)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const s=ir(e);(this._changesDetected=!function RF(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let s=i[n],r=e[n];if(t&&(s=t(s),r=t(r)),r!==s)return!1}return!0}(n._results,s,t))&&(n._results=s,n.length=s.length,n.last=s[this.length-1],n.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _o=(()=>{class i{}return i.__NG_ELEMENT_ID__=vq,i})();const yq=_o,_q=class extends yq{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,s=zg(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);s[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(s[19]=o.createEmbeddedView(n)),Gv(n,s,e),new L1(s)}};function vq(){return t0(fi(),oe())}function t0(i,e){return 4&i.type?new _q(e,i,ru(i,e)):null}let vo=(()=>{class i{}return i.__NG_ELEMENT_ID__=kq,i})();function kq(){return J8(fi(),oe())}const wq=vo,Z8=class extends wq{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return ru(this._hostTNode,this._hostLView)}get injector(){return new Yh(this._hostTNode,this._hostLView)}get parentInjector(){const e=vg(this._hostTNode,this._hostLView);if($3(e)){const t=$h(e,this._hostLView),n=Wh(e);return new Yh(t[1].data[n+8],t)}return new Yh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Q8(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let s,r;"number"==typeof n?s=n:null!=n&&(s=n.index,r=n.injector);const o=e.createEmbeddedView(t||{},r);return this.insert(o,s),o}createComponent(e,t,n,s,r){const o=e&&!function m1(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const u=t||{};a=u.index,n=u.injector,s=u.projectableNodes,r=u.environmentInjector||u.ngModuleRef}const l=o?e:new P1(sn(e)),c=n||this.parentInjector;if(!r&&null==l.ngModule){const d=(o?c:this.parentInjector).get(wl,null);d&&(r=d)}const h=l.create(c,s,void 0,r);return this.insert(h.hostView,a),h}insert(e,t){const n=e._lView,s=n[1];if(function QN(i){return ho(i[3])}(n)){const h=this.indexOf(e);if(-1!==h)this.detach(h);else{const u=n[3],d=new Z8(u,u[6],u[3]);d.detach(d.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;!function IV(i,e,t,n){const s=10+n,r=t.length;n>0&&(t[s-1][4]=e),n<r-10?(e[4]=t[s],r5(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function TV(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(s,n,o,r);const a=ov(r,o),l=n[11],c=Sg(l,o[7]);return null!==c&&function CV(i,e,t,n,s,r){n[0]=s,n[6]=e,E1(i,n,t,1,s,r)}(s,o[6],l,n,c,a),e.attachToViewContainerRef(),r5(kk(o),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Q8(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=iv(this._lContainer,t);n&&(xg(kk(this._lContainer),t),L5(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=iv(this._lContainer,t);return n&&null!=xg(kk(this._lContainer),t)?new L1(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function Q8(i){return i[8]}function kk(i){return i[8]||(i[8]=[])}function J8(i,e){let t;const n=e[i.index];if(ho(n))t=n;else{let s;if(8&i.type)s=ri(n);else{const r=e[11];s=r.createComment("");const o=tr(i,e);wc(r,Sg(r,o),s,function LV(i,e){return i.nextSibling(e)}(r,o),!1)}e[i.index]=t=tS(n,e,s,i),Bg(e,t)}return new Z8(t,i,e)}class wk{constructor(e){this.queryList=e,this.matches=null}clone(){return new wk(this.queryList)}setDirty(){this.queryList.setDirty()}}class xk{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let r=0;r<n;r++){const o=t.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new xk(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==r6(e,t).matches&&this.queries[t].setDirty()}}class e6{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Mk{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const s=null!==t?t.length:0,r=this.getByIndex(n).embeddedTView(e,s);r&&(r.indexInDeclarationView=n,null!==t?t.push(r):t=[r])}return null!==t?new Mk(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class bk{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new bk(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let s=0;s<n.length;s++){const r=n[s];this.matchTNodeWithReadOption(e,t,bq(t,r)),this.matchTNodeWithReadOption(e,t,wg(t,e,r,!1,!1))}else n===_o?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,wg(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const s=this.metadata.read;if(null!==s)if(s===rn||s===vo||s===_o&&4&t.type)this.addMatch(t.index,-2);else{const r=wg(t,e,s,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function bq(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function Eq(i,e,t,n){return-1===t?function Cq(i,e){return 11&i.type?ru(i,e):4&i.type?t0(i,e):null}(e,i):-2===t?function Sq(i,e,t){return t===rn?ru(e,i):t===_o?t0(e,i):t===vo?J8(e,i):void 0}(i,e,n):p1(i,i[1],t,e)}function t6(i,e,t,n){const s=e[19].queries[n];if(null===s.matches){const r=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Eq(e,r[c],o[l+1],t.metadata.read))}s.matches=a}return s.matches}function Ck(i,e,t,n){const s=i.queries.getByIndex(t),r=s.matches;if(null!==r){const o=t6(i,e,s,t);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)n.push(o[a/2]);else{const c=r[a+1],h=e[-l];for(let u=10;u<h.length;u++){const d=h[u];d[17]===d[3]&&Ck(d[1],d,c,n)}if(null!==h[9]){const u=h[9];for(let d=0;d<u.length;d++){const p=u[d];Ck(p[1],p,c,n)}}}}}return n}function Re(i){const e=oe(),t=Tt(),n=F3();T_(n+1);const s=r6(t,n);if(i.dirty&&function ZN(i){return 4==(4&i[2])}(e)===(2==(2&s.metadata.flags))){if(null===s.matches)i.reset([]);else{const r=s.crossesNgTemplate?Ck(t,e,n,[]):t6(t,e,s,n);i.reset(r,bz),i.notifyOnChanges()}return!0}return!1}function dt(i,e,t){const n=Tt();n.firstCreatePass&&(s6(n,new e6(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),n6(n,oe(),e)}function Qn(i,e,t,n){const s=Tt();if(s.firstCreatePass){const r=fi();s6(s,new e6(e,t,n),r.index),function Tq(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(s,i),2==(2&t)&&(s.staticContentQueries=!0)}n6(s,oe(),t)}function Ae(){return function Iq(i,e){return i[19].queries[e].queryList}(oe(),F3())}function n6(i,e,t){const n=new vk(4==(4&t));WE(i,e,n,n.destroy),null===e[19]&&(e[19]=new xk),e[19].queries.push(new wk(n))}function s6(i,e,t){null===i.queries&&(i.queries=new Mk),i.queries.track(new bk(e,t))}function r6(i,e){return i.queries.getByIndex(e)}function Os(i,e){return t0(i,e)}function s0(...i){}const r0=new Fe("Application Initializer");let o0=(()=>{class i{constructor(t){this.appInits=t,this.resolve=s0,this.reject=s0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const r=this.appInits[s]();if(F1(r))t.push(r);else if(sk(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(s=>{this.reject(s)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(be(r0,8))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const K1=new Fe("AppId",{providedIn:"root",factory:function b6(){return`${Dk()}${Dk()}${Dk()}`}});function Dk(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const C6=new Fe("Platform Initializer"),Rk=new Fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),E6=new Fe("appBootstrapListener"),S6=new Fe("AnimationModuleType");let Kq=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Aa=new Fe("LocaleId",{providedIn:"root",factory:()=>Zn(Aa,We.Optional|We.SkipSelf)||function Xq(){return typeof $localize<"u"&&$localize.locale||xu}()});class Qq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Ak=(()=>{class i{compileModuleSync(t){return new gk(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),r=Sa(Js(t).declarations).reduce((o,a)=>{const l=sn(a);return l&&o.push(new P1(l)),o},[]);return new Qq(n,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const tG=(()=>Promise.resolve(0))();function Lk(i){typeof Zone>"u"?tG.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class an{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const s=this;if(s._nesting=0,s._outer=s._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const r=Zone.AsyncStackTaggingZoneSpec;s._inner=s._inner.fork(new r("Angular"))}Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!n&&t,s.shouldCoalesceRunChangeDetection=n,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function nG(){let i=mn.requestAnimationFrame,e=mn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function rG(i){const e=()=>{!function sG(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(mn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ok(i),i.isCheckStableRunning=!0,Pk(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ok(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,s,r,o,a)=>{try{return D6(i),t.invokeTask(s,r,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||i.shouldCoalesceRunChangeDetection)&&e(),R6(i)}},onInvoke:(t,n,s,r,o,a,l)=>{try{return D6(i),t.invoke(s,r,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),R6(i)}},onHasTask:(t,n,s,r)=>{t.hasTask(s,r),n===s&&("microTask"==r.change?(i._hasPendingMicrotasks=r.microTask,Ok(i),Pk(i)):"macroTask"==r.change&&(i.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,s,r)=>(t.handleError(s,r),i.runOutsideAngular(()=>i.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!an.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(an.isInAngularZone())throw new re(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,e,iG,s0,s0);try{return r.runTask(o,t,n)}finally{r.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const iG={};function Pk(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ok(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function D6(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function R6(i){i._nesting--,Pk(i)}class oG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie,this.onMicrotaskEmpty=new ie,this.onStable=new ie,this.onError=new ie}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,s){return e.apply(t,n)}}const A6=new Fe(""),a0=new Fe("");let Vk,Nk=(()=>{class i{constructor(t,n,s){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Vk||(function aG(i){Vk=i}(s),s.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{an.assertNotInAngularZone(),Lk(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Lk(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,s){let r=-1;n&&n>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:s})}whenStable(t,n,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,s){return[]}}return i.\u0275fac=function(t){return new(t||i)(be(an),be(Fk),be(a0))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),Fk=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return Vk?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),bl=null;const L6=new Fe("AllowMultipleToken"),zk=new Fe("PlatformDestroyListeners");class P6{constructor(e,t){this.name=e,this.token=t}}function N6(i,e,t=[]){const n=`Platform: ${e}`,s=new Fe(n);return(r=[])=>{let o=Hk();if(!o||o.injector.get(L6,!1)){const a=[...t,...r,{provide:s,useValue:!0}];i?i(a):function hG(i){if(bl&&!bl.get(L6,!1))throw new re(400,!1);bl=i;const e=i.get(V6);(function O6(i){const e=i.get(C6,null);e&&e.forEach(t=>t())})(i)}(function F6(i=[],e){return rr.create({name:e,providers:[{provide:wv,useValue:"platform"},{provide:zk,useValue:new Set([()=>bl=null])},...i]})}(a,n))}return function dG(i){const e=Hk();if(!e)throw new re(401,!1);return e}()}}function Hk(){return bl?.get(V6)??null}let V6=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const s=function H6(i,e){let t;return t="noop"===i?new oG:("zone.js"===i?void 0:i)||new an(e),t}(n?.ngZone,function z6(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),r=[{provide:an,useValue:s}];return s.run(()=>{const o=rr.create({providers:r,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(ou,null);if(!l)throw new re(402,!1);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:h=>{l.handleError(h)}});a.onDestroy(()=>{l0(this._modules,a),c.unsubscribe()})}),function B6(i,e,t){try{const n=t();return F1(n)?n.catch(s=>{throw e.runOutsideAngular(()=>i.handleError(s)),s}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,s,()=>{const c=a.injector.get(o0);return c.runInitializers(),c.donePromise.then(()=>(function u8(i){Qs(i,"Expected localeId to be defined"),"string"==typeof i&&(h8=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Aa,xu)||xu),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const s=j6({},n);return function lG(i,e,t){const n=new gk(t);return Promise.resolve(n)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(t){const n=t.injector.get(X1);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>n.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new re(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(zk,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(be(rr))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function j6(i,e){return Array.isArray(e)?e.reduce(j6,i):{...i,...e}}let X1=(()=>{class i{constructor(t,n,s){this._zone=t,this._injector=n,this._exceptionHandler=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new Kn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Kn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{an.assertNotInAngularZone(),Lk(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{an.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function kN(...i){const e=n1(i),t=function pN(i,e){return"number"==typeof a_(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?oo(n[0]):Vh(t)(si(n,e)):ka}(r,o.pipe(function wN(i={}){const{connector:e=(()=>new Xn),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:s=!0}=i;return r=>{let o,a,l,c=0,h=!1,u=!1;const d=()=>{a?.unsubscribe(),a=void 0},p=()=>{d(),o=l=void 0,h=u=!1},f=()=>{const g=o;p(),g?.unsubscribe()};return Mi((g,m)=>{c++,!u&&!h&&d();const y=l=l??e();m.add(()=>{c--,0===c&&!u&&!h&&(a=l_(f,s))}),y.subscribe(m),!o&&c>0&&(o=new t1({next:_=>y.next(_),error:_=>{u=!0,d(),a=l_(p,t,_),y.error(_)},complete:()=>{h=!0,d(),a=l_(p,n),y.complete()}}),oo(g).subscribe(o))})(r)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const s=t instanceof dE;if(!this._injector.get(o0).done)throw!s&&function Hh(i){const e=sn(i)||as(i)||ls(i);return null!==e&&e.standalone}(t),new re(405,false);let o;o=s?t:this._injector.get(D1).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function cG(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Sc),c=o.create(rr.NULL,[],n||o.selector,a),h=c.location.nativeElement,u=c.injector.get(A6,null);return u?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),l0(this.components,c),u?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;l0(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(E6,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>l0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(be(an),be(wl),be(ou))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function l0(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let G6=!0,qn=(()=>{class i{}return i.__NG_ELEMENT_ID__=gG,i})();function gG(i){return function mG(i,e,t){if(cg(i)&&!t){const n=nr(i.index,e);return new L1(n,n)}return 47&i.type?new L1(e[16],e):null}(fi(),oe(),16==(16&i))}class K6{constructor(){}supports(e){return O1(e)}create(e){return new xG(e)}}const wG=(i,e)=>e;class xG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,s=0,r=null;for(;t||n;){const o=!n||t&&t.currentIndex<Z6(n,s,r)?t:n,a=Z6(o,s,r),l=o.currentIndex;if(o===n)s--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,h=l-s;if(c!=h){for(let d=0;d<c;d++){const p=d<r.length?r[d]:r[d]=0,f=p+d;h<=f&&f<c&&(r[d]=p+1)}r[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!O1(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,r,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)r=e[a],o=this._trackByFn(a,r),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,r,o,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,o,a),n=!0),t=t._next}else s=0,function lB(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[bc()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),n=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,s){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,s)):e=this._addAfter(new MG(t,n),r,s),e}_verifyReinsertion(e,t,n,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,r=e._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new X6),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class MG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class X6{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new bG,this.map.set(t,n)),n.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Z6(i,e,t){const n=i.previousIndex;if(null===n)return n;let s=0;return t&&n<t.length&&(s=t[n]),n+e+s}class Q6{constructor(){}supports(e){return e instanceof Map||nk(e)}create(){return new CG}}class CG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||nk(e)))throw new re(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(s,n);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const r=s._prev,o=s._next;return r&&(r._next=o),o&&(o._prev=r),s._next=null,s._prev=null,s}const n=new EG(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class EG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function J6(){return new Z1([new K6])}let Z1=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const s=n.factories.slice();t=t.concat(s)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||J6()),deps:[[i,new w1,new tu]]}}find(t){const n=this.factories.find(s=>s.supports(t));if(null!=n)return n;throw new re(901,!1)}}return i.\u0275prov=Le({token:i,providedIn:"root",factory:J6}),i})();function eI(){return new Q1([new Q6])}let Q1=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const s=n.factories.slice();t=t.concat(s)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||eI()),deps:[[i,new w1,new tu]]}}find(t){const n=this.factories.find(s=>s.supports(t));if(n)return n;throw new re(901,!1)}}return i.\u0275prov=Le({token:i,providedIn:"root",factory:eI}),i})();const TG=N6(null,"core",[]);let DG=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(be(X1))},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({}),i})();let u0=null;function Wo(){return u0}const Ci=new Fe("DocumentToken");let Uk=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:function(){return function PG(){return be(tI)}()},providedIn:"platform"}),i})();const OG=new Fe("Location Initialized");let tI=(()=>{class i extends Uk{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wo().getBaseHref(this._doc)}onPopState(t){const n=Wo().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Wo().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,s){nI()?this._history.pushState(t,n,s):this.location.hash=s}replaceState(t,n,s){nI()?this._history.replaceState(t,n,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(be(Ci))},i.\u0275prov=Le({token:i,factory:function(){return function NG(){return new tI(be(Ci))}()},providedIn:"platform"}),i})();function nI(){return!!window.history.pushState}function Wk(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function iI(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Oa(i){return i&&"?"!==i[0]?"?"+i:i}let Tc=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:function(){return Zn(rI)},providedIn:"root"}),i})();const sI=new Fe("appBaseHref");let rI=(()=>{class i extends Tc{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Zn(Ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wk(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+Oa(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${n}${s}`:n}pushState(t,n,s,r){const o=this.prepareExternalUrl(s+Oa(r));this._platformLocation.pushState(t,n,o)}replaceState(t,n,s,r){const o=this.prepareExternalUrl(s+Oa(r));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(be(Uk),be(sI,8))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),FG=(()=>{class i extends Tc{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=Wk(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,s,r){let o=this.prepareExternalUrl(s+Oa(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,s,r){let o=this.prepareExternalUrl(s+Oa(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(be(Uk),be(sI,8))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),$k=(()=>{class i{constructor(t){this._subject=new ie,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=iI(oI(n)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Oa(n))}normalize(t){return i.stripTrailingSlash(function zG(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,oI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",s=null){this._locationStrategy.pushState(s,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oa(n)),s)}replaceState(t,n="",s=null){this._locationStrategy.replaceState(s,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oa(n)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(s=>s(t,n))}subscribe(t,n,s){return this._subject.subscribe({next:t,error:n,complete:s})}}return i.normalizeQueryParams=Oa,i.joinWithSlash=Wk,i.stripTrailingSlash=iI,i.\u0275fac=function(t){return new(t||i)(be(Tc))},i.\u0275prov=Le({token:i,factory:function(){return function VG(){return new $k(be(Tc))}()},providedIn:"root"}),i})();function oI(i){return i.replace(/\/index.html$/,"")}var Ns=(()=>((Ns=Ns||{})[Ns.Decimal=0]="Decimal",Ns[Ns.Percent=1]="Percent",Ns[Ns.Currency=2]="Currency",Ns[Ns.Scientific=3]="Scientific",Ns))(),Ue=(()=>((Ue=Ue||{})[Ue.Decimal=0]="Decimal",Ue[Ue.Group=1]="Group",Ue[Ue.List=2]="List",Ue[Ue.PercentSign=3]="PercentSign",Ue[Ue.PlusSign=4]="PlusSign",Ue[Ue.MinusSign=5]="MinusSign",Ue[Ue.Exponential=6]="Exponential",Ue[Ue.SuperscriptingExponent=7]="SuperscriptingExponent",Ue[Ue.PerMille=8]="PerMille",Ue[Ue.Infinity=9]="Infinity",Ue[Ue.NaN=10]="NaN",Ue[Ue.TimeSeparator=11]="TimeSeparator",Ue[Ue.CurrencyDecimal=12]="CurrencyDecimal",Ue[Ue.CurrencyGroup=13]="CurrencyGroup",Ue))();function Pr(i,e){const t=ds(i),n=t[we.NumberSymbols][e];if(typeof n>"u"){if(e===Ue.CurrencyDecimal)return t[we.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[we.NumberSymbols][Ue.Group]}return n}const uU=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function tw(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}function gI(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[s,r]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}let ei=(()=>{class i{constructor(t,n,s,r){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=s,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(O1(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${un(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{n?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return i.\u0275fac=function(t){return new(t||i)(Y(Z1),Y(Q1),Y(rn),Y(Ps))},i.\u0275dir=Ve({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class MU{constructor(e,t,n,s){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xo=(()=>{class i{constructor(t,n,s){this._viewContainer=t,this._template=n,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((s,r,o)=>{if(null==s.previousIndex)n.createEmbeddedView(this._template,new MU(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===r?void 0:r);else if(null!==r){const a=n.get(r);n.move(a,o),_I(a,s)}});for(let s=0,r=n.length;s<r;s++){const a=n.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{_I(n.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(Y(vo),Y(_o),Y(Z1))},i.\u0275dir=Ve({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function _I(i,e){i.context.$implicit=e.item}let Nn=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new CU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(Y(vo),Y(_o))},i.\u0275dir=Ve({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class CU{constructor(){this.$implicit=null,this.ngIf=null}}function vI(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${un(e)}'.`)}class iw{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let w0=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ve({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),kI=(()=>{class i{constructor(t,n,s){this.ngSwitch=s,s._addCase(),this._view=new iw(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(Y(vo),Y(_o),Y(w0,9))},i.\u0275dir=Ve({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),wI=(()=>{class i{constructor(t,n,s){s._addDefault(new iw(t,n))}}return i.\u0275fac=function(t){return new(t||i)(Y(vo),Y(_o),Y(w0,9))},i.\u0275dir=Ve({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),Ei=(()=>{class i{constructor(t,n,s){this._ngEl=t,this._differs=n,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[s,r]=t.split("."),o=-1===s.indexOf("-")?void 0:Ls.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,s,r?`${n}${r}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,s,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Q1),Y(Ps))},i.\u0275dir=Ve({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),Xi=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:r,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(s,r,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(Y(vo))},i.\u0275dir=Ve({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Pi]}),i})();let sw=(()=>{class i{constructor(t){this._locale=t}transform(t,n,s){if(!function rw(i){return!(null==i||""===i||i!=i)}(t))return null;s=s||this._locale;try{return function yU(i,e,t){return function Jk(i,e,t,n,s,r,o=!1){let a="",l=!1;if(isFinite(i)){let c=function vU(i){let n,s,r,o,a,e=Math.abs(i)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(s<0&&(s=r),s+=+e.slice(r+1),e=e.substring(0,r)):s<0&&(s=e.length),r=0;"0"===e.charAt(r);r++);if(r===(a=e.length))n=[0],s=1;else{for(a--;"0"===e.charAt(a);)a--;for(s-=r,n=[],o=0;r<=a;r++,o++)n[o]=Number(e.charAt(r))}return s>22&&(n=n.splice(0,21),t=s-1,s=1),{digits:n,exponent:t,integerLen:s}}(i);o&&(c=function _U(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let h=e.minInt,u=e.minFrac,d=e.maxFrac;if(r){const _=r.match(uU);if(null===_)throw new Error(`${r} is not a valid digit info`);const v=_[1],k=_[3],w=_[5];null!=v&&(h=tw(v)),null!=k&&(u=tw(k)),null!=w?d=tw(w):null!=k&&u>d&&(d=u)}!function kU(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,s=n.length-i.integerLen;const r=Math.min(Math.max(e,s),t);let o=r+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let u=o;u<n.length;u++)n[u]=0}else{s=Math.max(0,s),i.integerLen=1,n.length=Math.max(1,o=r+1),n[0]=0;for(let u=1;u<o;u++)n[u]=0}if(a>=5)if(o-1<0){for(let u=0;u>o;u--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;s<Math.max(0,r);s++)n.push(0);let l=0!==r;const c=e+i.integerLen,h=n.reduceRight(function(u,d,p,f){return f[p]=(d+=u)<10?d:d-10,l&&(0===f[p]&&p>=c?f.pop():l=!1),d>=10?1:0},0);h&&(n.unshift(h),i.integerLen++)}(c,u,d);let p=c.digits,f=c.integerLen;const g=c.exponent;let m=[];for(l=p.every(_=>!_);f<h;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?m=p.splice(f,p.length):(m=p,p=[0]);const y=[];for(p.length>=e.lgSize&&y.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)y.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(Pr(t,n)),m.length&&(a+=Pr(t,s)+m.join("")),g&&(a+=Pr(t,Ue.Exponential)+"+"+g)}else a=Pr(t,Ue.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function ew(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),s=n[0],r=n[1],o=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let h=0;h<l.length;h++){const u=l.charAt(h);"0"===u?t.minFrac=t.maxFrac=h+1:"#"===u?t.maxFrac=h+1:t.posSuf+=u}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,r){const h=s.length-t.posPre.length-t.posSuf.length,u=r.indexOf("#");t.negPre=r.substring(0,u).replace(/'/g,""),t.negSuf=r.slice(u+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Yk(i,e){return ds(i)[we.NumberFormats][e]}(e,Ns.Decimal),Pr(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function ow(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),s,n)}catch(r){throw function Mo(i,e){return new re(2100,!1)}()}}}return i.\u0275fac=function(t){return new(t||i)(Y(Aa,16))},i.\u0275pipe=Rs({name:"number",type:i,pure:!0,standalone:!0}),i})();let pn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({}),i})();let XU=(()=>{class i{}return i.\u0275prov=Le({token:i,providedIn:"root",factory:()=>new ZU(be(Ci),window)}),i})();class ZU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function QU(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let s=n.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(e)||r.querySelector(`[name="${e}"]`);if(o)return o}s=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],s-r[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=CI(this.window.history)||CI(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function CI(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class EI{}class cw extends class CW extends class LG{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function AG(i){u0||(u0=i)}(new cw)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function EW(){return np=np||document.querySelector("base"),np?np.getAttribute("href"):null}();return null==t?null:function SW(i){b0=b0||document.createElement("a"),b0.setAttribute("href",i);const e=b0.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){np=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gI(document.cookie,e)}}let b0,np=null;const RI=new Fe("TRANSITION_ID"),TW=[{provide:r0,useFactory:function IW(i,e,t){return()=>{t.get(o0).donePromise.then(()=>{const n=Wo(),s=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let r=0;r<s.length;r++)n.remove(s[r])})}},deps:[RI,Ci,rr],multi:!0}];let RW=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();const C0=new Fe("EventManagerPlugins");let E0=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,s){return this._findPluginFor(n).addEventListener(t,n,s)}addGlobalEventListener(t,n,s){return this._findPluginFor(n).addGlobalEventListener(t,n,s)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(be(C0),be(an))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();class AI{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const s=Wo().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,n)}}let LI=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),n.add(s))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),ip=(()=>{class i extends LI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,s){t.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(PI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,s)=>{this._addStylesToHost(t,s,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(PI))}}return i.\u0275fac=function(t){return new(t||i)(be(Ci))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();function PI(i){Wo().remove(i)}const hw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uw=/%COMP%/g;function S0(i,e,t){for(let n=0;n<e.length;n++){let s=e[n];Array.isArray(s)?S0(i,s,t):(s=s.replace(uw,i),t.push(s))}return t}function FI(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let I0=(()=>{class i{constructor(t,n,s){this.eventManager=t,this.sharedStylesHost=n,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new dw(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case lo.Emulated:{let s=this.rendererByCompId.get(n.id);return s||(s=new FW(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,s)),s.applyToHost(t),s}case 1:case lo.ShadowDom:return new VW(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const s=S0(n.id,n.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(be(E0),be(ip),be(K1))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();class dw{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(hw[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(zI(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(zI(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,s){if(s){t=s+":"+t;const r=hw[s];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const s=hw[n];s?e.removeAttributeNS(s,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,s){s&(Ls.DashCase|Ls.Important)?e.style.setProperty(t,n,s&Ls.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Ls.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,FI(n)):this.eventManager.addEventListener(e,t,FI(n))}}function zI(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class FW extends dw{constructor(e,t,n,s){super(e),this.component=n;const r=S0(s+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr=function PW(i){return"_ngcontent-%COMP%".replace(uw,i)}(s+"-"+n.id),this.hostAttr=function OW(i){return"_nghost-%COMP%".replace(uw,i)}(s+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class VW extends dw{constructor(e,t,n,s){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=S0(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let zW=(()=>{class i extends AI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,s){return t.addEventListener(n,s,!1),()=>this.removeEventListener(t,n,s)}removeEventListener(t,n,s){return t.removeEventListener(n,s)}}return i.\u0275fac=function(t){return new(t||i)(be(Ci))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();const HI=["alt","control","meta","shift"],HW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BW={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let jW=(()=>{class i extends AI{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,s){const r=i.parseEventName(n),o=i.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wo().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),s=n.shift();if(0===n.length||"keydown"!==s&&"keyup"!==s)return null;const r=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),HI.forEach(c=>{const h=n.indexOf(c);h>-1&&(n.splice(h,1),o+=c+".")}),o+=r,0!=n.length||0===r.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let s=HW[t.key]||t.key,r="";return n.indexOf("code.")>-1&&(s=t.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),HI.forEach(o=>{o!==s&&(0,BW[o])(t)&&(r+=o+".")}),r+=s,r===n)}static eventCallback(t,n,s){return r=>{i.matchEventFullKeyCode(r,t)&&s.runGuarded(()=>n(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(be(Ci))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();const WW=N6(TG,"browser",[{provide:Rk,useValue:"browser"},{provide:C6,useValue:function qW(){cw.makeCurrent()},multi:!0},{provide:Ci,useFactory:function UW(){return function HV(i){uv=i}(document),document},deps:[]}]),qI=new Fe(""),GI=[{provide:a0,useClass:class DW{addToWindow(e){mn.getAngularTestability=(n,s=!0)=>{const r=e.findTestabilityInTree(n,s);if(null==r)throw new Error("Could not find testability for element.");return r},mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),mn.getAllAngularRootElements=()=>e.getAllRootElements(),mn.frameworkStabilizers||(mn.frameworkStabilizers=[]),mn.frameworkStabilizers.push(n=>{const s=mn.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(l){o=o||l,r--,0==r&&n(o)};s.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Wo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:A6,useClass:Nk,deps:[an,Fk,a0]},{provide:Nk,useClass:Nk,deps:[an,Fk,a0]}],UI=[{provide:wv,useValue:"root"},{provide:ou,useFactory:function GW(){return new ou},deps:[]},{provide:C0,useClass:zW,multi:!0,deps:[Ci,an,Rk]},{provide:C0,useClass:jW,multi:!0,deps:[Ci]},{provide:I0,useClass:I0,deps:[E0,ip,K1]},{provide:R1,useExisting:I0},{provide:LI,useExisting:ip},{provide:ip,useClass:ip,deps:[Ci]},{provide:E0,useClass:E0,deps:[C0,an]},{provide:EI,useClass:RW,deps:[]},[]];let WI=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:K1,useValue:t.appId},{provide:RI,useExisting:K1},TW]}}}return i.\u0275fac=function(t){return new(t||i)(be(qI,12))},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({providers:[...UI,...GI],imports:[pn,DG]}),i})(),$I=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(be(Ci))},i.\u0275prov=Le({token:i,factory:function(t){let n=null;return n=t?new t:function YW(){return new $I(be(Ci))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;class XI{}const Fa="*";function Dc(i,e){return{type:7,name:i,definitions:e,options:{}}}function Fs(i,e=null){return{type:4,styles:e,timings:i}}function ZI(i,e=null){return{type:2,steps:i,options:e}}function _i(i){return{type:6,styles:i,offset:null}}function T0(i,e,t){return{type:0,name:i,styles:e,options:t}}function fs(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function D0(i,e=null){return{type:8,animation:i,options:e}}function i$(i=null){return{type:9,options:i}}function R0(i,e=null){return{type:10,animation:i,options:e}}function s$(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function QI(i){Promise.resolve().then(i)}class sp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){QI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class JI{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,s=0;const r=this.players.length;0==r?QI(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++n==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const s=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(s)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function eT(i){return new re(3e3,!1)}function z$(){return typeof window<"u"&&typeof window.document<"u"}function mw(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function El(i){switch(i.length){case 0:return new sp;case 1:return i[0];default:return new JI(i)}}function tT(i,e,t,n,s=new Map,r=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(h=>{const u=h.get("offset"),d=u==l,p=d&&c||new Map;h.forEach((f,g)=>{let m=g,y=f;if("offset"!==g)switch(m=e.normalizePropertyName(m,o),y){case"!":y=s.get(g);break;case Fa:y=r.get(g);break;default:y=e.normalizeStyleValue(g,m,y,o)}p.set(m,y)}),d||a.push(p),c=p,l=u}),o.length)throw function S$(i){return new re(3502,!1)}();return a}function yw(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&_w(t,"start",i)));break;case"done":i.onDone(()=>n(t&&_w(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&_w(t,"destroy",i)))}}function _w(i,e,t){const r=vw(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(r._data=o),r}function vw(i,e,t,n,s="",r=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:s,totalTime:r,disabled:!!o}}function lr(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function nT(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let kw=(i,e)=>!1,iT=(i,e,t)=>[],sT=null;function ww(i){const e=i.parentNode||i.host;return e===sT?null:e}(mw()||typeof Element<"u")&&(z$()?(sT=(()=>document.documentElement)(),kw=(i,e)=>{for(;e;){if(e===i)return!0;e=ww(e)}return!1}):kw=(i,e)=>i.contains(e),iT=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let Rc=null,rT=!1;const oT=kw,aT=iT;let lT=(()=>{class i{validateStyleProperty(t){return function B$(i){Rc||(Rc=function j$(){return typeof document<"u"?document.body:null}()||{},rT=!!Rc.style&&"WebkitAppearance"in Rc.style);let e=!0;return Rc.style&&!function H$(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in Rc.style,!e&&rT&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Rc.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return oT(t,n)}getParentElement(t){return ww(t)}query(t,n,s){return aT(t,n,s)}computeStyle(t,n,s){return s||""}animate(t,n,s,r,o,a=[],l){return new sp(s,r)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),xw=(()=>{class i{}return i.NOOP=new lT,i})();const Mw="ng-enter",A0="ng-leave",L0="ng-trigger",P0=".ng-trigger",hT="ng-animating",bw=".ng-animating";function Va(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Cw(parseFloat(e[1]),e[2])}function Cw(i,e){return"s"===e?1e3*i:i}function O0(i,e,t){return i.hasOwnProperty("duration")?i:function U$(i,e,t){let s,r=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(eT()),{duration:0,delay:0,easing:""};s=Cw(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=Cw(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=i;if(!t){let a=!1,l=e.length;s<0&&(e.push(function r$(){return new re(3100,!1)}()),a=!0),r<0&&(e.push(function o$(){return new re(3101,!1)}()),a=!0),a&&e.splice(l,0,eT())}return{duration:s,delay:r,easing:o}}(i,e,t)}function rp(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function uT(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function Sl(i,e=new Map,t){if(t)for(let[n,s]of t)e.set(n,s);for(let[n,s]of i)e.set(n,s);return e}function pT(i,e,t){return t?e+":"+t+";":""}function fT(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=pT(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=pT(0,K$(t),i.style[t]));i.setAttribute("style",e)}function $o(i,e,t){i.style&&(e.forEach((n,s)=>{const r=Sw(s);t&&!t.has(s)&&t.set(s,i.style[r]),i.style[r]=n}),mw()&&fT(i))}function Ac(i,e){i.style&&(e.forEach((t,n)=>{const s=Sw(n);i.style[s]=""}),mw()&&fT(i))}function op(i){return Array.isArray(i)?1==i.length?i[0]:ZI(i):i}const Ew=new RegExp("{{\\s*(.+?)\\s*}}","g");function gT(i){let e=[];if("string"==typeof i){let t;for(;t=Ew.exec(i);)e.push(t[1]);Ew.lastIndex=0}return e}function ap(i,e,t){const n=i.toString(),s=n.replace(Ew,(r,o)=>{let a=e[o];return null==a&&(t.push(function l$(i){return new re(3003,!1)}()),a=""),a.toString()});return s==n?i:s}function N0(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Y$=/-+([a-z0-9])/g;function Sw(i){return i.replace(Y$,(...e)=>e[1].toUpperCase())}function K$(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cr(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function c$(i){return new re(3004,!1)}()}}function mT(i,e){return window.getComputedStyle(i)[e]}function tY(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function nY(i,e,t){if(":"==i[0]){const l=function iY(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function M$(i){return new re(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function x$(i){return new re(3015,!1)}()),e;const s=n[1],r=n[2],o=n[3];e.push(yT(s,o));"<"==r[0]&&!("*"==s&&"*"==o)&&e.push(yT(o,s))}(n,t,e)):t.push(i),t}const H0=new Set(["true","1"]),B0=new Set(["false","0"]);function yT(i,e){const t=H0.has(i)||B0.has(i),n=H0.has(e)||B0.has(e);return(s,r)=>{let o="*"==i||i==s,a="*"==e||e==r;return!o&&t&&"boolean"==typeof s&&(o=s?H0.has(i):B0.has(i)),!a&&n&&"boolean"==typeof r&&(a=r?H0.has(e):B0.has(e)),o&&a}}const sY=new RegExp("s*:selfs*,?","g");function Iw(i,e,t,n){return new rY(i).build(e,t,n)}class rY{constructor(e){this._driver=e}build(e,t,n){const s=new lY(t);return this._resetContextStyleTimingState(s),cr(this,op(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,s=t.depCount=0;const r=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function u$(){return new re(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,r.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,s+=l.depCount,o.push(l)}else t.errors.push(function d$(){return new re(3007,!1)}())}),{type:7,name:e.name,states:r,transitions:o,queryCount:n,depCount:s,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(n.containsDynamicStyles){const r=new Set,o=s||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{gT(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&(N0(r.values()),t.errors.push(function p$(i,e){return new re(3008,!1)}()))}return{type:0,name:e.name,style:n,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=cr(this,op(e.animation),t);return{type:1,matchers:tY(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Lc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>cr(this,n,t)),options:Lc(e.options)}}visitGroup(e,t){const n=t.currentTime;let s=0;const r=e.steps.map(o=>{t.currentTime=n;const a=cr(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:r,options:Lc(e.options)}}visitAnimate(e,t){const n=function hY(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return Tw(O0(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=Tw(0,0,"");return r.dynamic=!0,r.strValue=t,r}const s=O0(t,e);return Tw(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let s,r=e.styles?e.styles:_i({});if(5==r.type)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=_i(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:s,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of s)"string"==typeof a?a===Fa?n.push(a):t.errors.push(new re(3002,!1)):n.push(uT(a));let r=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r))for(let l of a.values())if(l.toString().indexOf("{{")>=0){r=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let s=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let u=!0;h&&(r!=s&&r>=h.startTime&&s<=h.endTime&&(t.errors.push(function g$(i,e,t,n,s){return new re(3010,!1)}()),u=!1),r=h.startTime),u&&c.set(l,{startTime:r,endTime:s}),t.options&&function $$(i,e,t){const n=e.params||{},s=gT(i);s.length&&s.forEach(r=>{n.hasOwnProperty(r)||t.push(function a$(i){return new re(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function m$(){return new re(3011,!1)}()),n;let r=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(y=>{const _=this._makeStyleAst(y,t);let v=null!=_.offset?_.offset:function cY(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(_.styles),k=0;return null!=v&&(r++,k=_.offset=v),l=l||k<0||k>1,a=a||k<c,c=k,o.push(k),_});l&&t.errors.push(function y$(){return new re(3012,!1)}()),a&&t.errors.push(function _$(){return new re(3200,!1)}());const u=e.steps.length;let d=0;r>0&&r<u?t.errors.push(function v$(){return new re(3202,!1)}()):0==r&&(d=1/(u-1));const p=u-1,f=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return h.forEach((y,_)=>{const v=d>0?_==p?1:d*_:o[_],k=v*m;t.currentTime=f+g.delay+k,g.duration=k,this._validateStyleAst(y,t),y.offset=v,n.styles.push(y)}),n}visitReference(e,t){return{type:8,animation:cr(this,op(e.animation),t),options:Lc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lc(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function oY(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(sY,"")),i=i.replace(/@\*/g,P0).replace(/@\w+/g,t=>P0+"-"+t.slice(1)).replace(/:animating/g,bw),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,lr(t.collectedStyles,t.currentQuerySelector,new Map);const a=cr(this,op(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Lc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function k$(){return new re(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:O0(e.timings,t.errors,!0);return{type:12,animation:cr(this,op(e.animation),t),timings:n,options:null}}}class lY{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Lc(i){return i?(i=rp(i)).params&&(i.params=function aY(i){return i?rp(i):null}(i.params)):i={},i}function Tw(i,e,t){return{duration:i,delay:e,easing:t}}function Dw(i,e,t,n,s,r,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class j0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const pY=new RegExp(":enter","g"),gY=new RegExp(":leave","g");function Rw(i,e,t,n,s,r=new Map,o=new Map,a,l,c=[]){return(new mY).buildKeyframes(i,e,t,n,s,r,o,a,l,c)}class mY{buildKeyframes(e,t,n,s,r,o,a,l,c,h=[]){c=c||new j0;const u=new Aw(e,t,c,s,r,h,[]);u.options=l;const d=l.delay?Va(l.delay):0;u.currentTimeline.delayNextStep(d),u.currentTimeline.setStyles([o],null,u.errors,l),cr(this,n,u);const p=u.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let g=p.length-1;g>=0;g--){const m=p[g];if(m.element===t){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,u.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[Dw(t,[],[],[],0,d,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const s of e){const r=s?.delay;if(r){const o="number"==typeof r?r:Va(ap(r,s?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const o=null!=n.duration?Va(n.duration):null,a=null!=n.delay?Va(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),cr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let s=t;const r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=q0);const o=Va(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>cr(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>n&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let s=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?Va(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);r&&a.delayNextStep(r),cr(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return O0(t.params?ap(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),s.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,s=t.currentAnimateTimings;!s&&n.hasCurrentStyleProperties()&&n.forwardFrame();const r=s&&s.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,s=t.currentTimeline.duration,r=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?Va(s.delay):0;r&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=q0);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const u=t.createSubContext(e.options,c);r&&u.delayNextStep(r),c===t.element&&(l=u.currentTimeline),cr(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const u=h.currentTime;cr(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=s.currentTime-u+(s.startTime-n.currentTimeline.startTime)}}const q0={};class Aw{constructor(e,t,n,s,r,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=q0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new G0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let s=this.options;null!=n.duration&&(s.duration=Va(n.duration)),null!=n.delay&&(s.delay=Va(n.delay));const r=n.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=ap(r[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(s=>{n[s]=t[s]})}}return e}createSubContext(e=null,t,n){const s=t||this.element,r=new Aw(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=q0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},r=new yY(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(pY,"."+this._enterClassName)).replace(gY,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!r&&0==a.length&&o.push(function w$(i){return new re(3014,!1)}()),a}}class G0{constructor(e,t,n,s){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new G0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Fa),this._currentKeyframe.set(t,Fa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,s){t&&this._previousKeyframe.set("easing",t);const r=s&&s.params||{},o=function _Y(i,e){const t=new Map;let n;return i.forEach(s=>{if("*"===s){n=n||e.keys();for(let r of n)t.set(r,Fa)}else Sl(s,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=ap(l,r,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Fa),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const s=this._styleSummary.get(n);(!s||t.time>s.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=Sl(a,new Map,this._backFill);c.forEach((h,u)=>{"!"===h?e.add(u):h===Fa&&t.add(u)}),n||c.set("offset",l/this.duration),s.push(c)});const r=e.size?N0(e.values()):[],o=t.size?N0(t.values()):[];if(n){const a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return Dw(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class yY extends G0{constructor(e,t,n,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],o=n+t,a=t/o,l=Sl(e[0]);l.set("offset",0),r.push(l);const c=Sl(e[0]);c.set("offset",kT(a)),r.push(c);const h=e.length-1;for(let u=1;u<=h;u++){let d=Sl(e[u]);const p=d.get("offset");d.set("offset",kT((t+p*n)/o)),r.push(d)}n=o,t=0,s="",e=r}return Dw(this.element,e,this.preStyleProps,this.postStyleProps,n,t,s,!0)}}function kT(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class Lw{}const vY=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class kY extends Lw{normalizePropertyName(e,t){return Sw(e)}normalizeStyleValue(e,t,n,s){let r="";const o=n.toString().trim();if(vY.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function h$(i,e){return new re(3005,!1)}())}return o+r}}function wT(i,e,t,n,s,r,o,a,l,c,h,u,d){return{type:0,element:i,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const Pw={};class xT{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,s){return function wY(i,e,t,n,s){return i.some(r=>r(e,t,n,s))}(this.ast.matchers,e,t,n,s)}buildStyles(e,t,n){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,n):new Map}build(e,t,n,s,r,o,a,l,c,h){const u=[],d=this.ast.options&&this.ast.options.params||Pw,f=this.buildStyles(n,a&&a.params||Pw,u),g=l&&l.params||Pw,m=this.buildStyles(s,g,u),y=new Set,_=new Map,v=new Map,k="void"===s,w={params:xY(g,d),delay:this.ast.options?.delay},I=h?[]:Rw(e,t,this.ast.animation,r,o,f,m,w,c,u);let b=0;if(I.forEach(P=>{b=Math.max(P.duration+P.delay,b)}),u.length)return wT(t,this._triggerName,n,s,k,f,m,[],[],_,v,b,u);I.forEach(P=>{const z=P.element,Z=lr(_,z,new Set);P.preStyleProps.forEach(Q=>Z.add(Q));const K=lr(v,z,new Set);P.postStyleProps.forEach(Q=>K.add(Q)),z!==t&&y.add(z)});const D=N0(y.values());return wT(t,this._triggerName,n,s,k,f,m,I,D,_,v,b)}}function xY(i,e){const t=rp(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class MY{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,s=rp(this.defaultParams);return Object.keys(e).forEach(r=>{const o=e[r];null!==o&&(s[r]=o)}),this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((o,a)=>{o&&(o=ap(o,s,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class CY{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new MY(s.style,s.options&&s.options.params||{},n))}),MT(this.states,"true","1"),MT(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new xT(e,s,this.states))}),this.fallbackTransition=function EY(i,e,t){return new xT(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,s){return this.transitionFactories.find(o=>o.match(e,t,n,s))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function MT(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const SY=new j0;class IY{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],r=Iw(this._driver,t,n,[]);if(n.length)throw function I$(i){return new re(3503,!1)}();this._animations.set(e,r)}_buildPlayer(e,t,n){const s=e.element,r=tT(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const s=[],r=this._animations.get(e);let o;const a=new Map;if(r?(o=Rw(this._driver,t,r,Mw,A0,new Map,new Map,n,SY,s),o.forEach(h=>{const u=lr(a,h.element,new Map);h.postStyleProps.forEach(d=>u.set(d,null))})):(s.push(function T$(){return new re(3300,!1)}()),o=[]),s.length)throw function D$(i){return new re(3504,!1)}();a.forEach((h,u)=>{h.forEach((d,p)=>{h.set(p,this._driver.computeStyle(u,p,Fa))})});const c=El(o.map(h=>{const u=a.get(h.element);return this._buildPlayer(h,new Map,u)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function R$(i){return new re(3301,!1)}();return t}listen(e,t,n,s){const r=vw(t,"","","");return yw(this._getPlayer(e),n,r,s),()=>{}}command(e,t,n,s){if("register"==n)return void this.register(e,s[0]);if("create"==n)return void this.create(e,t,s[0]||{});const r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const bT="ng-animate-queued",Ow="ng-animate-disabled",LY=[],CT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PY={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nr="__ng_removed";class Nw{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function VY(i){return i??null}(n?e.value:e),n){const r=rp(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(s=>{null==n[s]&&(n[s]=t[s])})}}}const lp="void",Fw=new Nw(lp);class OY{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Fr(t,this._hostClassName)}listen(e,t,n,s){if(!this._triggers.has(t))throw function A$(i,e){return new re(3302,!1)}();if(null==n||0==n.length)throw function L$(i){return new re(3303,!1)}();if(!function zY(i){return"start"==i||"done"==i}(n))throw function P$(i,e){return new re(3400,!1)}();const r=lr(this._elementListeners,e,[]),o={name:t,phase:n,callback:s};r.push(o);const a=lr(this._engine.statesByElement,e,new Map);return a.has(t)||(Fr(e,L0),Fr(e,L0+"-"+t),a.set(t,Fw)),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function O$(i){return new re(3401,!1)}();return t}trigger(e,t,n,s=!0){const r=this._getTrigger(t),o=new Vw(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Fr(e,L0),Fr(e,L0+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new Nw(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Fw),c.value!==lp&&l.value===c.value){if(!function jY(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(!e.hasOwnProperty(r)||i[r]!==e[r])return!1}return!0}(l.params,c.params)){const g=[],m=r.matchStyles(l.value,l.params,g),y=r.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Ac(e,m),$o(e,y)})}return}const d=lr(this._engine.playersByElement,e,[]);d.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let p=r.matchTransition(l.value,c.value,e,c.params),f=!1;if(!p){if(!s)return;p=r.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:f}),f||(Fr(e,bT),o.onStart(()=>{Eu(e,bT)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let y=m.indexOf(o);y>=0&&m.splice(y,1)}}),this.players.push(o),d.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,P0,!0);n.forEach(s=>{if(s[Nr])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,n,s){const r=this._engine.statesByElement.get(e),o=new Map;if(r){const a=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,lp,s);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&El(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const s=new Set;t.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||Fw,h=new Nw(lp),u=new Vw(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:u,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(n.totalAnimations){const r=n.players.length?n.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e[Nr];(!r||r===CT)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Fr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const s=n.player;if(s.destroyed)return;const r=n.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=vw(r,n.triggerName,n.fromState.value,n.toState.value);l._data=e,yw(n.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(n)}),this._queue=[],t.sort((n,s)=>{const r=n.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(n.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class NY{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new OY(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,s=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=s.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return s.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let s=this._namespaceLookup[e];s&&s.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(n);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let s of n.values())if(s.namespaceId){const r=this._fetchNamespace(s.namespaceId);r&&t.add(r)}return t}trigger(e,t,n,s){if(U0(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,n,s),!0}return!1}insertNode(e,t,n,s){if(!U0(t))return;const r=t[Nr];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Fr(e,Ow)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Eu(e,Ow))}removeNode(e,t,n,s){if(U0(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,n,s,r){this.collectedLeaveElements.push(t),t[Nr]={namespaceId:e,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,n,s,r){return U0(t)?this._fetchNamespace(e).listen(t,n,s,r):()=>{}}_buildInstruction(e,t,n,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,P0,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bw,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return El(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Nr];if(t&&t.setForRemoval){if(e[Nr]=CT,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Ow)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,s)=>this._balanceNamespaceList(n,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Fr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let s=0;s<n.length;s++)n[s]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?El(t).onDone(()=>{n.forEach(s=>s())}):n.forEach(s=>s())}}reportError(e){throw function N$(i){return new re(3402,!1)}()}_flushAnimations(e,t){const n=new j0,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(R=>{h.add(R);const N=this.driver.query(R,".ng-animate-queued",!0);for(let E=0;E<N.length;E++)h.add(N[E])});const u=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=IT(d,this.collectedEnterElements),f=new Map;let g=0;p.forEach((R,N)=>{const E=Mw+g++;f.set(N,E),R.forEach(F=>Fr(F,E))});const m=[],y=new Set,_=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){const N=this.collectedLeaveElements[R],E=N[Nr];E&&E.setForRemoval&&(m.push(N),y.add(N),E.hasAnimation?this.driver.query(N,".ng-star-inserted",!0).forEach(F=>y.add(F)):_.add(N))}const v=new Map,k=IT(d,Array.from(y));k.forEach((R,N)=>{const E=A0+g++;v.set(N,E),R.forEach(F=>Fr(F,E))}),e.push(()=>{p.forEach((R,N)=>{const E=f.get(N);R.forEach(F=>Eu(F,E))}),k.forEach((R,N)=>{const E=v.get(N);R.forEach(F=>Eu(F,E))}),m.forEach(R=>{this.processLeaveNode(R)})});const w=[],I=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(t).forEach(E=>{const F=E.player,L=E.element;if(w.push(F),this.collectedEnterElements.length){const J=L[Nr];if(J&&J.setForMove){if(J.previousTriggersValues&&J.previousTriggersValues.has(E.triggerName)){const de=J.previousTriggersValues.get(E.triggerName),ue=this.statesByElement.get(E.element);if(ue&&ue.has(E.triggerName)){const fe=ue.get(E.triggerName);fe.value=de,ue.set(E.triggerName,fe)}}return void F.destroy()}}const G=!u||!this.driver.containsElement(u,L),V=v.get(L),X=f.get(L),$=this._buildInstruction(E,n,X,V,G);if($.errors&&$.errors.length)return void I.push($);if(G)return F.onStart(()=>Ac(L,$.fromStyles)),F.onDestroy(()=>$o(L,$.toStyles)),void s.push(F);if(E.isFallbackTransition)return F.onStart(()=>Ac(L,$.fromStyles)),F.onDestroy(()=>$o(L,$.toStyles)),void s.push(F);const ee=[];$.timelines.forEach(J=>{J.stretchStartingKeyframe=!0,this.disabledNodes.has(J.element)||ee.push(J)}),$.timelines=ee,n.append(L,$.timelines),o.push({instruction:$,player:F,element:L}),$.queriedElements.forEach(J=>lr(a,J,[]).push(F)),$.preStyleProps.forEach((J,de)=>{if(J.size){let ue=l.get(de);ue||l.set(de,ue=new Set),J.forEach((fe,ye)=>ue.add(ye))}}),$.postStyleProps.forEach((J,de)=>{let ue=c.get(de);ue||c.set(de,ue=new Set),J.forEach((fe,ye)=>ue.add(ye))})});if(I.length){const R=[];I.forEach(N=>{R.push(function F$(i,e){return new re(3505,!1)}())}),w.forEach(N=>N.destroy()),this.reportError(R)}const b=new Map,D=new Map;o.forEach(R=>{const N=R.element;n.has(N)&&(D.set(N,N),this._beforeAnimationBuild(R.player.namespaceId,R.instruction,b))}),s.forEach(R=>{const N=R.element;this._getPreviousPlayers(N,!1,R.namespaceId,R.triggerName,null).forEach(F=>{lr(b,N,[]).push(F),F.destroy()})});const P=m.filter(R=>DT(R,l,c)),z=new Map;ST(z,this.driver,_,c,Fa).forEach(R=>{DT(R,l,c)&&P.push(R)});const K=new Map;p.forEach((R,N)=>{ST(K,this.driver,new Set(R),l,"!")}),P.forEach(R=>{const N=z.get(R),E=K.get(R);z.set(R,new Map([...Array.from(N?.entries()??[]),...Array.from(E?.entries()??[])]))});const Q=[],T=[],O={};o.forEach(R=>{const{element:N,player:E,instruction:F}=R;if(n.has(N)){if(h.has(N))return E.onDestroy(()=>$o(N,F.toStyles)),E.disabled=!0,E.overrideTotalTime(F.totalTime),void s.push(E);let L=O;if(D.size>1){let V=N;const X=[];for(;V=V.parentNode;){const $=D.get(V);if($){L=$;break}X.push(V)}X.forEach($=>D.set($,L))}const G=this._buildAnimation(E.namespaceId,F,b,r,K,z);if(E.setRealPlayer(G),L===O)Q.push(E);else{const V=this.playersByElement.get(L);V&&V.length&&(E.parentPlayer=El(V)),s.push(E)}}else Ac(N,F.fromStyles),E.onDestroy(()=>$o(N,F.toStyles)),T.push(E),h.has(N)&&s.push(E)}),T.forEach(R=>{const N=r.get(R.element);if(N&&N.length){const E=El(N);R.setRealPlayer(E)}}),s.forEach(R=>{R.parentPlayer?R.syncPlayerEvents(R.parentPlayer):R.destroy()});for(let R=0;R<m.length;R++){const N=m[R],E=N[Nr];if(Eu(N,A0),E&&E.hasAnimation)continue;let F=[];if(a.size){let G=a.get(N);G&&G.length&&F.push(...G);let V=this.driver.query(N,bw,!0);for(let X=0;X<V.length;X++){let $=a.get(V[X]);$&&$.length&&F.push(...$)}}const L=F.filter(G=>!G.destroyed);L.length?HY(this,N,L):this.processLeaveNode(N)}return m.length=0,Q.forEach(R=>{this.players.push(R),R.onDone(()=>{R.destroy();const N=this.players.indexOf(R);this.players.splice(N,1)}),R.play()}),Q}elementContainsData(e,t){let n=!1;const s=t[Nr];return s&&s.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,s,r){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!r||r==lp;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(n||s)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==r,u=lr(n,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(p=>{const f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),u.push(p)})}Ac(r,t.fromStyles)}_buildAnimation(e,t,n,s,r,o){const a=t.triggerName,l=t.element,c=[],h=new Set,u=new Set,d=t.timelines.map(f=>{const g=f.element;h.add(g);const m=g[Nr];if(m&&m.removedBeforeQueried)return new sp(f.duration,f.delay);const y=g!==l,_=function BY(i){const e=[];return TT(i,e),e}((n.get(g)||LY).map(b=>b.getRealPlayer())).filter(b=>!!b.element&&b.element===g),v=r.get(g),k=o.get(g),w=tT(0,this._normalizer,0,f.keyframes,v,k),I=this._buildPlayer(f,w,_);if(f.subTimeline&&s&&u.add(g),y){const b=new Vw(e,a,g);b.setRealPlayer(I),c.push(b)}return I});c.forEach(f=>{lr(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>function FY(i,e,t){let n=i.get(e);if(n){if(n.length){const s=n.indexOf(t);n.splice(s,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,f.element,f))}),h.forEach(f=>Fr(f,hT));const p=El(d);return p.onDestroy(()=>{h.forEach(f=>Eu(f,hT)),$o(l,t.toStyles)}),u.forEach(f=>{lr(s,f,[]).push(p)}),p}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new sp(e.duration,e.delay)}}class Vw{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new sp,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(s=>yw(e,n,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){lr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function U0(i){return i&&1===i.nodeType}function ET(i,e){const t=i.style.display;return i.style.display=e??"none",t}function ST(i,e,t,n,s){const r=[];t.forEach(l=>r.push(ET(l)));const o=[];n.forEach((l,c)=>{const h=new Map;l.forEach(u=>{const d=e.computeStyle(c,u,s);h.set(u,d),(!d||0==d.length)&&(c[Nr]=PY,o.push(c))}),i.set(c,h)});let a=0;return t.forEach(l=>ET(l,r[a++])),o}function IT(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Fr(i,e){i.classList?.add(e)}function Eu(i,e){i.classList?.remove(e)}function HY(i,e,t){El(t).onDone(()=>i.processLeaveNode(e))}function TT(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof JI?TT(n.players,e):e.push(n)}}function DT(i,e,t){const n=t.get(i);if(!n)return!1;let s=e.get(i);return s?n.forEach(r=>s.add(r)):e.set(i,n),t.delete(i),!0}class W0{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new NY(e,t,n),this._timelineEngine=new IY(e,t,n),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(e,t,n,s,r){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],h=Iw(this._driver,r,l,[]);if(l.length)throw function E$(i,e){return new re(3404,!1)}();a=function bY(i,e,t){return new CY(i,e,t)}(s,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,s){this._transitionEngine.insertNode(e,t,n,s)}onRemove(e,t,n,s){this._transitionEngine.removeNode(e,t,s||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,s){if("@"==n.charAt(0)){const[r,o]=nT(n);this._timelineEngine.command(r,t,o,s)}else this._transitionEngine.trigger(e,t,n,s)}listen(e,t,n,s,r){if("@"==n.charAt(0)){const[o,a]=nT(n);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,n,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let GY=(()=>{class i{constructor(t,n,s){this._element=t,this._startStyles=n,this._endStyles=s,this._state=0;let r=i.initialStylesByElement.get(t);r||i.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&$o(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($o(this._element,this._initialStyles),this._endStyles&&($o(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Ac(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ac(this._element,this._endStyles),this._endStyles=null),$o(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function zw(i){let e=null;return i.forEach((t,n)=>{(function UY(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class RT{constructor(e,t,n,s){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,s)=>{"offset"!==s&&e.set(s,this._finished?n:mT(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class WY{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return oT(e,t)}getParentElement(e){return ww(e)}query(e,t,n){return aT(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,s,r,o=[]){const l={duration:n,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const c=new Map,h=o.filter(p=>p instanceof RT);(function X$(i,e){return 0===i||0===e})(n,s)&&h.forEach(p=>{p.currentSnapshot.forEach((f,g)=>c.set(g,f))});let u=function W$(i){return i.length?i[0]instanceof Map?i:i.map(e=>uT(e)):[]}(t).map(p=>Sl(p));u=function Z$(i,e,t){if(t.size&&e.length){let n=e[0],s=[];if(t.forEach((r,o)=>{n.has(o)||s.push(o),n.set(o,r)}),s.length)for(let r=1;r<e.length;r++){let o=e[r];s.forEach(a=>o.set(a,mT(i,a)))}}return e}(e,u,c);const d=function qY(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=zw(e[0]),e.length>1&&(n=zw(e[e.length-1]))):e instanceof Map&&(t=zw(e)),t||n?new GY(i,t,n):null}(e,u);return new RT(e,u,l,d)}}let $Y=(()=>{class i extends XI{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:lo.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?ZI(t):t;return AT(this._renderer,null,n,"register",[s]),new YY(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(be(R1),be(Ci))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();class YY extends class n${}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new KY(this._id,e,t||{},this._renderer)}}class KY{constructor(e,t,n,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return AT(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AT(i,e,t,n,s){return i.setProperty(e,`@@${t}:${n}`,s)}const LT="@.disabled";let XY=(()=>{class i{constructor(t,n,s){this.delegate=t,this.engine=n,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(r,o)=>{const a=o?.parentNode(r);a&&o.removeChild(a,r)}}createRenderer(t,n){const r=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let h=this._rendererCache.get(r);return h||(h=new PT("",r,this.engine,()=>this._rendererCache.delete(r)),this._rendererCache.set(r,h)),h}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return n.data.animation.forEach(l),new ZY(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,s){t>=0&&t<this._microtaskId?this._zone.run(()=>n(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(be(R1),be(W0),be(an))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();class PT{constructor(e,t,n,s){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=s,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,s=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,s){this.delegate.setAttribute(e,t,n,s)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,s){this.delegate.setStyle(e,t,n,s)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==LT?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZY extends PT{constructor(e,t,n,s,r){super(t,n,s,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==LT?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const s=function QY(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let r=t.slice(1),o="";return"@"!=r.charAt(0)&&([r,o]=function JY(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}const OT=[{provide:XI,useClass:$Y},{provide:Lw,useFactory:function tK(){return new kY}},{provide:W0,useClass:(()=>{class i extends W0{constructor(t,n,s,r){super(t.body,n,s)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(be(Ci),be(xw),be(Lw),be(X1))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})()},{provide:R1,useFactory:function nK(i,e,t){return new XY(i,e,t)},deps:[I0,W0,an]}],Hw=[{provide:xw,useFactory:()=>new WY},{provide:S6,useValue:"BrowserAnimations"},...OT],NT=[{provide:xw,useClass:lT},{provide:S6,useValue:"NoopAnimations"},...OT];let Bw=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?NT:Hw}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({providers:Hw,imports:[WI]}),i})();function je(...i){return si(i,n1(i))}function Il(i,e){return me(e)?Li(i,e,1):Li(i,1)}function za(i,e){return Mi((t,n)=>{let s=0;t.subscribe(pi(n,r=>i.call(e,r,s++)&&n.next(r)))})}class FT{}class VT{}class Ha{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const s=t.slice(0,n),r=s.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const s=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(s,n),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ha?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ha;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ha?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...n),this.headers.set(t,s);break;case"d":const r=e.value;if(r){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class iK{encodeKey(e){return zT(e)}encodeValue(e){return zT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const rK=/%(\d[a-f0-9])/gi,oK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zT(i){return encodeURIComponent(i).replace(rK,(e,t)=>oK[t]??e)}function Y0(i){return`${i}`}class Tl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sK(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,r)),e.decodeValue(s.slice(r+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],s=Array.isArray(n)?n.map(Y0):[Y0(n)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const s=e[n];Array.isArray(s)?s.forEach(r=>{t.push({param:n,value:r,op:"a"})}):t.push({param:n,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Tl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Y0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const s=n.indexOf(Y0(e.value));-1!==s&&n.splice(s,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HT(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function BT(i){return typeof Blob<"u"&&i instanceof Blob}function jT(i){return typeof FormData<"u"&&i instanceof FormData}class cp{constructor(e,t,n,s){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function lK(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==n?n:null,r=s):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Ha),this.context||(this.context=new aK),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Tl,this.urlWithParams=t}serializeBody(){return null===this.body?null:HT(this.body)||BT(this.body)||jT(this.body)||function cK(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jT(this.body)?null:BT(this.body)?this.body.type||null:HT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,s=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((u,d)=>u.set(d,e.setHeaders[d]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((u,d)=>u.set(d,e.setParams[d]),c)),new cp(t,n,r,{params:c,headers:l,context:h,reportProgress:a,responseType:s,withCredentials:o})}}var hi=(()=>((hi=hi||{})[hi.Sent=0]="Sent",hi[hi.UploadProgress=1]="UploadProgress",hi[hi.ResponseHeader=2]="ResponseHeader",hi[hi.DownloadProgress=3]="DownloadProgress",hi[hi.Response=4]="Response",hi[hi.User=5]="User",hi))();class jw{constructor(e,t=200,n="OK"){this.headers=e.headers||new Ha,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class qw extends jw{constructor(e={}){super(e),this.type=hi.ResponseHeader}clone(e={}){return new qw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class K0 extends jw{constructor(e={}){super(e),this.type=hi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new K0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qT extends jw{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Gw(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let GT=(()=>{class i{constructor(t){this.handler=t}request(t,n,s={}){let r;if(t instanceof cp)r=t;else{let l,c;l=s.headers instanceof Ha?s.headers:new Ha(s.headers),s.params&&(c=s.params instanceof Tl?s.params:new Tl({fromObject:s.params})),r=new cp(t,n,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=je(r).pipe(Il(l=>this.handler.handle(l)));if(t instanceof cp||"events"===s.observe)return o;const a=o.pipe(za(l=>l instanceof K0));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(_t(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(_t(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(_t(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(_t(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Tl).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,s={}){return this.request("PATCH",t,Gw(s,n))}post(t,n,s={}){return this.request("POST",t,Gw(s,n))}put(t,n,s={}){return this.request("PUT",t,Gw(s,n))}}return i.\u0275fac=function(t){return new(t||i)(be(FT))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();class UT{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WT=new Fe("HTTP_INTERCEPTORS");let hK=(()=>{class i{intercept(t,n){return n.handle(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();const uK=/^\)\]\}',?\n/;let $T=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Kn(n=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((p,f)=>s.setRequestHeader(p,f.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const p=t.detectContentTypeHeader();null!==p&&s.setRequestHeader("Content-Type",p)}if(t.responseType){const p=t.responseType.toLowerCase();s.responseType="json"!==p?p:"text"}const r=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const p=s.statusText||"OK",f=new Ha(s.getAllResponseHeaders()),g=function dK(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new qw({headers:f,status:s.status,statusText:p,url:g}),o},l=()=>{let{headers:p,status:f,statusText:g,url:m}=a(),y=null;204!==f&&(y=typeof s.response>"u"?s.responseText:s.response),0===f&&(f=y?200:0);let _=f>=200&&f<300;if("json"===t.responseType&&"string"==typeof y){const v=y;y=y.replace(uK,"");try{y=""!==y?JSON.parse(y):null}catch(k){y=v,_&&(_=!1,y={error:k,text:y})}}_?(n.next(new K0({body:y,headers:p,status:f,statusText:g,url:m||void 0})),n.complete()):n.error(new qT({error:y,headers:p,status:f,statusText:g,url:m||void 0}))},c=p=>{const{url:f}=a(),g=new qT({error:p,status:s.status||0,statusText:s.statusText||"Unknown Error",url:f||void 0});n.error(g)};let h=!1;const u=p=>{h||(n.next(a()),h=!0);let f={type:hi.DownloadProgress,loaded:p.loaded};p.lengthComputable&&(f.total=p.total),"text"===t.responseType&&!!s.responseText&&(f.partialText=s.responseText),n.next(f)},d=p=>{let f={type:hi.UploadProgress,loaded:p.loaded};p.lengthComputable&&(f.total=p.total),n.next(f)};return s.addEventListener("load",l),s.addEventListener("error",c),s.addEventListener("timeout",c),s.addEventListener("abort",c),t.reportProgress&&(s.addEventListener("progress",u),null!==r&&s.upload&&s.upload.addEventListener("progress",d)),s.send(r),n.next({type:hi.Sent}),()=>{s.removeEventListener("error",c),s.removeEventListener("abort",c),s.removeEventListener("load",l),s.removeEventListener("timeout",c),t.reportProgress&&(s.removeEventListener("progress",u),null!==r&&s.upload&&s.upload.removeEventListener("progress",d)),s.readyState!==s.DONE&&s.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(be(EI))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();const Uw=new Fe("XSRF_COOKIE_NAME"),Ww=new Fe("XSRF_HEADER_NAME");class YT{}let pK=(()=>{class i{constructor(t,n,s){this.doc=t,this.platform=n,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=gI(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(be(Ci),be(Rk),be(Uw))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),$w=(()=>{class i{constructor(t,n){this.tokenService=t,this.headerName=n}intercept(t,n){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return n.handle(t);const r=this.tokenService.getToken();return null!==r&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,r)})),n.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(be(YT),be(Ww))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),fK=(()=>{class i{constructor(t,n){this.backend=t,this.injector=n,this.chain=null}handle(t){if(null===this.chain){const n=this.injector.get(WT,[]);this.chain=n.reduceRight((s,r)=>new UT(s,r),this.backend)}return this.chain.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(be(VT),be(rr))},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),gK=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:$w,useClass:hK}]}}static withOptions(t={}){return{ngModule:i,providers:[t.cookieName?{provide:Uw,useValue:t.cookieName}:[],t.headerName?{provide:Ww,useValue:t.headerName}:[]]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({providers:[$w,{provide:WT,useExisting:$w,multi:!0},{provide:YT,useClass:pK},{provide:Uw,useValue:"XSRF-TOKEN"},{provide:Ww,useValue:"X-XSRF-TOKEN"}]}),i})(),mK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({providers:[GT,{provide:FT,useClass:fK},$T,{provide:VT,useExisting:$T}],imports:[gK.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();const{isArray:yK}=Array,{getPrototypeOf:_K,prototype:vK,keys:kK}=Object;function KT(i){if(1===i.length){const e=i[0];if(yK(e))return{args:e,keys:null};if(function wK(i){return i&&"object"==typeof i&&_K(i)===vK}(e)){const t=kK(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:xK}=Array;function XT(i){return _t(e=>function MK(i,e){return xK(e)?i(...e):i(e)}(i,e))}function ZT(i,e){return i.reduce((t,n,s)=>(t[n]=e[s],t),{})}let QT=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(Y(Ps),Y(rn))},i.\u0275dir=Ve({type:i}),i})(),Pc=(()=>{class i extends QT{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=function Ui(i){return ml(()=>{const e=i.prototype.constructor,t=e[xa]||F_(e),n=Object.prototype;let s=Object.getPrototypeOf(i.prototype).constructor;for(;s&&s!==n;){const r=s[xa]||F_(s);if(r&&r!==t)return r;s=Object.getPrototypeOf(s)}return r=>new r})}(i)))(n||i)}}(),i.\u0275dir=Ve({type:i,features:[on]}),i})();const vi=new Fe("NgValueAccessor"),EK={provide:vi,useExisting:Ct(()=>Yw),multi:!0},IK=new Fe("CompositionEventMode");let Yw=(()=>{class i extends QT{constructor(t,n,s){super(t,n),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function SK(){const i=Wo()?Wo().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(Y(Ps),Y(rn),Y(IK,8))},i.\u0275dir=Ve({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&le("input",function(r){return n._handleInput(r.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(r){return n._compositionEnd(r.target.value)})},features:[Et([EK]),on]}),i})();const Zi=new Fe("NgValidators"),Rl=new Fe("NgAsyncValidators");function cD(i){return null!=i}function hD(i){return F1(i)?si(i):i}function uD(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function dD(i,e){return e.map(t=>t(i))}function pD(i){return i.map(e=>function RK(i){return!i.validate}(e)?e:t=>e.validate(t))}function Kw(i){return null!=i?function fD(i){if(!i)return null;const e=i.filter(cD);return 0==e.length?null:function(t){return uD(dD(t,e))}}(pD(i)):null}function Xw(i){return null!=i?function gD(i){if(!i)return null;const e=i.filter(cD);return 0==e.length?null:function(t){return function bK(...i){const e=p3(i),{args:t,keys:n}=KT(i),s=new Kn(r=>{const{length:o}=t;if(!o)return void r.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let u=!1;oo(t[h]).subscribe(pi(r,d=>{u||(u=!0,c--),a[h]=d},()=>l--,void 0,()=>{(!l||!u)&&(c||r.next(n?ZT(n,a):a),r.complete())}))}});return e?s.pipe(XT(e)):s}(dD(t,e).map(hD)).pipe(_t(uD))}}(pD(i)):null}function mD(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Zw(i){return i?Array.isArray(i)?i:[i]:[]}function Z0(i,e){return Array.isArray(i)?i.includes(e):i===e}function vD(i,e){const t=Zw(e);return Zw(i).forEach(s=>{Z0(t,s)||t.push(s)}),t}function kD(i,e){return Zw(e).filter(t=>!Z0(i,t))}class wD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Kw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gs extends wD{get formDirective(){return null}get path(){return null}}class Al extends wD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let hp=(()=>{class i extends class xD{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(Y(Al,2))},i.\u0275dir=Ve({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&Da("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[on]}),i})();const up="VALID",J0="INVALID",Su="PENDING",dp="DISABLED";function bD(i){return Array.isArray(i)?Kw(i):i||null}function CD(i){return Array.isArray(i)?Xw(i):i||null}function em(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function pp(i,e){(function sx(i,e){const t=function yD(i){return i._rawValidators}(i);null!==e.validator?i.setValidators(mD(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=function _D(i){return i._rawAsyncValidators}(i);null!==e.asyncValidator?i.setAsyncValidators(mD(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const s=()=>i.updateValueAndValidity();im(e._rawValidators,s),im(e._rawAsyncValidators,s)})(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function BK(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&TD(i,e)})}(i,e),function qK(i,e){const t=(n,s)=>{e.valueAccessor.writeValue(n),s&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function jK(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&TD(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function HK(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function im(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function TD(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function LD(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function PD(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const ZK={provide:Al,useExisting:Ct(()=>Oc)},VD=(()=>Promise.resolve())();let Oc=(()=>{class i extends Al{constructor(t,n,s,r,o){super(),this._changeDetectorRef=o,this.control=new class extends class ID{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=bD(this._rawValidators),this._composedAsyncValidatorFn=CD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===up}get invalid(){return this.status===J0}get pending(){return this.status==Su}get disabled(){return this.status===dp}get enabled(){return this.status!==dp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=bD(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=CD(e)}addValidators(e){this.setValidators(vD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kD(e,this._rawAsyncValidators))}hasValidator(e){return Z0(this._rawValidators,e)}hasAsyncValidator(e){return Z0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Su,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dp,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=up,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===up||this.status===Su)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dp:up}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Su,this._hasOwnPendingAsyncValidator=!0;const t=hD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,s)=>n&&n._find(s),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ie,this.statusChanges=new ie}_calculateStatus(){return this._allControlsDisabled()?dp:this.errors?J0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Su)?Su:this._anyControlsHaveStatus(J0)?J0:up}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){em(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,n){super(function tx(i){return(em(i)?i.validators:i)||null}(t),function nx(i,e){return(em(e)?e.asyncValidators:i)||null}(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),em(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=PD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){PD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new ie,this._parent=t,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=function ox(i,e){if(!e)return null;let t,n,s;return Array.isArray(e),e.forEach(r=>{r.constructor===Yw?t=r:function WK(i){return Object.getPrototypeOf(i.constructor)===Pc}(r)?n=r:s=r}),s||n||t||null}(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function rx(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pp(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){VD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,s=0!==n&&function Pa(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);VD.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tm(i,e){return[...e.path,i]}(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(Y(gs,9),Y(Zi,10),Y(Rl,10),Y(vi,10),Y(qn,8))},i.\u0275dir=Ve({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Et([ZK]),on,Pi]}),i})(),HD=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({}),i})(),xX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[HD]}),i})(),rm=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[xX]}),i})();class pe{static equals(e,t,n){return n?this.resolveFieldData(e,n)===this.resolveFieldData(t,n):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,o,a,n=Array.isArray(e),s=Array.isArray(t);if(n&&s){if((o=e.length)!=t.length)return!1;for(r=o;0!=r--;)if(!this.equalsByValue(e[r],t[r]))return!1;return!0}if(n!=s)return!1;var l=e instanceof Date,c=t instanceof Date;if(l!=c)return!1;if(l&&c)return e.getTime()==t.getTime();var h=e instanceof RegExp,u=t instanceof RegExp;if(h!=u)return!1;if(h&&u)return e.toString()==t.toString();var d=Object.keys(e);if((o=d.length)!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,d[r]))return!1;for(r=o;0!=r--;)if(!this.equalsByValue(e[a=d[r]],t[a]))return!1;return!0}return e!=e&&t!=t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(-1==t.indexOf("."))return e[t];{let n=t.split("."),s=e;for(let r=0,o=n.length;r<o;++r){if(null==s)return null;s=s[n[r]]}return s}}return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,n){e&&t!==n&&(n>=e.length&&(n%=e.length,t%=e.length),e.splice(n,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,n,s){if(n.length>0){let r=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],s)>t){n.splice(o,0,e),r=!0;break}r||n.push(e)}else n.push(e)}static findIndexInList(e,t){let n=-1;if(t)for(let s=0;s<t.length;s++)if(t[s]==e){n=s;break}return n}static contains(e,t){if(null!=e&&t&&t.length)for(let n of t)if(this.equals(e,n))return!0;return!1}static removeAccents(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}static isEmpty(e){return null==e||""===e||Array.isArray(e)&&0===e.length||!(e instanceof Date)&&"object"==typeof e&&0===Object.keys(e).length}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,n,s=1){let r=-1;const o=this.isEmpty(e),a=this.isEmpty(t);return r=o&&a?0:o?s:a?-s:"string"==typeof e&&"string"==typeof t?e.localeCompare(t,n,{numeric:!0}):e<t?-1:e>t?1:0,r}static sort(e,t,n=1,s,r=1){return(1===r?n:r)*pe.compare(e,t,s,n)}static merge(e,t){return null!=e&&"object"!=typeof e||null!=t&&"object"!=typeof t?null!=e&&"string"!=typeof e||null!=t&&"string"!=typeof t?t||e:[e||"",t||""].join(" "):{...e||{},...t||{}}}}var r7=0;function Iu(){return"pr_id_"+ ++r7}var Si=function bX(){let i=[];const s=r=>r&&parseInt(r.style.zIndex,10)||0;return{get:s,set:(r,o,a)=>{o&&(o.style.zIndex=String(((r,o)=>{let a=i.length>0?i[i.length-1]:{key:r,value:o},l=a.value+(a.key===r?0:o)+1;return i.push({key:r,value:l}),l})(r,a)))},clear:r=>{r&&((r=>{i=i.filter(o=>o.value!==r)})(s(r)),r.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const o7=["*"];let Oi=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),a7=(()=>{class i{}return i.AND="and",i.OR="or",i})(),fx=(()=>{class i{constructor(){this.filters={startsWith:(t,n,s)=>{if(null==n||""===n.trim())return!0;if(null==t)return!1;let r=pe.removeAccents(n.toString()).toLocaleLowerCase(s);return pe.removeAccents(t.toString()).toLocaleLowerCase(s).slice(0,r.length)===r},contains:(t,n,s)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==t)return!1;let r=pe.removeAccents(n.toString()).toLocaleLowerCase(s);return-1!==pe.removeAccents(t.toString()).toLocaleLowerCase(s).indexOf(r)},notContains:(t,n,s)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==t)return!1;let r=pe.removeAccents(n.toString()).toLocaleLowerCase(s);return-1===pe.removeAccents(t.toString()).toLocaleLowerCase(s).indexOf(r)},endsWith:(t,n,s)=>{if(null==n||""===n.trim())return!0;if(null==t)return!1;let r=pe.removeAccents(n.toString()).toLocaleLowerCase(s),o=pe.removeAccents(t.toString()).toLocaleLowerCase(s);return-1!==o.indexOf(r,o.length-r.length)},equals:(t,n,s)=>null==n||"string"==typeof n&&""===n.trim()||null!=t&&(t.getTime&&n.getTime?t.getTime()===n.getTime():pe.removeAccents(t.toString()).toLocaleLowerCase(s)==pe.removeAccents(n.toString()).toLocaleLowerCase(s)),notEquals:(t,n,s)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=t&&(t.getTime&&n.getTime?t.getTime()===n.getTime():pe.removeAccents(t.toString()).toLocaleLowerCase(s)==pe.removeAccents(n.toString()).toLocaleLowerCase(s))),in:(t,n)=>{if(null==n||0===n.length)return!0;for(let s=0;s<n.length;s++)if(pe.equals(t,n[s]))return!0;return!1},between:(t,n)=>null==n||null==n[0]||null==n[1]||null!=t&&(t.getTime?n[0].getTime()<=t.getTime()&&t.getTime()<=n[1].getTime():n[0]<=t&&t<=n[1]),lt:(t,n,s)=>null==n||null!=t&&(t.getTime&&n.getTime?t.getTime()<n.getTime():t<n),lte:(t,n,s)=>null==n||null!=t&&(t.getTime&&n.getTime?t.getTime()<=n.getTime():t<=n),gt:(t,n,s)=>null==n||null!=t&&(t.getTime&&n.getTime?t.getTime()>n.getTime():t>n),gte:(t,n,s)=>null==n||null!=t&&(t.getTime&&n.getTime?t.getTime()>=n.getTime():t>=n),is:(t,n,s)=>this.filters.equals(t,n,s),isNot:(t,n,s)=>this.filters.notEquals(t,n,s),before:(t,n,s)=>this.filters.lt(t,n,s),after:(t,n,s)=>this.filters.gt(t,n,s),dateIs:(t,n)=>null==n||null!=t&&t.toDateString()===n.toDateString(),dateIsNot:(t,n)=>null==n||null!=t&&t.toDateString()!==n.toDateString(),dateBefore:(t,n)=>null==n||null!=t&&t.getTime()<n.getTime(),dateAfter:(t,n)=>null==n||null!=t&&t.getTime()>n.getTime()}}filter(t,n,s,r,o){let a=[];if(t)for(let l of t)for(let c of n){let h=pe.resolveFieldData(l,c);if(this.filters[r](h,s,o)){a.push(l);break}}return a}register(t,n){this.filters[t]=n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gx=(()=>{class i{constructor(){this.messageSource=new Xn,this.clearSource=new Xn,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),om=(()=>{class i{constructor(){this.clickSource=new Xn,this.clickObservable=this.clickSource.asObservable()}add(t){t&&this.clickSource.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ba=(()=>{class i{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[Oi.STARTS_WITH,Oi.CONTAINS,Oi.NOT_CONTAINS,Oi.ENDS_WITH,Oi.EQUALS,Oi.NOT_EQUALS],numeric:[Oi.EQUALS,Oi.NOT_EQUALS,Oi.LESS_THAN,Oi.LESS_THAN_OR_EQUAL_TO,Oi.GREATER_THAN,Oi.GREATER_THAN_OR_EQUAL_TO],date:[Oi.DATE_IS,Oi.DATE_IS_NOT,Oi.DATE_BEFORE,Oi.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Xn,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=$t({type:i,selectors:[["p-header"]],ngContentSelectors:o7,decls:1,vars:0,template:function(t,n){1&t&&(go(),Yi(0))},encapsulation:2}),i})(),l7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=$t({type:i,selectors:[["p-footer"]],ngContentSelectors:o7,decls:1,vars:0,template:function(t,n){1&t&&(go(),Yi(0))},encapsulation:2}),i})(),Ni=(()=>{class i{constructor(t){this.template=t}getType(){return this.name}}return i.\u0275fac=function(t){return new(t||i)(Y(_o))},i.\u0275dir=Ve({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Fi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})(),ms=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),q=(()=>{class i{static addClass(t,n){t&&n&&(t.classList?t.classList.add(n):t.className+=" "+n)}static addMultipleClasses(t,n){if(t&&n)if(t.classList){let s=n.trim().split(" ");for(let r=0;r<s.length;r++)t.classList.add(s[r])}else{let s=n.split(" ");for(let r=0;r<s.length;r++)t.className+=" "+s[r]}}static removeClass(t,n){t&&n&&(t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,n){return!(!t||!n)&&(t.classList?t.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(n){return n!==t})}static find(t,n){return Array.from(t.querySelectorAll(n))}static findSingle(t,n){return t?t.querySelector(n):null}static index(t){let n=t.parentNode.childNodes,s=0;for(var r=0;r<n.length;r++){if(n[r]==t)return s;1==n[r].nodeType&&s++}return-1}static indexWithinGroup(t,n){let s=t.parentNode?t.parentNode.childNodes:[],r=0;for(var o=0;o<s.length;o++){if(s[o]==t)return r;s[o].attributes&&s[o].attributes[n]&&1==s[o].nodeType&&r++}return-1}static appendOverlay(t,n,s="self"){"self"!==s&&t&&n&&this.appendChild(t,n)}static alignOverlay(t,n,s="self",r=!0){t&&n&&(r&&(t.style.minWidth||(t.style.minWidth=i.getOuterWidth(n)+"px")),"self"===s?this.relativePosition(t,n):this.absolutePosition(t,n))}static relativePosition(t,n){const s=g=>{if(g)return"relative"===getComputedStyle(g).getPropertyValue("position")?g:s(g.parentElement)},r=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=n.offsetHeight,a=n.getBoundingClientRect(),l=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),h=this.getViewport(),d=s(t)?.getBoundingClientRect()||{top:-1*l,left:-1*c};let p,f;a.top+o+r.height>h.height?(p=a.top-d.top-r.height,t.style.transformOrigin="bottom",a.top+p<0&&(p=-1*a.top)):(p=o+a.top-d.top,t.style.transformOrigin="top"),f=r.width>h.width?-1*(a.left-d.left):a.left-d.left+r.width>h.width?-1*(a.left-d.left+r.width-h.width):a.left-d.left,t.style.top=p+"px",t.style.left=f+"px"}static absolutePosition(t,n){const s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),r=s.height,o=s.width,a=n.offsetHeight,l=n.offsetWidth,c=n.getBoundingClientRect(),h=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),d=this.getViewport();let p,f;c.top+a+r>d.height?(p=c.top+h-r,t.style.transformOrigin="bottom",p<0&&(p=h)):(p=a+c.top+h,t.style.transformOrigin="top"),f=c.left+o>d.width?Math.max(0,c.left+u+l-o):c.left+u,t.style.top=p+"px",t.style.left=f+"px"}static getParents(t,n=[]){return null===t.parentNode?n:this.getParents(t.parentNode,n.concat([t.parentNode]))}static getScrollableParents(t){let n=[];if(t){let s=this.getParents(t);const r=/(auto|scroll)/,o=a=>{let l=window.getComputedStyle(a,null);return r.test(l.getPropertyValue("overflow"))||r.test(l.getPropertyValue("overflowX"))||r.test(l.getPropertyValue("overflowY"))};for(let a of s){let l=1===a.nodeType&&a.dataset.scrollselectors;if(l){let c=l.split(",");for(let h of c){let u=this.findSingle(a,h);u&&o(u)&&n.push(u)}}9!==a.nodeType&&o(a)&&n.push(a)}}return n}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let n=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",n}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let n=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",n}static getHiddenElementDimensions(t){let n={};return t.style.visibility="hidden",t.style.display="block",n.width=t.offsetWidth,n.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",n}static scrollInView(t,n){let s=getComputedStyle(t).getPropertyValue("borderTopWidth"),r=s?parseFloat(s):0,o=getComputedStyle(t).getPropertyValue("paddingTop"),a=o?parseFloat(o):0,l=t.getBoundingClientRect(),h=n.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-r-a,u=t.scrollTop,d=t.clientHeight,p=this.getOuterHeight(n);h<0?t.scrollTop=u+h:h+p>d&&(t.scrollTop=u+h-d+p)}static fadeIn(t,n){t.style.opacity=0;let s=+new Date,r=0,o=function(){r=+t.style.opacity.replace(",",".")+((new Date).getTime()-s)/n,t.style.opacity=r,s=+new Date,+r<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(t,n){var s=1,a=50/n;let l=setInterval(()=>{(s-=a)<=0&&(s=0,clearInterval(l)),t.style.opacity=s},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,n){var s=Element.prototype;return(s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(t,n)}static getOuterWidth(t,n){let s=t.offsetWidth;if(n){let r=getComputedStyle(t);s+=parseFloat(r.marginLeft)+parseFloat(r.marginRight)}return s}static getHorizontalPadding(t){let n=getComputedStyle(t);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(t){let n=getComputedStyle(t);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(t){let n=t.offsetWidth,s=getComputedStyle(t);return n+=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),n}static width(t){let n=t.offsetWidth,s=getComputedStyle(t);return n-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),n}static getInnerHeight(t){let n=t.offsetHeight,s=getComputedStyle(t);return n+=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),n}static getOuterHeight(t,n){let s=t.offsetHeight;if(n){let r=getComputedStyle(t);s+=parseFloat(r.marginTop)+parseFloat(r.marginBottom)}return s}static getHeight(t){let n=t.offsetHeight,s=getComputedStyle(t);return n-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),n}static getWidth(t){let n=t.offsetWidth,s=getComputedStyle(t);return n-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)+parseFloat(s.borderLeftWidth)+parseFloat(s.borderRightWidth),n}static getViewport(){let t=window,n=document,s=n.documentElement,r=n.getElementsByTagName("body")[0];return{width:t.innerWidth||s.clientWidth||r.clientWidth,height:t.innerHeight||s.clientHeight||r.clientHeight}}static getOffset(t){var n=t.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,n){let s=t.parentNode;if(!s)throw"Can't replace element";return s.replaceChild(n,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,n){if(this.isElement(n))n.appendChild(t);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+t;n.el.nativeElement.appendChild(t)}}static removeChild(t,n){if(this.isElement(n))n.removeChild(t);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+t+" from "+n;n.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let n=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let s=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=s,s}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let n=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(t,n,s){t[n].apply(t,s)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,n){t&&document.activeElement!==t&&t.focus(n)}static getFocusableElements(t){let n=i.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),s=[];for(let r of n)"none"!=getComputedStyle(r).display&&"hidden"!=getComputedStyle(r).visibility&&s.push(r);return s}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,n){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return n?.nextElementSibling;case"@prev":return n?.previousElementSibling;case"@parent":return n?.parentElement;case"@grandparent":return n?.parentElement.parentElement;default:const s=typeof t;if("string"===s)return document.querySelector(t);if("object"===s&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const o=(a=t)&&a.constructor&&a.call&&a.apply?t():t;return o&&9===o.nodeType||this.isExist(o)?o:null}var a}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class am{constructor(e,t=(()=>{})){this.element=e,this.listener=t}bindScrollListener(){this.scrollableParents=q.getScrollableParents(this.element);for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let ja=(()=>{class i{constructor(t,n,s){this.el=t,this.zone=n,this.config=s}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(q.removeClass(n,"p-ink-active"),!q.getHeight(n)&&!q.getWidth(n)){let a=Math.max(q.getOuterWidth(this.el.nativeElement),q.getOuterHeight(this.el.nativeElement));n.style.height=a+"px",n.style.width=a+"px"}let s=q.getOffset(this.el.nativeElement),r=t.pageX-s.left+document.body.scrollTop-q.getWidth(n)/2,o=t.pageY-s.top+document.body.scrollLeft-q.getHeight(n)/2;n.style.top=o+"px",n.style.left=r+"px",q.addClass(n,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&q.removeClass(a,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&q.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),q.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),q.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(an),Y(Ba,8))},i.\u0275dir=Ve({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),Yo=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();function CX(i,e){1&i&&_e(0)}const EX=function(i,e,t,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":n}};function SX(i,e){if(1&i&&Ze(0,"span",4),2&i){const t=x();ut(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),M("ngClass",Ra(4,EX,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),tt("aria-hidden",!0)}}function IX(i,e){if(1&i&&(B(0,"span",5),ke(1),H()),2&i){const t=x();tt("aria-hidden",t.icon&&!t.label),C(1),zt(t.label)}}function TX(i,e){if(1&i&&(B(0,"span",4),ke(1),H()),2&i){const t=x();ut(t.badgeClass),M("ngClass",t.badgeStyleClass()),C(1),zt(t.badge)}}const DX=function(i,e,t,n,s){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":e,"p-disabled":t,"p-button-loading":n,"p-button-loading-label-only":s}},RX=["*"];let yx=(()=>{class i{constructor(t){this.el=t,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}get label(){return this._label}set label(t){this._label=t,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,q.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let t="p-button p-component";return this.icon&&!this.label&&pe.isEmpty(this.el.nativeElement.textContent)&&(t+=" p-button-icon-only"),this.loading&&(t+=" p-disabled p-button-loading",!this.icon&&this.label&&(t+=" p-button-loading-label-only")),t}setStyleClass(){let t=this.getStyleClass();this.el.nativeElement.className=t+" "+this._initialStyleClass}createLabel(){if(this.label){let t=document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",t.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(t)}}createIcon(){if(this.icon||this.loading){let t=document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&q.addClass(t,n);let s=this.getIconClass();s&&q.addMultipleClasses(t,s),this.el.nativeElement.insertBefore(t,this.el.nativeElement.firstChild)}}updateLabel(){let t=q.findSingle(this.el.nativeElement,".p-button-label");this.label?t?t.textContent=this.label:this.createLabel():t&&this.el.nativeElement.removeChild(t)}updateIcon(){let t=q.findSingle(this.el.nativeElement,".p-button-icon");this.icon||this.loading?t?t.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():t&&this.el.nativeElement.removeChild(t)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(t){return new(t||i)(Y(rn))},i.\u0275dir=Ve({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),AX=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new ie,this.onFocus=new ie,this.onBlur=new ie}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=$t({type:i,selectors:[["p-button"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:RX,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,n){1&t&&(go(),B(0,"button",0),le("click",function(r){return n.onClick.emit(r)})("focus",function(r){return n.onFocus.emit(r)})("blur",function(r){return n.onBlur.emit(r)}),Yi(1),A(2,CX,1,0,"ng-container",1),A(3,SX,1,9,"span",2),A(4,IX,2,2,"span",3),A(5,TX,2,4,"span",2),H()),2&t&&(ut(n.styleClass),M("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",U1(11,DX,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),tt("type",n.type)("aria-label",n.ariaLabel),C(2),M("ngTemplateOutlet",n.contentTemplate),C(1),M("ngIf",!n.contentTemplate&&(n.icon||n.loading)),C(1),M("ngIf",!n.contentTemplate&&n.label),C(1),M("ngIf",!n.contentTemplate&&n.badge))},dependencies:[ei,Nn,Xi,Ei,ja],encapsulation:2,changeDetection:0}),i})(),Ll=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Yo]}),i})();const LX=["container"],PX=["inputfield"],OX=["contentWrapper"];function NX(i,e){if(1&i){const t=Te();B(0,"i",8),le("click",function(){return U(t),W(x(2).clear())}),H()}}function FX(i,e){if(1&i){const t=Te();B(0,"button",9),le("click",function(s){U(t),x();const r=dn(1);return W(x().onButtonClick(s,r))}),H()}if(2&i){const t=x(2);M("icon",t.icon)("disabled",t.disabled),tt("aria-label",t.iconAriaLabel)}}function VX(i,e){if(1&i){const t=Te();B(0,"input",4,5),le("focus",function(s){return U(t),W(x().onInputFocus(s))})("keydown",function(s){return U(t),W(x().onInputKeydown(s))})("click",function(){return U(t),W(x().onInputClick())})("blur",function(s){return U(t),W(x().onInputBlur(s))})("input",function(s){return U(t),W(x().onUserInput(s))}),H(),A(2,NX,1,0,"i",6),A(3,FX,1,3,"button",7)}if(2&i){const t=x();ut(t.inputStyleClass),M("value",t.inputFieldValue)("readonly",t.readonlyInput)("ngStyle",t.inputStyle)("placeholder",t.placeholder||"")("disabled",t.disabled)("ngClass","p-inputtext p-component"),tt("id",t.inputId)("name",t.name)("required",t.required)("aria-required",t.required)("tabindex",t.tabindex)("inputmode",t.touchUI?"off":null)("aria-labelledby",t.ariaLabelledBy),C(2),M("ngIf",t.showClear&&!t.disabled&&null!=t.value),C(1),M("ngIf",t.showIcon)}}function zX(i,e){1&i&&_e(0)}function HX(i,e){if(1&i){const t=Te();B(0,"button",30),le("keydown",function(s){return U(t),W(x(4).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(4).onPrevButtonClick(s))}),Ze(1,"span",31),H()}}function BX(i,e){if(1&i){const t=Te();B(0,"button",32),le("click",function(s){return U(t),W(x(4).switchToMonthView(s))})("keydown",function(s){return U(t),W(x(4).onContainerButtonKeydown(s))}),ke(1),H()}if(2&i){const t=x().$implicit,n=x(3);M("disabled",n.switchViewButtonDisabled()),C(1),_n(" ",n.getMonthName(t.month)," ")}}function jX(i,e){if(1&i){const t=Te();B(0,"button",33),le("click",function(s){return U(t),W(x(4).switchToYearView(s))})("keydown",function(s){return U(t),W(x(4).onContainerButtonKeydown(s))}),ke(1),H()}if(2&i){const t=x().$implicit,n=x(3);M("disabled",n.switchViewButtonDisabled()),C(1),_n(" ",n.getYear(t)," ")}}function qX(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(5);C(1),lk("",t.yearPickerValues()[0]," - ",t.yearPickerValues()[t.yearPickerValues().length-1],"")}}function GX(i,e){1&i&&_e(0)}const c7=function(i){return{$implicit:i}};function UX(i,e){if(1&i&&(B(0,"span",34),A(1,qX,2,2,"ng-container",13),A(2,GX,1,0,"ng-container",35),H()),2&i){const t=x(4);C(1),M("ngIf",!t.decadeTemplate),C(1),M("ngTemplateOutlet",t.decadeTemplate)("ngTemplateOutletContext",xe(3,c7,t.yearPickerValues))}}function WX(i,e){if(1&i&&(B(0,"th",41)(1,"span"),ke(2),H()()),2&i){const t=x(5);C(2),zt(t.getTranslation("weekHeader"))}}function $X(i,e){if(1&i&&(B(0,"th",42)(1,"span"),ke(2),H()()),2&i){const t=e.$implicit;C(2),zt(t)}}function YX(i,e){if(1&i&&(B(0,"td",45)(1,"span",46),ke(2),H()()),2&i){const t=x().index,n=x(2).$implicit;C(2),_n(" ",n.weekNumbers[t]," ")}}function KX(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(2).$implicit;C(1),zt(t.day)}}function XX(i,e){1&i&&_e(0)}const h7=function(i,e){return{"p-highlight":i,"p-disabled":e}};function ZX(i,e){if(1&i){const t=Te();ze(0),B(1,"span",48),le("click",function(s){U(t);const r=x().$implicit;return W(x(6).onDateSelect(s,r))})("keydown",function(s){U(t);const r=x().$implicit,o=x(3).index;return W(x(3).onDateCellKeydown(s,r,o))}),A(2,KX,2,1,"ng-container",13),A(3,XX,1,0,"ng-container",35),H(),He()}if(2&i){const t=x().$implicit,n=x(6);C(1),M("ngClass",Lt(4,h7,n.isSelected(t),!t.selectable)),C(1),M("ngIf",!n.dateTemplate),C(1),M("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",xe(7,c7,t))}}const QX=function(i,e){return{"p-datepicker-other-month":i,"p-datepicker-today":e}};function JX(i,e){if(1&i&&(B(0,"td",47),A(1,ZX,4,9,"ng-container",13),H()),2&i){const t=e.$implicit,n=x(6);M("ngClass",Lt(2,QX,t.otherMonth,t.today)),C(1),M("ngIf",!t.otherMonth||n.showOtherMonths)}}function eZ(i,e){if(1&i&&(B(0,"tr"),A(1,YX,3,1,"td",43),A(2,JX,2,5,"td",44),H()),2&i){const t=e.$implicit,n=x(5);C(1),M("ngIf",n.showWeek),C(1),M("ngForOf",t)}}function tZ(i,e){if(1&i&&(B(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),A(4,WX,3,1,"th",38),A(5,$X,3,1,"th",39),H()(),B(6,"tbody"),A(7,eZ,3,2,"tr",40),H()()()),2&i){const t=x().$implicit,n=x(3);C(4),M("ngIf",n.showWeek),C(1),M("ngForOf",n.weekDays),C(2),M("ngForOf",t.dates)}}function nZ(i,e){if(1&i){const t=Te();B(0,"div",20)(1,"div",21),A(2,HX,2,0,"button",22),B(3,"div",23),A(4,BX,2,2,"button",24),A(5,jX,2,2,"button",25),A(6,UX,3,5,"span",26),H(),B(7,"button",27),le("keydown",function(s){return U(t),W(x(3).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(3).onNextButtonClick(s))}),Ze(8,"span",28),H()(),A(9,tZ,8,3,"div",29),H()}if(2&i){const t=e.index,n=x(3);C(2),M("ngIf",0===t),C(2),M("ngIf","date"===n.currentView),C(1),M("ngIf","year"!==n.currentView),C(1),M("ngIf","year"===n.currentView),C(1),V1("display",1===n.numberOfMonths||t===n.numberOfMonths-1?"inline-flex":"none"),C(2),M("ngIf","date"===n.currentView)}}function iZ(i,e){if(1&i){const t=Te();B(0,"span",51),le("click",function(s){const o=U(t).index;return W(x(4).onMonthSelect(s,o))})("keydown",function(s){const o=U(t).index;return W(x(4).onMonthCellKeydown(s,o))}),ke(1),H()}if(2&i){const t=e.$implicit,n=e.index,s=x(4);M("ngClass",Lt(2,h7,s.isMonthSelected(n),s.isMonthDisabled(n))),C(1),_n(" ",t," ")}}function sZ(i,e){if(1&i&&(B(0,"div",49),A(1,iZ,2,5,"span",50),H()),2&i){const t=x(3);C(1),M("ngForOf",t.monthPickerValues())}}const rZ=function(i){return{"p-highlight":i}};function oZ(i,e){if(1&i){const t=Te();B(0,"span",54),le("click",function(s){const o=U(t).$implicit;return W(x(4).onYearSelect(s,o))})("keydown",function(s){const o=U(t).$implicit;return W(x(4).onYearCellKeydown(s,o))}),ke(1),H()}if(2&i){const t=e.$implicit,n=x(4);M("ngClass",xe(2,rZ,n.isYearSelected(t))),C(1),_n(" ",t," ")}}function aZ(i,e){if(1&i&&(B(0,"div",52),A(1,oZ,2,4,"span",53),H()),2&i){const t=x(3);C(1),M("ngForOf",t.yearPickerValues())}}function lZ(i,e){if(1&i&&(ze(0),B(1,"div",16),A(2,nZ,10,7,"div",17),H(),A(3,sZ,2,1,"div",18),A(4,aZ,2,1,"div",19),He()),2&i){const t=x(2);C(2),M("ngForOf",t.months),C(1),M("ngIf","month"===t.currentView),C(1),M("ngIf","year"===t.currentView)}}function cZ(i,e){1&i&&(ze(0),ke(1,"0"),He())}function hZ(i,e){1&i&&(ze(0),ke(1,"0"),He())}function uZ(i,e){if(1&i&&(B(0,"div",60)(1,"span"),ke(2),H()()),2&i){const t=x(3);C(2),zt(t.timeSeparator)}}function dZ(i,e){1&i&&(ze(0),ke(1,"0"),He())}function pZ(i,e){if(1&i){const t=Te();B(0,"div",65)(1,"button",57),le("keydown",function(s){return U(t),W(x(3).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(3).incrementSecond(s))})("keydown.space",function(s){return U(t),W(x(3).incrementSecond(s))})("mousedown",function(s){return U(t),W(x(3).onTimePickerElementMouseDown(s,2,1))})("mouseup",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(3).onTimePickerElementMouseLeave())}),Ze(2,"span",58),H(),B(3,"span"),A(4,dZ,2,0,"ng-container",13),ke(5),H(),B(6,"button",57),le("keydown",function(s){return U(t),W(x(3).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(3).decrementSecond(s))})("keydown.space",function(s){return U(t),W(x(3).decrementSecond(s))})("mousedown",function(s){return U(t),W(x(3).onTimePickerElementMouseDown(s,2,-1))})("mouseup",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(3).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(3).onTimePickerElementMouseLeave())}),Ze(7,"span",59),H()()}if(2&i){const t=x(3);C(4),M("ngIf",t.currentSecond<10),C(1),zt(t.currentSecond)}}function fZ(i,e){if(1&i){const t=Te();B(0,"div",66)(1,"button",67),le("keydown",function(s){return U(t),W(x(3).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(3).toggleAMPM(s))})("keydown.enter",function(s){return U(t),W(x(3).toggleAMPM(s))}),Ze(2,"span",58),H(),B(3,"span"),ke(4),H(),B(5,"button",67),le("keydown",function(s){return U(t),W(x(3).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(3).toggleAMPM(s))})("keydown.enter",function(s){return U(t),W(x(3).toggleAMPM(s))}),Ze(6,"span",59),H()()}if(2&i){const t=x(3);C(4),zt(t.pm?"PM":"AM")}}function gZ(i,e){if(1&i){const t=Te();B(0,"div",55)(1,"div",56)(2,"button",57),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(2).incrementHour(s))})("keydown.space",function(s){return U(t),W(x(2).incrementHour(s))})("mousedown",function(s){return U(t),W(x(2).onTimePickerElementMouseDown(s,0,1))})("mouseup",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(2).onTimePickerElementMouseLeave())}),Ze(3,"span",58),H(),B(4,"span"),A(5,cZ,2,0,"ng-container",13),ke(6),H(),B(7,"button",57),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(2).decrementHour(s))})("keydown.space",function(s){return U(t),W(x(2).decrementHour(s))})("mousedown",function(s){return U(t),W(x(2).onTimePickerElementMouseDown(s,0,-1))})("mouseup",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(2).onTimePickerElementMouseLeave())}),Ze(8,"span",59),H()(),B(9,"div",60)(10,"span"),ke(11),H()(),B(12,"div",61)(13,"button",57),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(2).incrementMinute(s))})("keydown.space",function(s){return U(t),W(x(2).incrementMinute(s))})("mousedown",function(s){return U(t),W(x(2).onTimePickerElementMouseDown(s,1,1))})("mouseup",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(2).onTimePickerElementMouseLeave())}),Ze(14,"span",58),H(),B(15,"span"),A(16,hZ,2,0,"ng-container",13),ke(17),H(),B(18,"button",57),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("keydown.enter",function(s){return U(t),W(x(2).decrementMinute(s))})("keydown.space",function(s){return U(t),W(x(2).decrementMinute(s))})("mousedown",function(s){return U(t),W(x(2).onTimePickerElementMouseDown(s,1,-1))})("mouseup",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.enter",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("keyup.space",function(s){return U(t),W(x(2).onTimePickerElementMouseUp(s))})("mouseleave",function(){return U(t),W(x(2).onTimePickerElementMouseLeave())}),Ze(19,"span",59),H()(),A(20,uZ,3,1,"div",62),A(21,pZ,8,2,"div",63),A(22,fZ,7,1,"div",64),H()}if(2&i){const t=x(2);C(5),M("ngIf",t.currentHour<10),C(1),zt(t.currentHour),C(5),zt(t.timeSeparator),C(5),M("ngIf",t.currentMinute<10),C(1),zt(t.currentMinute),C(3),M("ngIf",t.showSeconds),C(1),M("ngIf",t.showSeconds),C(1),M("ngIf","12"==t.hourFormat)}}const u7=function(i){return[i]};function mZ(i,e){if(1&i){const t=Te();B(0,"div",68)(1,"button",69),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(2).onTodayButtonClick(s))}),H(),B(2,"button",69),le("keydown",function(s){return U(t),W(x(2).onContainerButtonKeydown(s))})("click",function(s){return U(t),W(x(2).onClearButtonClick(s))}),H()()}if(2&i){const t=x(2);C(1),M("label",t.getTranslation("today"))("ngClass",xe(4,u7,t.todayButtonStyleClass)),C(1),M("label",t.getTranslation("clear"))("ngClass",xe(6,u7,t.clearButtonStyleClass))}}function yZ(i,e){1&i&&_e(0)}const _Z=function(i,e,t,n,s,r){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":e,"p-datepicker-timeonly":t,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":s,"p-datepicker-touch-ui":r}},d7=function(i,e){return{showTransitionParams:i,hideTransitionParams:e}},vZ=function(i){return{value:"visibleTouchUI",params:i}},kZ=function(i){return{value:"visible",params:i}};function wZ(i,e){if(1&i){const t=Te();B(0,"div",10,11),le("@overlayAnimation.start",function(s){return U(t),W(x().onOverlayAnimationStart(s))})("@overlayAnimation.done",function(s){return U(t),W(x().onOverlayAnimationDone(s))})("click",function(s){return U(t),W(x().onOverlayClick(s))}),Yi(2),A(3,zX,1,0,"ng-container",12),A(4,lZ,5,3,"ng-container",13),A(5,gZ,23,8,"div",14),A(6,mZ,3,8,"div",15),Yi(7,1),A(8,yZ,1,0,"ng-container",12),H()}if(2&i){const t=x();ut(t.panelStyleClass),M("ngStyle",t.panelStyle)("ngClass",Mu(11,_Z,t.inline,t.disabled,t.timeOnly,t.numberOfMonths>1,"month"===t.view,t.touchUI))("@overlayAnimation",t.touchUI?xe(21,vZ,Lt(18,d7,t.showTransitionOptions,t.hideTransitionOptions)):xe(26,kZ,Lt(23,d7,t.showTransitionOptions,t.hideTransitionOptions)))("@.disabled",!0===t.inline),C(3),M("ngTemplateOutlet",t.headerTemplate),C(1),M("ngIf",!t.timeOnly),C(1),M("ngIf",(t.showTime||t.timeOnly)&&"date"===t.currentView),C(1),M("ngIf",t.showButtonBar),C(2),M("ngTemplateOutlet",t.footerTemplate)}}const xZ=[[["p-header"]],[["p-footer"]]],MZ=function(i,e,t,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":e,"p-calendar-disabled":t,"p-focus":n}},bZ=["p-header","p-footer"],CZ={provide:vi,useExisting:Ct(()=>EZ),multi:!0};let EZ=(()=>{class i{constructor(t,n,s,r,o,a){this.el=t,this.renderer=n,this.cd=s,this.zone=r,this.config=o,this.overlayService=a,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new ie,this.onBlur=new ie,this.onClose=new ie,this.onSelect=new ie,this.onClear=new ie,this.onInput=new ie,this.onTodayClick=new ie,this.onClearClick=new ie,this.onMonthChange=new ie,this.onYearChange=new ie,this.onClickOutside=new ie,this.onShow=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(l,c){return"12"==this.hourFormat?12===l?c?12:0:c?l+12:l:l}}set content(t){this.contentViewChild=t,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(t){this._view=t,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(t){if(this._defaultDate=t,this.initialized){const n=t||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(t){this._minDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(t){this._disabledDates=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(t){this._disabledDays=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(t){if(this._yearRange=t,t){const n=t.split(":"),s=parseInt(n[0]),r=parseInt(n[1]);this.populateYearOptions(s,r)}}get showTime(){return this._showTime}set showTime(t){this._showTime=t,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(t){this._responsiveOptions=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(t){this._numberOfMonths=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(t){this._firstDayOfWeek=t,this.createWeekDays()}set locale(t){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Iu();const t=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(t),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"date":default:this.dateTemplate=t.template;break;case"decade":this.decadeTemplate=t.template;break;case"disabledDate":this.disabledDateTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=q.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(t){return this.config.getTranslation(t)}populateYearOptions(t,n){this.yearOptions=[];for(let s=t;s<=n;s++)this.yearOptions.push(s)}createWeekDays(){this.weekDays=[];let t=this.getFirstDateOfWeek(),n=this.getTranslation(ms.DAY_NAMES_MIN);for(let s=0;s<7;s++)this.weekDays.push(n[t]),t=6==t?0:++t}monthPickerValues(){let t=[];for(let n=0;n<=11;n++)t.push(this.config.getTranslation("monthNamesShort")[n]);return t}yearPickerValues(){let t=[],n=this.currentYear-this.currentYear%10;for(let s=0;s<10;s++)t.push(n+s);return t}createMonths(t,n){this.months=this.months=[];for(let s=0;s<this.numberOfMonths;s++){let r=t+s,o=n;r>11&&(r=r%11-1,o=n+1),this.months.push(this.createMonth(r,o))}}getWeekNumber(t){let n=new Date(t.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let s=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((s-n.getTime())/864e5)/7)+1}createMonth(t,n){let s=[],r=this.getFirstDayOfMonthIndex(t,n),o=this.getDaysCountInMonth(t,n),a=this.getDaysCountInPrevMonth(t,n),l=1,c=new Date,h=[],u=Math.ceil((o+r)/7);for(let d=0;d<u;d++){let p=[];if(0==d){for(let g=a-r+1;g<=a;g++){let m=this.getPreviousMonthAndYear(t,n);p.push({day:g,month:m.month,year:m.year,otherMonth:!0,today:this.isToday(c,g,m.month,m.year),selectable:this.isSelectable(g,m.month,m.year,!0)})}let f=7-p.length;for(let g=0;g<f;g++)p.push({day:l,month:t,year:n,today:this.isToday(c,l,t,n),selectable:this.isSelectable(l,t,n,!1)}),l++}else for(let f=0;f<7;f++){if(l>o){let g=this.getNextMonthAndYear(t,n);p.push({day:l-o,month:g.month,year:g.year,otherMonth:!0,today:this.isToday(c,l-o,g.month,g.year),selectable:this.isSelectable(l-o,g.month,g.year,!0)})}else p.push({day:l,month:t,year:n,today:this.isToday(c,l,t,n),selectable:this.isSelectable(l,t,n,!1)});l++}this.showWeek&&h.push(this.getWeekNumber(new Date(p[0].year,p[0].month,p[0].day))),s.push(p)}return{month:t,year:n,dates:s,weekNumbers:h}}initTime(t){this.pm=t.getHours()>11,this.showTime?(this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds(),this.setCurrentHourPM(t.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let t=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-t,this.yearOptions[this.yearOptions.length-1]-t)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let t=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+t,this.yearOptions[this.yearOptions.length-1]+t)}}switchToMonthView(t){this.setCurrentView("month"),t.preventDefault()}switchToYearView(t){this.setCurrentView("year"),t.preventDefault()}onDateSelect(t,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((s,r)=>!this.isDateEquals(s,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{t.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),t.preventDefault()):t.preventDefault()}shouldSelectDate(t){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(t,n){"month"===this.view?this.onDateSelect(t,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(t,n){"year"===this.view?this.onDateSelect(t,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let t="";if(this.value)if(this.isSingleSelection())t=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)t+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(t+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let s=this.value[1];t=this.formatDateTime(this.value[0]),s&&(t+=" "+this.rangeSeparator+" "+this.formatDateTime(s))}this.inputFieldValue=t,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(t){let n=this.keepInvalid?t:null;return this.isValidDate(t)&&(this.timeOnly?n=this.formatTime(t):(n=this.formatDate(t,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(t)))),n}setCurrentHourPM(t){"12"==this.hourFormat?(this.pm=t>11,this.currentHour=t>=12?12==t?12:t-12:0==t?12:t):this.currentHour=t}setCurrentView(t){this.currentView=t,this.cd.detectChanges(),this.alignOverlay()}selectDate(t){let n=new Date(t.year,t.month,t.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let s=this.value[0],r=this.value[1];!r&&n.getTime()>=s.getTime()?r=n:(s=n,r=null),this.updateModel([s,r])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(t){if(this.value=t,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(s=>this.formatDateTime(s))),this.onModelChange(n)}}getFirstDayOfMonthIndex(t,n){let s=new Date;s.setDate(1),s.setMonth(t),s.setFullYear(n);let r=s.getDay()+this.getSundayIndex();return r>=7?r-7:r}getDaysCountInMonth(t,n){return 32-this.daylightSavingAdjust(new Date(n,t,32)).getDate()}getDaysCountInPrevMonth(t,n){let s=this.getPreviousMonthAndYear(t,n);return this.getDaysCountInMonth(s.month,s.year)}getPreviousMonthAndYear(t,n){let s,r;return 0===t?(s=11,r=n-1):(s=t-1,r=n),{month:s,year:r}}getNextMonthAndYear(t,n){let s,r;return 11===t?(s=0,r=n+1):(s=t+1,r=n),{month:s,year:r}}getSundayIndex(){let t=this.getFirstDateOfWeek();return t>0?7-t:0}isSelected(t){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,t);if(this.isMultipleSelection()){let n=!1;for(let s of this.value)if(n=this.isDateEquals(s,t),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],t)||this.isDateEquals(this.value[1],t)||this.isDateBetween(this.value[0],this.value[1],t):this.isDateEquals(this.value[0],t):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(t){if(this.isComparable()&&!this.isMultipleSelection()){const[n,s]=this.isRangeSelection()?this.value:[this.value,this.value],r=new Date(this.currentYear,t,1);return r>=n&&r<=(s??n)}return!1}isMonthDisabled(t){return!this.isSelectable(1,t,this.currentYear,!1)}isYearSelected(t){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===t}return!1}isDateEquals(t,n){return!!(t&&t instanceof Date)&&t.getDate()===n.day&&t.getMonth()===n.month&&t.getFullYear()===n.year}isDateBetween(t,n,s){if(t&&n){let o=new Date(s.year,s.month,s.day);return t.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(t,n,s,r){return t.getDate()===n&&t.getMonth()===s&&t.getFullYear()===r}isSelectable(t,n,s,r){let o=!0,a=!0,l=!0,c=!0;return!(r&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>s||this.minDate.getFullYear()===s&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>t))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<s||this.maxDate.getFullYear()===s&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<t))&&(a=!1),this.disabledDates&&(l=!this.isDateDisabled(t,n,s)),this.disabledDays&&(c=!this.isDayDisabled(t,n,s)),o&&a&&l&&c)}isDateDisabled(t,n,s){if(this.disabledDates)for(let r of this.disabledDates)if(r.getFullYear()===s&&r.getMonth()===n&&r.getDate()===t)return!0;return!1}isDayDisabled(t,n,s){if(this.disabledDays){let o=new Date(s,n,t).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(t){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(t)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(t){this.focus=!1,this.onBlur.emit(t),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(t,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}getMonthName(t){return this.config.getTranslation("monthNames")[t]}getYear(t){return"month"===this.currentView?this.currentYear:t.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(t){this.navigationState={backward:!0,button:!0},this.navBackward(t)}onNextButtonClick(t){this.navigationState={backward:!1,button:!0},this.navForward(t)}onContainerButtonKeydown(t){switch(t.which){case 9:this.inline||this.trapFocus(t);break;case 27:this.overlayVisible=!1,t.preventDefault()}}onInputKeydown(t){this.isKeydown=!0,40===t.keyCode&&this.contentViewChild?this.trapFocus(t):27===t.keyCode||13===t.keyCode?this.overlayVisible&&(this.overlayVisible=!1,t.preventDefault()):9===t.keyCode&&this.contentViewChild&&(q.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(t,n,s){const r=t.currentTarget,o=r.parentElement;switch(t.which){case 40:{r.tabIndex="-1";let a=q.index(o),l=o.parentElement.nextElementSibling;l?q.hasClass(l.children[a].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(t)):(l.children[a].children[0].tabIndex="0",l.children[a].children[0].focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 38:{r.tabIndex="-1";let a=q.index(o),l=o.parentElement.previousElementSibling;if(l){let c=l.children[a].children[0];q.hasClass(c,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(t)):(c.tabIndex="0",c.focus())}else this.navigationState={backward:!0},this.navBackward(t);t.preventDefault();break}case 37:{r.tabIndex="-1";let a=o.previousElementSibling;if(a){let l=a.children[0];q.hasClass(l,"p-disabled")||q.hasClass(l.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,s):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!0,s);t.preventDefault();break}case 39:{r.tabIndex="-1";let a=o.nextElementSibling;if(a){let l=a.children[0];q.hasClass(l,"p-disabled")?this.navigateToMonth(!1,s):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!1,s);t.preventDefault();break}case 13:case 32:this.onDateSelect(t,n),t.preventDefault();break;case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onMonthCellKeydown(t,n){const s=t.currentTarget;switch(t.which){case 38:case 40:{s.tabIndex="-1";var r=s.parentElement.children,o=q.index(s);let a=r[40===t.which?o+3:o-3];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{s.tabIndex="-1";let a=s.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{s.tabIndex="-1";let a=s.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:this.onMonthSelect(t,n),t.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onYearCellKeydown(t,n){const s=t.currentTarget;switch(t.which){case 38:case 40:{s.tabIndex="-1";var r=s.parentElement.children,o=q.index(s);let a=r[40===t.which?o+2:o-2];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{s.tabIndex="-1";let a=s.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{s.tabIndex="-1";let a=s.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:case 32:this.onYearSelect(t,n),t.preventDefault();break;case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.trapFocus(t)}}navigateToMonth(t,n){if(t)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let r=q.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=r[r.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let r=q.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");r.tabIndex="0",r.focus()}}updateFocus(){let t;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?q.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():q.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=q.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(t=n[n.length-1])}else t=q.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");t&&(t.tabIndex="0",t.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const t=this.contentViewChild?.nativeElement;let n;if("month"===this.currentView){let s=q.find(t,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=q.findSingle(t,".p-monthpicker .p-monthpicker-month.p-highlight");s.forEach(o=>o.tabIndex=-1),n=r||s[0],0===s.length&&q.find(t,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if("year"===this.currentView){let s=q.find(t,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=q.findSingle(t,".p-yearpicker .p-yearpicker-year.p-highlight");s.forEach(o=>o.tabIndex=-1),n=r||s[0],0===s.length&&q.find(t,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(n=q.findSingle(t,"span.p-highlight"),!n){let s=q.findSingle(t,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");n=s||q.findSingle(t,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}n&&(n.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{n.focus()},1),this.preventFocus=!1)}trapFocus(t){let n=q.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let s=n.indexOf(n[0].ownerDocument.activeElement);if(t.shiftKey)if(-1==s||0===s)if(this.focusTrap)n[n.length-1].focus();else{if(-1===s)return this.hideOverlay();if(0===s)return}else n[s-1].focus();else if(-1==s||s===n.length-1){if(!this.focusTrap&&-1!=s)return this.hideOverlay();n[0].focus()}else n[s+1].focus()}else n[0].focus();t.preventDefault()}onMonthDropdownChange(t){this.currentMonth=parseInt(t),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(t){this.currentYear=parseInt(t),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(t,n,s,r){let o=this.value;const a=this.convertTo24Hour(t,r);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const l=o?o.toDateString():null;return!(this.minDate&&l&&this.minDate.toDateString()===l&&(this.minDate.getHours()>a||this.minDate.getHours()===a&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>s))||this.maxDate&&l&&this.maxDate.toDateString()===l&&(this.maxDate.getHours()<a||this.maxDate.getHours()===a&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<s)))}incrementHour(t){let s=this.currentHour+this.stepHour,r=this.pm;"24"==this.hourFormat?s=s>=24?s-24:s:"12"==this.hourFormat&&(this.currentHour<12&&s>11&&(r=!this.pm),s=s>=13?s-12:s),this.validateTime(s,this.currentMinute,this.currentSecond,r)&&(this.currentHour=s,this.pm=r),t.preventDefault()}onTimePickerElementMouseDown(t,n,s){this.disabled||(this.repeat(t,null,n,s),t.preventDefault())}onTimePickerElementMouseUp(t){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(t,n,s,r){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(t,100,s,r),this.cd.markForCheck()},o),s){case 0:1===r?this.incrementHour(t):this.decrementHour(t);break;case 1:1===r?this.incrementMinute(t):this.decrementMinute(t);break;case 2:1===r?this.incrementSecond(t):this.decrementSecond(t)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(t){let n=this.currentHour-this.stepHour,s=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(s=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,s)&&(this.currentHour=n,this.pm=s),t.preventDefault()}incrementMinute(t){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),t.preventDefault()}decrementMinute(t){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),t.preventDefault()}incrementSecond(t){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),t.preventDefault()}decrementSecond(t){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),t.preventDefault()}updateTime(){let t=this.value;this.isRangeSelection()&&(t=this.value[1]||this.value[0]),this.isMultipleSelection()&&(t=this.value[this.value.length-1]),t=t?new Date(t.getTime()):new Date,t.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond),this.isRangeSelection()&&(t=this.value[1]?[this.value[0],t]:[t,null]),this.isMultipleSelection()&&(t=[...this.value.slice(0,-1),t]),this.updateModel(t),this.onSelect.emit(t),this.updateInputfield()}toggleAMPM(t){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),t.preventDefault()}onUserInput(t){if(!this.isKeydown)return;this.isKeydown=!1;let n=t.target.value;try{let s=this.parseValueFromString(n);this.isValidSelection(s)&&(this.updateModel(s),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(t)}isValidSelection(t){let n=!0;return this.isSingleSelection()?this.isSelectable(t.getDate(),t.getMonth(),t.getFullYear(),!1)||(n=!1):t.every(s=>this.isSelectable(s.getDate(),s.getMonth(),s.getFullYear(),!1))&&this.isRangeSelection()&&(n=t.length>1&&t[1]>t[0]),n}parseValueFromString(t){if(!t||0===t.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(t);else if(this.isMultipleSelection()){let s=t.split(this.multipleSeparator);n=[];for(let r of s)n.push(this.parseDateTime(r.trim()))}else if(this.isRangeSelection()){let s=t.split(" "+this.rangeSeparator+" ");n=[];for(let r=0;r<s.length;r++)n[r]=this.parseDateTime(s[r].trim())}return n}parseDateTime(t){let n,s=t.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,s[0],s[1]);else{const r=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?s.pop():null,a=s.pop();n=this.parseDate(s.join(" "),r),this.populateTime(n,a,o)}else n=this.parseDate(t,r)}return n}populateTime(t,n,s){if("12"==this.hourFormat&&!s)throw"Invalid Time";this.pm="PM"===s||"pm"===s;let r=this.parseTime(n);t.setHours(r.hour),t.setMinutes(r.minute),t.setSeconds(r.second)}isValidDate(t){return t instanceof Date&&pe.isNotEmpty(t)}updateUI(){let t=this.value;Array.isArray(t)&&(t=t[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:t&&this.isValidDate(t)?t:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=t.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Si.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Si.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(t));break;case"void":this.onOverlayHide(),this.onClose.emit(t)}}onOverlayAnimationDone(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Si.clear(t.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):q.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=q.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=q.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=q.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",q.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):q.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(t){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(t.style.zIndex)-1),q.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",s=>{this.disableModality()}),document.body.appendChild(this.mask),q.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(q.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,t=document.body.children;for(let s=0;s<t.length;s++)if(q.hasClass(t[s],"p-datepicker-mask-scrollblocker")){n=!0;break}n||q.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(t){if(this.value=t,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=t)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(ms.FIRST_DAY_OF_WEEK)}formatDate(t,n){if(!t)return"";let s;const r=h=>{const u=s+1<n.length&&n.charAt(s+1)===h;return u&&s++,u},o=(h,u,d)=>{let p=""+u;if(r(h))for(;p.length<d;)p="0"+p;return p},a=(h,u,d,p)=>r(h)?p[u]:d[u];let l="",c=!1;if(t)for(s=0;s<n.length;s++)if(c)"'"!==n.charAt(s)||r("'")?l+=n.charAt(s):c=!1;else switch(n.charAt(s)){case"d":l+=o("d",t.getDate(),2);break;case"D":l+=a("D",t.getDay(),this.getTranslation(ms.DAY_NAMES_SHORT),this.getTranslation(ms.DAY_NAMES));break;case"o":l+=o("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=o("m",t.getMonth()+1,2);break;case"M":l+=a("M",t.getMonth(),this.getTranslation(ms.MONTH_NAMES_SHORT),this.getTranslation(ms.MONTH_NAMES));break;case"y":l+=r("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this.ticksTo1970;break;case"'":r("'")?l+="'":c=!0;break;default:l+=n.charAt(s)}return l}formatTime(t){if(!t)return"";let n="",s=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return"12"==this.hourFormat&&s>11&&12!=s&&(s-=12),n+="12"==this.hourFormat&&0===s?12:s<10?"0"+s:s,n+=":",n+=r<10?"0"+r:r,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=t.getHours()>11?" PM":" AM"),n}parseTime(t){let n=t.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let r=parseInt(n[0]),o=parseInt(n[1]),a=this.showSeconds?parseInt(n[2]):null;if(isNaN(r)||isNaN(o)||r>23||o>59||"12"==this.hourFormat&&r>12||this.showSeconds&&(isNaN(a)||a>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==r&&this.pm?r+=12:!this.pm&&12===r&&(r-=12)),{hour:r,minute:o,second:a}}parseDate(t,n){if(null==n||null==t)throw"Invalid arguments";if(""===(t="object"==typeof t?t.toString():t+""))return null;let s,r,o,f,a=0,l="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),c=-1,h=-1,u=-1,d=-1,p=!1,g=v=>{let k=s+1<n.length&&n.charAt(s+1)===v;return k&&s++,k},m=v=>{let k=g(v),w="@"===v?14:"!"===v?20:"y"===v&&k?4:"o"===v?3:2,b=new RegExp("^\\d{"+("y"===v?w:1)+","+w+"}"),D=t.substring(a).match(b);if(!D)throw"Missing number at position "+a;return a+=D[0].length,parseInt(D[0],10)},y=(v,k,w)=>{let I=-1,b=g(v)?w:k,D=[];for(let P=0;P<b.length;P++)D.push([P,b[P]]);D.sort((P,z)=>-(P[1].length-z[1].length));for(let P=0;P<D.length;P++){let z=D[P][1];if(t.substr(a,z.length).toLowerCase()===z.toLowerCase()){I=D[P][0],a+=z.length;break}}if(-1!==I)return I+1;throw"Unknown name at position "+a},_=()=>{if(t.charAt(a)!==n.charAt(s))throw"Unexpected literal at position "+a;a++};for("month"===this.view&&(u=1),s=0;s<n.length;s++)if(p)"'"!==n.charAt(s)||g("'")?_():p=!1;else switch(n.charAt(s)){case"d":u=m("d");break;case"D":y("D",this.getTranslation(ms.DAY_NAMES_SHORT),this.getTranslation(ms.DAY_NAMES));break;case"o":d=m("o");break;case"m":h=m("m");break;case"M":h=y("M",this.getTranslation(ms.MONTH_NAMES_SHORT),this.getTranslation(ms.MONTH_NAMES));break;case"y":c=m("y");break;case"@":f=new Date(m("@")),c=f.getFullYear(),h=f.getMonth()+1,u=f.getDate();break;case"!":f=new Date((m("!")-this.ticksTo1970)/1e4),c=f.getFullYear(),h=f.getMonth()+1,u=f.getDate();break;case"'":g("'")?_():p=!0;break;default:_()}if(a<t.length&&(o=t.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===c?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=l?0:-100)),d>-1)for(h=1,u=d;r=this.getDaysCountInMonth(c,h-1),!(u<=r);)h++,u-=r;if("year"===this.view&&(h=-1===h?1:h,u=-1===u?1:u),f=this.daylightSavingAdjust(new Date(c,h-1,u)),f.getFullYear()!==c||f.getMonth()+1!==h||f.getDate()!==u)throw"Invalid date";return f}daylightSavingAdjust(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(t){let n=new Date,s={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(t,s),this.onTodayClick.emit(t)}onClearButtonClick(t){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(t)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let t="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(s=>!(!s.breakpoint||!s.numMonths)).sort((s,r)=>-1*s.breakpoint.localeCompare(r.breakpoint,void 0,{numeric:!0}));for(let s=0;s<n.length;s++){let{breakpoint:r,numMonths:o}=n[s],a=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let l=o;l<this.numberOfMonths;l++)a+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l+1}) {\n                                display: none !important;\n                            }\n                        `;t+=`\n                        @media screen and (max-width: ${r}) {\n                            ${a}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=t}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new am(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.isNavIconClicked(t)||this.el.nativeElement.contains(t.target)||this.overlay&&this.overlay.contains(t.target))}isNavIconClicked(t){return q.hasClass(t.target,"p-datepicker-prev")||q.hasClass(t.target,"p-datepicker-prev-icon")||q.hasClass(t.target,"p-datepicker-next")||q.hasClass(t.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!q.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Si.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Ps),Y(qn),Y(an),Y(Ba),Y(om))},i.\u0275cmp=$t({type:i,selectors:[["p-calendar"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(LX,5),dt(PX,5),dt(OX,5)),2&t){let s;Re(s=Ae())&&(n.containerViewChild=s.first),Re(s=Ae())&&(n.inputfieldViewChild=s.first),Re(s=Ae())&&(n.content=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,n){2&t&&Da("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Et([CZ])],ngContentSelectors:bZ,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(t,n){1&t&&(go(xZ),B(0,"span",0,1),A(2,VX,4,17,"ng-template",2),A(3,wZ,9,28,"div",3),H()),2&t&&(ut(n.styleClass),M("ngClass",Ra(6,MZ,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),C(2),M("ngIf",!n.inline),C(1),M("ngIf",n.inline||n.overlayVisible))},dependencies:[ei,xo,Nn,Xi,Ei,yx,ja],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Dc("overlayAnimation",[T0("visibleTouchUI",_i({transform:"translate(-50%,-50%)",opacity:1})),fs("void => visible",[_i({opacity:0,transform:"scaleY(0.8)"}),Fs("{{showTransitionParams}}",_i({opacity:1,transform:"*"}))]),fs("visible => void",[Fs("{{hideTransitionParams}}",_i({opacity:0}))]),fs("void => visibleTouchUI",[_i({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Fs("{{showTransitionParams}}")]),fs("visibleTouchUI => void",[Fs("{{hideTransitionParams}}",_i({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),SZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Ll,Fi,Yo,Ll,Fi]}),i})(),p7=(()=>{class i{constructor(t){this.host=t,this.focused=!1}ngAfterViewChecked(){if(!this.focused&&this.autofocus){const t=q.getFocusableElements(this.host.nativeElement);0===t.length&&this.host.nativeElement.focus(),t.length>0&&t[0].focus(),this.focused=!0}}}return i.\u0275fac=function(t){return new(t||i)(Y(rn))},i.\u0275dir=Ve({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),i})(),_x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();const IZ=["overlay"],TZ=["content"];function DZ(i,e){1&i&&_e(0)}const RZ=function(i,e,t){return{showTransitionParams:i,hideTransitionParams:e,transform:t}},AZ=function(i){return{value:"visible",params:i}},LZ=function(i){return{mode:i}},PZ=function(i){return{$implicit:i}};function OZ(i,e){if(1&i){const t=Te();B(0,"div",1,3),le("click",function(s){return U(t),W(x(2).onOverlayContentClick(s))})("@overlayContentAnimation.start",function(s){return U(t),W(x(2).onOverlayContentAnimationStart(s))})("@overlayContentAnimation.done",function(s){return U(t),W(x(2).onOverlayContentAnimationDone(s))}),Yi(2),A(3,DZ,1,0,"ng-container",4),H()}if(2&i){const t=x(2);ut(t.contentStyleClass),M("ngStyle",t.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",xe(11,AZ,ar(7,RZ,t.showTransitionOptions,t.hideTransitionOptions,t.transformOptions[t.modal?t.overlayResponsiveDirection:"default"]))),C(3),M("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",xe(15,PZ,xe(13,LZ,t.overlayMode)))}}const NZ=function(i,e,t,n,s,r,o,a,l,c,h,u,d,p){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":i,"p-overlay-center":e,"p-overlay-top":t,"p-overlay-top-start":n,"p-overlay-top-end":s,"p-overlay-bottom":r,"p-overlay-bottom-start":o,"p-overlay-bottom-end":a,"p-overlay-left":l,"p-overlay-left-start":c,"p-overlay-left-end":h,"p-overlay-right":u,"p-overlay-right-start":d,"p-overlay-right-end":p}};function FZ(i,e){if(1&i){const t=Te();B(0,"div",1,2),le("click",function(s){return U(t),W(x().onOverlayClick(s))}),A(2,OZ,4,17,"div",0),H()}if(2&i){const t=x();ut(t.styleClass),M("ngStyle",t.style)("ngClass",yk(5,NZ,[t.modal,t.modal&&"center"===t.overlayResponsiveDirection,t.modal&&"top"===t.overlayResponsiveDirection,t.modal&&"top-start"===t.overlayResponsiveDirection,t.modal&&"top-end"===t.overlayResponsiveDirection,t.modal&&"bottom"===t.overlayResponsiveDirection,t.modal&&"bottom-start"===t.overlayResponsiveDirection,t.modal&&"bottom-end"===t.overlayResponsiveDirection,t.modal&&"left"===t.overlayResponsiveDirection,t.modal&&"left-start"===t.overlayResponsiveDirection,t.modal&&"left-end"===t.overlayResponsiveDirection,t.modal&&"right"===t.overlayResponsiveDirection,t.modal&&"right-start"===t.overlayResponsiveDirection,t.modal&&"right-end"===t.overlayResponsiveDirection])),C(2),M("ngIf",t.visible)}}const VZ=["*"],zZ={provide:vi,useExisting:Ct(()=>f7),multi:!0},HZ=D0([_i({transform:"{{transform}}",opacity:0}),Fs("{{showTransitionParams}}")]),BZ=D0([Fs("{{hideTransitionParams}}",_i({transform:"{{transform}}",opacity:0}))]);let f7=(()=>{class i{constructor(t,n,s,r,o,a){this.document=t,this.el=n,this.renderer=s,this.config=r,this.overlayService=o,this.cd=a,this.visibleChange=new ie,this.onBeforeShow=new ie,this.onShow=new ie,this.onBeforeHide=new ie,this.onHide=new ie,this.onAnimationStart=new ie,this.onAnimationDone=new ie,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(t){this._visible=t,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(t){this._mode=t}get style(){return pe.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(t){this._style=t}get styleClass(){return pe.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(t){this._styleClass=t}get contentStyle(){return pe.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(t){this._contentStyle=t}get contentStyleClass(){return pe.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(t){this._contentStyleClass=t}get target(){const t=this._target||this.overlayOptions?.target;return void 0===t?"@prev":t}set target(t){this._target=t}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(t){this._appendTo=t}get autoZIndex(){const t=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===t||t}set autoZIndex(t){this._autoZIndex=t}get baseZIndex(){const t=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===t?0:t}set baseZIndex(t){this._baseZIndex=t}get showTransitionOptions(){const t=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===t?".12s cubic-bezier(0, 0, 0.2, 1)":t}set showTransitionOptions(t){this._showTransitionOptions=t}get hideTransitionOptions(){const t=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===t?".1s linear":t}set hideTransitionOptions(t){this._hideTransitionOptions=t}get listener(){return this._listener||this.overlayOptions?.listener}set listener(t){this._listener=t}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(t){this._responsive=t}get options(){return this._options}set options(t){this._options=t}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return q.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(t=>{t.getType(),this.contentTemplate=t.template})}show(t,n=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:t||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&q.focus(this.targetEl),this.modal&&q.addClass(this.document?.body,"p-overflow-hidden")}hide(t,n=!1){this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:t||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&q.focus(this.targetEl),this.modal&&q.removeClass(this.document?.body,"p-overflow-hidden")}alignOverlay(){!this.modal&&q.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(t){this._visible=t,this.visibleChange.emit(t)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(t){this.overlayService.add({originalEvent:t,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(t){switch(t.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&Si.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),q.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&q.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",t)}onOverlayContentAnimationDone(t){const n=this.overlayEl||t.element.parentElement;switch(t.toState){case"visible":this.show(n,!0),this.bindListeners();break;case"void":this.hide(n,!0),this.unbindListeners(),q.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Si.clear(n),this.modalVisible=!1}this.handleEvents("onAnimationDone",t)}handleEvents(t,n){this[t].emit(n),this.options&&this.options[t]&&this.options[t](n),this.config?.overlayOptions&&this.config?.overlayOptions[t]&&this.config?.overlayOptions[t](n)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new am(this.targetEl,t=>{(!this.listener||this.listener(t,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(t,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",t=>{const s=!(this.targetEl&&(this.targetEl.isSameNode(t.target)||!this.isOverlayClicked&&this.targetEl.contains(t.target))||this.isOverlayContentClicked);(this.listener?this.listener(t,{type:"outside",mode:this.overlayMode,valid:3!==t.which&&s}):s)&&this.hide(t),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen("window","resize",t=>{(this.listener?this.listener(t,{type:"resize",mode:this.overlayMode,valid:!q.isTouchDevice()}):!q.isTouchDevice())&&this.hide(t,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(q.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Si.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return i.\u0275fac=function(t){return new(t||i)(Y(Ci),Y(rn),Y(Ps),Y(Ba),Y(om),Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-overlay"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(IZ,5),dt(TZ,5)),2&t){let s;Re(s=Ae())&&(n.overlayViewChild=s.first),Re(s=Ae())&&(n.contentViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[Et([zZ])],ngContentSelectors:VZ,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&(go(),A(0,FZ,3,20,"div",0)),2&t&&M("ngIf",n.modalVisible)},dependencies:[ei,Nn,Xi,Ei],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[Dc("overlayContentAnimation",[fs(":enter",[R0(HZ)]),fs(":leave",[R0(BZ)])])]},changeDetection:0}),i})(),g7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Fi,Fi]}),i})();const jZ=["element"],qZ=["content"];function GZ(i,e){1&i&&_e(0)}const vx=function(i,e){return{$implicit:i,options:e}};function UZ(i,e){if(1&i&&(ze(0),A(1,GZ,1,0,"ng-container",7),He()),2&i){const t=x(2);C(1),M("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",Lt(2,vx,t.loadedItems,t.getContentOptions()))}}function WZ(i,e){1&i&&_e(0)}function $Z(i,e){if(1&i&&(ze(0),A(1,WZ,1,0,"ng-container",7),He()),2&i){const t=e.$implicit,n=e.index,s=x(3);C(1),M("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Lt(2,vx,t,s.getOptions(n)))}}const YZ=function(i){return{"p-scroller-loading":i}};function KZ(i,e){if(1&i&&(B(0,"div",8,9),A(2,$Z,2,5,"ng-container",10),H()),2&i){const t=x(2);M("ngClass",xe(4,YZ,t.d_loading))("ngStyle",t.contentStyle),C(2),M("ngForOf",t.loadedItems)("ngForTrackBy",t._trackBy||t.index)}}function XZ(i,e){1&i&&Ze(0,"div",11),2&i&&M("ngStyle",x(2).spacerStyle)}function ZZ(i,e){1&i&&_e(0)}const QZ=function(i){return{numCols:i}},m7=function(i){return{options:i}};function JZ(i,e){if(1&i&&(ze(0),A(1,ZZ,1,0,"ng-container",7),He()),2&i){const t=e.index,n=x(4);C(1),M("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",xe(4,m7,n.getLoaderOptions(t,n.both&&xe(2,QZ,n._numItemsInViewport.cols))))}}function eQ(i,e){if(1&i&&(ze(0),A(1,JZ,2,6,"ng-container",14),He()),2&i){const t=x(3);C(1),M("ngForOf",t.loaderArr)}}function tQ(i,e){1&i&&_e(0)}const nQ=function(){return{styleClass:"p-scroller-loading-icon"}};function iQ(i,e){if(1&i&&(ze(0),A(1,tQ,1,0,"ng-container",7),He()),2&i){const t=x(4);C(1),M("ngTemplateOutlet",t.loaderIconTemplate)("ngTemplateOutletContext",xe(3,m7,Ki(2,nQ)))}}function sQ(i,e){1&i&&Ze(0,"i",16)}function rQ(i,e){if(1&i&&(A(0,iQ,2,5,"ng-container",0),A(1,sQ,1,0,"ng-template",null,15,Os)),2&i){const t=dn(2);M("ngIf",x(3).loaderIconTemplate)("ngIfElse",t)}}const oQ=function(i){return{"p-component-overlay":i}};function aQ(i,e){if(1&i&&(B(0,"div",12),A(1,eQ,2,1,"ng-container",0),A(2,rQ,3,2,"ng-template",null,13,Os),H()),2&i){const t=dn(3),n=x(2);M("ngClass",xe(3,oQ,!n.loaderTemplate)),C(1),M("ngIf",n.loaderTemplate)("ngIfElse",t)}}const lQ=function(i,e,t){return{"p-scroller":!0,"p-scroller-inline":i,"p-both-scroll":e,"p-horizontal-scroll":t}};function cQ(i,e){if(1&i){const t=Te();ze(0),B(1,"div",2,3),le("scroll",function(s){return U(t),W(x().onContainerScroll(s))}),A(3,UZ,2,5,"ng-container",0),A(4,KZ,3,6,"ng-template",null,4,Os),A(6,XZ,1,1,"div",5),A(7,aQ,4,5,"div",6),H(),He()}if(2&i){const t=dn(5),n=x();C(1),ut(n._styleClass),M("ngStyle",n._style)("ngClass",ar(10,lQ,n.inline,n.both,n.horizontal)),tt("id",n._id)("tabindex",n.tabindex),C(2),M("ngIf",n.contentTemplate)("ngIfElse",t),C(3),M("ngIf",n._showSpacer),C(1),M("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function hQ(i,e){1&i&&_e(0)}const uQ=function(i,e){return{rows:i,columns:e}};function dQ(i,e){if(1&i&&(ze(0),A(1,hQ,1,0,"ng-container",7),He()),2&i){const t=x(2);C(1),M("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",Lt(5,vx,t.items,Lt(2,uQ,t._items,t.loadedColumns)))}}function pQ(i,e){if(1&i&&(Yi(0),A(1,dQ,2,8,"ng-container",17)),2&i){const t=x();C(1),M("ngIf",t.contentTemplate)}}const fQ=["*"];let kx=(()=>{class i{constructor(t,n){this.cd=t,this.zone=n,this.onLazyLoad=new ie,this.onScroll=new ie,this.onScrollIndexChange=new ie,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(t){this._id=t}get style(){return this._style}set style(t){this._style=t}get styleClass(){return this._styleClass}set styleClass(t){this._styleClass=t}get tabindex(){return this._tabindex}set tabindex(t){this._tabindex=t}get items(){return this._items}set items(t){this._items=t}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t}get scrollHeight(){return this._scrollHeight}set scrollHeight(t){this._scrollHeight=t}get scrollWidth(){return this._scrollWidth}set scrollWidth(t){this._scrollWidth=t}get orientation(){return this._orientation}set orientation(t){this._orientation=t}get step(){return this._step}set step(t){this._step=t}get delay(){return this._delay}set delay(t){this._delay=t}get resizeDelay(){return this._resizeDelay}set resizeDelay(t){this._resizeDelay=t}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=t}get inline(){return this._inline}set inline(t){this._inline=t}get lazy(){return this._lazy}set lazy(t){this._lazy=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(t){this._loaderDisabled=t}get columns(){return this._columns}set columns(t){this._columns=t}get showSpacer(){return this._showSpacer}set showSpacer(t){this._showSpacer=t}get showLoader(){return this._showLoader}set showLoader(t){this._showLoader=t}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(t){this._numToleratedItems=t}get loading(){return this._loading}set loading(t){this._loading=t}get autoSize(){return this._autoSize}set autoSize(t){this._autoSize=t}get trackBy(){return this._trackBy}set trackBy(t){this._trackBy=t}get options(){return this._options}set options(t){this._options=t,t&&"object"==typeof t&&Object.entries(t).forEach(([n,s])=>this[`_${n}`]!==s&&(this[`_${n}`]=s))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(t=>this._columns?t:t.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(t){let n=!1;if(t.loading){const{previousValue:s,currentValue:r}=t.loading;this.lazy&&s!==r&&r!==this.d_loading&&(this.d_loading=r,n=!0)}if(t.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),t.numToleratedItems){const{previousValue:s,currentValue:r}=t.numToleratedItems;s!==r&&r!==this.d_numToleratedItems&&(this.d_numToleratedItems=r)}if(t.options){const{previousValue:s,currentValue:r}=t.options;this.lazy&&s?.loading!==r?.loading&&r?.loading!==this.d_loading&&(this.d_loading=r.loading,n=!0),s?.numToleratedItems!==r?.numToleratedItems&&r?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=r.numToleratedItems)}this.initialized&&!n&&(t.items?.previousValue?.length!==t.items?.currentValue?.length||t.itemSize||t.scrollHeight||t.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"item":default:this.itemTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"loadericon":this.loaderIconTemplate=t.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){q.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=q.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=q.getHeight(this.elementViewChild.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(t){this.contentEl=t||this.contentViewChild?.nativeElement||q.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(t){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(t)}scrollToIndex(t,n="auto"){const{numToleratedItems:s}=this.calculateNumItems(),r=this.getContentPosition(),o=(c=0,h)=>c<=h?0:c,a=(c,h,u)=>c*h+u,l=(c=0,h=0)=>this.scrollTo({left:c,top:h,behavior:n});this.both?(this.first={rows:o(t[0],s[0]),cols:o(t[1],s[1])},l(a(this.first.cols,this._itemSize[1],r.left),a(this.first.rows,this._itemSize[0],r.top))):(this.first=o(t,s),this.horizontal?l(a(this.first,this._itemSize,r.left),0):l(0,a(this.first,this._itemSize,r.top)))}scrollInView(t,n,s="auto"){if(n){const{first:r,viewport:o}=this.getRenderedRange(),a=(h=0,u=0)=>this.scrollTo({left:h,top:u,behavior:s}),c="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-r.rows>t[0]?a(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-r.cols>t[1]&&a((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-r>t){const h=(o.first-1)*this._itemSize;this.horizontal?a(h,0):a(0,h)}}else if(c)if(this.both)o.last.rows-r.rows<=t[0]+1?a(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-r.cols<=t[1]+1&&a((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-r<=t+1){const h=(o.first+1)*this._itemSize;this.horizontal?a(h,0):a(0,h)}}else this.scrollToIndex(t,s)}getRenderedRange(){const t=(r,o)=>Math.floor(r/(o||r));let n=this.first,s=0;if(this.elementViewChild?.nativeElement){const{scrollTop:r,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:t(r,this._itemSize[0]),cols:t(o,this._itemSize[1])},s={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=t(this.horizontal?o:r,this._itemSize),s=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:s}}}calculateNumItems(){const t=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-t.left:0,s=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-t.top:0,r=(c,h)=>Math.ceil(c/(h||c)),o=c=>Math.ceil(c/2),a=this.both?{rows:r(s,this._itemSize[0]),cols:r(n,this._itemSize[1])}:r(this.horizontal?n:s,this._itemSize);return{numItemsInViewport:a,numToleratedItems:this.d_numToleratedItems||(this.both?[o(a.rows),o(a.cols)]:o(a))}}calculateOptions(){const{numItemsInViewport:t,numToleratedItems:n}=this.calculateNumItems(),s=(a,l,c,h=!1)=>this.getLast(a+l+(a<c?2:3)*c,h),r=this.first,o=this.both?{rows:s(this.first.rows,t.rows,n[0]),cols:s(this.first.cols,t.cols,n[1],!0)}:s(this.first,t,n);this.last=o,this.numItemsInViewport=t,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:t.rows}).map(()=>Array.from({length:t.cols})):Array.from({length:t})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:r.cols}:0:r,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:t,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(t<this.defaultWidth?t:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(t=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,t):0}getContentPosition(){if(this.contentEl){const t=getComputedStyle(this.contentEl),n=parseFloat(t.paddingLeft)+Math.max(parseFloat(t.left)||0,0),s=parseFloat(t.paddingRight)+Math.max(parseFloat(t.right)||0,0),r=parseFloat(t.paddingTop)+Math.max(parseFloat(t.top)||0,0),o=parseFloat(t.paddingBottom)+Math.max(parseFloat(t.bottom)||0,0);return{left:n,right:s,top:r,bottom:o,x:n+s,y:r+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const t=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||t.offsetWidth}px`,s=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||t.offsetHeight}px`,r=(o,a)=>this.elementViewChild.nativeElement.style[o]=a;this.both||this.horizontal?(r("height",s),r("width",n)):r("height",s)}}setSpacerSize(){if(this._items){const t=this.getContentPosition(),n=(s,r,o,a=0)=>this.spacerStyle={...this.spacerStyle,[`${s}`]:(r||[]).length*o+a+"px"};this.both?(n("height",this._items,this._itemSize[0],t.y),n("width",this._columns||this._items[1],this._itemSize[1],t.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,t.x):n("height",this._items,this._itemSize,t.y)}}setContentPosition(t){if(this.contentEl&&!this._appendOnly){const n=t?t.first:this.first,s=(o,a)=>o*a,r=(o=0,a=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${a}px, 0)`};if(this.both)r(s(n.cols,this._itemSize[1]),s(n.rows,this._itemSize[0]));else{const o=s(n,this._itemSize);this.horizontal?r(o,0):r(0,o)}}}onScrollPositionChange(t){const n=t.target,s=this.getContentPosition(),r=(m,y)=>m?m>y?m-y:m:0,o=(m,y)=>Math.floor(m/(y||m)),a=(m,y,_,v,k,w)=>m<=k?k:w?_-v-k:y+k-1,l=(m,y,_,v,k,w,I)=>m<=w?0:Math.max(0,I?m<y?_:m-w:m>y?_:m-2*w),c=(m,y,_,v,k,w=!1)=>{let I=y+v+2*k;return m>=k&&(I+=k+1),this.getLast(I,w)},h=r(n.scrollTop,s.top),u=r(n.scrollLeft,s.left);let d=this.both?{rows:0,cols:0}:0,p=this.last,f=!1,g=this.lastScrollPos;if(this.both){const m=this.lastScrollPos.top<=h,y=this.lastScrollPos.left<=u;if(!this._appendOnly||this._appendOnly&&(m||y)){const _={rows:o(h,this._itemSize[0]),cols:o(u,this._itemSize[1])},v={rows:a(_.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],m),cols:a(_.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],y)};d={rows:l(_.rows,v.rows,this.first.rows,0,0,this.d_numToleratedItems[0],m),cols:l(_.cols,v.cols,this.first.cols,0,0,this.d_numToleratedItems[1],y)},p={rows:c(_.rows,d.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:c(_.cols,d.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},f=d.rows!==this.first.rows||p.rows!==this.last.rows||d.cols!==this.first.cols||p.cols!==this.last.cols,g={top:h,left:u}}}else{const m=this.horizontal?u:h,y=this.lastScrollPos<=m;if(!this._appendOnly||this._appendOnly&&y){const _=o(m,this._itemSize);d=l(_,a(_,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,y),this.first,0,0,this.d_numToleratedItems,y),p=c(_,d,0,this.numItemsInViewport,this.d_numToleratedItems),f=d!==this.first||p!==this.last,g=m}}return{first:d,last:p,isRangeChanged:f,scrollPos:g}}onScrollChange(t){const{first:n,last:s,isRangeChanged:r,scrollPos:o}=this.onScrollPositionChange(t);if(r){const a={first:n,last:s};if(this.setContentPosition(a),this.first=n,this.last=s,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",a),this._lazy&&this.isPageChanged){const l={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):n,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:s,this.items.length)};(this.lazyLoadState.first!==l.first||this.lazyLoadState.last!==l.last)&&this.handleEvents("onLazyLoad",l),this.lazyLoadState=l}}}onContainerScroll(t){if(this.handleEvents("onScroll",{originalEvent:t}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(t);(n||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(t)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(q.isVisible(this.elementViewChild?.nativeElement)){const[t,n]=[q.getWidth(this.elementViewChild.nativeElement),q.getHeight(this.elementViewChild.nativeElement)],[s,r]=[t!==this.defaultWidth,n!==this.defaultHeight];(this.both?s||r:this.horizontal?s:this.vertical&&r)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=t,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(t,n){return this.options&&this.options[t]?this.options[t](n):this[t].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:t=>this.getOptions(t),loading:this.d_loading,getLoaderOptions:(t,n)=>this.getLoaderOptions(t,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(t){const n=(this._items||[]).length,s=this.both?this.first.rows+t:this.first+t;return{index:s,count:n,first:0===s,last:s===n-1,even:s%2==0,odd:s%2!=0}}getLoaderOptions(t,n){const s=this.loaderArr.length;return{index:t,count:s,first:0===t,last:t===s-1,even:t%2==0,odd:t%2!=0,...n}}}return i.\u0275fac=function(t){return new(t||i)(Y(qn),Y(an))},i.\u0275cmp=$t({type:i,selectors:[["p-scroller"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(jZ,5),dt(qZ,5)),2&t){let s;Re(s=Ae())&&(n.elementViewChild=s.first),Re(s=Ae())&&(n.contentViewChild=s.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[Pi],ngContentSelectors:fQ,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(t,n){if(1&t&&(go(),A(0,cQ,8,14,"ng-container",0),A(1,pQ,2,1,"ng-template",null,1,Os)),2&t){const s=dn(2);M("ngIf",!n._disabled)("ngIfElse",s)}},dependencies:[ei,xo,Nn,Xi,Ei],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),i})(),Tu=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})(),gQ=(()=>{class i{constructor(t,n,s){this.el=t,this.zone=n,this.config=s,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let t=this.getTarget(this.el.nativeElement);t.addEventListener("focus",this.focusListener),t.addEventListener("blur",this.blurListener)}})}ngOnChanges(t){t.tooltipPosition&&this.setOption({tooltipPosition:t.tooltipPosition.currentValue}),t.tooltipEvent&&this.setOption({tooltipEvent:t.tooltipEvent.currentValue}),t.appendTo&&this.setOption({appendTo:t.appendTo.currentValue}),t.positionStyle&&this.setOption({positionStyle:t.positionStyle.currentValue}),t.tooltipStyleClass&&this.setOption({tooltipStyleClass:t.tooltipStyleClass.currentValue}),t.tooltipZIndex&&this.setOption({tooltipZIndex:t.tooltipZIndex.currentValue}),t.escape&&this.setOption({escape:t.escape.currentValue}),t.showDelay&&this.setOption({showDelay:t.showDelay.currentValue}),t.hideDelay&&this.setOption({hideDelay:t.hideDelay.currentValue}),t.life&&this.setOption({life:t.life.currentValue}),t.positionTop&&this.setOption({positionTop:t.positionTop.currentValue}),t.positionLeft&&this.setOption({positionLeft:t.positionLeft.currentValue}),t.disabled&&this.setOption({disabled:t.disabled.currentValue}),t.text&&(this.setOption({tooltipLabel:t.text.currentValue}),this.active&&(t.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),t.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...t.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(t){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(t){this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onClick(t){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let t=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},t)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let t=document.createElement("div");t.className="p-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?q.appendChild(this.container,this.el.nativeElement):q.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),q.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Si.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Si.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+q.getWindowScrollLeft(),top:t.top+q.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),n=t.left+q.getOuterWidth(this.el.nativeElement),s=t.top+(q.getOuterHeight(this.el.nativeElement)-q.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),n=t.left-q.getOuterWidth(this.container),s=t.top+(q.getOuterHeight(this.el.nativeElement)-q.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),n=t.left+(q.getOuterWidth(this.el.nativeElement)-q.getOuterWidth(this.container))/2,s=t.top-q.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),n=t.left+(q.getOuterWidth(this.el.nativeElement)-q.getOuterWidth(this.container))/2,s=t.top+q.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(t){this._tooltipOptions={...this._tooltipOptions,...t}}getOption(t){return this._tooltipOptions[t]}getTarget(t){return q.hasClass(t,"p-inputwrapper")?q.findSingle(t,"input"):t}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+t;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let t=this.container.getBoundingClientRect(),n=t.top,s=t.left,r=q.getOuterWidth(this.container),o=q.getOuterHeight(this.container),a=q.getViewport();return s+r>a.width||s<0||n<0||n+o>a.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new am(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let t=this.getTarget(this.el.nativeElement);t.removeEventListener("focus",this.focusListener),t.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):q.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Si.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(an),Y(Ba))},i.\u0275dir=Ve({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Pi]}),i})(),mQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();function yQ(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x();C(1),zt(t.label||"empty")}}function _Q(i,e){1&i&&_e(0)}const gp=function(i){return{height:i}},vQ=function(i,e){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":e}},wx=function(i){return{$implicit:i}},kQ=["container"],wQ=["filter"],xQ=["in"],MQ=["editableInput"],bQ=["items"],CQ=["scroller"],EQ=["overlay"];function SQ(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(2);C(1),zt(t.label||"empty")}}function IQ(i,e){1&i&&_e(0)}const TQ=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function DQ(i,e){if(1&i&&(B(0,"span",14),A(1,SQ,2,1,"ng-container",15),A(2,IQ,1,0,"ng-container",16),H()),2&i){const t=x();M("ngClass",xe(9,TQ,null==t.label||0===t.label.length))("pTooltip",t.tooltip)("tooltipPosition",t.tooltipPosition)("positionStyle",t.tooltipPositionStyle)("tooltipStyleClass",t.tooltipStyleClass),tt("id",t.labelId),C(1),M("ngIf",!t.selectedItemTemplate),C(1),M("ngTemplateOutlet",t.selectedItemTemplate)("ngTemplateOutletContext",xe(11,wx,t.selectedOption))}}const RQ=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function AQ(i,e){if(1&i&&(B(0,"span",17),ke(1),H()),2&i){const t=x();M("ngClass",xe(2,RQ,null==t.placeholder||0===t.placeholder.length)),C(1),zt(t.placeholder||"empty")}}function LQ(i,e){if(1&i){const t=Te();B(0,"input",18,19),le("input",function(s){return U(t),W(x().onEditableInputChange(s))})("focus",function(s){return U(t),W(x().onEditableInputFocus(s))})("blur",function(s){return U(t),W(x().onInputBlur(s))}),H()}if(2&i){const t=x();M("disabled",t.disabled),tt("maxlength",t.maxlength)("placeholder",t.placeholder)("aria-expanded",t.overlayVisible)}}function PQ(i,e){if(1&i){const t=Te();B(0,"i",20),le("click",function(s){return U(t),W(x().clear(s))}),H()}}function OQ(i,e){1&i&&_e(0)}function NQ(i,e){1&i&&_e(0)}const y7=function(i){return{options:i}};function FQ(i,e){if(1&i&&(ze(0),A(1,NQ,1,0,"ng-container",16),He()),2&i){const t=x(3);C(1),M("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",xe(2,y7,t.filterOptions))}}function VQ(i,e){if(1&i){const t=Te();B(0,"div",30)(1,"input",31,32),le("keydown.enter",function(s){return s.preventDefault()})("keydown",function(s){return U(t),W(x(3).onKeydown(s,!1))})("input",function(s){return U(t),W(x(3).onFilterInputChange(s))}),H(),Ze(3,"span",33),H()}if(2&i){const t=x(3);C(1),M("value",t.filterValue||""),tt("placeholder",t.filterPlaceholder)("aria-label",t.ariaFilterLabel)("aria-activedescendant",t.overlayVisible?"p-highlighted-option":t.labelId)}}function zQ(i,e){if(1&i&&(B(0,"div",27),le("click",function(n){return n.stopPropagation()}),A(1,FQ,2,4,"ng-container",28),A(2,VQ,4,4,"ng-template",null,29,Os),H()),2&i){const t=dn(3),n=x(2);C(1),M("ngIf",n.filterTemplate)("ngIfElse",t)}}function HQ(i,e){1&i&&_e(0)}const _7=function(i,e){return{$implicit:i,options:e}};function BQ(i,e){if(1&i&&A(0,HQ,1,0,"ng-container",16),2&i){const t=e.$implicit,n=e.options;x(2),M("ngTemplateOutlet",dn(7))("ngTemplateOutletContext",Lt(2,_7,t,n))}}function jQ(i,e){1&i&&_e(0)}function qQ(i,e){if(1&i&&A(0,jQ,1,0,"ng-container",16),2&i){const t=e.options;M("ngTemplateOutlet",x(4).loaderTemplate)("ngTemplateOutletContext",xe(2,y7,t))}}function GQ(i,e){1&i&&(ze(0),A(1,qQ,1,4,"ng-template",36),He())}function UQ(i,e){if(1&i){const t=Te();B(0,"p-scroller",34,35),le("onLazyLoad",function(s){return U(t),W(x(2).onLazyLoad.emit(s))}),A(2,BQ,1,5,"ng-template",13),A(3,GQ,2,0,"ng-container",15),H()}if(2&i){const t=x(2);ai(xe(8,gp,t.scrollHeight)),M("items",t.optionsToDisplay)("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("lazy",t.lazy)("options",t.virtualScrollOptions),C(3),M("ngIf",t.loaderTemplate)}}function WQ(i,e){1&i&&_e(0)}const $Q=function(){return{}};function YQ(i,e){if(1&i&&(ze(0),A(1,WQ,1,0,"ng-container",16),He()),2&i){x();const t=dn(7),n=x();C(1),M("ngTemplateOutlet",t)("ngTemplateOutletContext",Lt(3,_7,n.optionsToDisplay,Ki(2,$Q)))}}function KQ(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x().$implicit,n=x(4);C(1),zt(n.getOptionGroupLabel(t)||"empty")}}function XQ(i,e){1&i&&_e(0)}function ZQ(i,e){1&i&&_e(0)}const v7=function(i,e){return{$implicit:i,selectedOption:e}};function QQ(i,e){if(1&i&&(B(0,"li",42),A(1,KQ,2,1,"span",15),A(2,XQ,1,0,"ng-container",16),H(),A(3,ZQ,1,0,"ng-container",16)),2&i){const t=e.$implicit,n=x(2).options,s=dn(5),r=x(2);M("ngStyle",xe(6,gp,n.itemSize+"px")),C(1),M("ngIf",!r.groupTemplate),C(1),M("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",xe(8,wx,t)),C(1),M("ngTemplateOutlet",s)("ngTemplateOutletContext",Lt(10,v7,r.getOptionGroupChildren(t),r.selectedOption))}}function JQ(i,e){if(1&i&&(ze(0),A(1,QQ,4,13,"ng-template",41),He()),2&i){const t=x().$implicit;C(1),M("ngForOf",t)}}function eJ(i,e){1&i&&_e(0)}function tJ(i,e){if(1&i&&(ze(0),A(1,eJ,1,0,"ng-container",16),He()),2&i){const t=x().$implicit,n=dn(5),s=x(2);C(1),M("ngTemplateOutlet",n)("ngTemplateOutletContext",Lt(2,v7,t,s.selectedOption))}}function nJ(i,e){if(1&i){const t=Te();B(0,"p-dropdownItem",43),le("onClick",function(s){return U(t),W(x(4).onItemClick(s))}),H()}if(2&i){const t=e.$implicit,n=x().selectedOption,s=x(3);M("option",t)("selected",n==t)("label",s.getOptionLabel(t))("disabled",s.isOptionDisabled(t))("template",s.itemTemplate)}}function iJ(i,e){1&i&&A(0,nJ,1,5,"ng-template",41),2&i&&M("ngForOf",e.$implicit)}function sJ(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(4);C(1),_n(" ",t.emptyFilterMessageLabel," ")}}function rJ(i,e){1&i&&_e(0,null,45)}function oJ(i,e){if(1&i&&(B(0,"li",44),A(1,sJ,2,1,"ng-container",28),A(2,rJ,2,0,"ng-container",22),H()),2&i){const t=x().options,n=x(2);M("ngStyle",xe(4,gp,t.itemSize+"px")),C(1),M("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),C(1),M("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function aJ(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(4);C(1),_n(" ",t.emptyMessageLabel," ")}}function lJ(i,e){1&i&&_e(0,null,46)}function cJ(i,e){if(1&i&&(B(0,"li",44),A(1,aJ,2,1,"ng-container",28),A(2,lJ,2,0,"ng-container",22),H()),2&i){const t=x().options,n=x(2);M("ngStyle",xe(4,gp,t.itemSize+"px")),C(1),M("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),C(1),M("ngTemplateOutlet",n.emptyTemplate)}}function hJ(i,e){if(1&i&&(B(0,"ul",37,38),A(2,JQ,2,1,"ng-container",15),A(3,tJ,2,5,"ng-container",15),A(4,iJ,1,1,"ng-template",null,39,Os),A(6,oJ,3,6,"li",40),A(7,cJ,3,6,"li",40),H()),2&i){const t=e.options,n=x(2);ai(t.contentStyle),M("ngClass",t.contentStyleClass),tt("id",n.listId),C(2),M("ngIf",n.group),C(1),M("ngIf",!n.group),C(3),M("ngIf",n.filterValue&&n.isEmpty()),C(1),M("ngIf",!n.filterValue&&n.isEmpty())}}function uJ(i,e){1&i&&_e(0)}function dJ(i,e){if(1&i&&(B(0,"div",21),A(1,OQ,1,0,"ng-container",22),A(2,zQ,4,2,"div",23),B(3,"div",24),A(4,UQ,4,10,"p-scroller",25),A(5,YQ,2,6,"ng-container",15),A(6,hJ,8,8,"ng-template",null,26,Os),H(),A(8,uJ,1,0,"ng-container",22),H()),2&i){const t=x();ut(t.panelStyleClass),M("ngClass","p-dropdown-panel p-component")("ngStyle",t.panelStyle),C(1),M("ngTemplateOutlet",t.headerTemplate),C(1),M("ngIf",t.filter),C(1),V1("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),C(1),M("ngIf",t.virtualScroll),C(1),M("ngIf",!t.virtualScroll),C(3),M("ngTemplateOutlet",t.footerTemplate)}}const pJ=function(i,e,t,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":e,"p-focus":t,"p-dropdown-clearable":n}},fJ={provide:vi,useExisting:Ct(()=>k7),multi:!0};let gJ=(()=>{class i{constructor(){this.onClick=new ie}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=$t({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&(B(0,"li",0),le("click",function(r){return n.onOptionClick(r)}),A(1,yQ,2,1,"span",1),A(2,_Q,1,0,"ng-container",2),H()),2&t&&(M("ngStyle",xe(8,gp,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",Lt(10,vQ,n.selected,n.disabled)),tt("aria-label",n.label)("aria-selected",n.selected),C(1),M("ngIf",!n.template),C(1),M("ngTemplateOutlet",n.template)("ngTemplateOutletContext",xe(13,wx,n.option)))},dependencies:[ei,Nn,Xi,Ei,ja],encapsulation:2}),i})(),k7=(()=>{class i{constructor(t,n,s,r,o,a){this.el=t,this.renderer=n,this.cd=s,this.zone=r,this.filterService=o,this.config=a,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new ie,this.onFilter=new ie,this.onFocus=new ie,this.onBlur=new ie,this.onClick=new ie,this.onShow=new ie,this.onHide=new ie,this.onClear=new ie,this.onLazyLoad=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=Iu()}get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=t,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(t){this._autoZIndex=t,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"selectedItem":this.selectedItemTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"loader":this.loaderTemplate=t.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:t=>this.onFilterInputChange(t),reset:()=>this.resetFilter()})}get options(){return this._options}set options(t){this._options=t,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&pe.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(ms.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(ms.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(t){return this.optionLabel?pe.resolveFieldData(t,this.optionLabel):t&&void 0!==t.label?t.label:t}getOptionValue(t){return this.optionValue?pe.resolveFieldData(t,this.optionValue):!this.optionLabel&&t&&void 0!==t.value?t.value:t}isOptionDisabled(t){return this.optionDisabled?pe.resolveFieldData(t,this.optionDisabled):!(!t||void 0===t.disabled)&&t.disabled}getOptionGroupLabel(t){return this.optionGroupLabel?pe.resolveFieldData(t,this.optionGroupLabel):t&&void 0!==t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?pe.resolveFieldData(t,this.optionGroupChildren):t.items}onItemClick(t){const n=t.option;this.isOptionDisabled(n)||(this.selectItem(t.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(t,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:t,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(q.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")&&q.scrollInView(this.itemsWrapper,q.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(t){this.filter&&this.resetFilter(),this.value=t,this.updateSelectedOption(t),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(t){this.selectedOption=this.findOption(t,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onMouseclick(t){this.disabled||this.readonly||this.isInputClick(t)||(this.onClick.emit(t),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(t){return q.hasClass(t.target,"p-dropdown-clear-icon")||t.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&t.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(t){this.focused=!0,this.hide(),this.onFocus.emit(t)}onEditableInputChange(t){this.value=t.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(t){if("visible"===t.toState){if(this.itemsWrapper=q.findSingle(this.overlayViewChild.el.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=q.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(t)}"void"===t.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(t))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onBlur.emit(t),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(t){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let s=t-1;0<=s;s--){let r=this.optionsToDisplay[s];if(!this.isOptionDisabled(r)){n=r;break}}if(!n)for(let s=this.optionsToDisplay.length-1;s>=t;s--){let r=this.optionsToDisplay[s];if(!this.isOptionDisabled(r)){n=r;break}}}return n}findNextEnabledOption(t){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let s=t+1;s<this.optionsToDisplay.length;s++){let r=this.optionsToDisplay[s];if(!this.isOptionDisabled(r)){n=r;break}}if(!n)for(let s=0;s<t;s++){let r=this.optionsToDisplay[s];if(!this.isOptionDisabled(r)){n=r;break}}}return n}onKeydown(t,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(t.which){case 40:if(!this.overlayVisible&&t.altKey)this.show();else if(this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==s){let r=s.itemIndex+1;r<this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex]).length?(this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex])[r]),this.selectedOptionUpdated=!0):this.optionsToDisplay[s.groupIndex+1]&&(this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,r=this.findNextEnabledOption(s);r&&(this.selectItem(t,r),this.selectedOptionUpdated=!0)}t.preventDefault();break;case 38:if(this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==s){let r=s.itemIndex-1;if(r>=0)this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex])[r]),this.selectedOptionUpdated=!0;else if(r<0){let o=this.optionsToDisplay[s.groupIndex-1];o&&(this.selectItem(t,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,r=this.findPrevEnabledOption(s);r&&(this.selectItem(t,r),this.selectedOptionUpdated=!0)}t.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),t.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),t.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!t.metaKey&&17!==t.which&&this.search(t)}}search(t){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=t.key;let s;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};s=this.searchOptionWithinGroup(r)}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;s=this.searchOption(++r)}s&&!this.isOptionDisabled(s)&&(this.selectItem(t,s),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(t){let n;return this.searchValue&&(n=this.searchOptionInRange(t,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,t))),n}searchOptionInRange(t,n){for(let s=t;s<n;s++){let r=this.optionsToDisplay[s];if(this.getOptionLabel(r).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(r))return r}return null}searchOptionWithinGroup(t){if(this.searchValue){for(let s=t.groupIndex;s<this.optionsToDisplay.length;s++)for(let r=t.groupIndex===s?t.itemIndex+1:0;r<this.getOptionGroupChildren(this.optionsToDisplay[s]).length;r++){let o=this.getOptionGroupChildren(this.optionsToDisplay[s])[r];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let s=0;s<=t.groupIndex;s++)for(let r=0;r<(t.groupIndex===s?t.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[s]).length);r++){let o=this.getOptionGroupChildren(this.optionsToDisplay[s])[r];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(t,n){let s=-1;if(n)for(let r=0;r<n.length;r++)if(null==t&&null==this.getOptionValue(n[r])||pe.equals(t,this.getOptionValue(n[r]),this.dataKey)){s=r;break}return s}findOptionGroupIndex(t,n){let s,r;if(n)for(let o=0;o<n.length&&(s=o,r=this.findOptionIndex(t,this.getOptionGroupChildren(n[o])),-1===r);o++);return-1!==r?{groupIndex:s,itemIndex:r}:-1}findOption(t,n,s){if(this.group&&!s){let r;if(n&&n.length)for(let o of n)if(r=this.findOption(t,this.getOptionGroupChildren(o),!0),r)break;return r}{let r=this.findOptionIndex(t,n);return-1!=r?n[r]:null}}onFilterInputChange(t){let n=t.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:t,filter:this._filterValue})}activateFilter(){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let s of this.options){let r=this.filterService.filter(this.getOptionGroupChildren(s),t,this.filterValue,this.filterMatchMode,this.filterLocale);r&&r.length&&n.push({...s,[this.optionGroupChildren]:r})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,t,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?q.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():q.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(t){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Ps),Y(qn),Y(an),Y(fx),Y(Ba))},i.\u0275cmp=$t({type:i,selectors:[["p-dropdown"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(kQ,5),dt(wQ,5),dt(xQ,5),dt(MQ,5),dt(bQ,5),dt(CQ,5),dt(EQ,5)),2&t){let s;Re(s=Ae())&&(n.containerViewChild=s.first),Re(s=Ae())&&(n.filterViewChild=s.first),Re(s=Ae())&&(n.accessibleViewChild=s.first),Re(s=Ae())&&(n.editableInputViewChild=s.first),Re(s=Ae())&&(n.itemsViewChild=s.first),Re(s=Ae())&&(n.scroller=s.first),Re(s=Ae())&&(n.overlayViewChild=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,n){2&t&&Da("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Et([fJ])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(t,n){1&t&&(B(0,"div",0,1),le("click",function(r){return n.onMouseclick(r)}),B(2,"div",2)(3,"input",3,4),le("focus",function(r){return n.onInputFocus(r)})("blur",function(r){return n.onInputBlur(r)})("keydown",function(r){return n.onKeydown(r,!0)}),H()(),A(5,DQ,3,13,"span",5),A(6,AQ,2,4,"span",6),A(7,LQ,2,4,"input",7),A(8,PQ,1,0,"i",8),B(9,"div",9),Ze(10,"span",10),H(),B(11,"p-overlay",11,12),le("visibleChange",function(r){return n.overlayVisible=r})("onAnimationStart",function(r){return n.onOverlayAnimationStart(r)})("onHide",function(){return n.hide()}),A(13,dJ,9,11,"ng-template",13),H()()),2&t&&(ut(n.styleClass),M("ngClass",Ra(27,pJ,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),C(3),M("disabled",n.disabled)("autofocus",n.autofocus),tt("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),C(2),M("ngIf",!n.editable&&null!=n.label),C(1),M("ngIf",!n.editable&&null==n.label),C(1),M("ngIf",n.editable),C(1),M("ngIf",n.isVisibleClearIcon),C(1),tt("aria-expanded",n.overlayVisible),C(1),M("ngClass",n.dropdownIcon),C(1),M("visible",n.overlayVisible)("options",n.overlayOptions)("target","@parent")("appendTo",n.appendTo)("autoZIndex",n.autoZIndex)("baseZIndex",n.baseZIndex)("showTransitionOptions",n.showTransitionOptions)("hideTransitionOptions",n.hideTransitionOptions))},dependencies:[ei,xo,Nn,Xi,Ei,f7,Ni,gQ,kx,p7,gJ],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),i})(),xx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,g7,Fi,mQ,Yo,Tu,_x,g7,Fi,Tu]}),i})(),mJ=(()=>{class i{constructor(t,n,s){this.el=t,this.ngModel=n,this.cd=s}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(t){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Oc,8),Y(qn))},i.\u0275dir=Ve({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(t,n){1&t&&le("input",function(r){return n.onInput(r)}),2&t&&Da("p-filled",n.filled)}}),i})(),Mx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();const yJ=["input"];function _J(i,e){if(1&i){const t=Te();B(0,"i",6),le("click",function(){return U(t),W(x().clear())}),H()}}const w7=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},x7=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function vJ(i,e){if(1&i){const t=Te();B(0,"span",7)(1,"button",8),le("mousedown",function(s){return U(t),W(x().onUpButtonMouseDown(s))})("mouseup",function(){return U(t),W(x().onUpButtonMouseUp())})("mouseleave",function(){return U(t),W(x().onUpButtonMouseLeave())})("keydown",function(s){return U(t),W(x().onUpButtonKeyDown(s))})("keyup",function(){return U(t),W(x().onUpButtonKeyUp())}),H(),B(2,"button",8),le("mousedown",function(s){return U(t),W(x().onDownButtonMouseDown(s))})("mouseup",function(){return U(t),W(x().onDownButtonMouseUp())})("mouseleave",function(){return U(t),W(x().onDownButtonMouseLeave())})("keydown",function(s){return U(t),W(x().onDownButtonKeyDown(s))})("keyup",function(){return U(t),W(x().onDownButtonKeyUp())}),H()()}if(2&i){const t=x();C(1),ut(t.incrementButtonClass),M("ngClass",Ki(10,w7))("icon",t.incrementButtonIcon)("disabled",t.disabled),C(1),ut(t.decrementButtonClass),M("ngClass",Ki(11,x7))("icon",t.decrementButtonIcon)("disabled",t.disabled)}}function kJ(i,e){if(1&i){const t=Te();B(0,"button",8),le("mousedown",function(s){return U(t),W(x().onUpButtonMouseDown(s))})("mouseup",function(){return U(t),W(x().onUpButtonMouseUp())})("mouseleave",function(){return U(t),W(x().onUpButtonMouseLeave())})("keydown",function(s){return U(t),W(x().onUpButtonKeyDown(s))})("keyup",function(){return U(t),W(x().onUpButtonKeyUp())}),H()}if(2&i){const t=x();ut(t.incrementButtonClass),M("ngClass",Ki(5,w7))("icon",t.incrementButtonIcon)("disabled",t.disabled)}}function wJ(i,e){if(1&i){const t=Te();B(0,"button",8),le("mousedown",function(s){return U(t),W(x().onDownButtonMouseDown(s))})("mouseup",function(){return U(t),W(x().onDownButtonMouseUp())})("mouseleave",function(){return U(t),W(x().onDownButtonMouseLeave())})("keydown",function(s){return U(t),W(x().onDownButtonKeyDown(s))})("keyup",function(){return U(t),W(x().onDownButtonKeyUp())}),H()}if(2&i){const t=x();ut(t.decrementButtonClass),M("ngClass",Ki(5,x7))("icon",t.decrementButtonIcon)("disabled",t.disabled)}}const xJ=function(i,e,t){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":e,"p-inputnumber-buttons-vertical":t}},MJ={provide:vi,useExisting:Ct(()=>M7),multi:!0};let M7=(()=>{class i{constructor(t,n){this.el=t,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new ie,this.onFocus=new ie,this.onBlur=new ie,this.onKeyDown=new ie,this.onClear=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1),this._disabled=t,this.timer&&this.clearTimer()}ngOnChanges(t){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(s=>!!t[s])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(t.map((s,r)=>[s,r]));this._numeral=new RegExp(`[${t.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=s=>n.get(s)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const t=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${t.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=t.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${t.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const t=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${t.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=t.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=t.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(t){if(null!=t){if("-"===t)return t;if(this.format){let s=new Intl.NumberFormat(this.locale,this.getOptions()).format(t);return this.prefix&&(s=this.prefix+s),this.suffix&&(s+=this.suffix),s}return t.toString()}return""}parseValue(t){let n=t.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let s=+n;return isNaN(s)?null:s}return null}repeat(t,n,s){if(this.readonly)return;let r=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,40,s)},r),this.spin(t,s)}spin(t,n){let s=this.step*n,r=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(r+s);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(t,o),this.handleOnInput(t,r,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(t){this.input.nativeElement.focus(),this.repeat(t,null,1),t.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(t){this.input.nativeElement.focus(),this.repeat(t,null,-1),t.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,-1)}onUserInput(t){this.readonly||(this.isSpecialChar&&(t.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(t){if(this.readonly)return;if(this.lastValue=t.target.value,t.shiftKey||t.altKey)return void(this.isSpecialChar=!0);let n=t.target.selectionStart,s=t.target.selectionEnd,r=t.target.value,o=null;switch(t.altKey&&t.preventDefault(),t.which){case 38:this.spin(t,1),t.preventDefault();break;case 40:this.spin(t,-1),t.preventDefault();break;case 37:this.isNumeralChar(r.charAt(n-1))||t.preventDefault();break;case 39:this.isNumeralChar(r.charAt(n))||t.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(t,o);break;case 8:if(t.preventDefault(),n===s){const a=r.charAt(n-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(r);if(this.isNumeralChar(a)){const h=this.getDecimalLength(r);if(this._group.test(a))this._group.lastIndex=0,o=r.slice(0,n-2)+r.slice(n-1);else if(this._decimal.test(a))this._decimal.lastIndex=0,h?this.input.nativeElement.setSelectionRange(n-1,n-1):o=r.slice(0,n-1)+r.slice(n);else if(l>0&&n>l){const u=this.isDecimalMode()&&(this.minFractionDigits||0)<h?"":"0";o=r.slice(0,n-1)+u+r.slice(n)}else 1===c?(o=r.slice(0,n-1)+"0"+r.slice(n),o=this.parseValue(o)>0?o:""):o=r.slice(0,n-1)+r.slice(n)}this.updateValue(t,o,null,"delete-single")}else o=this.deleteRange(r,n,s),this.updateValue(t,o,null,"delete-range");break;case 46:if(t.preventDefault(),n===s){const a=r.charAt(n),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(r);if(this.isNumeralChar(a)){const h=this.getDecimalLength(r);if(this._group.test(a))this._group.lastIndex=0,o=r.slice(0,n)+r.slice(n+2);else if(this._decimal.test(a))this._decimal.lastIndex=0,h?this.input.nativeElement.setSelectionRange(n+1,n+1):o=r.slice(0,n)+r.slice(n+1);else if(l>0&&n>l){const u=this.isDecimalMode()&&(this.minFractionDigits||0)<h?"":"0";o=r.slice(0,n)+u+r.slice(n+1)}else 1===c?(o=r.slice(0,n)+"0"+r.slice(n+1),o=this.parseValue(o)>0?o:""):o=r.slice(0,n)+r.slice(n+1)}this.updateValue(t,o,null,"delete-back-single")}else o=this.deleteRange(r,n,s),this.updateValue(t,o,null,"delete-range")}this.onKeyDown.emit(t)}onInputKeyPress(t){if(this.readonly)return;let n=t.which||t.keyCode,s=String.fromCharCode(n);const r=this.isDecimalSign(s),o=this.isMinusSign(s);13!=n&&t.preventDefault(),(48<=n&&n<=57||o||r)&&this.insert(t,s,{isDecimalSign:r,isMinusSign:o})}onPaste(t){if(!this.disabled&&!this.readonly){t.preventDefault();let n=(t.clipboardData||window.clipboardData).getData("Text");if(n){let s=this.parseValue(n);null!=s&&this.insert(t,s.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(t){return!(!this._minusSign.test(t)&&"-"!==t||(this._minusSign.lastIndex=0,0))}isDecimalSign(t){return!!this._decimal.test(t)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(t){let n=t.search(this._decimal);this._decimal.lastIndex=0;const r=t.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:r}}getCharIndexes(t){const n=t.search(this._decimal);this._decimal.lastIndex=0;const s=t.search(this._minusSign);this._minusSign.lastIndex=0;const r=t.search(this._suffix);this._suffix.lastIndex=0;const o=t.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:s,suffixCharIndex:r,currencyCharIndex:o}}insert(t,n,s={isDecimalSign:!1,isMinusSign:!1}){const r=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==r)return;let o=this.input.nativeElement.selectionStart,a=this.input.nativeElement.selectionEnd,l=this.input.nativeElement.value.trim();const{decimalCharIndex:c,minusCharIndex:h,suffixCharIndex:u,currencyCharIndex:d}=this.getCharIndexes(l);let p;if(s.isMinusSign)0===o&&(p=l,(-1===h||0!==a)&&(p=this.insertText(l,n,0,a)),this.updateValue(t,p,n,"insert"));else if(s.isDecimalSign)c>0&&o===c?this.updateValue(t,l,n,"insert"):(c>o&&c<a||-1===c&&this.maxFractionDigits)&&(p=this.insertText(l,n,o,a),this.updateValue(t,p,n,"insert"));else{const f=this.numberFormat.resolvedOptions().maximumFractionDigits,g=o!==a?"range-insert":"insert";if(c>0&&o>c){if(o+n.length-(c+1)<=f){const m=d>=o?d-1:u>=o?u:l.length;p=l.slice(0,o)+n+l.slice(o+n.length,m)+l.slice(m),this.updateValue(t,p,n,g)}}else p=this.insertText(l,n,o,a),this.updateValue(t,p,n,g)}}insertText(t,n,s,r){if(2===("."===n?n:n.split(".")).length){const a=t.slice(s,r).search(this._decimal);return this._decimal.lastIndex=0,a>0?t.slice(0,s)+this.formatValue(n)+t.slice(r):t||this.formatValue(n)}return r-s===t.length?this.formatValue(n):0===s?n+t.slice(r):r===t.length?t.slice(0,s)+n:t.slice(0,s)+n+t.slice(r)}deleteRange(t,n,s){let r;return r=s-n===t.length?"":0===n?t.slice(s):s===t.length?t.slice(0,n):t.slice(0,n)+t.slice(s),r}initCursor(){let t=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,s=n.length,r=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),t-=o;let a=n.charAt(t);if(this.isNumeralChar(a))return t+o;let l=t-1;for(;l>=0;){if(a=n.charAt(l),this.isNumeralChar(a)){r=l+o;break}l--}if(null!==r)this.input.nativeElement.setSelectionRange(r+1,r+1);else{for(l=t;l<s;){if(a=n.charAt(l),this.isNumeralChar(a)){r=l+o;break}l++}null!==r&&this.input.nativeElement.setSelectionRange(r,r)}return r||0}onInputClick(){!this.readonly&&this.input.nativeElement.value!==q.getSelection()&&this.initCursor()}isNumeralChar(t){return!(1!==t.length||!(this._numeral.test(t)||this._decimal.test(t)||this._group.test(t)||this._minusSign.test(t))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(t,n,s,r){let o=this.input.nativeElement.value,a=null;null!=n&&(a=this.parseValue(n),a=a||this.allowEmpty?a:0,this.updateInput(a,s,r,n),this.handleOnInput(t,o,a))}handleOnInput(t,n,s){this.isValueChanged(n,s)&&this.onInput.emit({originalEvent:t,value:s,formattedValue:n})}isValueChanged(t,n){return null===n&&null!==t||null!=n&&n!==("string"==typeof t?this.parseValue(t):t)}validateValue(t){return"-"===t||null==t?null:null!=this.min&&t<this.min?this.min:null!=this.max&&t>this.max?this.max:t}updateInput(t,n,s,r){n=n||"";let o=this.input.nativeElement.value,a=this.formatValue(t),l=o.length;if(a!==r&&(a=this.concatValues(a,r)),0===l){this.input.nativeElement.value=a,this.input.nativeElement.setSelectionRange(0,0);const h=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(h,h)}else{let c=this.input.nativeElement.selectionStart,h=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<a.length)return;this.input.nativeElement.value=a;let u=a.length;if("range-insert"===s){const d=this.parseValue((o||"").slice(0,c)),f=(null!==d?d.toString():"").split("").join(`(${this.groupChar})?`),g=new RegExp(f,"g");g.test(a);const m=n.split("").join(`(${this.groupChar})?`),y=new RegExp(m,"g");y.test(a.slice(g.lastIndex)),h=g.lastIndex+y.lastIndex,this.input.nativeElement.setSelectionRange(h,h)}else if(u===l)"insert"===s||"delete-back-single"===s?this.input.nativeElement.setSelectionRange(h+1,h+1):"delete-single"===s?this.input.nativeElement.setSelectionRange(h-1,h-1):("delete-range"===s||"spin"===s)&&this.input.nativeElement.setSelectionRange(h,h);else if("delete-back-single"===s){let d=o.charAt(h-1),p=o.charAt(h),f=l-u,g=this._group.test(p);g&&1===f?h+=1:!g&&this.isNumeralChar(d)&&(h+=-1*f+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(h,h)}else if("-"===o&&"insert"===s){this.input.nativeElement.setSelectionRange(0,0);const p=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(p,p)}else h+=u-l,this.input.nativeElement.setSelectionRange(h,h)}this.input.nativeElement.setAttribute("aria-valuenow",t)}concatValues(t,n){if(t&&n){let s=n.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?t.replace(this.suffixChar,"").split(this._decimal)[0]+n.replace(this.suffixChar,"").slice(s)+this.suffixChar:-1!==s?t.split(this._decimal)[0]+n.slice(s):t}return t}getDecimalLength(t){if(t){const n=t.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(t,n),this.onBlur.emit(t)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(t,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-inputNumber"]],viewQuery:function(t,n){if(1&t&&dt(yJ,5),2&t){let s;Re(s=Ae())&&(n.input=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,n){2&t&&Da("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Et([MJ]),Pi],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(t,n){1&t&&(B(0,"span",0)(1,"input",1,2),le("input",function(r){return n.onUserInput(r)})("keydown",function(r){return n.onInputKeyDown(r)})("keypress",function(r){return n.onInputKeyPress(r)})("paste",function(r){return n.onPaste(r)})("click",function(){return n.onInputClick()})("focus",function(r){return n.onInputFocus(r)})("blur",function(r){return n.onInputBlur(r)}),H(),A(3,_J,1,0,"i",3),A(4,vJ,3,12,"span",4),A(5,kJ,1,6,"button",5),A(6,wJ,1,6,"button",5),H()),2&t&&(ut(n.styleClass),M("ngClass",ar(28,xJ,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),C(1),ut(n.inputStyleClass),M("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),tt("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),C(2),M("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),C(1),M("ngIf",n.showButtons&&"stacked"===n.buttonLayout),C(1),M("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),C(1),M("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[ei,Nn,Ei,mJ,yx],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),bx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Mx,Ll]}),i})();function bJ(i,e){1&i&&_e(0)}const Cx=function(i){return{$implicit:i}};function CJ(i,e){if(1&i&&(B(0,"div",15),A(1,bJ,1,0,"ng-container",16),H()),2&i){const t=x(2);C(1),M("ngTemplateOutlet",t.templateLeft)("ngTemplateOutletContext",xe(2,Cx,t.paginatorState))}}function EJ(i,e){if(1&i&&(B(0,"span",17),ke(1),H()),2&i){const t=x(2);C(1),zt(t.currentPageReport)}}const lm=function(i){return{"p-disabled":i}};function SJ(i,e){if(1&i){const t=Te();B(0,"button",18),le("click",function(s){return U(t),W(x(2).changePageToFirst(s))}),Ze(1,"span",19),H()}if(2&i){const t=x(2);M("disabled",t.isFirstPage()||t.empty())("ngClass",xe(2,lm,t.isFirstPage()||t.empty()))}}const IJ=function(i){return{"p-highlight":i}};function TJ(i,e){if(1&i){const t=Te();B(0,"button",22),le("click",function(s){const o=U(t).$implicit;return W(x(3).onPageLinkClick(s,o-1))}),ke(1),H()}if(2&i){const t=e.$implicit,n=x(3);M("ngClass",xe(2,IJ,t-1==n.getPage())),C(1),_n(" ",t," ")}}function DJ(i,e){if(1&i&&(B(0,"span",20),A(1,TJ,2,4,"button",21),H()),2&i){const t=x(2);C(1),M("ngForOf",t.pageLinks)}}function RJ(i,e){1&i&&ke(0),2&i&&zt(x(3).currentPageReport)}function AJ(i,e){if(1&i){const t=Te();B(0,"p-dropdown",23),le("onChange",function(s){return U(t),W(x(2).onPageDropdownChange(s))}),A(1,RJ,1,1,"ng-template",24),H()}if(2&i){const t=x(2);M("options",t.pageItems)("ngModel",t.getPage())("disabled",t.empty())("appendTo",t.dropdownAppendTo)("scrollHeight",t.dropdownScrollHeight)}}function LJ(i,e){if(1&i){const t=Te();B(0,"button",25),le("click",function(s){return U(t),W(x(2).changePageToLast(s))}),Ze(1,"span",26),H()}if(2&i){const t=x(2);M("disabled",t.isLastPage()||t.empty())("ngClass",xe(2,lm,t.isLastPage()||t.empty()))}}function PJ(i,e){if(1&i){const t=Te();B(0,"p-inputNumber",27),le("ngModelChange",function(s){return U(t),W(x(2).changePage(s-1))}),H()}if(2&i){const t=x(2);M("ngModel",t.currentPage())("disabled",t.empty())}}function OJ(i,e){1&i&&_e(0)}function NJ(i,e){if(1&i&&A(0,OJ,1,0,"ng-container",16),2&i){const t=e.$implicit;M("ngTemplateOutlet",x(4).dropdownItemTemplate)("ngTemplateOutletContext",xe(2,Cx,t))}}function FJ(i,e){1&i&&(ze(0),A(1,NJ,1,4,"ng-template",30),He())}function VJ(i,e){if(1&i){const t=Te();B(0,"p-dropdown",28),le("ngModelChange",function(s){return U(t),W(x(2).rows=s)})("onChange",function(s){return U(t),W(x(2).onRppChange(s))}),A(1,FJ,2,0,"ng-container",29),H()}if(2&i){const t=x(2);M("options",t.rowsPerPageItems)("ngModel",t.rows)("disabled",t.empty())("appendTo",t.dropdownAppendTo)("scrollHeight",t.dropdownScrollHeight),C(1),M("ngIf",t.dropdownItemTemplate)}}function zJ(i,e){1&i&&_e(0)}function HJ(i,e){if(1&i&&(B(0,"div",31),A(1,zJ,1,0,"ng-container",16),H()),2&i){const t=x(2);C(1),M("ngTemplateOutlet",t.templateRight)("ngTemplateOutletContext",xe(2,Cx,t.paginatorState))}}function BJ(i,e){if(1&i){const t=Te();B(0,"div",1),A(1,CJ,2,4,"div",2),A(2,EJ,2,1,"span",3),A(3,SJ,2,4,"button",4),B(4,"button",5),le("click",function(s){return U(t),W(x().changePageToPrev(s))}),Ze(5,"span",6),H(),A(6,DJ,2,1,"span",7),A(7,AJ,2,5,"p-dropdown",8),B(8,"button",9),le("click",function(s){return U(t),W(x().changePageToNext(s))}),Ze(9,"span",10),H(),A(10,LJ,2,4,"button",11),A(11,PJ,1,2,"p-inputNumber",12),A(12,VJ,2,6,"p-dropdown",13),A(13,HJ,2,4,"div",14),H()}if(2&i){const t=x();ut(t.styleClass),M("ngStyle",t.style)("ngClass","p-paginator p-component"),C(1),M("ngIf",t.templateLeft),C(1),M("ngIf",t.showCurrentPageReport),C(1),M("ngIf",t.showFirstLastIcon),C(1),M("disabled",t.isFirstPage()||t.empty())("ngClass",xe(17,lm,t.isFirstPage()||t.empty())),C(2),M("ngIf",t.showPageLinks),C(1),M("ngIf",t.showJumpToPageDropdown),C(1),M("disabled",t.isLastPage()||t.empty())("ngClass",xe(19,lm,t.isLastPage()||t.empty())),C(2),M("ngIf",t.showFirstLastIcon),C(1),M("ngIf",t.showJumpToPageInput),C(1),M("ngIf",t.rowsPerPageOptions),C(1),M("ngIf",t.templateRight)}}let jJ=(()=>{class i{constructor(t){this.cd=t,this.pageLinkSize=5,this.onPageChange=new ie,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(t){t.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),t.first&&(this._first=t.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),t.rows&&(this.updatePageLinks(),this.updatePaginatorState()),t.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(t){this._first=t}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let t of this.rowsPerPageOptions)"object"==typeof t&&t.showAll?this.rowsPerPageItems.unshift({label:t.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(t),value:t})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let t=this.getPageCount(),n=Math.min(this.pageLinkSize,t),s=Math.max(0,Math.ceil(this.getPage()-n/2)),r=Math.min(t-1,s+n-1);return s=Math.max(0,s-(this.pageLinkSize-(r-s+1))),[s,r]}updatePageLinks(){this.pageLinks=[];let t=this.calculatePageLinkBoundaries(),s=t[1];for(let r=t[0];r<=s;r++)this.pageLinks.push(r+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let r=0;r<this.getPageCount();r++)this.pageItems.push({label:String(r+1),value:r})}}changePage(t){var n=this.getPageCount();if(t>=0&&t<n){this._first=this.rows*t;var s={page:t,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(s),this.updatePaginatorState()}}updateFirst(){const t=this.getPage();t>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(t-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(t){this.isFirstPage()||this.changePage(0),t.preventDefault()}changePageToPrev(t){this.changePage(this.getPage()-1),t.preventDefault()}changePageToNext(t){this.changePage(this.getPage()+1),t.preventDefault()}changePageToLast(t){this.isLastPage()||this.changePage(this.getPageCount()-1),t.preventDefault()}onPageLinkClick(t,n){this.changePage(n),t.preventDefault()}onRppChange(t){this.changePage(this.getPage())}onPageDropdownChange(t){this.changePage(t.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(t){return new(t||i)(Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[Pi],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(t,n){1&t&&A(0,BJ,14,21,"div",0),2&t&&M("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[ei,xo,Nn,Xi,Ei,k7,Ni,M7,hp,Oc,ja],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),qJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,xx,bx,rm,Fi,Yo,xx,bx,rm,Fi]}),i})();function GJ(i,e){1&i&&Ze(0,"span",8),2&i&&(ut(x(2).$implicit.icon),M("ngClass","p-button-icon p-button-icon-left"))}function UJ(i,e){if(1&i&&(ze(0),A(1,GJ,1,3,"span",6),B(2,"span",7),ke(3),H(),He()),2&i){const t=x().$implicit,n=x();C(1),M("ngIf",t.icon),C(2),zt(n.getOptionLabel(t))}}function WJ(i,e){1&i&&_e(0)}const $J=function(i,e){return{$implicit:i,index:e}};function YJ(i,e){if(1&i&&A(0,WJ,1,0,"ng-container",9),2&i){const t=x(),n=t.$implicit,s=t.index;M("ngTemplateOutlet",x().itemTemplate)("ngTemplateOutletContext",Lt(2,$J,n,s))}}const KJ=function(i,e,t){return{"p-highlight":i,"p-disabled":e,"p-button-icon-only":t}};function XJ(i,e){if(1&i){const t=Te();B(0,"div",2,3),le("click",function(s){const r=U(t),o=r.$implicit,a=r.index;return W(x().onItemClick(s,o,a))})("keydown.enter",function(s){const r=U(t),o=r.$implicit,a=r.index;return W(x().onItemClick(s,o,a))})("blur",function(){return U(t),W(x().onBlur())}),A(2,UJ,4,2,"ng-container",4),A(3,YJ,1,5,"ng-template",null,5,Os),H()}if(2&i){const t=e.$implicit,n=dn(4),s=x();ut(t.styleClass),M("ngClass",ar(10,KJ,s.isSelected(t),s.disabled||s.isOptionDisabled(t),t.icon&&!s.getOptionLabel(t))),tt("aria-pressed",s.isSelected(t))("title",t.title)("aria-label",t.label)("tabindex",s.disabled?null:s.tabindex)("aria-labelledby",s.getOptionLabel(t)),C(2),M("ngIf",!s.itemTemplate)("ngIfElse",n)}}const ZJ={provide:vi,useExisting:Ct(()=>QJ),multi:!0};let QJ=(()=>{class i{constructor(t){this.cd=t,this.tabindex=0,this.onOptionClick=new ie,this.onChange=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(t){return this.optionLabel?pe.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?pe.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}isOptionDisabled(t){return this.optionDisabled?pe.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onItemClick(t,n,s){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value});else{let r=this.getOptionValue(n);this.value!==r&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}))}this.onOptionClick.emit({originalEvent:t,option:n,index:s})}}onBlur(){this.onModelTouched()}removeOption(t){this.value=this.value.filter(n=>!pe.equals(n,this.getOptionValue(t),this.dataKey))}isSelected(t){let n=!1,s=this.getOptionValue(t);if(this.multiple){if(this.value&&this.value instanceof Array)for(let r of this.value)if(pe.equals(r,s,this.dataKey)){n=!0;break}}else n=pe.equals(this.getOptionValue(t),this.value,this.dataKey);return n}}return i.\u0275fac=function(t){return new(t||i)(Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-selectButton"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,_o,5),2&t){let r;Re(r=Ae())&&(n.itemTemplate=r.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Et([ZJ])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&(B(0,"div",0),A(1,XJ,5,14,"div",1),H()),2&t&&(ut(n.styleClass),M("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),C(1),M("ngForOf",n.options))},dependencies:[ei,xo,Nn,Xi,Ei,ja],styles:['.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n'],encapsulation:2,changeDetection:0}),i})(),JJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Yo]}),i})();const eee=function(i,e,t){return{"p-checkbox-label-active":i,"p-disabled":e,"p-checkbox-label-focus":t}};function tee(i,e){if(1&i){const t=Te();B(0,"label",7),le("click",function(s){U(t);const r=x(),o=dn(3);return W(r.onClick(s,o))}),ke(1),H()}if(2&i){const t=x();M("ngClass",ar(3,eee,null!=t.value,t.disabled,t.focused)),tt("for",t.inputId),C(1),zt(t.label)}}const nee=function(i,e){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":e}},iee=function(i,e,t){return{"p-highlight":i,"p-disabled":e,"p-focus":t}},see={provide:vi,useExisting:Ct(()=>ree),multi:!0};let ree=(()=>{class i{constructor(t){this.cd=t,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(t,n){!this.disabled&&!this.readonly&&(this.toggle(t),this.focused=!0,n.focus())}onKeydown(t){32==t.keyCode&&t.preventDefault()}onKeyup(t){32==t.keyCode&&!this.readonly&&(this.toggle(t),t.preventDefault())}toggle(t){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}writeValue(t){this.value=t,this.cd.markForCheck()}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Et([see])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(t,n){if(1&t){const s=Te();B(0,"div",0)(1,"div",1)(2,"input",2,3),le("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),H()(),B(4,"div",4),le("click",function(o){U(s);const a=dn(3);return W(n.onClick(o,a))}),Ze(5,"span",5),H()(),A(6,tee,2,7,"label",6)}2&t&&(ut(n.styleClass),M("ngStyle",n.style)("ngClass",Lt(14,nee,n.disabled,n.focused)),C(2),M("name",n.name)("readonly",n.readonly)("disabled",n.disabled),tt("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),C(2),M("ngClass",ar(17,iee,null!=n.value,n.disabled,n.focused)),tt("aria-checked",!0===n.value),C(1),M("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),C(1),M("ngIf",n.label))},dependencies:[ei,Nn,Ei],encapsulation:2,changeDetection:0}),i})(),oee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();const aee=["container"],lee=["resizeHelper"],cee=["reorderIndicatorUp"],hee=["reorderIndicatorDown"],uee=["wrapper"],dee=["table"],pee=["thead"],fee=["tfoot"],gee=["scroller"];function mee(i,e){if(1&i&&(B(0,"div",15),Ze(1,"i"),H()),2&i){const t=x();C(1),ut("p-datatable-loading-icon pi-spin "+t.loadingIcon)}}function yee(i,e){1&i&&_e(0)}function _ee(i,e){if(1&i&&(B(0,"div",16),A(1,yee,1,0,"ng-container",17),H()),2&i){const t=x();C(1),M("ngTemplateOutlet",t.captionTemplate)}}function vee(i,e){if(1&i){const t=Te();B(0,"p-paginator",18),le("onPageChange",function(s){return U(t),W(x().onPageChange(s))}),H()}if(2&i){const t=x();M("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("dropdownScrollHeight",t.paginatorDropdownScrollHeight)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showJumpToPageInput",t.showJumpToPageInput)("showPageLinks",t.showPageLinks)}}function kee(i,e){1&i&&_e(0)}const b7=function(i,e){return{$implicit:i,options:e}};function wee(i,e){if(1&i&&A(0,kee,1,0,"ng-container",22),2&i){const t=e.$implicit,n=e.options;x(2),M("ngTemplateOutlet",dn(10))("ngTemplateOutletContext",Lt(2,b7,t,n))}}const xee=function(i){return{height:i}};function Mee(i,e){if(1&i){const t=Te();B(0,"p-scroller",19,20),le("onLazyLoad",function(s){return U(t),W(x().onLazyItemLoad(s))}),A(2,wee,1,5,"ng-template",21),H()}if(2&i){const t=x();ai(xe(15,xee,"flex"!==t.scrollHeight?t.scrollHeight:void 0)),M("items",t.processedData)("columns",t.columns)("scrollHeight","flex"!==t.scrollHeight?void 0:"100%")("itemSize",t.virtualScrollItemSize||t._virtualRowHeight)("step",t.rows)("delay",t.lazy?t.virtualScrollDelay:0)("inline",!0)("lazy",t.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",t.loadingBodyTemplate)("options",t.virtualScrollOptions)("autoSize",!0)}}function bee(i,e){1&i&&_e(0)}const Cee=function(i){return{columns:i}};function Eee(i,e){if(1&i&&(ze(0),A(1,bee,1,0,"ng-container",22),He()),2&i){const t=x(),n=dn(10);C(1),M("ngTemplateOutlet",n)("ngTemplateOutletContext",Lt(4,b7,t.processedData,xe(2,Cee,t.columns)))}}function See(i,e){1&i&&_e(0)}function Iee(i,e){1&i&&_e(0)}function Tee(i,e){if(1&i&&Ze(0,"tbody",31),2&i){const t=x().options,n=x();M("value",n.frozenValue)("frozenRows",!0)("pTableBody",t.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function Dee(i,e){if(1&i&&Ze(0,"tbody",32),2&i){const t=x().options;ai("height: calc("+t.spacerStyle.height+" - "+t.rows.length*t.itemSize+"px);")}}function Ree(i,e){1&i&&_e(0)}const mp=function(i){return{$implicit:i}};function Aee(i,e){if(1&i&&(B(0,"tfoot",33,34),A(2,Ree,1,0,"ng-container",22),H()),2&i){const t=x().options,n=x();C(2),M("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",xe(2,mp,t.columns))}}const Lee=function(i,e,t){return{"p-datatable-table":!0,"p-datatable-scrollable-table":i,"p-datatable-resizable-table":e,"p-datatable-resizable-table-fit":t}};function Pee(i,e){if(1&i&&(B(0,"table",23,24),A(2,See,1,0,"ng-container",22),B(3,"thead",25,26),A(5,Iee,1,0,"ng-container",22),H(),A(6,Tee,1,5,"tbody",27),Ze(7,"tbody",28),A(8,Dee,1,2,"tbody",29),A(9,Aee,3,4,"tfoot",30),H()),2&i){const t=e.options,n=x();ai(n.tableStyle),ut(n.tableStyleClass),M("ngClass",ar(20,Lee,n.scrollable,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode)),tt("id",n.id+"-table"),C(2),M("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",xe(24,mp,t.columns)),C(3),M("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",xe(26,mp,t.columns)),C(1),M("ngIf",n.frozenValue||n.frozenBodyTemplate),C(1),ai(t.contentStyle),M("ngClass",t.contentStyleClass)("value",n.dataToRender(t.rows))("pTableBody",t.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",t),C(1),M("ngIf",t.spacerStyle),C(1),M("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function Oee(i,e){if(1&i){const t=Te();B(0,"p-paginator",35),le("onPageChange",function(s){return U(t),W(x().onPageChange(s))}),H()}if(2&i){const t=x();M("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("dropdownScrollHeight",t.paginatorDropdownScrollHeight)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showJumpToPageInput",t.showJumpToPageInput)("showPageLinks",t.showPageLinks)}}function Nee(i,e){1&i&&_e(0)}function Fee(i,e){if(1&i&&(B(0,"div",36),A(1,Nee,1,0,"ng-container",17),H()),2&i){const t=x();C(1),M("ngTemplateOutlet",t.summaryTemplate)}}function Vee(i,e){1&i&&Ze(0,"div",37,38)}function zee(i,e){1&i&&Ze(0,"span",39,40)}function Hee(i,e){1&i&&Ze(0,"span",41,42)}const Bee=function(i,e,t){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-scrollable":e,"p-datatable-flex-scrollable":t}},jee=function(i){return{maxHeight:i}},qee=["pTableBody",""];function Gee(i,e){1&i&&_e(0)}const Ex=function(i,e,t,n,s){return{$implicit:i,rowIndex:e,columns:t,editing:n,frozen:s}};function Uee(i,e){if(1&i&&(ze(0,3),A(1,Gee,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.groupHeaderTemplate)("ngTemplateOutletContext",U1(2,Ex,n,r.getRowIndex(s),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}function Wee(i,e){1&i&&_e(0)}function $ee(i,e){if(1&i&&(ze(0),A(1,Wee,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",n?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",U1(2,Ex,n,r.getRowIndex(s),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}function Yee(i,e){1&i&&_e(0)}const Kee=function(i,e,t,n,s,r,o){return{$implicit:i,rowIndex:e,columns:t,editing:n,frozen:s,rowgroup:r,rowspan:o}};function Xee(i,e){if(1&i&&(ze(0),A(1,Yee,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",n?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",function U8(i,e,t,n,s,r,o,a,l,c){const h=cs()+i,u=oe();let d=Lr(u,h,t,n,s,r);return Wg(u,h+4,o,a,l)||d?Go(u,h+7,c?e.call(c,t,n,s,r,o,a,l):e(t,n,s,r,o,a,l)):N1(u,h+7)}(2,Kee,n,r.getRowIndex(s),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen,r.shouldRenderRowspan(r.value,n,s),r.calculateRowGroupSize(r.value,n,s)))}}function Zee(i,e){1&i&&_e(0)}function Qee(i,e){if(1&i&&(ze(0,3),A(1,Zee,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.groupFooterTemplate)("ngTemplateOutletContext",U1(2,Ex,n,r.getRowIndex(s),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}function Jee(i,e){if(1&i&&(A(0,Uee,2,8,"ng-container",2),A(1,$ee,2,8,"ng-container",0),A(2,Xee,2,10,"ng-container",0),A(3,Qee,2,8,"ng-container",2)),2&i){const t=e.$implicit,n=e.index,s=x(2);M("ngIf",s.dt.groupHeaderTemplate&&!s.dt.virtualScroll&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupHeader(s.value,t,n)),C(1),M("ngIf","rowspan"!==s.dt.rowGroupMode),C(1),M("ngIf","rowspan"===s.dt.rowGroupMode),C(1),M("ngIf",s.dt.groupFooterTemplate&&!s.dt.virtualScroll&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,t,n))}}function ete(i,e){if(1&i&&(ze(0),A(1,Jee,4,4,"ng-template",1),He()),2&i){const t=x();C(1),M("ngForOf",t.value)("ngForTrackBy",t.dt.rowTrackBy)}}function tte(i,e){1&i&&_e(0)}const cm=function(i,e,t,n,s,r){return{$implicit:i,rowIndex:e,columns:t,expanded:n,editing:s,frozen:r}};function nte(i,e){if(1&i&&(ze(0),A(1,tte,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.template)("ngTemplateOutletContext",Mu(2,cm,n,r.getRowIndex(s),r.columns,r.dt.isRowExpanded(n),"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}function ite(i,e){1&i&&_e(0)}function ste(i,e){if(1&i&&(ze(0,3),A(1,ite,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.groupHeaderTemplate)("ngTemplateOutletContext",Mu(2,cm,n,r.getRowIndex(s),r.columns,r.dt.isRowExpanded(n),"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}function rte(i,e){1&i&&_e(0)}function ote(i,e){1&i&&_e(0)}function ate(i,e){if(1&i&&(ze(0,3),A(1,ote,1,0,"ng-container",4),He()),2&i){const t=x(2),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.groupFooterTemplate)("ngTemplateOutletContext",Mu(2,cm,n,r.getRowIndex(s),r.columns,r.dt.isRowExpanded(n),"row"===r.dt.editMode&&r.dt.isRowEditing(n),r.frozen))}}const C7=function(i,e,t,n){return{$implicit:i,rowIndex:e,columns:t,frozen:n}};function lte(i,e){if(1&i&&(ze(0),A(1,rte,1,0,"ng-container",4),A(2,ate,2,9,"ng-container",2),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.expandedRowTemplate)("ngTemplateOutletContext",Ra(3,C7,n,r.getRowIndex(s),r.columns,r.frozen)),C(1),M("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,n,r.getRowIndex(s)))}}function cte(i,e){if(1&i&&(A(0,nte,2,9,"ng-container",0),A(1,ste,2,9,"ng-container",2),A(2,lte,3,8,"ng-container",0)),2&i){const t=e.$implicit,n=e.index,s=x(2);M("ngIf",!s.dt.groupHeaderTemplate),C(1),M("ngIf",s.dt.groupHeaderTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupHeader(s.value,t,s.getRowIndex(n))),C(1),M("ngIf",s.dt.isRowExpanded(t))}}function hte(i,e){if(1&i&&(ze(0),A(1,cte,3,3,"ng-template",1),He()),2&i){const t=x();C(1),M("ngForOf",t.value)("ngForTrackBy",t.dt.rowTrackBy)}}function ute(i,e){1&i&&_e(0)}function dte(i,e){1&i&&_e(0)}function pte(i,e){if(1&i&&(ze(0),A(1,dte,1,0,"ng-container",4),He()),2&i){const t=x(),n=t.$implicit,s=t.index,r=x(2);C(1),M("ngTemplateOutlet",r.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",Ra(2,C7,n,r.getRowIndex(s),r.columns,r.frozen))}}function fte(i,e){if(1&i&&(A(0,ute,1,0,"ng-container",4),A(1,pte,2,7,"ng-container",0)),2&i){const t=e.$implicit,n=e.index,s=x(2);M("ngTemplateOutlet",s.template)("ngTemplateOutletContext",Mu(3,cm,t,s.getRowIndex(n),s.columns,s.dt.isRowExpanded(t),"row"===s.dt.editMode&&s.dt.isRowEditing(t),s.frozen)),C(1),M("ngIf",s.dt.isRowExpanded(t))}}function gte(i,e){if(1&i&&(ze(0),A(1,fte,2,10,"ng-template",1),He()),2&i){const t=x();C(1),M("ngForOf",t.value)("ngForTrackBy",t.dt.rowTrackBy)}}function mte(i,e){1&i&&_e(0)}const E7=function(i,e){return{$implicit:i,frozen:e}};function yte(i,e){if(1&i&&(ze(0),A(1,mte,1,0,"ng-container",4),He()),2&i){const t=x();C(1),M("ngTemplateOutlet",t.dt.loadingBodyTemplate)("ngTemplateOutletContext",Lt(2,E7,t.columns,t.frozen))}}function _te(i,e){1&i&&_e(0)}function vte(i,e){if(1&i&&(ze(0),A(1,_te,1,0,"ng-container",4),He()),2&i){const t=x();C(1),M("ngTemplateOutlet",t.dt.emptyMessageTemplate)("ngTemplateOutletContext",Lt(2,E7,t.columns,t.frozen))}}let Sx=(()=>{class i{constructor(){this.sortSource=new Xn,this.selectionSource=new Xn,this.contextMenuSource=new Xn,this.valueSource=new Xn,this.totalRecordsSource=new Xn,this.columnsSource=new Xn,this.resetSource=new Xn,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(t){this.sortSource.next(t)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(t){this.contextMenuSource.next(t)}onValueChange(t){this.valueSource.next(t)}onTotalRecordsChange(t){this.totalRecordsSource.next(t)}onColumnsChange(t){this.columnsSource.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})(),Ix=(()=>{class i{constructor(t,n,s,r,o,a){this.el=t,this.zone=n,this.tableService=s,this.cd=r,this.filterService=o,this.overlayService=a,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new ie,this.selectionChange=new ie,this.contextMenuSelectionChange=new ie,this.contextMenuSelectionMode="separate",this.rowTrackBy=(l,c)=>c,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="scroll",this.breakpoint="960px",this.onRowSelect=new ie,this.onRowUnselect=new ie,this.onPage=new ie,this.onSort=new ie,this.onFilter=new ie,this.onLazyLoad=new ie,this.onRowExpand=new ie,this.onRowCollapse=new ie,this.onContextMenuSelect=new ie,this.onColResize=new ie,this.onColReorder=new ie,this.onRowReorder=new ie,this.onEditInit=new ie,this.onEditComplete=new ie,this.onEditCancel=new ie,this.onHeaderCheckboxToggle=new ie,this.sortFunction=new ie,this.firstChange=new ie,this.rowsChange=new ie,this.onStateSave=new ie,this.onStateRestore=new ie,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=Iu()}get responsive(){return this._responsive}set responsive(t){this._responsive=t,console.warn("responsive propery is deprecated as table is always responsive with scrollable behavior.")}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(t){this._virtualRowHeight=t,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"caption":this.captionTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"headergrouped":this.headerGroupedTemplate=t.template;break;case"body":this.bodyTemplate=t.template;break;case"loadingbody":this.loadingBodyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"footergrouped":this.footerGroupedTemplate=t.template;break;case"summary":this.summaryTemplate=t.template;break;case"colgroup":this.colGroupTemplate=t.template;break;case"rowexpansion":this.expandedRowTemplate=t.template;break;case"groupheader":this.groupHeaderTemplate=t.template;break;case"rowspan":this.rowspanTemplate=t.template;break;case"groupfooter":this.groupFooterTemplate=t.template;break;case"frozenrows":this.frozenRowsTemplate=t.template;break;case"frozenheader":this.frozenHeaderTemplate=t.template;break;case"frozenbody":this.frozenBodyTemplate=t.template;break;case"frozenfooter":this.frozenFooterTemplate=t.template;break;case"frozencolgroup":this.frozenColGroupTemplate=t.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=t.template;break;case"emptymessage":this.emptyMessageTemplate=t.template;break;case"paginatorleft":this.paginatorLeftTemplate=t.template;break;case"paginatorright":this.paginatorRightTemplate=t.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=t.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(t){t.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=t.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(t.value.currentValue)),t.columns&&(this._columns=t.columns.currentValue,this.tableService.onColumnsChange(t.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),t.sortField&&(this._sortField=t.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),t.sortOrder&&(this._sortOrder=t.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),t.multiSortMeta&&(this._multiSortMeta=t.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),t.selection&&(this._selection=t.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),t.selectAll&&(this._selectAll=t.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(t){this._value=t}get columns(){return this._columns}set columns(t){this._columns=t}get first(){return this._first}set first(t){this._first=t}get rows(){return this._rows}set rows(t){this._rows=t}get totalRecords(){return this._totalRecords}set totalRecords(t){this._totalRecords=t,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(t){this._sortField=t}get sortOrder(){return this._sortOrder}set sortOrder(t){this._sortOrder=t}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(t){this._multiSortMeta=t}get selection(){return this._selection}set selection(t){this._selection=t}get selectAll(){return this._selection}set selectAll(t){this._selection=t}get processedData(){return this.filteredValue||this.value||[]}dataToRender(t){const n=t||this.processedData;if(n&&this.paginator){const s=this.lazy?0:this.first;return n.slice(s,s+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let t of this._selection)this.selectionKeys[String(pe.resolveFieldData(t,this.dataKey))]=1;else this.selectionKeys[String(pe.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(t){this.first=t.first,this.rows=t.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(t){let n=t.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===t.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=t.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let s=n.metaKey||n.ctrlKey,r=this.getSortMeta(t.field);r?s?r.order=-1*r.order:(this._multiSortMeta=[{field:t.field,order:-1*r.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!s||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:t.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let t=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(t&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:t,order:n}):(this.value.sort((r,o)=>{let a=pe.resolveFieldData(r,t),l=pe.resolveFieldData(o,t),c=null;return c=null==a&&null!=l?-1:null!=a&&null==l?1:null==a&&null==l?0:"string"==typeof a&&"string"==typeof l?a.localeCompare(l):a<l?-1:a>l?1:0,n*c}),this._value=[...this.value]),this.hasFilter()&&this._filter());let s={field:t,order:n};this.onSort.emit(s),this.tableService.onSort(s)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((t,n)=>this.multisortField(t,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(t,n,s,r){const o=pe.resolveFieldData(t,s[r].field),a=pe.resolveFieldData(n,s[r].field);return 0===pe.compare(o,a,this.filterLocale)?s.length-1>r?this.multisortField(t,n,s,r+1):0:this.compareValuesOnSort(o,a,s[r].order)}compareValuesOnSort(t,n,s){return pe.sort(t,n,s,this.filterLocale,this.sortOrder)}getSortMeta(t){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===t)return this.multiSortMeta[n];return null}isSorted(t){if("single"===this.sortMode)return this.sortField&&this.sortField===t;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let s=0;s<this.multiSortMeta.length;s++)if(this.multiSortMeta[s].field==t){n=!0;break}return n}}handleRowClick(t){let n=t.originalEvent.target,s=n.nodeName,r=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&"INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&!q.hasClass(t.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=t.rowData,a=t.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&t.originalEvent.shiftKey&&null!=this.anchorRowIndex)q.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(t.originalEvent),this.rangeRowIndex=a,this.selectRange(t.originalEvent,a);else{let l=this.isSelected(o);if(!l&&!this.isRowSelectable(o,a))return;let c=!this.rowTouched&&this.metaKeySelection,h=this.dataKey?String(pe.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=a,this.rangeRowIndex=a,c){let u=t.originalEvent.metaKey||t.originalEvent.ctrlKey;if(l&&u){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let d=this.findIndexInSelection(o);this._selection=this.selection.filter((p,f)=>f!=d),this.selectionChange.emit(this.selection),h&&delete this.selectionKeys[h]}this.onRowUnselect.emit({originalEvent:t.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),h&&(this.selectionKeys={},this.selectionKeys[h]=1)):this.isMultipleSelectionMode()&&(u?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),h&&(this.selectionKeys[h]=1)),this.onRowSelect.emit({originalEvent:t.originalEvent,data:o,type:"row",index:a})}else if("single"===this.selectionMode)l?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,data:o,type:"row",index:a})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,data:o,type:"row",index:a}),h&&(this.selectionKeys={},this.selectionKeys[h]=1));else if("multiple"===this.selectionMode)if(l){let u=this.findIndexInSelection(o);this._selection=this.selection.filter((d,p)=>p!=u),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,data:o,type:"row",index:a}),h&&delete this.selectionKeys[h]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,data:o,type:"row",index:a}),h&&(this.selectionKeys[h]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(t){this.rowTouched=!0}handleRowRightClick(t){if(this.contextMenu){const n=t.rowData,s=t.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,data:n,index:t.rowIndex}),this.contextMenu.show(t.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(n),o=this.dataKey?String(pe.resolveFieldData(n,this.dataKey)):null;if(!r){if(!this.isRowSelectable(n,s))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(t.originalEvent),this.onContextMenuSelect.emit({originalEvent:t,data:n,index:t.rowIndex})}}}selectRange(t,n){let s,r;this.anchorRowIndex>n?(s=n,r=this.anchorRowIndex):this.anchorRowIndex<n?(s=this.anchorRowIndex,r=n):(s=n,r=n),this.lazy&&this.paginator&&(s-=this.first,r-=this.first);let o=[];for(let a=s;a<=r;a++){let l=this.filteredValue?this.filteredValue[a]:this.value[a];if(!this.isSelected(l)){if(!this.isRowSelectable(l,n))continue;o.push(l),this._selection=[...this.selection,l];let c=this.dataKey?String(pe.resolveFieldData(l,this.dataKey)):null;c&&(this.selectionKeys[c]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t,data:o,type:"row"})}clearSelectionRange(t){let n,s;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,s=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,s=this.anchorRowIndex):(n=this.rangeRowIndex,s=this.rangeRowIndex);for(let r=n;r<=s;r++){let o=this.value[r],a=this.findIndexInSelection(o);this._selection=this.selection.filter((c,h)=>h!=a);let l=this.dataKey?String(pe.resolveFieldData(o,this.dataKey)):null;l&&delete this.selectionKeys[l],this.onRowUnselect.emit({originalEvent:t,data:o,type:"row"})}}isSelected(t){return!(!t||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[pe.resolveFieldData(t,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(t)>-1:this.equals(t,this.selection))}findIndexInSelection(t){let n=-1;if(this.selection&&this.selection.length)for(let s=0;s<this.selection.length;s++)if(this.equals(t,this.selection[s])){n=s;break}return n}isRowSelectable(t,n){return!(this.rowSelectable&&!this.rowSelectable({data:t,index:n}))}toggleRowWithRadio(t,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,t.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(pe.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(t,n){this.selection=this.selection||[];let s=this.isSelected(n),r=this.dataKey?String(pe.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,s){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((a,l)=>l!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:n,type:"checkbox"}),r&&delete this.selectionKeys[r]}else{if(!this.isRowSelectable(n,t.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:n,type:"checkbox"}),r&&(this.selectionKeys[r]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(t,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:t,checked:n});else{const s=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let r=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!s.some(a=>this.equals(o,a))):[];n&&(r=this.frozenValue?[...r,...this.frozenValue,...s]:[...r,...s],r=this.rowSelectable?r.filter((o,a)=>this.rowSelectable({data:o,index:a})):r),this._selection=r,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:t,checked:n}),this.isStateful()&&this.saveState()}}equals(t,n){return"equals"===this.compareSelectionBy?t===n:pe.equals(t,n,this.dataKey)}filter(t,n,s){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(t)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:t,matchMode:s},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(t,n){this.filter(t,"global",n)}isFilterBlank(t){return null==t||"string"==typeof t&&0==t.trim().length||t instanceof Array&&0==t.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let t;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");t=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let a,s=!0,r=!1,o=!1;for(let l in this.filters)if(this.filters.hasOwnProperty(l)&&"global"!==l){o=!0;let c=l,h=this.filters[c];if(Array.isArray(h)){for(let u of h)if(s=this.executeLocalFilter(c,this.value[n],u),u.operator===a7.OR&&s||u.operator===a7.AND&&!s)break}else s=this.executeLocalFilter(c,this.value[n],h);if(!s)break}if(this.filters.global&&!r&&t)for(let l=0;l<t.length&&(r=this.filterService.filters[this.filters.global.matchMode](pe.resolveFieldData(this.value[n],t[l].field||t[l]),this.filters.global.value,this.filterLocale),!r);l++);a=this.filters.global?o?o&&s&&r:r:o&&s,a&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(t,n,s){let r=s.value,o=s.matchMode||Oi.STARTS_WITH,a=pe.resolveFieldData(n,t);return(0,this.filterService.filters[o])(a,r,this.filterLocale)}hasFilter(){let t=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){t=!1;break}return!t}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(t){return t[this.exportHeader]||t.header||t.field}exportCSV(t){let n,s="",r=this.columns;t&&t.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let l=0;l<r.length;l++){let c=r[l];!1!==c.exportable&&c.field&&(s+='"'+this.getExportHeader(c)+'"',l<r.length-1&&(s+=this.csvSeparator))}n.forEach((l,c)=>{s+="\n";for(let h=0;h<r.length;h++){let u=r[h];if(!1!==u.exportable&&u.field){let d=pe.resolveFieldData(l,u.field);d=null!=d?this.exportFunction?this.exportFunction({data:d,field:u.field}):String(d).replace(/"/g,'""'):"",s+='"'+d+'"',h<r.length-1&&(s+=this.csvSeparator)}}});let o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.style.display="none",document.body.appendChild(a),void 0!==a.download?(a.setAttribute("href",URL.createObjectURL(o)),a.setAttribute("download",this.exportFilename+".csv"),a.click()):(s="data:text/csv;charset=utf-8,"+s,window.open(encodeURI(s))),document.body.removeChild(a)}onLazyItemLoad(t){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...t,rows:t.last-t.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(t){this.virtualScroll&&this.scroller.scrollToIndex(t)}scrollTo(t){this.virtualScroll?this.scroller.scrollTo(t):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(t):(this.wrapperViewChild.nativeElement.scrollLeft=t.left,this.wrapperViewChild.nativeElement.scrollTop=t.top))}updateEditingCell(t,n,s,r){this.editingCell=t,this.editingCellData=n,this.editingCellField=s,this.editingCellRowIndex=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===q.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=t=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(q.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:t,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(t){let n=String(pe.resolveFieldData(t,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(t,n){if(0===q.find(n,".ng-invalid.ng-dirty").length){let s=String(pe.resolveFieldData(t,this.dataKey));delete this.editingRowKeys[s]}}cancelRowEdit(t){let n=String(pe.resolveFieldData(t,this.dataKey));delete this.editingRowKeys[n]}toggleRow(t,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let s=String(pe.resolveFieldData(t,this.dataKey));null!=this.expandedRowKeys[s]?(delete this.expandedRowKeys[s],this.onRowCollapse.emit({originalEvent:n,data:t})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[s]=!0,this.onRowExpand.emit({originalEvent:n,data:t})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(t){return!0===this.expandedRowKeys[String(pe.resolveFieldData(t,this.dataKey))]}isRowEditing(t){return!0===this.editingRowKeys[String(pe.resolveFieldData(t,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(t){let n=q.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=t.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=t.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(t),t.preventDefault()}onColumnResize(t){let n=q.getOffset(this.containerViewChild.nativeElement).left;q.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=t.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let t=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,s=this.resizeColumnElement.offsetWidth+t;if(s>=(this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,"")||15)){if("fit"===this.columnResizeMode){let a=this.resizeColumnElement.nextElementSibling.offsetWidth-t;s>15&&a>15&&this.resizeTableCells(s,a)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+t+"px"),this.resizeTableCells(s,null));this.onColResize.emit({element:this.resizeColumnElement,delta:t}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",q.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(t,n){let s=q.index(this.resizeColumnElement),r=[];const o=q.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");q.find(o,"tr > th").forEach(c=>r.push(q.getOuterWidth(c))),this.destroyStyleElement(),this.createStyleElement();let l="";r.forEach((c,h)=>{let u=h===s?t:n&&h===s+1?n:c;l+=`\n                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${h+1}),\n                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${h+1}),\n                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${h+1}) {\n                    width: ${u}px !important; max-width: ${u}px !important;\n                }\n            `}),this.styleElement.innerHTML=l}onColumnDragStart(t,n){this.reorderIconWidth=q.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=q.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,t.dataTransfer.setData("text","b")}onColumnDragEnter(t,n){if(this.reorderableColumns&&this.draggedColumn&&n){t.preventDefault();let s=q.getOffset(this.containerViewChild.nativeElement),r=q.getOffset(n);if(this.draggedColumn!=n){let o=r.left-s.left,a=r.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=r.top-s.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=r.top-s.top+n.offsetHeight+"px",t.pageX>a?(this.reorderIndicatorUpViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else t.dataTransfer.dropEffect="none"}}onColumnDragLeave(t){this.reorderableColumns&&this.draggedColumn&&t.preventDefault()}onColumnDrop(t,n){if(t.preventDefault(),this.draggedColumn){let s=q.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),r=q.indexWithinGroup(n,"preorderablecolumn"),o=s!=r;o&&(r-s==1&&-1===this.dropPosition||s-r==1&&1===this.dropPosition)&&(o=!1),o&&r<s&&1===this.dropPosition&&(r+=1),o&&r>s&&-1===this.dropPosition&&(r-=1),o&&(pe.reorderArray(this.columns,s,r),this.onColReorder.emit({dragIndex:s,dropIndex:r,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(t,n){this.rowDragging=!0,this.draggedRowIndex=n,t.dataTransfer.setData("text","b")}onRowDragOver(t,n,s){if(this.rowDragging&&this.draggedRowIndex!==n){let r=q.getOffset(s).top+q.getWindowScrollTop(),o=t.pageY,a=r+q.getOuterHeight(s)/2,l=s.previousElementSibling;o<a?(q.removeClass(s,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,l?q.addClass(l,"p-datatable-dragpoint-bottom"):q.addClass(s,"p-datatable-dragpoint-top")):(l?q.removeClass(l,"p-datatable-dragpoint-bottom"):q.addClass(s,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,q.addClass(s,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(t,n){let s=n.previousElementSibling;s&&q.removeClass(s,"p-datatable-dragpoint-bottom"),q.removeClass(n,"p-datatable-dragpoint-bottom"),q.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(t){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(t,n){if(null!=this.droppedRowIndex){let s=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;pe.reorderArray(this.value,this.draggedRowIndex,s),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:s})}this.onRowDragLeave(t,n),this.onRowDragEnd(t)}isEmpty(){let t=this.filteredValue||this.value;return null==t||0==t.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const t=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),t.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const t=this.getStorage();this.stateKey&&t.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),s=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,a){return"string"==typeof a&&s.test(a)?new Date(a):a});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(t){let n=[];q.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(r=>n.push(q.getOuterWidth(r))),t.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(t.tableWidth=q.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(t){this.tableViewChild.nativeElement.style.width=t,this.tableViewChild.nativeElement.style.minWidth=t}restoreColumnWidths(){if(this.columnWidthsState){let t=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),pe.isNotEmpty(t)){this.createStyleElement();let n="";t.forEach((s,r)=>{n+=`\n                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${r+1}),\n                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${r+1}),\n                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${r+1}) {\n                            width: ${s}px !important; max-width: ${s}px !important\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(t){if(this.columns){let n=[];this.columns.map(s=>{n.push(s.field||s.key)}),t.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let r=JSON.parse(n).columnOrder;if(r){let o=[];r.map(a=>{let l=this.findColumnByKey(a);l&&o.push(l)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(t){if(!this.columns)return null;for(let n of this.columns)if(n.key===t||n.field===t)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id}-table > .p-datatable-thead > tr > th,\n    #${this.id}-table > .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(an),Y(Sx),Y(qn),Y(fx),Y(om))},i.\u0275cmp=$t({type:i,selectors:[["p-table"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(aee,5),dt(lee,5),dt(cee,5),dt(hee,5),dt(uee,5),dt(dee,5),dt(pee,5),dt(fee,5),dt(gee,5)),2&t){let s;Re(s=Ae())&&(n.containerViewChild=s.first),Re(s=Ae())&&(n.resizeHelperViewChild=s.first),Re(s=Ae())&&(n.reorderIndicatorUpViewChild=s.first),Re(s=Ae())&&(n.reorderIndicatorDownViewChild=s.first),Re(s=Ae())&&(n.wrapperViewChild=s.first),Re(s=Ae())&&(n.tableViewChild=s.first),Re(s=Ae())&&(n.tableHeaderViewChild=s.first),Re(s=Ae())&&(n.tableFooterViewChild=s.first),Re(s=Ae())&&(n.scroller=s.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Et([Sx]),Pi],decls:16,vars:22,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display: none;",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display: none;",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass"],["table",""],[1,"p-datatable-thead"],["thead",""],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-scroller-spacer",3,"style",4,"ngIf"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-scroller-spacer"],[1,"p-datatable-tfoot"],["tfoot",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(t,n){1&t&&(B(0,"div",0,1),A(2,mee,2,2,"div",2),A(3,_ee,2,1,"div",3),A(4,vee,1,17,"p-paginator",4),B(5,"div",5,6),A(7,Mee,3,17,"p-scroller",7),A(8,Eee,2,7,"ng-container",8),A(9,Pee,10,28,"ng-template",null,9,Os),H(),A(11,Oee,1,17,"p-paginator",10),A(12,Fee,2,1,"div",11),A(13,Vee,2,0,"div",12),A(14,zee,2,0,"span",13),A(15,Hee,2,0,"span",14),H()),2&t&&(ut(n.styleClass),M("ngStyle",n.style)("ngClass",ar(16,Bee,n.rowHover||n.selectionMode,n.scrollable,n.scrollable&&"flex"===n.scrollHeight)),tt("id",n.id),C(2),M("ngIf",n.loading&&n.showLoader),C(1),M("ngIf",n.captionTemplate),C(1),M("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),C(1),M("ngStyle",xe(20,jee,n.virtualScroll?"":n.scrollHeight)),C(2),M("ngIf",n.virtualScroll),C(1),M("ngIf",!n.virtualScroll),C(3),M("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),C(1),M("ngIf",n.summaryTemplate),C(1),M("ngIf",n.resizableColumns),C(1),M("ngIf",n.reorderableColumns),C(1),M("ngIf",n.reorderableColumns))},dependencies:function(){return[ei,Nn,Xi,Ei,jJ,Ni,kx,Gte]},styles:[".p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:1}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Gte=(()=>{class i{constructor(t,n,s,r){this.dt=t,this.tableService=n,this.cd=s,this.el=r,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(t){this._value=t,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(t,n,s){let r=pe.resolveFieldData(n,this.dt.groupRowsBy),o=t[s-1];return!o||r!==pe.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(t,n,s){let r=pe.resolveFieldData(n,this.dt.groupRowsBy),o=t[s+1];return!o||r!==pe.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(t,n,s){let r=pe.resolveFieldData(n,this.dt.groupRowsBy),o=t[s-1];return!o||r!==pe.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(t,n,s){let r=pe.resolveFieldData(n,this.dt.groupRowsBy),o=r,a=0;for(;r===o;){a++;let l=t[++s];if(!l)break;o=pe.resolveFieldData(l,this.dt.groupRowsBy)}return 1===a?null:a}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=q.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let t=q.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=t+"px"}}getScrollerOption(t,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[t]:null}getRowIndex(t){const n=this.dt.paginator?this.dt.first+t:t,s=this.getScrollerOption("getItemOptions");return s?s(n).index:n}}return i.\u0275fac=function(t){return new(t||i)(Y(Ix),Y(Sx),Y(qn),Y(rn))},i.\u0275cmp=$t({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},attrs:qee,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&(A(0,ete,2,2,"ng-container",0),A(1,hte,2,2,"ng-container",0),A(2,gte,2,2,"ng-container",0),A(3,yte,2,5,"ng-container",0),A(4,vte,2,5,"ng-container",0)),2&t&&(M("ngIf",!n.dt.expandedRowTemplate),C(1),M("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),C(1),M("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),C(1),M("ngIf",n.dt.loading),C(1),M("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[xo,Nn,Xi],encapsulation:2}),i})(),Ute=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,qJ,Mx,xx,rm,Ll,JJ,SZ,bx,oee,Tu,Fi,Tu]}),i})();const Wte=["cb"],$te=function(i,e,t){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":e,"p-checkbox-label-focus":t}};function Yte(i,e){if(1&i){const t=Te();B(0,"label",7),le("click",function(s){U(t);const r=x(),o=dn(3);return W(r.onClick(s,o,!0))}),ke(1),H()}if(2&i){const t=x();ut(t.labelStyleClass),M("ngClass",ar(5,$te,t.checked(),t.disabled,t.focused)),tt("for",t.inputId),C(1),zt(t.label)}}const Kte=function(i,e,t){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":e,"p-checkbox-focused":t}},Xte=function(i,e,t){return{"p-highlight":i,"p-disabled":e,"p-focus":t}},Zte={provide:vi,useExisting:Ct(()=>Tx),multi:!0};let Tx=(()=>{class i{constructor(t){this.cd=t,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(t,n,s){t.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(t),s&&n.focus())}updateModel(t){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(s=>!pe.equals(s,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:t})}handleChange(t){this.readonly||this.updateModel(t)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(t){this.model=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:pe.contains(this.value,this.model)}}return i.\u0275fac=function(t){return new(t||i)(Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-checkbox"]],viewQuery:function(t,n){if(1&t&&dt(Wte,5),2&t){let s;Re(s=Ae())&&(n.inputViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Et([Zte])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(t,n){if(1&t){const s=Te();B(0,"div",0)(1,"div",1)(2,"input",2,3),le("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),H()(),B(4,"div",4),le("click",function(o){U(s);const a=dn(3);return W(n.onClick(o,a,!0))}),Ze(5,"span",5),H()(),A(6,Yte,2,9,"label",6)}2&t&&(ut(n.styleClass),M("ngStyle",n.style)("ngClass",ar(18,Kte,n.checked(),n.disabled,n.focused)),C(2),M("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),tt("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),C(2),M("ngClass",ar(22,Xte,n.checked(),n.disabled,n.focused)),C(1),M("ngClass",n.checked()?n.checkboxIcon:null),C(1),M("ngIf",n.label))},dependencies:[ei,Nn,Ei],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),Qte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();const Jte=["headerchkbox"],ene=["filter"];function tne(i,e){1&i&&_e(0)}function nne(i,e){if(1&i&&(B(0,"div",7),Yi(1),A(2,tne,1,0,"ng-container",8),H()),2&i){const t=x();C(2),M("ngTemplateOutlet",t.headerTemplate)}}const S7=function(i){return{"p-checkbox-disabled":i}},ine=function(i,e,t){return{"p-highlight":i,"p-focus":e,"p-disabled":t}},I7=function(i){return{"pi pi-check":i}};function sne(i,e){if(1&i){const t=Te();B(0,"div",12)(1,"div",13)(2,"input",14),le("focus",function(){return U(t),W(x(2).onHeaderCheckboxFocus())})("blur",function(){return U(t),W(x(2).onHeaderCheckboxBlur())})("keydown.space",function(s){return U(t),W(x(2).toggleAll(s))}),H()(),B(3,"div",15,16),le("click",function(s){return U(t),W(x(2).toggleAll(s))}),Ze(5,"span",17),H()()}if(2&i){const t=x(2);M("ngClass",xe(5,S7,t.disabled||t.toggleAllDisabled)),C(2),M("checked",t.allChecked)("disabled",t.disabled||t.toggleAllDisabled),C(1),M("ngClass",ar(7,ine,t.allChecked,t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),C(2),M("ngClass",xe(11,I7,t.allChecked))}}function rne(i,e){1&i&&_e(0)}const one=function(i){return{options:i}};function ane(i,e){if(1&i&&(ze(0),A(1,rne,1,0,"ng-container",18),He()),2&i){const t=x(2);C(1),M("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",xe(2,one,t.filterOptions))}}function lne(i,e){if(1&i){const t=Te();B(0,"div",20)(1,"input",21,22),le("input",function(s){return U(t),W(x(3).onFilter(s))}),H(),Ze(3,"span",23),H()}if(2&i){const t=x(3);C(1),M("value",t.filterValue||"")("disabled",t.disabled),tt("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel)}}function cne(i,e){1&i&&A(0,lne,4,4,"div",19),2&i&&M("ngIf",x(2).filter)}function hne(i,e){if(1&i&&(B(0,"div",7),A(1,sne,6,13,"div",9),A(2,ane,2,4,"ng-container",10),A(3,cne,1,1,"ng-template",null,11,Os),H()),2&i){const t=dn(4),n=x();C(1),M("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),C(1),M("ngIf",n.filterTemplate)("ngIfElse",t)}}function une(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x().$implicit,n=x(2);C(1),zt(n.getOptionGroupLabel(t)||"empty")}}function dne(i,e){1&i&&_e(0)}function pne(i,e){1&i&&_e(0)}const Dx=function(i){return{$implicit:i}};function fne(i,e){if(1&i&&(B(0,"li",25),A(1,une,2,1,"span",3),A(2,dne,1,0,"ng-container",18),H(),A(3,pne,1,0,"ng-container",18)),2&i){const t=e.$implicit,n=x(2),s=dn(8);C(1),M("ngIf",!n.groupTemplate),C(1),M("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",xe(5,Dx,t)),C(1),M("ngTemplateOutlet",s)("ngTemplateOutletContext",xe(7,Dx,n.getOptionGroupChildren(t)))}}function gne(i,e){if(1&i&&(ze(0),A(1,fne,4,9,"ng-template",24),He()),2&i){const t=x();C(1),M("ngForOf",t.optionsToRender)}}function mne(i,e){1&i&&_e(0)}function yne(i,e){if(1&i&&(ze(0),A(1,mne,1,0,"ng-container",18),He()),2&i){const t=x(),n=dn(8);C(1),M("ngTemplateOutlet",n)("ngTemplateOutletContext",xe(2,Dx,t.optionsToRender))}}const _ne=function(i){return{"p-highlight":i}};function vne(i,e){if(1&i&&(B(0,"div",12)(1,"div",28),Ze(2,"span",17),H()()),2&i){const t=x().$implicit,n=x(2);M("ngClass",xe(3,S7,n.disabled||n.isOptionDisabled(t))),C(1),M("ngClass",xe(5,_ne,n.isSelected(t))),C(1),M("ngClass",xe(7,I7,n.isSelected(t)))}}function kne(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x().$implicit,n=x(2);C(1),zt(n.getOptionLabel(t))}}function wne(i,e){1&i&&_e(0)}const xne=function(i,e){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":e}},Mne=function(i,e){return{$implicit:i,index:e}};function bne(i,e){if(1&i){const t=Te();B(0,"li",27),le("click",function(s){const o=U(t).$implicit;return W(x(2).onOptionClick(s,o))})("dblclick",function(s){const o=U(t).$implicit;return W(x(2).onOptionDoubleClick(s,o))})("touchend",function(){const r=U(t).$implicit;return W(x(2).onOptionTouchEnd(r))})("keydown",function(s){const o=U(t).$implicit;return W(x(2).onOptionKeyDown(s,o))}),A(1,vne,3,9,"div",9),A(2,kne,2,1,"span",3),A(3,wne,1,0,"ng-container",18),H()}if(2&i){const t=e.$implicit,n=e.index,s=x(2);M("ngClass",Lt(8,xne,s.isSelected(t),s.isOptionDisabled(t))),tt("tabindex",s.disabled||s.isOptionDisabled(t)?null:"0")("aria-label",s.getOptionLabel(t))("aria-selected",s.isSelected(t)),C(1),M("ngIf",s.checkbox&&s.multiple),C(1),M("ngIf",!s.itemTemplate),C(1),M("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Lt(11,Mne,t,n))}}function Cne(i,e){1&i&&A(0,bne,4,14,"li",26),2&i&&M("ngForOf",e.$implicit)}function Ene(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(2);C(1),_n(" ",t.emptyFilterMessageLabel," ")}}function Sne(i,e){1&i&&_e(0,null,30)}function Ine(i,e){if(1&i&&(B(0,"li",29),A(1,Ene,2,1,"ng-container",10),A(2,Sne,2,0,"ng-container",8),H()),2&i){const t=x();C(1),M("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),C(1),M("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function Tne(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(2);C(1),_n(" ",t.emptyMessageLabel," ")}}function Dne(i,e){1&i&&_e(0,null,31)}function Rne(i,e){if(1&i&&(B(0,"li",29),A(1,Tne,2,1,"ng-container",10),A(2,Dne,2,0,"ng-container",8),H()),2&i){const t=x();C(1),M("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),C(1),M("ngTemplateOutlet",t.emptyTemplate)}}function Ane(i,e){1&i&&_e(0)}function Lne(i,e){if(1&i&&(B(0,"div",32),Yi(1,1),A(2,Ane,1,0,"ng-container",8),H()),2&i){const t=x();C(2),M("ngTemplateOutlet",t.footerTemplate)}}const Pne=[[["p-header"]],[["p-footer"]]],One=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},Nne=["p-header","p-footer"],Fne={provide:vi,useExisting:Ct(()=>Vne),multi:!0};let Vne=(()=>{class i{constructor(t,n,s,r){this.el=t,this.cd=n,this.filterService=s,this.config=r,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new ie,this.onClick=new ie,this.onDblClick=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(t){this._options=t,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:t=>this.onFilter(t),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template}})}getOptionLabel(t){return this.optionLabel?pe.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?pe.resolveFieldData(t,this.optionGroupChildren):t.items}getOptionGroupLabel(t){return this.optionGroupLabel?pe.resolveFieldData(t,this.optionGroupLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?pe.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}isOptionDisabled(t){return this.optionDisabled?pe.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionClick(t,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(t,n):this.onOptionClickMultiple(t,n):this.onOptionClickSingle(t,n),this.onClick.emit({originalEvent:t,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(t){this.disabled||this.isOptionDisabled(t)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(t,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:t,option:n,value:this.value})}onOptionClickSingle(t,n){let s=this.isSelected(n),r=!1;if(!this.optionTouched&&this.metaKeySelection){let a=t.metaKey||t.ctrlKey;s?a&&(this.value=null,r=!0):(this.value=this.getOptionValue(n),r=!0)}else this.value=s?null:this.getOptionValue(n),r=!0;r&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}))}onOptionClickMultiple(t,n){let s=this.isSelected(n),r=!1;if(!this.optionTouched&&this.metaKeySelection){let a=t.metaKey||t.ctrlKey;s?(a?this.removeOption(n):this.value=[this.getOptionValue(n)],r=!0):(this.value=a&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],r=!0)}else s?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],r=!0;r&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}))}onOptionClickCheckbox(t,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}))}removeOption(t){this.value=this.value.filter(n=>!pe.equals(n,this.getOptionValue(t),this.dataKey))}isSelected(t){let n=!1,s=this.getOptionValue(t);if(this.multiple){if(this.value)for(let r of this.value)if(pe.equals(r,s,this.dataKey)){n=!0;break}}else n=pe.equals(this.value,s,this.dataKey);return n}get allChecked(){let t=this.optionsToRender;if(!t||0===t.length)return!1;{let n=0,s=0,r=0,o=this.group?0:this.optionsToRender.length;for(let a of t)if(this.group)for(let l of this.getOptionGroupChildren(a)){let c=this.isOptionDisabled(l),h=this.isSelected(l);if(c)h?n++:s++;else{if(!h)return!1;r++}o++}else{let l=this.isOptionDisabled(a),c=this.isSelected(a);if(l)c?n++:s++;else{if(!c)return!1;r++}}return o===n||o===r||r&&o===r+s+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(ms.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(ms.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(t){this._filterValue=t.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let t=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let s of this.options){let r=this.filterService.filter(this.getOptionGroupChildren(s),t,this.filterValue,this.filterMatchMode,this.filterLocale);r&&r.length&&n.push({...s,[this.optionGroupChildren]:r})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(t=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(t),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let t=this.optionsToRender;if(!t||0===t.length)return!0;for(let n of t)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(t){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),t.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(s=>{if(this.group){let r=this.getOptionGroupChildren(s);r&&r.forEach(o=>{let a=this.isOptionDisabled(o);(!a||a&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let r=this.isOptionDisabled(s);(!r||r&&this.isSelected(s))&&n.push(this.getOptionValue(s))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(s=>{this.group?s.items&&s.items.forEach(r=>{this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}):this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}),this.value=n}onOptionKeyDown(t,n){if(this.readonly)return;let s=t.currentTarget;switch(t.which){case 40:var r=this.findNextItem(s);r&&r.focus(),t.preventDefault();break;case 38:var o=this.findPrevItem(s);o&&o.focus(),t.preventDefault();break;case 13:this.onOptionClick(t,n),t.preventDefault()}}findNextItem(t){let n=t.nextElementSibling;return n?q.hasClass(n,"p-disabled")||q.isHidden(n)||q.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(t){let n=t.previousElementSibling;return n?q.hasClass(n,"p-disabled")||q.isHidden(n)||q.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(qn),Y(fx),Y(Ba))},i.\u0275cmp=$t({type:i,selectors:[["p-listbox"]],contentQueries:function(t,n,s){if(1&t&&(Qn(s,mx,5),Qn(s,l7,5),Qn(s,Ni,4)),2&t){let r;Re(r=Ae())&&(n.headerFacet=r.first),Re(r=Ae())&&(n.footerFacet=r.first),Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(Jte,5),dt(ene,5)),2&t){let s;Re(s=Ae())&&(n.headerCheckboxViewChild=s.first),Re(s=Ae())&&(n.filterViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[Et([Fne])],ngContentSelectors:Nne,decls:12,vars:18,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(t,n){1&t&&(go(Pne),B(0,"div",0),A(1,nne,3,1,"div",1),A(2,hne,5,3,"div",1),B(3,"div",0)(4,"ul",2),A(5,gne,2,1,"ng-container",3),A(6,yne,2,4,"ng-container",3),A(7,Cne,1,1,"ng-template",null,4,Os),A(9,Ine,3,3,"li",5),A(10,Rne,3,3,"li",5),H()(),A(11,Lne,3,1,"div",6),H()),2&t&&(ut(n.styleClass),M("ngClass",xe(16,One,n.disabled))("ngStyle",n.style),C(1),M("ngIf",n.headerFacet||n.headerTemplate),C(1),M("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),C(1),ut(n.listStyleClass),M("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),C(1),tt("aria-multiselectable",n.multiple),C(1),M("ngIf",n.group),C(1),M("ngIf",!n.group),C(3),M("ngIf",n.hasFilter()&&n.isEmpty()),C(1),M("ngIf",!n.hasFilter()&&n.isEmpty()),C(1),M("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[ei,xo,Nn,Xi,Ei,ja],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),zne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Fi,Yo,Fi]}),i})();const Hne=["container"],Bne=["in"],jne=["multiIn"],qne=["multiContainer"],Gne=["ddBtn"],Une=["items"],Wne=["scroller"],$ne=function(i,e){return{"p-autocomplete-dd-input":i,"p-disabled":e}};function Yne(i,e){if(1&i){const t=Te();B(0,"input",8,9),le("click",function(s){return U(t),W(x().onInputClick(s))})("input",function(s){return U(t),W(x().onInput(s))})("keydown",function(s){return U(t),W(x().onKeydown(s))})("keyup",function(s){return U(t),W(x().onKeyup(s))})("focus",function(s){return U(t),W(x().onInputFocus(s))})("blur",function(s){return U(t),W(x().onInputBlur(s))})("change",function(s){return U(t),W(x().onInputChange(s))})("paste",function(s){return U(t),W(x().onInputPaste(s))}),H()}if(2&i){const t=x();ut(t.inputStyleClass),M("autofocus",t.autofocus)("ngStyle",t.inputStyle)("autocomplete",t.autocomplete)("ngClass",Lt(20,$ne,t.dropdown,t.disabled))("value",t.inputFieldValue)("readonly",t.readonly)("disabled",t.disabled),tt("type",t.type)("id",t.inputId)("required",t.required)("name",t.name)("placeholder",t.placeholder)("size",t.size)("maxlength",t.maxlength)("tabindex",t.tabindex)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)}}function Kne(i,e){if(1&i){const t=Te();B(0,"i",10),le("click",function(){return U(t),W(x().clear())}),H()}}function Xne(i,e){if(1&i){const t=Te();B(0,"i",10),le("click",function(){return U(t),W(x().clear())}),H()}}function Zne(i,e){1&i&&_e(0)}function Qne(i,e){if(1&i&&(B(0,"span",22),ke(1),H()),2&i){const t=x().$implicit,n=x(2);C(1),zt(n.resolveFieldData(t))}}function Jne(i,e){if(1&i){const t=Te();B(0,"span",23),le("click",function(){U(t),x();const s=dn(1);return W(x(2).removeItem(s))}),H()}}const hm=function(i){return{$implicit:i}};function eie(i,e){if(1&i&&(B(0,"li",17,18),A(2,Zne,1,0,"ng-container",19),A(3,Qne,2,1,"span",20),A(4,Jne,1,0,"span",21),H()),2&i){const t=e.$implicit,n=x(2);C(2),M("ngTemplateOutlet",n.selectedItemTemplate)("ngTemplateOutletContext",xe(4,hm,t)),C(1),M("ngIf",!n.selectedItemTemplate),C(1),M("ngIf",!n.disabled&&!n.readonly)}}const tie=function(i,e){return{"p-disabled":i,"p-focus":e}};function nie(i,e){if(1&i){const t=Te();B(0,"ul",11,12),le("click",function(){return U(t),W(dn(5).focus())}),A(2,eie,5,6,"li",13),B(3,"li",14)(4,"input",15,16),le("input",function(s){return U(t),W(x().onInput(s))})("click",function(s){return U(t),W(x().onInputClick(s))})("keydown",function(s){return U(t),W(x().onKeydown(s))})("keyup",function(s){return U(t),W(x().onKeyup(s))})("focus",function(s){return U(t),W(x().onInputFocus(s))})("blur",function(s){return U(t),W(x().onInputBlur(s))})("change",function(s){return U(t),W(x().onInputChange(s))})("paste",function(s){return U(t),W(x().onInputPaste(s))}),H()()()}if(2&i){const t=x();M("ngClass",Lt(20,tie,t.disabled,t.focus)),C(2),M("ngForOf",t.value),C(2),ut(t.inputStyleClass),M("autofocus",t.autofocus)("disabled",t.disabled)("readonly",t.readonly)("autocomplete",t.autocomplete)("ngStyle",t.inputStyle),tt("type",t.type)("id",t.inputId)("placeholder",t.value&&t.value.length?null:t.placeholder)("tabindex",t.tabindex)("maxlength",t.maxlength)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)("aria-controls",t.listId)("aria-expanded",t.overlayVisible)("aria-activedescendant","p-highlighted-option")}}function iie(i,e){1&i&&Ze(0,"i",24)}function sie(i,e){if(1&i){const t=Te();B(0,"button",25,26),le("click",function(s){return U(t),W(x().handleDropdownClick(s))}),H()}if(2&i){const t=x();M("icon",t.dropdownIcon)("disabled",t.disabled),tt("aria-label",t.dropdownAriaLabel)("tabindex",t.tabindex)}}function rie(i,e){1&i&&_e(0)}function oie(i,e){1&i&&_e(0)}const T7=function(i,e){return{$implicit:i,options:e}};function aie(i,e){if(1&i&&A(0,oie,1,0,"ng-container",19),2&i){const t=e.$implicit,n=e.options;x(2),M("ngTemplateOutlet",dn(6))("ngTemplateOutletContext",Lt(2,T7,t,n))}}function lie(i,e){1&i&&_e(0)}const cie=function(i){return{options:i}};function hie(i,e){if(1&i&&A(0,lie,1,0,"ng-container",19),2&i){const t=e.options;M("ngTemplateOutlet",x(4).loaderTemplate)("ngTemplateOutletContext",xe(2,cie,t))}}function uie(i,e){1&i&&(ze(0),A(1,hie,1,4,"ng-template",36),He())}const um=function(i){return{height:i}};function die(i,e){if(1&i){const t=Te();B(0,"p-scroller",33,34),le("onLazyLoad",function(s){return U(t),W(x(2).onLazyLoad.emit(s))}),A(2,aie,1,5,"ng-template",35),A(3,uie,2,0,"ng-container",31),H()}if(2&i){const t=x(2);ai(xe(8,um,t.scrollHeight)),M("items",t.suggestions)("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("lazy",t.lazy)("options",t.virtualScrollOptions),C(3),M("ngIf",t.loaderTemplate)}}function pie(i,e){1&i&&_e(0)}const fie=function(){return{}};function gie(i,e){if(1&i&&(ze(0),A(1,pie,1,0,"ng-container",19),He()),2&i){x();const t=dn(6),n=x();C(1),M("ngTemplateOutlet",t)("ngTemplateOutletContext",Lt(3,T7,n.suggestions,Ki(2,fie)))}}function mie(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x().$implicit,n=x(4);C(1),zt(n.getOptionGroupLabel(t)||"empty")}}function yie(i,e){1&i&&_e(0)}function _ie(i,e){1&i&&_e(0)}function vie(i,e){if(1&i&&(B(0,"li",42),A(1,mie,2,1,"span",31),A(2,yie,1,0,"ng-container",19),H(),A(3,_ie,1,0,"ng-container",19)),2&i){const t=e.$implicit,n=x(2).options,s=dn(5),r=x(2);M("ngStyle",xe(6,um,n.itemSize+"px")),C(1),M("ngIf",!r.groupTemplate),C(1),M("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",xe(8,hm,t)),C(1),M("ngTemplateOutlet",s)("ngTemplateOutletContext",xe(10,hm,r.getOptionGroupChildren(t)))}}function kie(i,e){if(1&i&&(ze(0),A(1,vie,4,12,"ng-template",41),He()),2&i){const t=x().$implicit;C(1),M("ngForOf",t)}}function wie(i,e){1&i&&_e(0)}function xie(i,e){if(1&i&&(ze(0),A(1,wie,1,0,"ng-container",19),He()),2&i){const t=x().$implicit,n=dn(5);C(1),M("ngTemplateOutlet",n)("ngTemplateOutletContext",xe(2,hm,t))}}function Mie(i,e){if(1&i&&(B(0,"span"),ke(1),H()),2&i){const t=x().$implicit,n=x(4);C(1),zt(n.resolveFieldData(t))}}function bie(i,e){1&i&&_e(0)}const Cie=function(i){return{"p-highlight":i}},Eie=function(i,e){return{$implicit:i,index:e}};function Sie(i,e){if(1&i){const t=Te();B(0,"li",44),le("click",function(){const r=U(t).$implicit;return W(x(4).selectItem(r))}),A(1,Mie,2,1,"span",31),A(2,bie,1,0,"ng-container",19),H()}if(2&i){const t=e.$implicit,n=e.index,s=x(2).options,r=x(2);M("ngStyle",xe(6,um,s.itemSize+"px"))("ngClass",xe(8,Cie,t===r.highlightOption))("id",r.highlightOption==t?"p-highlighted-option":""),C(1),M("ngIf",!r.itemTemplate),C(1),M("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Lt(10,Eie,t,s.getOptions?s.getOptions(n):n))}}function Iie(i,e){1&i&&A(0,Sie,3,13,"li",43),2&i&&M("ngForOf",e.$implicit)}function Tie(i,e){if(1&i&&(ze(0),ke(1),He()),2&i){const t=x(4);C(1),_n(" ",t.emptyMessageLabel," ")}}function Die(i,e){1&i&&_e(0,null,47)}function Rie(i,e){if(1&i&&(B(0,"li",45),A(1,Tie,2,1,"ng-container",46),A(2,Die,2,0,"ng-container",29),H()),2&i){const t=x().options,n=x(2);M("ngStyle",xe(4,um,t.itemSize+"px")),C(1),M("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),C(1),M("ngTemplateOutlet",n.emptyTemplate)}}function Aie(i,e){if(1&i&&(B(0,"ul",37,38),A(2,kie,2,1,"ng-container",31),A(3,xie,2,4,"ng-container",31),A(4,Iie,1,1,"ng-template",null,39,Os),A(6,Rie,3,6,"li",40),H()),2&i){const t=e.options,n=x(2);ai(t.contentStyle),M("ngClass",t.contentStyleClass),tt("id",n.listId),C(2),M("ngIf",n.group),C(1),M("ngIf",!n.group),C(3),M("ngIf",n.noResults&&n.showEmptyMessage)}}function Lie(i,e){1&i&&_e(0)}const Pie=function(){return["p-autocomplete-panel p-component"]},Oie=function(i,e){return{showTransitionParams:i,hideTransitionParams:e}},Nie=function(i){return{value:"visible",params:i}};function Fie(i,e){if(1&i){const t=Te();B(0,"div",27,28),le("click",function(s){return U(t),W(x().onOverlayClick(s))})("@overlayAnimation.start",function(s){return U(t),W(x().onOverlayAnimationStart(s))})("@overlayAnimation.done",function(s){return U(t),W(x().onOverlayAnimationEnd(s))}),A(2,rie,1,0,"ng-container",29),A(3,die,4,10,"p-scroller",30),A(4,gie,2,6,"ng-container",31),A(5,Aie,7,7,"ng-template",null,32,Os),A(7,Lie,1,0,"ng-container",29),H()}if(2&i){const t=x();ut(t.panelStyleClass),V1("max-height",t.virtualScroll?"auto":t.scrollHeight),M("ngClass",Ki(11,Pie))("ngStyle",t.panelStyle)("@overlayAnimation",xe(15,Nie,Lt(12,Oie,t.showTransitionOptions,t.hideTransitionOptions))),C(2),M("ngTemplateOutlet",t.headerTemplate),C(1),M("ngIf",t.virtualScroll),C(1),M("ngIf",!t.virtualScroll),C(3),M("ngTemplateOutlet",t.footerTemplate)}}const Vie=function(i,e){return{"p-autocomplete p-component":!0,"p-autocomplete-dd":i,"p-autocomplete-multiple":e}},zie={provide:vi,useExisting:Ct(()=>D7),multi:!0};let D7=(()=>{class i{constructor(t,n,s,r,o,a){this.el=t,this.renderer=n,this.cd=s,this.differs=r,this.config=o,this.overlayService=a,this.minLength=1,this.delay=300,this.scrollHeight="200px",this.lazy=!1,this.type="text",this.autoZIndex=!0,this.baseZIndex=0,this.dropdownIcon="pi pi-chevron-down",this.unique=!0,this.completeOnFocus=!1,this.showClear=!1,this.dropdownMode="blank",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autocomplete="off",this.completeMethod=new ie,this.onSelect=new ie,this.onUnselect=new ie,this.onFocus=new ie,this.onBlur=new ie,this.onDropdownClick=new ie,this.onClear=new ie,this.onKeyUp=new ie,this.onShow=new ie,this.onHide=new ie,this.onLazyLoad=new ie,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.overlayVisible=!1,this.focus=!1,this.inputFieldValue=null,this.inputValue=null,this.differ=r.find([]).create(null),this.listId=Iu()+"_list"}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get suggestions(){return this._suggestions}set suggestions(t){this._suggestions=t,this.handleSuggestionsChange()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlay&&this.overlay.offsetParent&&(setTimeout(()=>{this.overlay&&this.alignOverlay()},1),this.suggestionsUpdated=!1),this.highlightOptionChanged&&(setTimeout(()=>{if(this.overlay&&this.itemsWrapper){let t=q.findSingle(this.overlay,"li.p-highlight");t&&q.scrollInView(this.itemsWrapper,t)}},1),this.highlightOptionChanged=!1)}handleSuggestionsChange(){null!=this._suggestions&&this.loading&&(this.highlightOption=null,this._suggestions.length?(this.noResults=!1,this.show(),this.suggestionsUpdated=!0,this.autoHighlight&&(this.highlightOption=this._suggestions[0])):(this.noResults=!0,this.showEmptyMessage?(this.show(),this.suggestionsUpdated=!0):this.hide()),this.loading=!1)}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItem":this.selectedItemTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template}})}writeValue(t){this.value=t,this.filled=this.value&&""!=this.value,this.updateInputField(),this.cd.markForCheck()}getOptionGroupChildren(t){return this.optionGroupChildren?pe.resolveFieldData(t,this.optionGroupChildren):t.items}getOptionGroupLabel(t){return this.optionGroupLabel?pe.resolveFieldData(t,this.optionGroupLabel):null!=t.label?t.label:t}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onInput(t){if(!this.inputKeyDown&&q.isIE())return;this.timeout&&clearTimeout(this.timeout);let n=t.target.value;this.inputValue=n,!this.multiple&&!this.forceSelection&&this.onModelChange(n),0===n.length&&!this.multiple&&(this.value=null,this.hide(),this.onClear.emit(t),this.onModelChange(n)),n.length>=this.minLength?this.timeout=setTimeout(()=>{this.search(t,n)},this.delay):this.hide(),this.updateFilledState(),this.inputKeyDown=!1}onInputClick(t){this.documentClickListener&&(this.inputClick=!0)}search(t,n){null!=n&&(this.loading=!0,this.completeMethod.emit({originalEvent:t,query:n}))}selectItem(t,n=!0){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.multiple?(this.multiInputEL.nativeElement.value="",this.value=this.value||[],(!this.isSelected(t)||!this.unique)&&(this.value=[...this.value,t],this.onModelChange(this.value))):(this.inputEL.nativeElement.value=this.resolveFieldData(t),this.value=t,this.onModelChange(this.value)),this.onSelect.emit(t),this.updateFilledState(),n&&(this.itemClicked=!0,this.focusInput())}show(){if(this.multiInputEL||this.inputEL){let t=this.multiple?this.multiInputEL.nativeElement.ownerDocument.activeElement==this.multiInputEL.nativeElement:this.inputEL.nativeElement.ownerDocument.activeElement==this.inputEL.nativeElement;!this.overlayVisible&&t&&(this.overlayVisible=!0)}}clear(){this.multiple?this.value=null:(this.inputValue=null,this.inputEL.nativeElement.value=""),this.updateFilledState(),this.onModelChange(this.value),this.onClear.emit()}onOverlayAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,this.itemsWrapper=this.virtualScroll?q.findSingle(this.overlay,".p-scroller"):this.overlay,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Si.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.onShow.emit(t);break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(t){"void"===t.toState&&this.autoZIndex&&Si.clear(t.element)}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):q.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=q.getWidth(this.el.nativeElement.children[0])+"px"))}resolveFieldData(t){let n=this.field?pe.resolveFieldData(t,this.field):t;return void 0!==n?n:""}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.appendTo?q.absolutePosition(this.overlay,this.multiple?this.multiContainerEL.nativeElement:this.inputEL.nativeElement):q.relativePosition(this.overlay,this.multiple?this.multiContainerEL.nativeElement:this.inputEL.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}handleDropdownClick(t){if(this.overlayVisible)this.hide();else{this.focusInput();let n=this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value;"blank"===this.dropdownMode?this.search(t,""):"current"===this.dropdownMode&&this.search(t,n),this.onDropdownClick.emit({originalEvent:t,query:n})}}focusInput(){this.multiple?this.multiInputEL.nativeElement.focus():this.inputEL.nativeElement.focus()}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(ms.EMPTY_MESSAGE)}removeItem(t){let n=q.index(t),s=this.value[n];this.value=this.value.filter((r,o)=>o!=n),this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(s)}onKeydown(t){if(this.overlayVisible)switch(t.which){case 40:if(this.group){let s=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==s){let r=s.itemIndex+1;r<this.getOptionGroupChildren(this.suggestions[s.groupIndex]).length?(this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex])[r],this.highlightOptionChanged=!0):this.suggestions[s.groupIndex+1]&&(this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex+1])[0],this.highlightOptionChanged=!0)}else this.highlightOption=this.getOptionGroupChildren(this.suggestions[0])[0]}else{let s=this.findOptionIndex(this.highlightOption,this.suggestions);if(-1!=s){var n=s+1;n!=this.suggestions.length&&(this.highlightOption=this.suggestions[n],this.highlightOptionChanged=!0)}else this.highlightOption=this.suggestions[0]}t.preventDefault();break;case 38:if(this.group){let s=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==s){let r=s.itemIndex-1;if(r>=0)this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex])[r],this.highlightOptionChanged=!0;else if(r<0){let o=this.suggestions[s.groupIndex-1];o&&(this.highlightOption=this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1],this.highlightOptionChanged=!0)}}}else{let s=this.findOptionIndex(this.highlightOption,this.suggestions);s>0&&(this.highlightOption=this.suggestions[s-1],this.highlightOptionChanged=!0)}t.preventDefault();break;case 13:this.highlightOption&&(this.selectItem(this.highlightOption),this.hide()),t.preventDefault();break;case 27:this.hide(),t.preventDefault();break;case 9:this.highlightOption&&this.selectItem(this.highlightOption),this.hide()}else 40===t.which&&this.suggestions?this.search(t,t.target.value):t.ctrlKey&&"z"===t.key&&!this.multiple?(this.inputEL.nativeElement.value=this.resolveFieldData(null),this.value="",this.onModelChange(this.value)):t.ctrlKey&&"z"===t.key&&this.multiple&&(this.value.pop(),this.onModelChange(this.value),this.updateFilledState());if(this.multiple&&8===t.which&&this.value&&this.value.length&&!this.multiInputEL.nativeElement.value){this.value=[...this.value];const s=this.value.pop();this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(s)}this.inputKeyDown=!0}onKeyup(t){this.onKeyUp.emit(t)}onInputFocus(t){!this.itemClicked&&this.completeOnFocus&&this.search(t,this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value),this.focus=!0,this.onFocus.emit(t),this.itemClicked=!1}onInputBlur(t){this.focus=!1,this.onModelTouched(),this.onBlur.emit(t)}onInputChange(t){if(this.forceSelection){let n=!1,s=t.target.value.trim();if(this.suggestions)for(let r of this.suggestions){let o=this.field?pe.resolveFieldData(r,this.field):r;if(o&&s===o.trim()){n=!0,this.forceSelectionUpdateModelTimeout=setTimeout(()=>{this.selectItem(r,!1)},250);break}}n||(this.multiple?this.multiInputEL.nativeElement.value="":(this.value=null,this.inputEL.nativeElement.value=""),this.onClear.emit(t),this.onModelChange(this.value),this.updateFilledState())}}onInputPaste(t){this.onKeydown(t)}isSelected(t){let n=!1;if(this.value&&this.value.length)for(let s=0;s<this.value.length;s++)if(pe.equals(this.value[s],t,this.dataKey)){n=!0;break}return n}findOptionIndex(t,n){let s=-1;if(n)for(let r=0;r<n.length;r++)if(pe.equals(t,n[r])){s=r;break}return s}findOptionGroupIndex(t,n){let s,r;if(n)for(let o=0;o<n.length&&(s=o,r=this.findOptionIndex(t,this.getOptionGroupChildren(n[o])),-1===r);o++);return-1!==r?{groupIndex:s,itemIndex:r}:-1}updateFilledState(){this.filled=this.multiple?this.value&&this.value.length||this.multiInputEL&&this.multiInputEL.nativeElement&&""!=this.multiInputEL.nativeElement.value:this.inputFieldValue&&""!=this.inputFieldValue||this.inputEL&&this.inputEL.nativeElement&&""!=this.inputEL.nativeElement.value}updateInputField(){let t=this.resolveFieldData(this.value);this.inputFieldValue=t,this.inputEL&&this.inputEL.nativeElement&&(this.inputEL.nativeElement.value=t),this.updateFilledState()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{3!==n.which&&(!this.inputClick&&!this.isDropdownClick(n)&&this.hide(),this.inputClick=!1,this.cd.markForCheck())}))}isDropdownClick(t){if(this.dropdown){let n=t.target;return n===this.dropdownButton.nativeElement||n.parentNode===this.dropdownButton.nativeElement}return!1}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!q.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new am(this.containerEL.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay&&(this.overlay=null,this.onHide.emit())}ngOnDestroy(){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Si.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Ps),Y(qn),Y(Z1),Y(Ba),Y(om))},i.\u0275cmp=$t({type:i,selectors:[["p-autoComplete"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(Hne,5),dt(Bne,5),dt(jne,5),dt(qne,5),dt(Gne,5),dt(Une,5),dt(Wne,5)),2&t){let s;Re(s=Ae())&&(n.containerEL=s.first),Re(s=Ae())&&(n.inputEL=s.first),Re(s=Ae())&&(n.multiInputEL=s.first),Re(s=Ae())&&(n.multiContainerEL=s.first),Re(s=Ae())&&(n.dropdownButton=s.first),Re(s=Ae())&&(n.itemsViewChild=s.first),Re(s=Ae())&&(n.scroller=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,n){2&t&&Da("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus&&!n.disabled||n.autofocus||n.overlayVisible)("p-autocomplete-clearable",n.showClear&&!n.disabled)},inputs:{minLength:"minLength",delay:"delay",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",maxlength:"maxlength",name:"name",required:"required",size:"size",appendTo:"appendTo",autoHighlight:"autoHighlight",forceSelection:"forceSelection",type:"type",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",ariaLabel:"ariaLabel",dropdownAriaLabel:"dropdownAriaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:"unique",group:"group",completeOnFocus:"completeOnFocus",showClear:"showClear",field:"field",dropdown:"dropdown",showEmptyMessage:"showEmptyMessage",dropdownMode:"dropdownMode",multiple:"multiple",tabindex:"tabindex",dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:"autofocus",autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",itemSize:"itemSize",suggestions:"suggestions"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide",onLazyLoad:"onLazyLoad"},features:[Et([zie])],decls:9,vars:14,consts:[[3,"ngClass","ngStyle"],["container",""],["pAutoFocus","","class","p-autocomplete-input p-inputtext p-component","aria-autocomplete","list","role","searchbox",3,"autofocus","ngStyle","class","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste",4,"ngIf"],["class","p-autocomplete-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-autocomplete-multiple-container p-component p-inputtext",3,"ngClass","click",4,"ngIf"],["class","p-autocomplete-loader pi pi-spinner pi-spin",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown","pRipple","",3,"icon","disabled","click",4,"ngIf"],[3,"ngClass","max-height","ngStyle","class","click",4,"ngIf"],["pAutoFocus","","aria-autocomplete","list","role","searchbox",1,"p-autocomplete-input","p-inputtext","p-component",3,"autofocus","ngStyle","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste"],["in",""],[1,"p-autocomplete-clear-icon","pi","pi-times",3,"click"],[1,"p-autocomplete-multiple-container","p-component","p-inputtext",3,"ngClass","click"],["multiContainer",""],["class","p-autocomplete-token",4,"ngFor","ngForOf"],[1,"p-autocomplete-input-token"],["pAutoFocus","","aria-autocomplete","list","role","searchbox","aria-haspopup","true",3,"autofocus","disabled","readonly","autocomplete","ngStyle","input","click","keydown","keyup","focus","blur","change","paste"],["multiIn",""],[1,"p-autocomplete-token"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],["class","p-autocomplete-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-autocomplete-token-label"],[1,"p-autocomplete-token-icon","pi","pi-times-circle",3,"click"],[1,"p-autocomplete-loader","pi","pi-spinner","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown",3,"icon","disabled","click"],["ddBtn",""],[3,"ngClass","ngStyle","click"],["panel",""],[4,"ngTemplateOutlet"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-autocomplete-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-autocomplete-item-group",3,"ngStyle"],["role","option","class","p-autocomplete-item","pRipple","",3,"ngStyle","ngClass","id","click",4,"ngFor","ngForOf"],["role","option","pRipple","",1,"p-autocomplete-item",3,"ngStyle","ngClass","id","click"],[1,"p-autocomplete-empty-message",3,"ngStyle"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(t,n){1&t&&(B(0,"span",0,1),A(2,Yne,2,23,"input",2),A(3,Kne,1,0,"i",3),A(4,Xne,1,0,"i",3),A(5,nie,6,23,"ul",4),A(6,iie,1,0,"i",5),A(7,sie,2,4,"button",6),A(8,Fie,8,17,"div",7),H()),2&t&&(ut(n.styleClass),M("ngClass",Lt(11,Vie,n.dropdown,n.multiple))("ngStyle",n.style),C(2),M("ngIf",!n.multiple),C(1),M("ngIf",!n.multiple&&n.filled&&!n.disabled&&n.showClear),C(1),M("ngIf",n.multiple&&n.filled&&!n.disabled&&n.showClear),C(1),M("ngIf",n.multiple),C(1),M("ngIf",n.loading),C(1),M("ngIf",n.dropdown),C(1),M("ngIf",n.overlayVisible))},dependencies:[ei,xo,Nn,Xi,Ei,yx,Ni,ja,kx,p7],styles:[".p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete .p-autocomplete-panel{min-width:100%;top:0;left:0}.p-autocomplete-panel{position:absolute;overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}.p-autocomplete-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-autocomplete-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Dc("overlayAnimation",[fs(":enter",[_i({opacity:0,transform:"scaleY(0.8)"}),Fs("{{showTransitionParams}}")]),fs(":leave",[Fs("{{hideTransitionParams}}",_i({opacity:0}))])])]},changeDetection:0}),i})(),Hie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Mx,Ll,Fi,Yo,Tu,_x,Fi,Tu,_x]}),i})();class ni extends Xn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const dm=it(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function R7(...i){const e=n1(i),t=p3(i),{args:n,keys:s}=KT(i);if(0===n.length)return si([],e);const r=new Kn(function Bie(i,e,t=gc){return n=>{A7(e,()=>{const{length:s}=i,r=new Array(s);let o=s,a=s;for(let l=0;l<s;l++)A7(e,()=>{const c=si(i[l],e);let h=!1;c.subscribe(pi(n,u=>{r[l]=u,h||(h=!0,a--),a||n.next(t(r.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,s?o=>ZT(s,o):gc));return t?r.pipe(XT(t)):r}function A7(i,e,t){i?va(t,i,e):e()}function Rx(...i){return function jie(){return Vh(1)}()(si(i,n1(i)))}function L7(i){return new Kn(e=>{oo(i()).subscribe(e)})}function yp(i,e){const t=me(i)?i:()=>i,n=s=>s.error(t());return new Kn(e?s=>e.schedule(n,0,s):n)}function Ax(){return Mi((i,e)=>{let t=null;i._refCount++;const n=pi(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const s=i._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class P7 extends Kn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Z4(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nn;const t=this.getSubject();e.add(this.source.subscribe(pi(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nn.EMPTY)}return e}refCount(){return Ax()(this)}}function Ko(i,e){return Mi((t,n)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&n.complete();t.subscribe(pi(n,l=>{s?.unsubscribe();let c=0;const h=r++;oo(i(l,h)).subscribe(s=pi(n,u=>n.next(e?e(l,u,h,c++):u),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function _p(i){return i<=0?()=>ka:Mi((e,t)=>{let n=0;e.subscribe(pi(t,s=>{++n<=i&&(t.next(s),i<=n&&t.complete())}))})}function pm(i){return Mi((e,t)=>{let n=!1;e.subscribe(pi(t,s=>{n=!0,t.next(s)},()=>{n||t.next(i),t.complete()}))})}function O7(i=Gie){return Mi((e,t)=>{let n=!1;e.subscribe(pi(t,s=>{n=!0,t.next(s)},()=>n?t.complete():t.error(i())))})}function Gie(){return new dm}function Pl(i,e){const t=arguments.length>=2;return n=>n.pipe(i?za((s,r)=>i(s,r,n)):gc,_p(1),t?pm(e):O7(()=>new dm))}function Qi(i,e,t){const n=me(i)||e||t?{next:i,error:e,complete:t}:i;return n?Mi((s,r)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;s.subscribe(pi(r,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),r.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),r.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),r.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):gc}function Ol(i){return Mi((e,t)=>{let r,n=null,s=!1;n=e.subscribe(pi(t,void 0,void 0,o=>{r=oo(i(o,Ol(i)(e))),n?(n.unsubscribe(),n=null,r.subscribe(t)):s=!0})),s&&(n.unsubscribe(),n=null,r.subscribe(t))})}function Uie(i,e,t,n,s){return(r,o)=>{let a=t,l=e,c=0;r.subscribe(pi(o,h=>{const u=c++;l=a?i(l,h,u):(a=!0,h),n&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function N7(i,e){return Mi(Uie(i,e,arguments.length>=2,!0))}function Lx(i){return i<=0?()=>ka:Mi((e,t)=>{let n=[];e.subscribe(pi(t,s=>{n.push(s),i<n.length&&n.shift()},()=>{for(const s of n)t.next(s);t.complete()},void 0,()=>{n=null}))})}function F7(i,e){const t=arguments.length>=2;return n=>n.pipe(i?za((s,r)=>i(s,r,n)):gc,Lx(1),t?pm(e):O7(()=>new dm))}function Px(i){return Mi((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const wt="primary",vp=Symbol("RouteTitle");class Yie{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Du(i){return new Yie(i)}function Kie(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const s={};for(let r=0;r<n.length;r++){const o=n[r],a=i[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:s}}function Xo(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!V7(i[s],e[s]))return!1;return!0}function V7(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((s,r)=>n[r]===s)}return i===e}function z7(i){return Array.prototype.concat.apply([],i)}function H7(i){return i.length>0?i[i.length-1]:null}function Vi(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function Nl(i){return sk(i)?i:F1(i)?si(Promise.resolve(i)):je(i)}const Qie={exact:function q7(i,e,t){if(!Vc(i.segments,e.segments)||!fm(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!q7(i.children[n],e.children[n],t))return!1;return!0},subset:G7},B7={exact:function Jie(i,e){return Xo(i,e)},subset:function ese(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>V7(i[t],e[t]))},ignored:()=>!0};function j7(i,e,t){return Qie[t.paths](i.root,e.root,t.matrixParams)&&B7[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function G7(i,e,t){return U7(i,e,e.segments,t)}function U7(i,e,t,n){if(i.segments.length>t.length){const s=i.segments.slice(0,t.length);return!(!Vc(s,t)||e.hasChildren()||!fm(s,t,n))}if(i.segments.length===t.length){if(!Vc(i.segments,t)||!fm(i.segments,t,n))return!1;for(const s in e.children)if(!i.children[s]||!G7(i.children[s],e.children[s],n))return!1;return!0}{const s=t.slice(0,i.segments.length),r=t.slice(i.segments.length);return!!(Vc(i.segments,s)&&fm(i.segments,s,n)&&i.children[wt])&&U7(i.children[wt],e,r,n)}}function fm(i,e,t){return e.every((n,s)=>B7[t](i[s].parameters,n.parameters))}class Fc{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return ise.serialize(this)}}class xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vi(t,(n,s)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gm(this)}}class kp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Du(this.parameters)),this._parameterMap}toString(){return K7(this)}}function Vc(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let W7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:function(){return new Nx},providedIn:"root"}),i})();class Nx{parse(e){const t=new dse(e);return new Fc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wp(e.root,!0)}`,n=function ose(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(s=>`${mm(t)}=${mm(s)}`).join("&"):`${mm(t)}=${mm(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function sse(i){return encodeURI(i)}(e.fragment)}`:""}`}}const ise=new Nx;function gm(i){return i.segments.map(e=>K7(e)).join("/")}function wp(i,e){if(!i.hasChildren())return gm(i);if(e){const t=i.children[wt]?wp(i.children[wt],!1):"",n=[];return Vi(i.children,(s,r)=>{r!==wt&&n.push(`${r}:${wp(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function nse(i,e){let t=[];return Vi(i.children,(n,s)=>{s===wt&&(t=t.concat(e(n,s)))}),Vi(i.children,(n,s)=>{s!==wt&&(t=t.concat(e(n,s)))}),t}(i,(n,s)=>s===wt?[wp(i.children[wt],!1)]:[`${s}:${wp(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[wt]?`${gm(i)}/${t[0]}`:`${gm(i)}/(${t.join("//")})`}}function $7(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mm(i){return $7(i).replace(/%3B/gi,";")}function Fx(i){return $7(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ym(i){return decodeURIComponent(i)}function Y7(i){return ym(i.replace(/\+/g,"%20"))}function K7(i){return`${Fx(i.path)}${function rse(i){return Object.keys(i).map(e=>`;${Fx(e)}=${Fx(i[e])}`).join("")}(i.parameters)}`}const ase=/^[^\/()?;=#]+/;function _m(i){const e=i.match(ase);return e?e[0]:""}const lse=/^[^=?&#]+/,hse=/^[^&#]+/;class dse{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[wt]=new xt(e,t)),n}parseSegment(){const e=_m(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new kp(ym(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_m(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const s=_m(this.remaining);s&&(n=s,this.capture(n))}e[ym(t)]=ym(n)}parseQueryParam(e){const t=function cse(i){const e=i.match(lse);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function use(i){const e=i.match(hse);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const s=Y7(t),r=Y7(n);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_m(this.remaining),s=this.remaining[n.length];if("/"!==s&&")"!==s&&";"!==s)throw new re(4010,!1);let r;n.indexOf(":")>-1?(r=n.slice(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=wt);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[wt]:new xt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}}function Vx(i){return i.segments.length>0?new xt([],{[wt]:i}):i}function vm(i){const e={};for(const n of Object.keys(i.children)){const r=vm(i.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function pse(i){if(1===i.numberOfChildren&&i.children[wt]){const e=i.children[wt];return new xt(i.segments.concat(e.segments),e.children)}return i}(new xt(i.segments,e))}function zc(i){return i instanceof Fc}function mse(i,e,t,n,s){if(0===t.length)return Ru(e.root,e.root,e.root,n,s);const r=function Q7(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Z7(!0,0,i);let e=0,t=!1;const n=i.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Vi(r.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new Z7(t,e,n)}(t);return r.toRoot()?Ru(e.root,e.root,new xt([],{}),n,s):function o(l){const c=function _se(i,e,t,n){if(i.isAbsolute)return new Au(e.root,!0,0);if(-1===n)return new Au(t,t===e.root,0);return function J7(i,e,t){let n=i,s=e,r=t;for(;r>s;){if(r-=s,n=n.parent,!n)throw new re(4005,!1);s=n.segments.length}return new Au(n,!1,s-r)}(t,n+(xp(i.commands[0])?0:1),i.numberOfDoubleDots)}(r,e,i.snapshot?._urlSegment,l),h=c.processChildren?bp(c.segmentGroup,c.index,r.commands):Hx(c.segmentGroup,c.index,r.commands);return Ru(e.root,c.segmentGroup,h,n,s)}(i.snapshot?._lastPathIndex)}function xp(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Mp(i){return"object"==typeof i&&null!=i&&i.outlets}function Ru(i,e,t,n,s){let o,r={};n&&Vi(n,(l,c)=>{r[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=i===e?t:X7(i,e,t);const a=Vx(vm(o));return new Fc(a,r,s)}function X7(i,e,t){const n={};return Vi(i.children,(s,r)=>{n[r]=s===e?t:X7(s,e,t)}),new xt(i.segments,n)}class Z7{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&xp(n[0]))throw new re(4003,!1);const s=n.find(Mp);if(s&&s!==H7(n))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Au{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Hx(i,e,t){if(i||(i=new xt([],{})),0===i.segments.length&&i.hasChildren())return bp(i,e,t);const n=function kse(i,e,t){let n=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<i.segments.length;){if(n>=t.length)return r;const o=i.segments[s],a=t[n];if(Mp(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!tR(l,c,o))return r;n+=2}else{if(!tR(l,{},o))return r;n++}s++}return{match:!0,pathIndex:s,commandIndex:n}}(i,e,t),s=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const r=new xt(i.segments.slice(0,n.pathIndex),{});return r.children[wt]=new xt(i.segments.slice(n.pathIndex),i.children),bp(r,0,s)}return n.match&&0===s.length?new xt(i.segments,{}):n.match&&!i.hasChildren()?Bx(i,e,t):n.match?bp(i,0,s):Bx(i,e,t)}function bp(i,e,t){if(0===t.length)return new xt(i.segments,{});{const n=function vse(i){return Mp(i[0])?i[0].outlets:{[wt]:i}}(t),s={};return Vi(n,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=Hx(i.children[o],e,r))}),Vi(i.children,(r,o)=>{void 0===n[o]&&(s[o]=r)}),new xt(i.segments,s)}}function Bx(i,e,t){const n=i.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(Mp(r)){const l=wse(r.outlets);return new xt(n,l)}if(0===s&&xp(t[0])){n.push(new kp(i.segments[e].path,eR(t[0]))),s++;continue}const o=Mp(r)?r.outlets[wt]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&xp(a)?(n.push(new kp(o,eR(a))),s+=2):(n.push(new kp(o,{})),s++)}return new xt(n,{})}function wse(i){const e={};return Vi(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Bx(new xt([],{}),0,t))}),e}function eR(i){const e={};return Vi(i,(t,n)=>e[n]=`${t}`),e}function tR(i,e,t){return i==t.path&&Xo(e,t.parameters)}class qa{constructor(e,t){this.id=e,this.url=t}}class jx extends qa{constructor(e,t,n="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hc extends qa{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class km extends qa{constructor(e,t,n,s){super(e,t),this.reason=n,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nR extends qa{constructor(e,t,n,s){super(e,t),this.error=n,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xse extends qa{constructor(e,t,n,s){super(e,t),this.urlAfterRedirects=n,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mse extends qa{constructor(e,t,n,s){super(e,t),this.urlAfterRedirects=n,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bse extends qa{constructor(e,t,n,s,r){super(e,t),this.urlAfterRedirects=n,this.state=s,this.shouldActivate=r,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cse extends qa{constructor(e,t,n,s){super(e,t),this.urlAfterRedirects=n,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ese extends qa{constructor(e,t,n,s){super(e,t),this.urlAfterRedirects=n,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sse{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ise{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tse{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dse{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rse{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ase{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iR{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qx(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=qx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Gx(e,this._root).map(t=>t.value)}}function qx(i,e){if(i===e.value)return e;for(const t of e.children){const n=qx(i,t);if(n)return n}return null}function Gx(i,e){if(i===e.value)return[e];for(const t of e.children){const n=Gx(i,t);if(n.length)return n.unshift(e),n}return[]}class Ga{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Lu(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class rR extends sR{constructor(e,t){super(e),this.snapshot=t,Ux(this,e)}toString(){return this.snapshot.toString()}}function oR(i,e){const t=function Pse(i,e){const o=new wm([],{},{},"",{},wt,e,null,i.root,-1,{});return new lR("",new Ga(o,[]))}(i,e),n=new ni([new kp("",{})]),s=new ni({}),r=new ni({}),o=new ni({}),a=new ni(""),l=new Bc(n,s,o,a,r,wt,e,t.root);return l.snapshot=t.root,new rR(new Ga(l,[]),t)}class Bc{constructor(e,t,n,s,r,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.title=this.data?.pipe(_t(c=>c[vp]))??je(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_t(e=>Du(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_t(e=>Du(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aR(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const s=t[n],r=t[n-1];if(s.routeConfig&&""===s.routeConfig.path)n--;else{if(r.component)break;n--}}return function Ose(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class wm{constructor(e,t,n,s,r,o,a,l,c,h,u,d){this.url=e,this.params=t,this.queryParams=n,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.title=this.data?.[vp],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=h,this._correctedLastPathIndex=d??h,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Du(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lR extends sR{constructor(e,t){super(t),this.url=e,Ux(this,t)}toString(){return cR(this._root)}}function Ux(i,e){e.value._routerState=i,e.children.forEach(t=>Ux(i,t))}function cR(i){const e=i.children.length>0?` { ${i.children.map(cR).join(", ")} } `:"";return`${i.value}${e}`}function Wx(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Xo(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Xo(e.params,t.params)||i.params.next(t.params),function Xie(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Xo(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Xo(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function $x(i,e){const t=Xo(i.params,e.params)&&function tse(i,e){return Vc(i,e)&&i.every((t,n)=>Xo(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||$x(i.parent,e.parent))}function Cp(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const s=function Fse(i,e,t){return e.children.map(n=>{for(const s of t.children)if(i.shouldReuseRoute(n.value,s.value.snapshot))return Cp(i,n,s);return Cp(i,n)})}(i,e,t);return new Ga(n,s)}{if(i.shouldAttach(e.value)){const r=i.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Cp(i,a)),o}}const n=function Vse(i){return new Bc(new ni(i.url),new ni(i.params),new ni(i.queryParams),new ni(i.fragment),new ni(i.data),i.outlet,i.component,i)}(e.value),s=e.children.map(r=>Cp(i,r));return new Ga(n,s)}}const Yx="ngNavigationCancelingError";function hR(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=zc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=uR(!1,0,e);return s.url=t,s.navigationBehaviorOptions=n,s}function uR(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[Yx]=!0,n.cancellationCode=e,t&&(n.url=t),n}function dR(i){return pR(i)&&zc(i.url)}function pR(i){return i&&i[Yx]}class zse{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ep,this.attachRef=null}}let Ep=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const s=this.getOrCreateContext(t);s.outlet=n,this.contexts.set(t,s)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new zse,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const xm=!1;let Kx=(()=>{class i{constructor(t,n,s,r,o){this.parentContexts=t,this.location=n,this.changeDetector=r,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ie,this.deactivateEvents=new ie,this.attachEvents=new ie,this.detachEvents=new ie,this.name=s||wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,xm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,xm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,xm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new re(4013,xm);this._activatedRoute=t;const s=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Hse(t,a,s.injector);if(n&&function Bse(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=s.createComponent(c,s.length,l)}else this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(Y(Ep),Y(vo),function f1(i){return function CF(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let s=0;for(;s<n;){const r=t[s];if(G3(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<n&&"string"==typeof t[s];)s++;else{if(r===e)return t[s+1];s+=2}}}return null}(fi(),i)}("name"),Y(qn),Y(wl))},i.\u0275dir=Ve({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),i})();class Hse{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Bc?this.route:e===Ep?this.childContexts:this.parent.get(e,t)}}let Xx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=$t({type:i,selectors:[["ng-component"]],standalone:!0,features:[V8],decls:1,vars:0,template:function(t,n){1&t&&Ze(0,"router-outlet")},dependencies:[Kx],encapsulation:2}),i})();function fR(i,e){return i.providers&&!i._injector&&(i._injector=Qg(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Qx(i){const e=i.children&&i.children.map(Qx),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=Xx),t}function Vr(i){return i.outlet||wt}function gR(i,e){const t=i.filter(n=>Vr(n)===e);return t.push(...i.filter(n=>Vr(n)!==e)),t}function Sp(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Wse{constructor(e,t,n,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=s}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Wx(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const s=Lu(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],n),delete s[o]}),Vi(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,n)})}deactivateRoutes(e,t,n){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=n.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),s=n&&e.value.component?n.children:t,r=Lu(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),s=n&&e.value.component?n.children:t,r=Lu(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const s=Lu(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],n),this.forwardEvent(new Ase(r.value.snapshot))}),e.children.length&&this.forwardEvent(new Dse(e.value.snapshot))}activateRoutes(e,t,n){const s=e.value,r=t?t.value:null;if(Wx(s),s===r)if(s.component){const o=n.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(s.component){const o=n.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Wx(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Sp(s.snapshot),l=a?.get(D1)??null;o.attachRef=null,o.route=s,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class mR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mm{constructor(e,t){this.component=e,this.route=t}}function $se(i,e,t){const n=i._root;return Ip(n,e?e._root:null,t,[n.value])}function Pu(i,e){const t=Symbol(),n=e.get(i,t);return n===t?"function"!=typeof i||function IN(i){return null!==ig(i)}(i)?e.get(i):i:n}function Ip(i,e,t,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=Lu(e);return i.children.forEach(o=>{(function Kse(i,e,t,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function Xse(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Vc(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Vc(i.url,e.url)||!Xo(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$x(i,e)||!Xo(i.queryParams,e.queryParams);default:return!$x(i,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new mR(n)):(r.data=o.data,r._resolvedData=o._resolvedData),Ip(i,e,r.component?a?a.children:null:t,n,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Mm(a.outlet.component,o))}else o&&Tp(e,a,s),s.canActivateChecks.push(new mR(n)),Ip(i,null,r.component?a?a.children:null:t,n,s)})(o,r[o.value.outlet],t,n.concat([o.value]),s),delete r[o.value.outlet]}),Vi(r,(o,a)=>Tp(o,t.getContext(a),s)),s}function Tp(i,e,t){const n=Lu(i),s=i.value;Vi(n,(r,o)=>{Tp(r,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Mm(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Dp(i){return"function"==typeof i}function Jx(i){return i instanceof dm||"EmptyError"===i?.name}const bm=Symbol("INITIAL_VALUE");function Ou(){return Ko(i=>R7(i.map(e=>e.pipe(_p(1),function qie(...i){const e=n1(i);return Mi((t,n)=>{(e?Rx(i,t,e):Rx(i,t)).subscribe(n)})}(bm)))).pipe(_t(e=>{for(const t of e)if(!0!==t){if(t===bm)return bm;if(!1===t||t instanceof Fc)return t}return!0}),za(e=>e!==bm),_p(1)))}function yR(i){return function EO(...i){return Y4(i)}(Qi(e=>{if(zc(e))throw hR(0,e)}),_t(e=>!0===e))}const eM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _R(i,e,t,n,s){const r=tM(i,e,t);return r.matched?function pre(i,e,t,n){const s=e.canMatch;return s&&0!==s.length?je(s.map(o=>{const a=Pu(o,i);return Nl(function nre(i){return i&&Dp(i.canMatch)}(a)?a.canMatch(e,t):i.runInContext(()=>a(e,t)))})).pipe(Ou(),yR()):je(!0)}(n=fR(e,n),e,t).pipe(_t(o=>!0===o?r:{...eM})):je(r)}function tM(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...eM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Kie)(t,i,e);if(!s)return{...eM};const r={};Vi(s.posParams,(a,l)=>{r[l]=a.path});const o=s.consumed.length>0?{...r,...s.consumed[s.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function Cm(i,e,t,n,s="corrected"){if(t.length>0&&function mre(i,e,t){return t.some(n=>Em(i,e,n)&&Vr(n)!==wt)}(i,t,n)){const o=new xt(e,function gre(i,e,t,n){const s={};s[wt]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const r of t)if(""===r.path&&Vr(r)!==wt){const o=new xt([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,s[Vr(r)]=o}return s}(i,e,n,new xt(t,i.children)));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function yre(i,e,t){return t.some(n=>Em(i,e,n))}(i,t,n)){const o=new xt(i.segments,function fre(i,e,t,n,s,r){const o={};for(const a of n)if(Em(i,t,a)&&!s[Vr(a)]){const l=new xt([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===r?i.segments.length:e.length,o[Vr(a)]=l}return{...s,...o}}(i,e,t,n,i.children,s));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new xt(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Em(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function vR(i,e,t,n){return!!(Vr(i)===n||n!==wt&&Em(e,t,i))&&("**"===i.path||tM(e,i,t).matched)}function kR(i,e,t){return 0===e.length&&!i.children[t]}const Sm=!1;class Im{constructor(e){this.segmentGroup=e||null}}class wR{constructor(e){this.urlTree=e}}function Rp(i){return yp(new Im(i))}function xR(i){return yp(new wR(i))}class wre{constructor(e,t,n,s,r){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=s,this.config=r,this.allowRedirects=!0}apply(){const e=Cm(this.urlTree.root,[],[],this.config).segmentGroup,t=new xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,wt).pipe(_t(r=>this.createUrlTree(vm(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ol(r=>{if(r instanceof wR)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof Im?this.noMatchError(r):r}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,wt).pipe(_t(s=>this.createUrlTree(vm(s),e.queryParams,e.fragment))).pipe(Ol(s=>{throw s instanceof Im?this.noMatchError(s):s}))}noMatchError(e){return new re(4002,Sm)}createUrlTree(e,t,n){const s=Vx(e);return new Fc(s,t,n)}expandSegmentGroup(e,t,n,s){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(_t(r=>new xt([],r))):this.expandSegment(e,n,t,n.segments,s,!0)}expandChildren(e,t,n){const s=[];for(const r of Object.keys(n.children))"primary"===r?s.unshift(r):s.push(r);return si(s).pipe(Il(r=>{const o=n.children[r],a=gR(t,r);return this.expandSegmentGroup(e,a,o,r).pipe(_t(l=>({segment:l,outlet:r})))}),N7((r,o)=>(r[o.outlet]=o.segment,r),{}),F7())}expandSegment(e,t,n,s,r,o){return si(n).pipe(Il(a=>this.expandSegmentAgainstRoute(e,t,n,a,s,r,o).pipe(Ol(c=>{if(c instanceof Im)return je(null);throw c}))),Pl(a=>!!a),Ol((a,l)=>{if(Jx(a))return kR(t,s,r)?je(new xt([],{})):Rp(t);throw a}))}expandSegmentAgainstRoute(e,t,n,s,r,o,a){return vR(s,t,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,s,r,o):Rp(t):Rp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,s){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?xR(r):this.lineralizeSegments(n,r).pipe(Li(o=>{const a=new xt(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,s,r,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=tM(t,s,r);if(!a)return Rp(t);const u=this.applyRedirectCommands(l,s.redirectTo,h);return s.redirectTo.startsWith("/")?xR(u):this.lineralizeSegments(s,u).pipe(Li(d=>this.expandSegment(e,t,n,d.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,s,r){return"**"===n.path?(e=fR(n,e),n.loadChildren?(n._loadedRoutes?je({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(_t(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new xt(s,{})))):je(new xt(s,{}))):_R(t,n,s,e).pipe(Ko(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,s).pipe(Li(h=>{const u=h.injector??e,d=h.routes,{segmentGroup:p,slicedSegments:f}=Cm(t,a,l,d),g=new xt(p.segments,p.children);if(0===f.length&&g.hasChildren())return this.expandChildren(u,d,g).pipe(_t(v=>new xt(a,v)));if(0===d.length&&0===f.length)return je(new xt(a,{}));const m=Vr(n)===r;return this.expandSegment(u,g,d,f,m?wt:r,!0).pipe(_t(_=>new xt(a.concat(_.segments),_.children)))})):Rp(t)))}getChildConfig(e,t,n){return t.children?je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?je({routes:t._loadedRoutes,injector:t._loadedInjector}):function dre(i,e,t,n){const s=e.canLoad;return void 0===s||0===s.length?je(!0):je(s.map(o=>{const a=Pu(o,i);return Nl(function Qse(i){return i&&Dp(i.canLoad)}(a)?a.canLoad(e,t):i.runInContext(()=>a(e,t)))})).pipe(Ou(),yR())}(e,t,n).pipe(Li(s=>s?this.configLoader.loadChildren(e,t).pipe(Qi(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):function vre(i){return yp(uR(Sm,3))}())):je({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],s=t.root;for(;;){if(n=n.concat(s.segments),0===s.numberOfChildren)return je(n);if(s.numberOfChildren>1||!s.children[wt])return yp(new re(4e3,Sm));s=s.children[wt]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,s){const r=this.createSegmentGroup(e,t.root,n,s);return new Fc(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Vi(e,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);n[r]=t[a]}else n[r]=s}),n}createSegmentGroup(e,t,n,s){const r=this.createSegments(e,t.segments,n,s);let o={};return Vi(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,s)}),new xt(r,o)}createSegments(e,t,n,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,n))}findPosParam(e,t,n){const s=n[t.path.substring(1)];if(!s)throw new re(4001,Sm);return s}findOrReturn(e,t){let n=0;for(const s of t){if(s.path===e.path)return t.splice(n),s;n++}return e}}class Mre{}class Ere{constructor(e,t,n,s,r,o,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=s,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=Cm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,wt).pipe(_t(t=>{if(null===t)return null;const n=new wm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ga(n,t),r=new lR(this.url,s);return this.inheritParamsAndData(r._root),r}))}inheritParamsAndData(e){const t=e.value,n=aR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,n,s){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,s)}processChildren(e,t,n){return si(Object.keys(n.children)).pipe(Il(s=>{const r=n.children[s],o=gR(t,s);return this.processSegmentGroup(e,o,r,s)}),N7((s,r)=>s&&r?(s.push(...r),s):null),function Wie(i,e=!1){return Mi((t,n)=>{let s=0;t.subscribe(pi(n,r=>{const o=i(r,s++);(o||e)&&n.next(r),!o&&n.complete()}))})}(s=>null!==s),pm(null),F7(),_t(s=>{if(null===s)return null;const r=MR(s);return function Sre(i){i.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}))}processSegment(e,t,n,s,r){return si(t).pipe(Il(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,s,r)),Pl(o=>!!o),Ol(o=>{if(Jx(o))return kR(n,s,r)?je([]):je(null);throw o}))}processSegmentAgainstRoute(e,t,n,s,r){if(t.redirectTo||!vR(t,n,s,r))return je(null);let o;if("**"===t.path){const a=s.length>0?H7(s).parameters:{},l=CR(n)+s.length;o=je({snapshot:new wm(s,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SR(t),Vr(t),t.component??t._loadedComponent??null,t,bR(n),l,IR(t),l),consumedSegments:[],remainingSegments:[]})}else o=_R(n,t,s,e).pipe(_t(({matched:a,consumedSegments:l,remainingSegments:c,parameters:h})=>{if(!a)return null;const u=CR(n)+l.length;return{snapshot:new wm(l,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SR(t),Vr(t),t.component??t._loadedComponent??null,t,bR(n),u,IR(t),u),consumedSegments:l,remainingSegments:c}}));return o.pipe(Ko(a=>{if(null===a)return je(null);const{snapshot:l,consumedSegments:c,remainingSegments:h}=a;e=t._injector??e;const u=t._loadedInjector??e,d=function Ire(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:p,slicedSegments:f}=Cm(n,c,h,d.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===f.length&&p.hasChildren())return this.processChildren(u,d,p).pipe(_t(m=>null===m?null:[new Ga(l,m)]));if(0===d.length&&0===f.length)return je([new Ga(l,[])]);const g=Vr(t)===r;return this.processSegment(u,d,p,f,g?wt:r).pipe(_t(m=>null===m?null:[new Ga(l,m)]))}))}}function Tre(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function MR(i){const e=[],t=new Set;for(const n of i){if(!Tre(n)){e.push(n);continue}const s=e.find(r=>n.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...n.children),t.add(s)):e.push(n)}for(const n of t){const s=MR(n.children);e.push(new Ga(n.value,s))}return e.filter(n=>!t.has(n))}function bR(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function CR(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function SR(i){return i.data||{}}function IR(i){return i.resolve||{}}function TR(i){return"string"==typeof i.title||null===i.title}function nM(i){return Ko(e=>{const t=i(e);return t?si(t).pipe(_t(()=>e)):je(e)})}let DR=(()=>{class i{buildTitle(t){let n,s=t.root;for(;void 0!==s;)n=this.getResolvedTitleForRoute(s)??n,s=s.children.find(r=>r.outlet===wt);return n}getResolvedTitleForRoute(t){return t.data[vp]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:function(){return Zn(RR)},providedIn:"root"}),i})(),RR=(()=>{class i extends DR{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(be($I))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Fre{}class zre extends class Vre{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Dm=new Fe("",{providedIn:"root",factory:()=>({})}),iM=new Fe("ROUTES");let sM=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=Nl(t.loadComponent()).pipe(Qi(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),Px(()=>{this.componentLoaders.delete(t)})),s=new P7(n,()=>new Xn).pipe(Ax());return this.componentLoaders.set(t,s),s}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return je({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const r=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(_t(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,h=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=z7(l.get(iM,[],We.Self|We.Optional)));return{routes:c.map(Qx),injector:l}}),Px(()=>{this.childrenLoaders.delete(n)})),o=new P7(r,()=>new Xn).pipe(Ax());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return Nl(t()).pipe(Li(n=>n instanceof N8||Array.isArray(n)?je(n):si(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)(be(rr),be(Ak))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Bre{}class jre{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qre(i){throw i}function Gre(i,e,t){return e.parse("/")}const Ure={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function LR(){const i=Zn(W7),e=Zn(Ep),t=Zn($k),n=Zn(rr),s=Zn(Ak),r=Zn(iM,{optional:!0})??[],o=Zn(Dm,{optional:!0})??{},a=Zn(RR),l=Zn(DR,{optional:!0}),c=Zn(Bre,{optional:!0}),h=Zn(Fre,{optional:!0}),u=new zi(null,i,e,t,n,s,z7(r));return c&&(u.urlHandlingStrategy=c),h&&(u.routeReuseStrategy=h),u.titleStrategy=l??a,function $re(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(o,u),u}let zi=(()=>{class i{constructor(t,n,s,r,o,a,l){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=s,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xn,this.errorHandler=qre,this.malformedUriErrorHandler=Gre,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>je(void 0),this.urlHandlingStrategy=new jre,this.routeReuseStrategy=new zre,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(sM),this.configLoader.onLoadEndListener=d=>this.triggerEvent(new Ise(d)),this.configLoader.onLoadStartListener=d=>this.triggerEvent(new Sse(d)),this.ngModule=o.get(Sc),this.console=o.get(Kq);const u=o.get(an);this.isNgZoneEnabled=u instanceof an&&an.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Zie(){return new Fc(new xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oR(this.currentUrlTree,this.rootComponentType),this.transitions=new ni({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(za(s=>0!==s.id),_t(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ko(s=>{let r=!1,o=!1;return je(s).pipe(Qi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ko(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return PR(a.source)&&(this.browserUrlTree=a.extractedUrl),je(a).pipe(Ko(u=>{const d=this.transitions.getValue();return n.next(new jx(u.id,this.serializeUrl(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions.getValue()?ka:Promise.resolve(u)}),function xre(i,e,t,n){return Ko(s=>function kre(i,e,t,n,s){return new wre(i,e,t,n,s).apply()}(i,e,t,s.extractedUrl,n).pipe(_t(r=>({...s,urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qi(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},s.urlAfterRedirects=u.urlAfterRedirects}),function Rre(i,e,t,n,s,r){return Li(o=>function Cre(i,e,t,n,s,r,o="emptyOnly",a="legacy"){return new Ere(i,e,t,n,s,o,a,r).recognize().pipe(Ko(l=>null===l?function bre(i){return new Kn(e=>e.error(i))}(new Mre):je(l)))}(i,e,t,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,s,r).pipe(_t(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Qi(u=>{if(s.targetSnapshot=u.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!u.extras.skipLocationChange){const p=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);this.setBrowserUrl(p,u)}this.browserUrlTree=u.urlAfterRedirects}const d=new xse(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);n.next(d)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:d,extractedUrl:p,source:f,restoredState:g,extras:m}=a,y=new jx(d,this.serializeUrl(p),f,g);n.next(y);const _=oR(p,this.rootComponentType).snapshot;return je(s={...a,targetSnapshot:_,urlAfterRedirects:p,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),ka}),Qi(a=>{const l=new Mse(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),_t(a=>s={...a,guards:$se(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function sre(i,e){return Li(t=>{const{targetSnapshot:n,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?je({...t,guardsResult:!0}):function rre(i,e,t,n){return si(i).pipe(Li(s=>function ure(i,e,t,n,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?je(r.map(a=>{const l=Sp(e)??s,c=Pu(a,l);return Nl(function tre(i){return i&&Dp(i.canDeactivate)}(c)?c.canDeactivate(i,e,t,n):l.runInContext(()=>c(i,e,t,n))).pipe(Pl())})).pipe(Ou()):je(!0)}(s.component,s.route,t,e,n)),Pl(s=>!0!==s,!0))}(o,n,s,i).pipe(Li(a=>a&&function Zse(i){return"boolean"==typeof i}(a)?function ore(i,e,t,n){return si(e).pipe(Il(s=>Rx(function lre(i,e){return null!==i&&e&&e(new Tse(i)),je(!0)}(s.route.parent,n),function are(i,e){return null!==i&&e&&e(new Rse(i)),je(!0)}(s.route,n),function hre(i,e,t){const n=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function Yse(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>L7(()=>je(o.guards.map(l=>{const c=Sp(o.node)??t,h=Pu(l,c);return Nl(function ere(i){return i&&Dp(i.canActivateChild)}(h)?h.canActivateChild(n,i):c.runInContext(()=>h(n,i))).pipe(Pl())})).pipe(Ou())));return je(r).pipe(Ou())}(i,s.path,t),function cre(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return je(!0);const s=n.map(r=>L7(()=>{const o=Sp(e)??t,a=Pu(r,o);return Nl(function Jse(i){return i&&Dp(i.canActivate)}(a)?a.canActivate(e,i):o.runInContext(()=>a(e,i))).pipe(Pl())}));return je(s).pipe(Ou())}(i,s.route,t))),Pl(s=>!0!==s,!0))}(n,r,i,e):je(a)),_t(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Qi(a=>{if(s.guardsResult=a.guardsResult,zc(a.guardsResult))throw hR(0,a.guardsResult);const l=new bse(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),za(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),nM(a=>{if(a.guards.canActivateChecks.length)return je(a).pipe(Qi(l=>{const c=new Cse(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ko(l=>{let c=!1;return je(l).pipe(function Are(i,e){return Li(t=>{const{targetSnapshot:n,guards:{canActivateChecks:s}}=t;if(!s.length)return je(t);let r=0;return si(s).pipe(Il(o=>function Lre(i,e,t,n){const s=i.routeConfig,r=i._resolve;return void 0!==s?.title&&!TR(s)&&(r[vp]=s.title),function Pre(i,e,t,n){const s=function Ore(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===s.length)return je({});const r={};return si(s).pipe(Li(o=>function Nre(i,e,t,n){const s=Sp(e)??n,r=Pu(i,s);return Nl(r.resolve?r.resolve(e,t):s.runInContext(()=>r(e,t)))}(i[o],e,t,n).pipe(Pl(),Qi(a=>{r[o]=a}))),Lx(1),function $ie(i){return _t(()=>i)}(r),Ol(o=>Jx(o)?ka:yp(o)))}(r,i,e,n).pipe(_t(o=>(i._resolvedData=o,i.data=aR(i,t).resolve,s&&TR(s)&&(i.data[vp]=s.title),null)))}(o.route,n,i,e)),Qi(()=>r++),Lx(1),Li(o=>r===s.length?je(t):ka))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Qi(l=>{const c=new Ese(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),nM(a=>{const l=c=>{const h=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(c.routeConfig).pipe(Qi(u=>{c.component=u}),_t(()=>{})));for(const u of c.children)h.push(...l(u));return h};return R7(l(a.targetSnapshot.root)).pipe(pm(),_p(1))}),nM(()=>this.afterPreactivation()),_t(a=>{const l=function Nse(i,e,t){const n=Cp(i,e._root,t?t._root:void 0);return new rR(n,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return s={...a,targetRouterState:l}}),Qi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>_t(n=>(new Wse(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Qi({next(){r=!0},complete(){r=!0}}),Px(()=>{r||o||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ol(a=>{if(o=!0,pR(a)){dR(a)||(this.navigated=!0,this.restoreHistory(s,!0));const l=new km(s.id,this.serializeUrl(s.extractedUrl),a.message,a.cancellationCode);if(n.next(l),dR(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),h={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PR(s.source)};this.scheduleNavigation(c,"imperative",null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const l=new nR(s.id,this.serializeUrl(s.extractedUrl),a,s.targetSnapshot??void 0);n.next(l);try{s.resolve(this.errorHandler(a))}catch(c){s.reject(c)}}return ka}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const s={replaceUrl:!0},r=t.state?.navigationId?t.state:null;if(r){const a={...r};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(s.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,r,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Qx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=s||this.routerState.root,h=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...r};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),mse(c,this.currentUrlTree,t,u,h??null)}navigateByUrl(t,n={skipLocationChange:!1}){const s=zc(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function Yre(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new re(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(s){n=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return n}isActive(t,n){let s;if(s=!0===n?{...Ure}:!1===n?{...Wre}:n,zc(t))return j7(this.currentUrlTree,t,s);const r=this.parseUrl(t);return j7(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.keys(t).reduce((n,s)=>{const r=t[s];return null!=r&&(n[s]=r),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,p)=>{a=d,l=p});const h=++this.navigationId;let u;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),u=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):u=0,this.setTransition({id:h,targetPageId:u,source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,n){const s=this.urlSerializer.serialize(t),r={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,s){const r=new km(t.id,this.serializeUrl(t.extractedUrl),n,s);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){Av()},i.\u0275prov=Le({token:i,factory:function(){return LR()},providedIn:"root"}),i})();function PR(i){return"imperative"!==i}class OR{}let Zre=(()=>{class i{constructor(t,n,s,r,o){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(za(t=>t instanceof Hc),Il(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const s=[];for(const r of n){r.providers&&!r._injector&&(r._injector=Qg(r.providers,t,`Route: ${r.path}`));const o=r._injector??t,a=r._loadedInjector??o;r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent?s.push(this.preloadConfig(o,r)):(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return si(s).pipe(Vh())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let s;s=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):je(null);const r=s.pipe(Li(o=>null===o?je(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?si([r,this.loader.loadComponent(n)]).pipe(Vh()):r})}}return i.\u0275fac=function(t){return new(t||i)(be(zi),be(Ak),be(wl),be(OR),be(sM))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aM=new Fe("");let NR=(()=>{class i{constructor(t,n,s={}){this.router=t,this.viewportScroller=n,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof iR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new iR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){Av()},i.\u0275prov=Le({token:i,factory:i.\u0275fac}),i})();function Nu(i,e){return{\u0275kind:i,\u0275providers:e}}function lM(i){return[{provide:iM,multi:!0,useValue:i}]}function VR(){const i=Zn(rr);return e=>{const t=i.get(X1);if(e!==t.components[0])return;const n=i.get(zi),s=i.get(zR);1===i.get(cM)&&n.initialNavigation(),i.get(HR,null,We.Optional)?.setUpPreloading(),i.get(aM,null,We.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const zR=new Fe("",{factory:()=>new Xn}),cM=new Fe("",{providedIn:"root",factory:()=>1});const HR=new Fe("");function toe(i){return Nu(0,[{provide:HR,useExisting:Zre},{provide:OR,useExisting:i}])}const BR=new Fe("ROUTER_FORROOT_GUARD"),noe=[$k,{provide:W7,useClass:Nx},{provide:zi,useFactory:LR},Ep,{provide:Bc,useFactory:function FR(i){return i.routerState.root},deps:[zi]},sM];function ioe(){return new P6("Router",zi)}let Pm=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[noe,[],lM(t),{provide:BR,useFactory:aoe,deps:[[zi,new tu,new w1]]},{provide:Dm,useValue:n||{}},n?.useHash?{provide:Tc,useClass:FG}:{provide:Tc,useClass:rI},{provide:aM,useFactory:()=>{const i=Zn(zi),e=Zn(XU),t=Zn(Dm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new NR(i,e,t)}},n?.preloadingStrategy?toe(n.preloadingStrategy).\u0275providers:[],{provide:P6,multi:!0,useFactory:ioe},n?.initialNavigation?loe(n):[],[{provide:jR,useFactory:VR},{provide:E6,multi:!0,useExisting:jR}]]}}static forChild(t){return{ngModule:i,providers:[lM(t)]}}}return i.\u0275fac=function(t){return new(t||i)(be(BR,8))},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[Xx]}),i})();function aoe(i){return"guarded"}function loe(i){return["disabled"===i.initialNavigation?Nu(3,[{provide:r0,multi:!0,useFactory:()=>{const e=Zn(zi);return()=>{e.setUpLocationChangeListener()}}},{provide:cM,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Nu(2,[{provide:cM,useValue:0},{provide:r0,multi:!0,deps:[rr],useFactory:e=>{const t=e.get(OG,Promise.resolve());let n=!1;return()=>t.then(()=>new Promise(r=>{const o=e.get(zi),a=e.get(zR);(function s(r){e.get(zi).events.pipe(za(a=>a instanceof Hc||a instanceof km||a instanceof nR),_t(a=>a instanceof Hc||a instanceof km&&(0===a.code||1===a.code)&&null),za(a=>null!==a),_p(1)).subscribe(()=>{r()})})(()=>{r(!0),n=!0}),o.afterPreactivation=()=>(r(!0),n||a.closed?je(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const jR=new Fe(""),hoe=[];let uoe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[Pm.forRoot(hoe),Pm]}),i})();function qR(i){return Math.pow(i,3)}function Fu(i){return 1-qR(1-i)}function hM(i){return 3*i*i-2*i*i*i}function doe(i){return i}const Om=class poe{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Ua(i,e){return i>e?1:i<e?-1:0}function goe(i,e){return i<e?1:i>e?-1:0}function uM(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if("function"==typeof t){for(let s=1;s<n;++s){const r=i[s];if(r===e)return s;if(r<e)return t(e,i[s-1],r)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(i[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(i[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(i[s]==e)return s;if(i[s]<e)return i[s-1]-e<e-i[s]?s-1:s}return n-1}function moe(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Zo(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)i[i.length]=t[s]}function Wa(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function jc(){return!0}function Vu(){return!1}function Ap(){}function GR(i){let e,t,n;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==n||!Wa(s,t))&&(n=this,t=s,e=i.apply(this,arguments)),e}}function Lp(i){for(const e in i)delete i[e]}function qc(i){let e;for(e in i)return!1;return!e}const zr=class voe{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Nm=class koe extends Om{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t="string"==typeof e,n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=t?new zr(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in o||(o[n]=0,a[n]=0),++o[n];for(let c=0,h=s.length;c<h;++c)if(l="handleEvent"in s[c]?s[c].handleEvent(r):s[c].call(this,r),!1===l||r.propagationStopped){l=!1;break}if(0==--o[n]){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Ap);delete o[n]}return l}disposeInternal(){this.listeners_&&Lp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const s=n.indexOf(t);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=Ap,++this.pendingRemovals_[e]):(n.splice(s,1),0===n.length&&delete this.listeners_[e]))}};function Qe(){throw new Error("Unimplemented abstract method.")}let woe=0;function ft(i){return i.ol_uid||(i.ol_uid=String(++woe))}const dM=class xoe extends Nm{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent("change")}release(){this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(4!==this.state){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Qe()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(n){if(-1===n)return 1}else n=t,this.transitionStarts_[e]=n;const s=t-n+1e3/60;return s>=this.transition_?1:qR(s/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}};function pM(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const Moe=new Error("disposed"),boe=[256,256],UR=class Coe extends dM{constructor(e){super(e.tileCoord,0,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=pM(this.data_);return e?[e.width,e.height]:boe}getData(){return this.data_}getError(){return this.error_}load(){if(0!==this.state&&3!==this.state)return;this.state=1,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=2,e.changed()}).catch(function(t){e.error_=t,e.state=3,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Moe),this.controller_=null),super.disposeInternal()}};function Mt(i,e,t,n,s){if(s){const o=t;t=function(a){return i.removeEventListener(e,t),o.call(n??this,a)}}else n&&n!==i&&(t=t.bind(n));const r={target:i,type:e,listener:t};return i.addEventListener(e,t),r}function Fm(i,e,t,n){return Mt(i,e,t,n,!0)}function fn(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Lp(i))}const Gc=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Eoe=(Gc.includes("safari")&&!Gc.includes("chrom")&&(Gc.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Gc)),Gc.includes("webkit")&&!Gc.includes("edge")),WR=Gc.includes("macintosh"),Soe=typeof devicePixelRatio<"u"?devicePixelRatio:1,fM=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,$R=typeof Image<"u"&&Image.prototype.decode,YR=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function ki(i,e,t,n){let s;return s=t&&t.length?t.shift():fM?new OffscreenCanvas(i||300,e||300):document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",n)}let gM;function Vm(){return gM||(gM=ki(1,1)),gM}function zm(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Doe(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Roe(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function XR(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function ZR(i){for(;i.lastChild;)i.lastChild.remove()}const QR=class Loe extends dM{constructor(e,t,n,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Poe(){const i=ki(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function Ioe(i,e,t){const n=i;let s=!0,r=!1,o=!1;const a=[Fm(n,"load",function(){o=!0,r||e()})];return n.src&&$R?(r=!0,n.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(Fm(n,"error",t)),function(){s=!1,a.forEach(fn)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};class JR{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Hu(i,e,t,n,s){return void 0!==s?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=n,s):new JR(i,e,t,n)}const eA=JR;function ys(i){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,n=i.length;t<n;++t)qu(e,i[t]);return e}function Pp(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function tA(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function Uc(i,e,t){let n,s;return n=e<i[0]?i[0]-e:i[2]<e?e-i[2]:0,s=t<i[1]?i[1]-t:i[3]<t?t-i[3]:0,n*n+s*s}function Bu(i,e){return mM(i,e[0],e[1])}function ju(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function mM(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function yM(i,e){const o=e[0],a=e[1];let l=0;return o<i[0]?l|=16:o>i[2]&&(l|=4),a<i[1]?l|=8:a>i[3]&&(l|=2),0===l&&(l=1),l}function Qo(i,e,t,n,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=n,s):[i,e,t,n]}function Fl(i){return Qo(1/0,1/0,-1/0,-1/0,i)}function Op(i,e){const t=i[0],n=i[1];return Qo(t,n,t,n,e)}function _M(i,e,t,n,s){return iA(Fl(s),i,e,t,n)}function Np(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function Fp(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function qu(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function iA(i,e,t,n,s){for(;t<n;t+=s)Foe(i,e[t],e[t+1]);return i}function Foe(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function vM(i,e){let t;return t=e(Bm(i)),!!(t||(t=e(jm(i)),t)||(t=e(qm(i)),t)||(t=e(Wc(i)),t))&&t}function Hm(i){let e=0;return Vp(i)||(e=Ht(i)*Hi(i)),e}function Bm(i){return[i[0],i[1]]}function jm(i){return[i[2],i[1]]}function bo(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function Voe(i,e){let t;if("bottom-left"===e)t=Bm(i);else if("bottom-right"===e)t=jm(i);else if("top-left"===e)t=Wc(i);else{if("top-right"!==e)throw new Error("Invalid corner");t=qm(i)}return t}function kM(i,e,t,n,s){const[r,o,a,l,c,h,u,d]=sA(i,e,t,n);return Qo(Math.min(r,a,c,u),Math.min(o,l,h,d),Math.max(r,a,c,u),Math.max(o,l,h,d),s)}function sA(i,e,t,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,c=s*a,h=r*o,u=r*a,d=i[0],p=i[1];return[d-l+u,p-c-h,d-l-u,p-c+h,d+l-u,p+c+h,d+l+u,p+c-h,d-l+u,p-c-h]}function Hi(i){return i[3]-i[1]}function Vl(i,e,t){const n=t||[1/0,1/0,-1/0,-1/0];return _s(i,e)?(n[0]=i[0]>e[0]?i[0]:e[0],n[1]=i[1]>e[1]?i[1]:e[1],n[2]=i[2]<e[2]?i[2]:e[2],n[3]=i[3]<e[3]?i[3]:e[3]):Fl(n),n}function Wc(i){return[i[0],i[3]]}function qm(i){return[i[2],i[3]]}function Ht(i){return i[2]-i[0]}function _s(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Vp(i){return i[2]<i[0]||i[3]<i[1]}function rA(i,e){const t=e.getExtent(),n=bo(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=Ht(t),o=Math.floor((n[0]-t[0])/s)*s;i[0]-=o,i[2]-=o}return i}function oA(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];rA(i,e);const s=Ht(n);if(Ht(i)>s&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+s,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-s,i[3]]]}return[i]}const zp_warn=2;let Gm=1;function aA(...i){Gm>zp_warn||console.warn(...i)}function lA(i,e){const s=e[0],r=e[1],o=s[0],a=s[1],l=r[0],c=r[1],h=l-o,u=c-a,d=0===h&&0===u?0:(h*(i[0]-o)+u*(i[1]-a))/(h*h+u*u||0);let p,f;return d<=0?(p=o,f=a):d>=1?(p=l,f=c):(p=o+d*h,f=a+d*u),[p,f]}function vs(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function wM(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[1]*t+i[0]*n;return i[0]=i[0]*t-i[1]*n,i[1]=r,i}function Gu(i,e){const t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function Um(i,e){return Math.sqrt(Gu(i,e))}function hA(i,e){if(e.canWrapX()){const t=Ht(e.getExtent()),n=function $oe(i,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||Ht(n),s=Math.floor((i[0]-n[0])/t)),s}(i,e,t);n&&(i[0]-=n*t)}return i}const Hp={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},xM=class Koe{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Hp[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Bp=6378137,Uu=Math.PI*Bp,Xoe=[-Uu,-Uu,Uu,Uu],Zoe=[-180,-85,180,85],Wm=Bp*Math.log(Math.tan(Math.PI/2));class Wu extends xM{constructor(e){super({code:e,units:"m",extent:Xoe,global:!0,worldExtent:Zoe,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Bp)}})}}const uA=[new Wu("EPSG:3857"),new Wu("EPSG:102100"),new Wu("EPSG:102113"),new Wu("EPSG:900913"),new Wu("http://www.opengis.net/def/crs/EPSG/0/3857"),new Wu("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Qoe(i,e,t,n){const s=i.length;t=t>1?t:2,n=n??t,void 0===e&&(e=t>2?i.slice():new Array(s));for(let r=0;r<s;r+=n){e[r]=Uu*i[r]/180;let o=Bp*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));o>Wm?o=Wm:o<-Wm&&(o=-Wm),e[r+1]=o}return e}function Joe(i,e,t,n){const s=i.length;t=t>1?t:2,n=n??t,void 0===e&&(e=t>2?i.slice():new Array(s));for(let r=0;r<s;r+=n)e[r]=180*i[r]/Uu,e[r+1]=360*Math.atan(Math.exp(i[r+1]/Bp))/Math.PI-90;return e}const dA=[-180,-90,180,90],tae=6378137*Math.PI/180;class $c extends xM{constructor(e,t){super({code:e,units:"degrees",extent:dA,axisOrientation:t,global:!0,metersPerUnit:tae,worldExtent:dA})}}const pA=[new $c("CRS:84"),new $c("EPSG:4326","neu"),new $c("urn:ogc:def:crs:OGC:1.3:CRS84"),new $c("urn:ogc:def:crs:OGC:2:84"),new $c("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $c("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $c("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let $m={},Co={};function jp(i,e,t){const n=i.getCode(),s=e.getCode();n in Co||(Co[n]={}),Co[n][s]=t}function MM(i,e){return i in Co&&e in Co[i]?Co[i][e]:null}function In(i,e,t){return Math.min(Math.max(i,e),t)}function sae(i,e,t,n,s,r){const o=s-t,a=r-n;if(0!==o||0!==a){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=s,n=r):l>0&&(t+=o*l,n+=a*l)}return $a(i,e,t,n)}function $a(i,e,t,n){const s=t-i,r=n-e;return s*s+r*r}function fA(i){return 180*i/Math.PI}function zl(i){return i*Math.PI/180}function Yc(i,e){const t=i%e;return t*e<0?t+e:t}function hr(i,e,t){return i+t*(e-i)}function $u(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function Ym(i,e){return Math.floor($u(i,e))}function Km(i,e){return Math.ceil($u(i,e))}function bM(i,e,t){if(i>=e&&i<t)return i;const n=t-e;return((i-e)%n+n)%n+e}const Xm=.9996,Hr=.00669438,Kc=Hr/(1-Hr),gA=Math.sqrt(1-Hr),Yu=(1-gA)/(1+gA),mA=Yu*Yu,CM=mA*Yu,EM=CM*Yu,yA=EM*Yu,_A=.9983242984503243,cae=1.5*Yu-27/32*CM+269/512*yA,hae=21/16*mA-55/32*EM,uae=151/96*CM-417/128*yA,dae=1097/512*EM,Jm=6378137;function pae(i,e,t){const n=i-5e5,o=(t.north?e:e-1e7)/Xm/(Jm*_A),a=o+cae*Math.sin(2*o)+hae*Math.sin(4*o)+uae*Math.sin(6*o)+dae*Math.sin(8*o),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,d=u*u,p=d*d,f=1-Hr*c,g=Math.sqrt(1-Hr*c),_=Kc*h**2,v=_*_,k=n/(Jm/g*Xm),w=k*k,I=w*k,b=I*k,D=b*k,z=a-u/((1-Hr)/f)*(w/2-b/24*(5+3*d+10*_-4*v-9*Kc))+D*k/720*(61+90*d+298*_+45*p-252*Kc-3*v);let Z=(k-I/6*(1+2*d+_)+D/120*(5-2*_+28*d-3*v+8*Kc+24*p))/h;return Z=bM(Z+zl(wA(t.number)),-Math.PI,Math.PI),[fA(Z),fA(z)]}function mae(i,e,t){i=bM(i,-180,180),e<-80?e=-80:e>84&&(e=84);const n=zl(e),s=Math.sin(n),r=Math.cos(n),o=s/r,a=o*o,l=a*a,c=zl(i),u=zl(wA(t.number)),d=Jm/Math.sqrt(1-Hr*s**2),p=Kc*r**2,f=r*bM(c-u,-Math.PI,Math.PI),g=f*f,m=g*f,y=m*f,_=y*f,v=_*f,k=Jm*(_A*n-.002514607064228144*Math.sin(2*n)+26390466021299826e-22*Math.sin(4*n)-3.418046101696858e-9*Math.sin(6*n));let I=Xm*(k+d*o*(g/2+y/24*(5-a+9*p+4*p**2)+v/720*(61-58*a+l+600*p-330*Kc)));return t.north||(I+=1e7),[Xm*d*(f+m/6*(1-a+p)+_/120*(5-18*a+l+72*p-58*Kc))+5e5,I]}function wA(i){return 6*(i-1)-180+3}const yae=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function xA(i){let e=0;for(const s of yae){const r=i.match(s);if(r){e=parseInt(r[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function MA(i,e){return function(t,n,s,r){const o=t.length;s=s>1?s:2,r=r??s,n||(n=s>2?t.slice():new Array(o));for(let a=0;a<o;a+=r){const h=i(t[a],t[a+1],e);n[a]=h[0],n[a+1]=h[1]}return n}}function SM(i,e,t){t=t||6371008.8;const n=zl(i[1]),s=zl(e[1]),r=(s-n)/2,o=zl(e[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const xae=[function vae(i){const e=xA(i.getCode());return e?{forward:MA(mae,e),inverse:MA(pae,e)}:null}],Mae=[function _ae(i){return xA(i)?new xM({code:i,units:"m"}):null}];let TM=!0;function bA(i){TM=!(void 0===i||i)}function DM(i,e){if(void 0!==e)for(let t=0,n=i.length;t<n;++t)e[t]=i[t];else e=i.slice();return e}function RM(i){(function iae(i,e){$m[i]=e})(i.getCode(),i),jp(i,i,DM)}function cn(i){if("string"!=typeof i)return i;const e=function nae(i){return $m[i]||$m[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(i);if(e)return e;for(const t of Mae){const n=t(i);if(n)return n}return null}function CA(i,e,t,n){let s;const r=(i=cn(i)).getPointResolutionFunc();if(r){if(s=r(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/Hp[n])}}else{const o=i.getUnits();if("degrees"==o&&!n||"degrees"==n)s=e;else{const a=Ku(i,cn("EPSG:4326"));if(a||"degrees"===o){let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2),s=(SM(c.slice(0,2),c.slice(2,4))+SM(c.slice(4,6),c.slice(6,8)))/2}else s=e*i.getMetersPerUnit();const l=n?Hp[n]:i.getMetersPerUnit();void 0!==l&&(s/=l)}}return s}function EA(i){(function bae(i){i.forEach(RM)})(i),i.forEach(function(e){i.forEach(function(t){e!==t&&jp(e,t,DM)})})}function AM(i,e){return i?"string"==typeof i?cn(i):i:cn(e)}function PM(i,e){return bA(),Zu(i,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function n2(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Ku(i,e)===DM)&&t}function Ku(i,e){const t=i.getCode(),n=e.getCode();let s=MM(t,n);if(s)return s;let r=null,o=null;for(const l of xae)r||(r=l(i)),o||(o=l(e));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)s=OM(r.inverse,o.forward);else{const l=MM(t,a);l&&(s=OM(l,o.forward))}else{const l=MM(a,n);l&&(s=OM(r.inverse,l))}return s&&(RM(i),RM(e),jp(i,e,s)),s}function OM(i,e){return function(t,n,s,r){return n=i(t,n,s,r),e(n,n,s,r)}}function Xu(i,e){return Ku(cn(i),cn(e))}function Zu(i,e,t){const n=Xu(e,t);if(!n){const s=cn(e).getCode(),r=cn(t).getCode();throw new Error(`No transform available between ${s} and ${r}`)}return n(i,void 0,i.length)}let NM,ks=null;function Eo(){return ks}function Xc(i,e){return i}function Fn(i,e){return TM&&!vs(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(TM=!1,aA("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function qp(i,e){return i}function Ya(i,e){return i}!function Iae(){EA(uA),EA(pA),function Cae(i,e,t,n){i.forEach(function(s){e.forEach(function(r){jp(s,r,t),jp(r,s,n)})})}(pA,uA,Qoe,Joe)}();const Qu=[];function IA(i,e,t,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),i.restore()}function FM(i,e){return Math.abs(i[4*e]-210)>2||Math.abs(i[4*e+3]-191.25)>2}function TA(i,e,t,n){const s=Zu(t,e,i);let r=CA(e,n,t);const o=e.getMetersPerUnit();void 0!==o&&(r*=o);const a=i.getMetersPerUnit();void 0!==a&&(r/=a);const l=i.getExtent();if(!l||Bu(l,s)){const c=CA(i,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function Yt(i,e){if(!i)throw new Error(e)}function Ti(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function Jo(i,e,t,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return i[0]=n*c,i[1]=s*l,i[2]=-n*l,i[3]=s*c,i[4]=o*n*c-a*n*l+e,i[5]=o*s*l+a*s*c+t,i}function HM(i,e){const t=function Lae(i){return i[0]*i[3]-i[1]*i[2]}(e);Yt(0!==t,"Transformation matrix cannot be inverted");const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-s/t,i[2]=-r/t,i[3]=n/t,i[4]=(r*l-o*a)/t,i[5]=-(n*l-s*a)/t,i}new Array(6);const Pae=[1e5,1e5,1e5,1e5,2,2];function RA(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}const LA=class Hae extends dM{constructor(e,t,n,s,r,o,a,l,c,h,u,d){super(r,0,d),this.renderEdges_=void 0!==u&&u,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=s.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const m=f?Vl(p,f):p;if(0===Hm(m))return void(this.state=4);const y=e.getExtent();y&&(g=g?Vl(g,y):y);const _=s.getResolution(this.wrappedTileCoord_[0]),v=function Dae(i,e,t,n){const s=bo(t);let r=TA(i,e,s,n);return(!isFinite(r)||r<=0)&&vM(t,function(o){return r=TA(i,e,o,n),isFinite(r)&&r>0}),r}(e,n,m,_);if(!isFinite(v)||v<=0)return void(this.state=4);if(this.triangulation_=new class Fae{constructor(e,t,n,s,r,o,a){this.sourceProj_=e,this.targetProj_=t;let l={};const c=a?function LM(i){return function(e,t,n,s){const r=e.length;n=void 0!==n?n:2,s=s??n,t=void 0!==t?t:new Array(r);for(let o=0;o<r;o+=s){const a=i(e.slice(o,o+n)),l=a.length;for(let c=0,h=s;c<h;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t}}(v=>Ti(a,Zu(v,this.targetProj_,this.sourceProj_))):Xu(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const k=v[0]+"/"+v[1];return l[k]||(l[k]=c(v)),l[k]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Ht(s)>=Ht(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ht(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ht(this.targetProj_.getExtent()):null;const h=Wc(n),u=qm(n),d=jm(n),p=Bm(n),f=this.transformInv_(h),g=this.transformInv_(u),m=this.transformInv_(d),y=this.transformInv_(p),_=10+(o?Math.max(0,Math.ceil(Math.log2(Hm(n)/(o*o*256*256)))):0);if(this.addQuad_(h,u,d,p,f,g,m,y,_),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(k,w,I){v=Math.min(v,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-v>this.sourceWorldWidth_/2){const w=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];w[0][0]-v>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-v>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-v>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const I=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-I<this.sourceWorldWidth_/2&&(k.source=w)}})}l={}}addTriangle_(e,t,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,n]})}addQuad_(e,t,n,s,r,o,a,l,c){const h=ys([r,o,a,l]),u=this.sourceWorldWidth_?Ht(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1;let f=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=Ht(ys([e,t,n,s]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&u&&(f=u>.25||f)),!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!_s(h,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(c>0)f=!0;else if(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=g&&2!=g&&4!=g&&8!=g)return;if(c>0){if(!f){const y=this.transformInv_([(e[0]+n[0])/2,(e[1]+n[1])/2]);let _;_=p?(Yc(r[0],d)+Yc(a[0],d))/2-Yc(y[0],d):(r[0]+a[0])/2-y[0];const v=(r[1]+a[1])/2-y[1];f=_*_+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(m),_=[(s[0]+e[0])/2,(s[1]+e[1])/2],v=this.transformInv_(_);this.addQuad_(e,t,m,_,r,o,y,v,c-1),this.addQuad_(_,m,n,s,v,y,a,l,c-1)}else{const m=[(e[0]+t[0])/2,(e[1]+t[1])/2],y=this.transformInv_(m),_=[(n[0]+s[0])/2,(n[1]+s[1])/2],v=this.transformInv_(_);this.addQuad_(e,m,_,s,r,y,v,l,c-1),this.addQuad_(m,t,n,_,y,o,a,v,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(e,n,s,r,a,l),0==(14&g)&&this.addTriangle_(e,n,t,r,a,o),g&&(0==(13&g)&&this.addTriangle_(t,s,e,o,l,r),0==(7&g)&&this.addTriangle_(t,s,n,o,l,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,n,s){const r=t.source;qu(e,r[0]),qu(e,r[1]),qu(e,r[2])}),e}getTriangles(){return this.triangles_}}(e,n,m,g,v*(void 0!==h?h:.5),_),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(v);let w=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(w[1]=In(w[1],g[1],g[3]),w[3]=In(w[3],g[1],g[3])):w=Vl(w,g)),Hm(w)){let I=0,b=0;e.canWrapX()&&(I=Ht(y),b=Math.floor((w[0]-y[0])/I)),oA(w.slice(),e,!0).forEach(P=>{const z=t.getTileRangeForExtentAndZ(P,this.sourceZ_);for(let Z=z.minX;Z<=z.maxX;Z++)for(let K=z.minY;K<=z.maxY;K++){const Q=c(this.sourceZ_,Z,K,a);Q&&this.sourceTiles_.push({tile:Q,offset:b*I})}++b}),0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&2==n.getState()){const s=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const r=this.clipExtent_?.slice();r&&(r[0]+=t.offset,r[2]+=t.offset),e.push({extent:s,clipExtent:r,image:n.getImage()})}}),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function Rae(i,e,t,n,s,r,o,a,l,c,h,u,d,p){const f=ki(Math.round(t*i),Math.round(t*e),Qu);if(u||(f.imageSmoothingEnabled=!1),0===l.length)return f.canvas;function g(w){return Math.round(w*t)/t}f.scale(t,t),f.globalCompositeOperation="lighter";const m=[1/0,1/0,-1/0,-1/0];let y;l.forEach(function(w,I,b){Fp(m,w.extent)});const _=t/n,v=(u?1:1+Math.pow(2,-24))/_;if(!d||1!==l.length||0!==c){if(y=ki(Math.round(Ht(m)*_),Math.round(Hi(m)*_),Qu),u||(y.imageSmoothingEnabled=!1),s&&p){const w=(s[0]-m[0])*_,I=-(s[3]-m[3])*_,b=Ht(s)*_,D=Hi(s)*_;y.rect(w,I,b,D),y.clip()}l.forEach(function(w,I,b){if(w.image.width>0&&w.image.height>0){if(w.clipExtent){y.save();const K=(w.clipExtent[0]-m[0])*_,Q=-(w.clipExtent[3]-m[3])*_,T=Ht(w.clipExtent)*_,O=Hi(w.clipExtent)*_;y.rect(u?K:Math.round(K),u?Q:Math.round(Q),u?T:Math.round(K+T)-Math.round(K),u?O:Math.round(Q+O)-Math.round(Q)),y.clip()}const D=(w.extent[0]-m[0])*_,P=-(w.extent[3]-m[3])*_,z=Ht(w.extent)*_,Z=Hi(w.extent)*_;y.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,u?D:Math.round(D),u?P:Math.round(P),u?z:Math.round(D+z)-Math.round(D),u?Z:Math.round(P+Z)-Math.round(P)),w.clipExtent&&y.restore()}})}const k=Wc(o);return a.getTriangles().forEach(function(w,I,b){const D=w.source,P=w.target;let z=D[0][0],Z=D[0][1],K=D[1][0],Q=D[1][1],T=D[2][0],O=D[2][1];const R=g((P[0][0]-k[0])/r),N=g(-(P[0][1]-k[1])/r),E=g((P[1][0]-k[0])/r),F=g(-(P[1][1]-k[1])/r),L=g((P[2][0]-k[0])/r),G=g(-(P[2][1]-k[1])/r),V=z,X=Z;z=0,Z=0,K-=V,Q-=X,T-=V,O-=X;const ee=function rae(i){const e=i.length;for(let n=0;n<e;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(0===r)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let s=n-1;s>=0;s--)i[s][e]-=i[s][n]*t[n]}return t}([[K,Q,0,0,E-R],[T,O,0,0,L-R],[0,0,K,Q,F-N],[0,0,T,O,G-N]]);if(!ee)return;if(f.save(),f.beginPath(),function Tae(){if(void 0===NM){const i=ki(6,6,Qu);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",IA(i,4,5,4,0),IA(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;NM=FM(e,0)||FM(e,4)||FM(e,8),zm(i),Qu.push(i.canvas)}return NM}()||!u){f.moveTo(E,F);const J=4,de=R-E,ue=N-F;for(let fe=0;fe<J;fe++)f.lineTo(E+g((fe+1)*de/J),F+g(fe*ue/(J-1))),fe!=J-1&&f.lineTo(E+g((fe+1)*de/J),F+g((fe+1)*ue/(J-1)));f.lineTo(L,G)}else f.moveTo(E,F),f.lineTo(R,N),f.lineTo(L,G);let ae;if(f.clip(),f.transform(ee[0],ee[2],ee[1],ee[3],R,N),f.translate(m[0]-V,m[3]-X),y)ae=y.canvas,f.scale(v,-v);else{const J=l[0],de=J.extent;ae=J.image,f.scale(Ht(de)/ae.width,-Hi(de)/ae.height)}f.drawImage(ae,0,0),f.restore()}),y&&(zm(y),Qu.push(y.canvas)),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(w,I,b){const D=w.target,P=(D[0][0]-k[0])/r,z=-(D[0][1]-k[1])/r,Z=(D[1][0]-k[0])/r,K=-(D[1][1]-k[1])/r,Q=(D[2][0]-k[0])/r,T=-(D[2][1]-k[1])/r;f.beginPath(),f.moveTo(Z,K),f.lineTo(P,z),f.lineTo(Q,T),f.closePath(),f.stroke()}),f.restore()),f.canvas}(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(0==n||1==n){e++;const s=Mt(t,"change",r=>{const o=t.getState();(2==o||3==o||4==o)&&(fn(s),e--,0===e&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,s){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(fn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(zm(this.canvas_.getContext("2d")),Qu.push(this.canvas_),this.canvas_=null),super.release()}};function PA(i){return i[0]>0&&i[1]>0}function zs(i,e){return Array.isArray(i)?i:(void 0===e?e=[i,i]:(e[0]=i,e[1]=i),e)}function s2(i,e,t,n){return void 0!==n?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}const jM=[NaN,NaN,NaN,0];let qM;const Yae=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Kae=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Xae=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Zae=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function r2(i,e){return i.endsWith("%")?Number(i.substring(0,i.length-1))/e:Number(i)}function Up(i){throw new Error('failed to parse "'+i+'" as color')}function OA(i){if(i.toLowerCase().startsWith("rgb")){const r=i.match(Kae)||i.match(Yae)||i.match(Xae);if(r){const o=r[4],a=100/255;return[In(r2(r[1],a)+.5|0,0,255),In(r2(r[2],a)+.5|0,0,255),In(r2(r[3],a)+.5|0,0,255),void 0!==o?In(r2(o,100),0,1):1]}Up(i)}if(i.startsWith("#")){if(Zae.test(i)){const r=i.substring(1),o=r.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=r.length;l<c;l+=o){let h=parseInt(r.substring(l,l+o),16);1===o&&(h+=h<<4),a[l/o]=h}return a[3]=a[3]/255,a}Up(i)}const e=function $ae(){return qM||(qM=ki(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),qM}();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=i,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=i,e.fillStyle===t&&Up(i));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return OA(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const s=Array.from(e.getImageData(0,0,1,1).data);return s[3]=$u(s[3]/255,3),s}const Wp={};let GM=0;function ele(i){if(4===i.length)return i;const e=i.slice();return e[3]=1,e}function UM(i){return i>.0031308?269.025*Math.pow(i,1/2.4)-14.025:3294.6*i}function WM(i){return i>.2068965?Math.pow(i,3):108/841*(i-4/29)}function $M(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function YM(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function NA(i){const e=$M(i[0]),t=$M(i[1]),n=$M(i[2]),s=YM(.222488403*e+.716873169*t+.06060791*n),r=500*(YM(.452247074*e+.399439023*t+.148375274*n)-s),o=200*(s-YM(.016863605*e+.117638439*t+.865350722*n)),a=Math.atan2(o,r)*(180/Math.PI);return[116*s-16,Math.sqrt(r*r+o*o),a<0?a+360:a,i[3]]}function o2(i){if("none"===i)return jM;if(Wp.hasOwnProperty(i))return Wp[i];if(GM>=1024){let t=0;for(const n in Wp)0==(3&t++)&&(delete Wp[n],--GM)}const e=OA(i);4!==e.length&&Up(i);for(const t of e)isNaN(t)&&Up(i);return Wp[i]=e,++GM,e}function Ju(i){return Array.isArray(i)?i:o2(i)}function KM(i){let e=i[0];e!=(0|e)&&(e=e+.5|0);let t=i[1];t!=(0|t)&&(t=t+.5|0);let n=i[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===i[3]?1:Math.round(1e3*i[3])/1e3)+")"}const FA=class nle extends zr{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}},VA=class ile{constructor(){yO(this,"pushMethodArgs_",(...e)=>(this.push_(e),this)),this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Vm(),{get:(e,t)=>{if("function"==typeof Vm()[t])return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){const t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,s=t.length;n<s;++n){const r=t[n];if("function"==typeof r){r(e);continue}const o=t[++n];if("function"==typeof e[r])e[r](...o);else{if("function"==typeof o){e[r]=o(e);continue}e[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}};function zA(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)fn(i[e]);else fn(i)}const HA=class a2 extends Nm{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Mt(this,e[r],t);return s}return Mt(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Fm(this,e[r],t)}else n=Fm(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)zA(n);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}},ole=class rle extends HA{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Qe()}getData(e){return null}prepareFrame(e){return Qe()}renderFrame(e,t){return Qe()}forEachFeatureAtCoordinate(e,t,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(2===t.getState()||3===t.getState())&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},BA=[];let ed=null;const jA=class lle extends ole{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){let s;ed||function ale(){ed=ki(1,1,void 0,{willReadFrequently:!0})}(),ed.clearRect(0,0,1,1);try{ed.drawImage(e,t,n,1,1,0,0,1,1),s=ed.getImageData(0,0,1,1).data}catch{return ed=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&Wa(Ju(e.style.backgroundColor),Ju(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&function Oae(i,e){const t=RA(i),n=RA(e);for(let s=0;s<6;++s)if(0!==Math.round((t[s]-n[s])*Pae[s]))return!1;return!0}(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=ki();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=Wc(n),r=qm(n),o=jm(n),a=Bm(n);Ti(t.coordinateToPixelTransform,s),Ti(t.coordinateToPixelTransform,r),Ti(t.coordinateToPixelTransform,o),Ti(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ti(l,s),Ti(l,r),Ti(l,o),Ti(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,s=e.viewState.resolution,r=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Ht(n)/s*o),l=Math.round(Hi(n)/s*o);Jo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,r,-a/2,-l/2),HM(this.inversePixelTransform,this.pixelTransform);const c=function DA(i){return"matrix("+i.join(", ")+")"}(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const r=new FA(e,this.inversePixelTransform,n,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_("postrender",e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new VA),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){!e.declutter||(this.dispatchRenderEvent_("prerender",this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_("postrender",this.context,e))}getRenderTransform(e,t,n,s,r,o,a){const h=s/t;return Jo(this.tempTransform,r/2,o/2,h,-h,-n,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function XM(i,e,t,n,s){return`${ft(i)},${e},${function BM(i,e,t){return i+"/"+e+"/"+t}(t,n,s)}`}function ZM(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],s=n.has(e);return s||n.add(e),!s}function cle(i,e,t){const n=i[t];return!!n&&n.delete(e)}function qA(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Vl(e,Ya(t.extent)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(i.viewState.projection).getExtent();s&&(e=Vl(e,s))}return e}const ule=class hle extends jA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new eA(0,0,0,0),this.tempTileCoord_=s2(0,0,0);const n=void 0!==t.cacheSize?t.cacheSize:512;this.tileCache_=new class jae{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Om&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Yt(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Yt(void 0!==t,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n,t=0;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let n,t=0;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Yt(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}(n),this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,s){const r=this.tileCache_,a=this.getLayer().getSource(),l=XM(a,a.getKey(),e,t,n);let c;if(r.containsKey(l))c=r.get(l);else{if(c=a.getTile(e,t,n,s.pixelRatio,s.viewState.projection),!c)return null;r.set(l,c)}return c}getTile(e,t,n,s){return this.getOrCreateTile(e,t,n,s)||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=Ti(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Bu(r,s))return null;const o=t.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(s,h),d=this.getTile(h,u[1],u[2],t);if(!d||2!==d.getState())continue;const p=l.getOrigin(h),f=zs(l.getTileSize(h)),g=l.getResolution(h);let m;if(d instanceof QR||d instanceof LA)m=d.getImage();else{if(!(d instanceof UR))continue;if(m=pM(d.getData()),!m)continue}const y=Math.floor(c*((s[0]-p[0])/g-u[1]*f[0])),_=Math.floor(c*((p[1]-s[1])/g-u[2]*f[1])),v=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(m,y+v,_+v)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(e,t,n,s,r){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=ft(l);h in e.wantedTiles||(e.wantedTiles[h]={});const u=e.wantedTiles[h],d=a.getMapInternal(),p=Math.max(n-r,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),f=o.rotation,g=f?sA(o.center,o.resolution,f,e.size):void 0;for(let m=n;m>=p;--m){const y=c.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),_=c.getResolution(m);for(let v=y.minX;v<=y.maxX;++v)for(let k=y.minY;k<=y.maxY;++k){if(f&&!c.tileCoordIntersectsViewport([m,v,k],g))continue;const w=this.getTile(m,v,k,e);if(!w||!ZM(s,w,m))continue;const b=w.getKey();if(u[b]=!0,0===w.getState()&&!e.tileQueue.isKeyQueued(b)){const D=s2(m,v,k,this.tempTileCoord_);e.tileQueue.enqueue([w,h,c.getTileCoordCenter(D),_])}}}}findStaleTile_(e,t){const n=this.tileCache_,s=e[0],r=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=XM(this.getLayer().getSource(),a[l],s,r,o);if(n.containsKey(c)){const h=n.peek(c);if(2===h.getState())return h.endTransition(ft(this)),ZM(t,h,s),!0}}return!1}findAltTiles_(e,t,n,s){const r=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!r)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=r.minX;h<=r.maxX;++h)for(let u=r.minY;u<=r.maxY;++u){const d=XM(l,c,n,h,u);let p=!1;if(a.containsKey(d)){const f=a.peek(d);2===f.getState()&&(ZM(s,f,n),p=!0)}p||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=e.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(r),d=u.getZForResolution(o,h.zDirection),p=u.getResolution(d),f=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==f&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=f):this.renderedSourceKey_=f;let g=e.extent;const m=h.getTilePixelRatio(l);this.prepareContainer(e,t);const y=this.context.canvas.width,_=this.context.canvas.height,v=n.extent&&Ya(n.extent);v&&(g=Vl(g,Ya(n.extent)));const k=p*y/2/m,w=p*_/2/m,I=[a[0]-k,a[1]-w,a[0]+k,a[1]+w],b={};this.renderedTiles.length=0;const D=c.getPreload();if(e.nextExtent){const E=u.getZForResolution(s.nextResolution,h.zDirection),F=qA(e,e.nextExtent);this.enqueueTiles(e,F,E,b,D)}const P=qA(e,g);if(this.enqueueTiles(e,P,d,b,0),D>0&&setTimeout(()=>{this.enqueueTiles(e,P,d-1,b,D-1)},0),!(d in b))return this.container;const z=ft(this),Z=e.time;for(const E of b[d]){const F=E.getState();if(4===F)continue;const L=E.tileCoord;if(2===F&&1===E.getAlpha(z,Z)){E.endTransition(z);continue}if(3!==F&&(this.renderComplete=!1),this.findStaleTile_(L,b)){cle(b,E,d),e.animate=!0;continue}if(this.findAltTiles_(u,L,d+1,b))continue;const X=u.getMinZoom();for(let $=d-1;$>=X&&!this.findAltTiles_(u,L,$,b);--$);}const K=p/o*l/m,Q=this.getRenderContext(e);Jo(this.tempTransform,y/2,_/2,K,K,0,-y/2,-_/2),n.extent&&this.clipUnrotated(Q,e,v),h.getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,e);const T=Object.keys(b).map(Number);let O;T.sort(Ua);const R=[],N=[];for(let E=T.length-1;E>=0;--E){const F=T[E],L=h.getTilePixelSize(F,l,r),V=u.getResolution(F)/p,X=L[0]*V*K,$=L[1]*V*K,ee=u.getTileCoordForCoordAndZ(Wc(I),F),ae=u.getTileCoordExtent(ee),J=Ti(this.tempTransform,[m*(ae[0]-I[0])/p,m*(I[3]-ae[3])/p]),de=m*h.getGutterForProjection(r);for(const ue of b[F]){if(2!==ue.getState())continue;const fe=ue.tileCoord,ye=ee[1]-fe[1],Me=Math.round(J[0]-(ye-1)*X),Se=ee[2]-fe[2],nt=Math.round(J[1]-(Se-1)*$),et=Math.round(J[0]-ye*X),Ne=Math.round(J[1]-Se*$),qe=Me-et,Rt=nt-Ne,An=1===T.length;let Mn=!1;O=[et,Ne,et+qe,Ne,et+qe,Ne+Rt,et,Ne+Rt];for(let Cn=0,En=R.length;Cn<En;++Cn)if(!An&&F<N[Cn]){const Hn=R[Cn];_s([et,Ne,et+qe,Ne+Rt],[Hn[0],Hn[3],Hn[4],Hn[7]])&&(Mn||(Q.save(),Mn=!0),Q.beginPath(),Q.moveTo(O[0],O[1]),Q.lineTo(O[2],O[3]),Q.lineTo(O[4],O[5]),Q.lineTo(O[6],O[7]),Q.moveTo(Hn[6],Hn[7]),Q.lineTo(Hn[4],Hn[5]),Q.lineTo(Hn[2],Hn[3]),Q.lineTo(Hn[0],Hn[1]),Q.clip())}R.push(O),N.push(F),this.drawTile(ue,e,et,Ne,qe,Rt,de,An),Mn&&Q.restore(),this.renderedTiles.unshift(ue),this.updateUsedTiles(e.usedTiles,h,ue)}}return this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Np(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=l,this.postRender(this.context,e),n.extent&&Q.restore(),Q.imageSmoothingEnabled=!0,this.renderComplete&&e.postRenderFunctions.push((F,L)=>{const G=ft(h),V=L.wantedTiles[G],X=V?Object.keys(V).length:0;this.updateCacheSize(X),this.tileCache_.expireCache()}),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,t,n,s,r,o,a,l){let c;if(e instanceof UR){if(c=pM(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const h=this.getRenderContext(t),u=ft(this),d=t.layerStatesArray[t.layerIndex],p=d.opacity*(l?e.getAlpha(u,t.time):1),f=p!==h.globalAlpha;f&&(h.save(),h.globalAlpha=p),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),f&&h.restore(),p!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const s=ft(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}};class GA extends zr{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}const qr=class dle extends HA{constructor(e){super(),ft(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new GA(n,e,t)),n="propertychange",this.hasListener(n)&&this.dispatchEvent(new GA(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],qc(this.values_)&&(this.values_=null),t||this.notify(e,n)}}},So={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function UA(i,e,t){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,c=e?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,p=i[2]-l/2+h,f=i[1]+c/2+u,g=i[3]-c/2+u;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let m=In(n[0],d,p),y=In(n[1],f,g);if(o&&t&&s){const _=30*s;m+=-_*Math.log(1+Math.max(0,d-n[0])/_)+_*Math.log(1+Math.max(0,n[0]-p)/_),y+=-_*Math.log(1+Math.max(0,f-n[1])/_)+_*Math.log(1+Math.max(0,n[1]-g)/_)}return[m,y]}}function ple(i){return i}function Hl(i,e,t,n,s,r,o){r=r||[],o=o||2;let a=0;for(let l=e;l<t;l+=n){const c=i[l],h=i[l+1];r[a++]=s[0]*c+s[2]*h+s[4],r[a++]=s[1]*c+s[3]*h+s[5];for(let u=2;u<o;u++)r[a++]=i[l+u]}return r&&r.length!=a&&(r.length=a),r}function QM(i,e,t,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let d=e;d<t;d+=n){const p=i[d]-c,f=i[d+1]-h;o[u++]=c+p*a-f*l,o[u++]=h+p*l+f*a;for(let g=d+2;g<d+n;++g)o[u++]=i[g]}return o&&o.length!=u&&(o.length=u),o}const WA=[1,0,0,1,0,0],mle=[NaN,NaN],$A=class yle extends qr{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=GR((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Qe()}closestPointXY(e,t,n,s){return Qe()}containsXY(e,t){return 0===this.closestPointXY(e,t,mle,Number.MIN_VALUE)}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Qe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Fl(t),this.extentRevision_=this.getRevision()}return function zoe(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}(this.extent_,e)}rotate(e,t){Qe()}scale(e,t,n){Qe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Qe()}getType(){return Qe()}applyTransform(e){Qe()}intersectsExtent(e){return Qe()}translate(e,t){Qe()}transform(e,t){const n=cn(e),s="tile-pixels"==n.getUnits()?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=Hi(c)/Hi(l);Jo(WA,c[0],c[3],h,-h,0,0,0);const u=Hl(r,0,r.length,a,WA,o),d=Xu(n,t);return d?d(u,u,a):u}:Xu(n,t);return this.applyTransform(s),this}};function Zc(i){let e;return 2==i?e="XY":3==i?e="XYZ":4==i&&(e="XYZM"),e}function l2(i){let e;return"XY"==i?e=2:"XYZ"==i||"XYM"==i?e=3:"XYZM"==i&&(e=4),e}const Bl=class _le extends $A{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(e){return _M(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Qe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=l2(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Qe()}setLayout(e,t,n){let s;if(e)s=l2(e);else{for(let r=0;r<n;++r){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}s=t.length,e=Zc(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();QM(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){void 0===t&&(t=e),n||(n=bo(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();(function fle(i,e,t,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=e;u<t;u+=n){const p=i[u+1]-c;a[h++]=l+s*(i[u]-l),a[h++]=c+r*p;for(let f=u+2;f<u+n;++f)a[h++]=i[f]}a&&a.length!=h&&(a.length=h)})(s,0,s.length,r,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();(function gle(i,e,t,n,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}o&&o.length!=a&&(o.length=a)})(n,0,n.length,s,e,t,n),this.changed()}}};function YA(i,e,t,n){let s=0;const r=i[t-n],o=i[t-n+1];let a=0,l=0;for(;e<t;e+=n){const c=i[e]-r,h=i[e+1]-o;s+=l*c-a*h,a=c,l=h}return s/2}function KA(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=YA(i,e,a,n),e=a}return s}function XA(i,e,t,n,s,r,o){const a=i[e],l=i[e+1],c=i[t]-a,h=i[t+1]-l;let u;if(0===c&&0===h)u=e;else{const d=((s-a)*c+(r-l)*h)/(c*c+h*h);if(d>1)u=t;else{if(d>0){for(let p=0;p<n;++p)o[p]=hr(i[e+p],i[t+p],d);return void(o.length=n)}u=e}}for(let d=0;d<n;++d)o[d]=i[u+d];o.length=n}function JM(i,e,t,n,s){let r=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=$a(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function eb(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=JM(i,e,a,n,s),e=a}return s}function tb(i,e,t,n,s,r,o,a,l,c,h){if(e==t)return c;let u,d;if(0===s){if(d=$a(o,a,i[e],i[e+1]),d<c){for(u=0;u<n;++u)l[u]=i[e+u];return l.length=n,d}return c}h=h||[NaN,NaN];let p=e+n;for(;p<t;)if(XA(i,p-n,p,n,o,a,h),d=$a(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&&(XA(i,t-n,e,n,o,a,h),d=$a(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function nb(i,e,t,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const p=t[u];c=tb(i,e,p,n,s,r,o,a,l,c,h),e=p}return c}function ZA(i,e,t,n){for(let s=0,r=t.length;s<r;++s)i[e++]=t[s];return e}function c2(i,e,t,n){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function $p(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=c2(i,e,t[o],n);s[r++]=l,e=l}return s.length=r,s}function QA(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=$p(i,e,t[o],n,s[r]);0===l.length&&(l[0]=e),s[r++]=l,e=l[l.length-1]}return s.length=r,s}function jl(i,e,t,n,s){s=void 0!==s?s:[];let r=0;for(let o=e;o<t;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function Yp(i,e,t,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=jl(i,e,l,n,s[r]),e=l}return s.length=r,s}function ib(i,e,t,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=1===l.length&&l[0]===e?[]:Yp(i,e,l,n,s[r]),e=l[l.length-1]}return s.length=r,s}function Kp(i,e,t,n,s,r,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)r[o++]=i[e],r[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let p=0;const f=i[d],g=i[d+1],m=i[u],y=i[u+1];for(let _=d+n;_<u;_+=n){const w=sae(i[_],i[_+1],f,g,m,y);w>p&&(h=_,p=w)}p>s&&(l[(h-e)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=i[e+u*n],r[o++]=i[e+u*n+1]);return o}function sb(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=Kp(i,e,h,n,s,r,o),a.push(o),e=h}return o}function Qc(i,e){return e*Math.round(i/e)}function ble(i,e,t,n,s,r,o){if(e==t)return o;let c,h,a=Qc(i[e],s),l=Qc(i[e+1],s);e+=n,r[o++]=a,r[o++]=l;do{if(c=Qc(i[e],s),h=Qc(i[e+1],s),(e+=n)==t)return r[o++]=c,r[o++]=h,o}while(c==a&&h==l);for(;e<t;){const u=Qc(i[e],s),d=Qc(i[e+1],s);if(e+=n,u==c&&d==h)continue;const p=c-a,f=h-l,g=u-a,m=d-l;p*m==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&m<f||f==m||f>0&&m>f)?(c=u,h=d):(r[o++]=c,r[o++]=h,a=c,l=h,c=u,h=d)}return r[o++]=c,r[o++]=h,o}function rb(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=ble(i,e,h,n,s,r,o),a.push(o),e=h}return o}class h2 extends Bl{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new h2(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Uc(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return YA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return jl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Kp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new h2(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}const Xp=h2;class ob extends Bl{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ob(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=$a(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Op(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return mM(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ZA(this.flatCoordinates,0,e),this.changed()}}const ui=ob;function Ele(i,e,t,n,s){return!vM(s,function(o){return!Jc(i,e,t,n,o[0],o[1])})}function Jc(i,e,t,n,s,r){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],h=i[e+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return 0!==o}function ab(i,e,t,n,s,r){if(0===t.length||!Jc(i,e,t[0],n,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(Jc(i,t[o-1],t[o],n,s,r))return!1;return!0}function lb(i,e,t,n,s,r,o){let a,l,c,h,u,d,p;const f=s[r+1],g=[];for(let _=0,v=t.length;_<v;++_){const k=t[_];for(h=i[k-n],d=i[k-n+1],a=e;a<k;a+=n)u=i[a],p=i[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(c=(f-d)/(p-d)*(u-h)+h,g.push(c)),h=u,d=p}let m=NaN,y=-1/0;for(g.sort(Ua),h=g[0],a=1,l=g.length;a<l;++a){u=g[a];const _=Math.abs(u-h);_>y&&(c=(h+u)/2,ab(i,e,t,n,c,f)&&(m=c,y=_)),h=u}return isNaN(m)&&(m=s[r]),o?(o.push(m,f,y),o):[m,f,y]}function JA(i,e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=lb(i,e,l,n,s,2*o,r),e=l[l.length-1]}return r}function e9(i,e,t,n,s){let r;for(e+=n;e<t;e+=n)if(r=s(i.slice(e-n,e),i.slice(e,e+n)),r)return r;return!1}function u2(i,e,t,n,s,r){return r=r??iA([1/0,1/0,-1/0,-1/0],i,e,t,n),!!_s(s,r)&&(r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]||e9(i,e,t,n,function(o,a){return function Hoe(i,e,t){let n=!1;const s=yM(i,e),r=yM(i,t);if(1===s||1===r)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],d=t[0],p=t[1],f=(p-e[1])/(d-e[0]);let g,m;!!(2&r)&&!(2&s)&&(g=d-(p-c)/f,n=g>=o&&g<=l),!n&&!!(4&r)&&!(4&s)&&(m=p-(d-l)*f,n=m>=a&&m<=c),!n&&!!(8&r)&&!(8&s)&&(g=d-(p-a)/f,n=g>=o&&g<=l),!n&&16&r&&!(16&s)&&(m=p-(d-o)*f,n=m>=a&&m<=c)}return n}(s,o,a)}))}function t9(i,e,t,n,s){return!!(u2(i,e,t,n,s)||Jc(i,e,t,n,s[0],s[1])||Jc(i,e,t,n,s[0],s[3])||Jc(i,e,t,n,s[2],s[1])||Jc(i,e,t,n,s[2],s[3]))}function n9(i,e,t,n,s){if(!t9(i,e,t[0],n,s))return!1;if(1===t.length)return!0;for(let r=1,o=t.length;r<o;++r)if(Ele(i,t[r-1],t[r],n,s)&&!u2(i,t[r-1],t[r],n,s))return!1;return!0}function Dle(i,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const r=i[e+s];i[e+s]=i[t-n+s],i[t-n+s]=r}e+=n,t-=n}}function cb(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=(a-r)*(l+o),r=a,o=l}return 0===s?void 0:s>0}function hb(i,e,t,n,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=cb(i,e,a,n);if(0===r){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function s9(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(!hb(i,e,a,n,s))return!1;a.length&&(e=a[a.length-1])}return!0}function d2(i,e,t,n,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=cb(i,e,a,n);(0===r?s&&l||!s&&!l:s&&!l||!s&&l)&&Dle(i,e,a,n),e=a}return e}function ub(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r)e=d2(i,e,t[r],n,s);return e}class eh extends Bl{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zo(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new eh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Uc(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eb(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nb(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return ab(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return KA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),d2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Yp(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=bo(this.getExtent());this.flatInteriorPoint_=lb(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ui(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Xp(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Xp(t.slice(r,l),e);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;hb(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=d2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=rb(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new eh(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return n9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=$p(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const Io=eh;function nd(i){if(Vp(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],s=i[3],r=[e,t,e,s,n,s,n,t,e,t];return new eh(r,"XY",[r.length])}function r9(i,e,t){e=e||32;const n=i.getStride(),s=i.getLayout(),r=i.getCenter(),o=n*(e+1),a=new Array(o);for(let h=0;h<o;h+=n){a[h]=0,a[h+1]=0;for(let u=2;u<n;u++)a[h+u]=r[u]}const c=new eh(a,s,[a.length]);return function Ale(i,e,t,n){const s=i.getFlatCoordinates(),r=i.getStride(),o=s.length/r-1,a=n||0;for(let l=0;l<=o;++l){const c=l*r,h=a+2*Yc(l,o)*Math.PI/o;s[c]=e[0]+t*Math.cos(h),s[c+1]=e[1]+t*Math.sin(h)}i.changed()}(c,r,i.getRadius(),t),c}function db(i,e,t,n){const s=Ht(e)/t[0],r=Hi(e)/t[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function pb(i,e,t){let n=Math.min(i,e);return n*=Math.log(1+50*Math.max(0,i/e-1))/50+1,t&&(n=Math.max(n,t),n/=Math.log(1+50*Math.max(0,t/i-1))/50+1),In(n,t/2,2*e)}function o9(i,e,t,n,s){return t=void 0===t||t,function(r,o,a,l){if(void 0!==r){const c=n?db(i,n,a,s):i;return t&&l?pb(r,c,e):In(r,e,c)}}}function fb(i){if(void 0!==i)return 0}function a9(i){if(void 0!==i)return i}function p2(i,e){setTimeout(function(){i(e)},0)}function yb(i,e,t,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;return a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o,[a*r-l*o,l*r+a*o]}const ea=class Vle extends qr{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=AM(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&bA(),e.center&&(e.center=Fn(e.center)),e.extent&&(e.extent=Ya(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in So)delete t[a];this.setProperties(t,!0);const n=function Hle(i){let e,t,n,o=void 0!==i.minZoom?i.minZoom:0,a=void 0!==i.maxZoom?i.maxZoom:28;const l=void 0!==i.zoomFactor?i.zoomFactor:2,c=void 0!==i.multiWorld&&i.multiWorld,h=void 0===i.smoothResolutionConstraint||i.smoothResolutionConstraint,u=void 0!==i.showFullExtent&&i.showFullExtent,d=AM(i.projection,"EPSG:3857"),p=d.getExtent();let f=i.constrainOnlyCenter,g=i.extent;if(!c&&!g&&d.isGlobal()&&(f=!1,g=p),void 0!==i.resolutions){const m=i.resolutions;t=m[o],n=void 0!==m[a]?m[a]:m[m.length-1],e=i.constrainResolution?function Lle(i,e,t,n){return e=void 0===e||e,function(s,r,o,a){if(void 0!==s){const l=i[0],c=i[i.length-1],h=t?db(l,t,o,n):l;if(a)return e?pb(s,h,c):In(s,c,h);const u=Math.min(h,s),d=Math.floor(uM(i,u,r));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}(m,h,!f&&g,u):o9(t,n,h,!f&&g,u)}else{const y=(p?Math.max(Ht(p),Hi(p)):360*Hp.degrees/d.getMetersPerUnit())/256/Math.pow(2,0),_=y/Math.pow(2,28);t=i.maxResolution,void 0!==t?o=0:t=y/Math.pow(l,o),n=i.minResolution,void 0===n&&(n=void 0!==i.maxZoom?void 0!==i.maxResolution?t/Math.pow(l,a):y/Math.pow(l,a):_),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),e=i.constrainResolution?function Ple(i,e,t,n,s,r){return n=void 0===n||n,t=void 0!==t?t:0,function(o,a,l,c){if(void 0!==o){const h=s?db(e,s,l,r):e;if(c)return n?pb(o,h,t):In(o,t,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(i)-u),p=-a*(.5-u)+.5,f=Math.min(h,o),g=Math.floor(Math.log(e/f)/Math.log(i)+p),m=Math.max(d,g);return In(e/Math.pow(i,m),t,h)}}}(l,t,n,h,!f&&g,u):o9(t,n,h,!f&&g,u)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=function zle(i){if(void 0!==i.extent)return UA(i.extent,i.constrainOnlyCenter,void 0===i.smoothExtentConstraint||i.smoothExtentConstraint);const e=AM(i.projection,"EPSG:3857");if(!0!==i.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,UA(t,!1,!1)}return ple}(e),r=n.constraint,o=function Ble(i){if(void 0===i.enableRotation||i.enableRotation){const t=i.constrainRotation;return void 0===t||!0===t?function Nle(i){const e=void 0===i?zl(5):i;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===t?a9:"number"==typeof t?function Ole(i){const e=2*Math.PI/i;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):a9}return fb}(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution();this.setCenterInternal([n[0]+r/2*(s[3]-t[3]+t[1]-s[1]),n[1]-r/2*(s[0]-t[0]+t[2]-s[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Fn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Fn(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let n,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),void 0!==h.zoom?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),void 0!==h.rotation&&this.setRotation(h.rotation)}if(s===t)return void(n&&p2(n,!0));let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<t;++s){const h=arguments[s],u={start:r,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||hM,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),void 0!==h.zoom?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),void 0!==h.rotation){u.sourceRotation=l;const d=Yc(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}(i=u).sourceCenter&&i.targetCenter&&!vs(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation?r+=u.duration:u.complete=!0,c.push(u)}var i;this.animations_.push(c),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&p2(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter,this.targetCenter_=[d+u*(f-d),p+u*(g-p)]}if(l.sourceResolution&&l.targetResolution){const d=1===u?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){const d=1===u?Yc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&p2(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return void 0!==s&&(n=[s[0]-t[0],s[1]-t[1]],wM(n,e-this.getRotation()),function joe(i,e){i[0]+=+e[0],i[1]+=+e[1]}(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),r=this.getResolution();return void 0!==s&&void 0!==r&&(n=[t[0]-e*(t[0]-s[0])/r,t[1]-e*(t[1]-s[1])/r]),n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Xc(e,this.getProjection())}getCenterInternal(){return this.get(So.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return qp(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Yt(t,"The view center is not defined");const n=this.getResolution();Yt(void 0!==n,"The view resolution is not defined");const s=this.getRotation();return Yt(void 0!==s,"The view rotation is not defined"),kM(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(So.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ya(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Ht(e)/t[0],s=Hi(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),s=Math.log(t/this.minResolution_)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(So.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=Math.log(n/this.minResolution_)/t;return function(o){return Math.log(n/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=yb(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,n)}return{center:s.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let n,s,t=this.minZoom_||0;if(this.resolutions_){const r=uM(this.resolutions_,e,1);t=r,n=this.resolutions_[r],s=r==this.resolutions_.length-1?2:n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const t=In(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],In(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Yt(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e))Yt(!Vp(e),"Cannot fit empty extent provided as `geometry`"),n=nd(Ya(e,this.getProjection()));else if("Circle"===e.getType()){const s=Ya(e.getExtent(),this.getProjection());n=nd(s),n.rotate(this.getRotation(),bo(s))}else{const s=Eo();n=s?e.clone().transform(s,this.getProjection()):e}this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=r.length;u<d;u+=o){const p=r[u]*n-r[u+1]*s,f=r[u]*s+r[u+1]*n;a=Math.min(a,p),l=Math.min(l,f),c=Math.max(c,p),h=Math.max(h,f)}return[a,l,c,h]}fitInternal(e,t){let n=(t=t||{}).size;n||(n=this.getViewportSizeMinusPadding_());const s=void 0!==t.padding?t.padding:[0,0,0,0],r=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=bo(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const g=this.getConstrainedCenter([d[0]*u-d[1]*h,d[1]*u+d[0]*h],l),m=t.callback?t.callback:Ap;void 0!==t.duration?this.animateInternal({resolution:l,center:g,duration:t.duration,easing:t.easing},m):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),p2(m,!0))}centerOn(e,t,n){this.centerOnInternal(Fn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(yb(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=yb(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,n);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=Xc(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Fn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Fn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Fn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(So.ROTATION)!==s&&this.set(So.ROTATION,s),this.get(So.RESOLUTION)!==o&&(this.set(So.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(So.CENTER)||!vs(this.get(So.CENTER),a))&&this.set(So.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=void 0!==e?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();n=n||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!vs(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:Fu,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,n){n=n&&Fn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){!this.getInteracting()||(this.setHint(1,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}},l9=class qle extends qr{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,Yt("number"==typeof t.opacity,"Layer opacity must be a number"),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},n=this.getZIndex();return t.opacity=In(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==n||t.managed?n:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Qe()}getLayerStatesArray(e){return Qe()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return Qe()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Yt("number"==typeof e,"Layer opacity must be a number"),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function _b(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const f2=class Gle extends l9{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(fn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Mt(e,"change",this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;const n=this.getMapInternal();let s;if(!e&&n&&(e=n.getView()),t=e instanceof ea?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),t.layerStatesArray){if(s=t.layerStatesArray.find(o=>o.layer===this),!s)return!1}else s=this.getLayerState();const r=this.getExtent();return _b(s,t.viewState)&&(!r||_s(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];let s=t(e instanceof ea?e.getViewStateAndExtent():e);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();!t||t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(fn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(fn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Mt(e,"precompose",this.handlePrecompose_,this),this.mapRenderKey_=Mt(this,"change",e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Yt(!t.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}},Wle=class Ule extends f2{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.cacheSize_=n,this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},Yle=class $le extends Wle{constructor(e){super(e)}createRenderer(){return new ule(this,{cacheSize:this.getCacheSize()})}};class m2 extends zr{constructor(e,t,n){super(e),this.element=t,this.index=n}}const Hs=class Kle extends qr{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new m2("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new m2("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new m2("remove",s,e)),this.dispatchEvent(new m2("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}},id=class Xle extends zr{constructor(e,t,n){super(e),this.map=t,this.frameState=void 0!==n?n:null}},Ka=class Zle extends id{constructor(e,t,n,s,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==s&&s,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},St={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Jle=class Qle extends Nm{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Mt(n,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Mt(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!YR&&{passive:!1})}emulateClick_(e){let t=new Ka(St.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ka(St.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ka(St.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==St.POINTERUP||t.type==St.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==St.POINTERDOWN||t.type==St.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ka(St.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(fn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Ka(St.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Mt(n,St.POINTERMOVE,this.handlePointerMove_,this),Mt(n,St.POINTERUP,this.handlePointerUp_,this),Mt(this.element_,St.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Mt(this.element_.getRootNode(),St.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ka(St.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Ka(St.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(fn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(fn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(fn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},y2=1/0;function h9(i,e,t,n,s,r,o){try{var a=i[r](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,s)}function _2(i){return function(){var e=this,t=arguments;return new Promise(function(n,s){var r=i.apply(e,t);function o(l){h9(r,n,s,o,a,"next",l)}function a(l){h9(r,n,s,o,a,"throw",l)}o(void 0)})}}const v2="ol-hidden",k2="ol-unselectable",kb="ol-control",u9="ol-collapsed",oce=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$"].join(""),"i"),d9=["style","variant","weight","size","lineHeight","family"],wb={normal:400,bold:700},xb=function(i){const e=i.match(oce);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,s=d9.length;n<s;++n){const r=e[n+1];void 0!==r&&(t[d9[n]]="string"==typeof r?r.trim():r)}return isNaN(Number(t.weight))&&t.weight in wb&&(t.weight=wb[t.weight]),t.families=t.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),t},Zp=class ace extends qr{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)fn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Ap&&this.listenerKeys.push(Mt(e,"postrender",this.render,this)),e.render()}}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},cce=class lce extends Zp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=void 0!==e.className?e.className:"ol-attribution",n=void 0!==e.tipLabel?e.tipLabel:"Attributions",s=void 0!==e.expandClassName?e.expandClassName:t+"-expand",r=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const h=this.element;h.className=t+" "+k2+" "+kb+(this.collapsed_&&this.collapsible_?" "+u9:"")+(this.collapsible_?"":" ol-uncollapsible"),h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(s=>s.getAttributions(e)));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(r=>!1===r.getSource()?.getAttributionsCollapsible());this.setCollapsible(s)}return Array.from(n)}updateElement_(e){var t=this;return _2(function*(){if(!e)return void(t.renderedVisible_&&(t.element.style.display="none",t.renderedVisible_=!1));const n=yield Promise.all(t.collectSourceAttributions_(e).map(r=>function _oe(i){return function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}()}(()=>r))),s=n.length>0;if(t.renderedVisible_!=s&&(t.element.style.display=s?"":"none",t.renderedVisible_=s),!Wa(n,t.renderedAttributions_)){ZR(t.ulElement_);for(let r=0,o=n.length;r<o;++r){const a=document.createElement("li");a.innerHTML=n[r],t.ulElement_.appendChild(a)}t.renderedAttributions_=n}})()}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(u9),this.collapsed_?XR(this.collapseLabel_,this.label_):XR(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},uce=class hce extends Zp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",n=void 0!==e.label?e.label:"\u21e7",s=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const l=this.element;l.className=t+" "+k2+" "+kb,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(v2)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();void 0!==n&&(this.duration_>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Fu}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(v2);r||0!==n?r&&0!==n&&this.element.classList.remove(v2):this.element.classList.add(v2)}this.label_.style.transform=s}this.rotation_=n}},pce=class dce extends Zp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,s=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",r=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",l=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",c=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof o?document.createTextNode(o):o),h.addEventListener("click",this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener("click",this.handleClick_.bind(this,-n),!1);const p=this.element;p.className=t+" "+k2+" "+kb,p.appendChild(h),p.appendChild(u),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(void 0!==s){const r=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:Fu})):n.setZoom(r)}}};function bb(i,e,t,n){const s=i.getZoom();if(void 0===s)return;const r=i.getConstrainedZoom(s+e),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:void 0!==n?n:250,easing:Fu})}const sd=class yce extends qr{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},kce=class vce extends sd{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==St.DBLCLICK){const n=e.originalEvent,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_;bb(e.map.getView(),o,r,this.duration_),n.preventDefault(),t=!0}return!t}};function Cb(i){const e=arguments;return function(t){let n=!0;for(let s=0,r=e.length;s<r&&(n=n&&e[s](t),n);++s);return n}}const xce=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},p9=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return!(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")||function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)}(i)},w2=jc,f9=function(i){const e=i.originalEvent;return"pointerId"in e&&0==e.button&&!(Eoe&&WR&&e.ctrlKey)},bce=Vu,Eb=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},g9=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},m9=function(i){const e=i.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},Sb=function(i){const e=i.originalEvent;return"pointerId"in e&&"mouse"==e.pointerType},y9=function(i){const e=i.originalEvent;return"pointerId"in e&&e.isPrimary&&0===e.button};function Ib(i){const e=i.length;let t=0,n=0;for(let s=0;s<e;s++)t+=i[s].clientX,n+=i[s].clientY;return{clientX:t/e,clientY:n/e}}const ql=class Sce extends sd{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==St.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==St.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==St.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==St.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}},Tce=class Ice extends ql{constructor(e){super({stopDown:Vu}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:Cb(Eb,y9);this.condition_=e.onFocusOnly?Cb(p9,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(Ib(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();(function Goe(i,e){i[0]*=e,i[1]*=e})(r,a.getResolution()),wM(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Fu})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Rce=class Dce extends ql{constructor(e){e=e||{},super({stopDown:Vu}),this.condition_=e.condition?e.condition:xce,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!Sb(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===fb)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);void 0!==this.lastAngle_&&n.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!Sb(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(Sb(e)&&f9(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},Lce=class Ace extends Om{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Io([s])}getGeometry(){return this.geometry_}};class Qp extends zr{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}const Oce=class Pce extends ql{constructor(e){super(),this.box_=new Lce((e=e??{}).className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??f9,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],r=n[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){!this.startPixel_||(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Qp("boxdrag",e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Qp(t?"boxend":"boxcancel",e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Qp("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Qp("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Qp("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}},Fce=class Nce extends Oce{constructor(e){super({condition:(e=e||{}).condition?e.condition:g9,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:Fu})}},zce=class Vce extends sd{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Eb(t)&&m9(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&("ArrowDown"==s||"ArrowLeft"==s||"ArrowRight"==s||"ArrowUp"==s)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;"ArrowDown"==s?c=-a:"ArrowLeft"==s?l=-a:"ArrowRight"==s?l=a:c=a;const h=[l,c];wM(h,o.getRotation()),function _ce(i,e,t){const n=i.getCenterInternal();n&&i.animateInternal({duration:void 0!==t?t:250,easing:doe,center:i.getConstrainedCenter([n[0]+e[0],n[1]+e[1]])})}(o,h,this.duration_),n.preventDefault(),t=!0}}return!t}},Bce=class Hce extends sd{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:function(t){return!function(i){const e=i.originalEvent;return WR?e.metaKey:e.ctrlKey}(t)&&m9(t)},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&("+"===s||"-"===s)){const o="+"===s?this.delta_:-this.delta_;bb(e.map.getView(),o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}},Uce=class Gce extends sd{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:w2;this.condition_=e.onFocusOnly?Cb(p9,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let r=s.deltaY;switch(s.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=40;break;case WheelEvent.DOM_DELTA_PAGE:r*=300}if(0===r)return!1;this.lastDelta_=r;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-In(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),bb(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},$ce=class Wce extends ql{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Vu),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(void 0!==this.lastAngle_){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==fb&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Ib(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Kce=class Yce extends ql{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Vu),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Ib(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function _9(i){i=i||{};const e=new Hs,t=new class gce{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===i.altShiftDragRotate||i.altShiftDragRotate)&&e.push(new Rce),(void 0===i.doubleClickZoom||i.doubleClickZoom)&&e.push(new kce({delta:i.zoomDelta,duration:i.zoomDuration})),(void 0===i.dragPan||i.dragPan)&&e.push(new Tce({onFocusOnly:i.onFocusOnly,kinetic:t})),(void 0===i.pinchRotate||i.pinchRotate)&&e.push(new $ce),(void 0===i.pinchZoom||i.pinchZoom)&&e.push(new Kce({duration:i.zoomDuration})),(void 0===i.keyboard||i.keyboard)&&(e.push(new zce),e.push(new Bce({delta:i.zoomDelta,duration:i.zoomDuration}))),(void 0===i.mouseWheelZoom||i.mouseWheelZoom)&&e.push(new Uce({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(void 0===i.shiftDragZoom||i.shiftDragZoom)&&e.push(new Fce({duration:i.zoomDuration})),e}class Gl extends zr{constructor(e,t){super(e),this.layer=t}}class Db extends l9{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),n?Array.isArray(n)?n=new Hs(n.slice(),{unique:!0}):Yt("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new Hs(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(fn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Mt(e,"add",this.handleLayersAdd_,this),Mt(e,"remove",this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(fn);Lp(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const r=t[n];this.registerLayerListeners_(r),this.dispatchEvent(new Gl("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[Mt(e,"propertychange",this.handleLayerChange_,this),Mt(e,"change",this.handleLayerChange_,this)];e instanceof Db&&t.push(Mt(e,"addlayer",this.handleLayerGroupAdd_,this),Mt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ft(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Gl("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Gl("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Gl("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=ft(t);this.listenerKeys_[n].forEach(fn),delete this.listenerKeys_[n],this.dispatchEvent(new Gl("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new Gl("removelayer",n[s]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&void 0===s.zIndex&&(r=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),void 0!==s.extent&&(l.extent=void 0!==l.extent?Vl(l.extent,s.extent):s.extent),void 0===l.zIndex&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}const x2=Db;function v9(i,e,t=0,n=i.length-1,s=Xce){for(;n>t;){if(n-t>600){const l=n-t+1,c=e-t+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1);v9(i,e,Math.max(t,Math.floor(e-c*u/l+d)),Math.min(n,Math.floor(e+(l-c)*u/l+d)),s)}const r=i[e];let o=t,a=n;for(Jp(i,t,e),s(i[n],r)>0&&Jp(i,t,n);o<a;){for(Jp(i,o,a),o++,a--;s(i[o],r)<0;)o++;for(;s(i[a],r)>0;)a--}0===s(i[t],r)?Jp(i,t,a):(a++,Jp(i,a,n)),a<=e&&(t=a+1),e<=a&&(n=a-1)}}function Jp(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function Xce(i,e){return i<e?-1:i>e?1:0}class k9{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!b2(e,t))return n;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;b2(e,l)&&(t.leaf?n.push(a):Ab(e,l)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!b2(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(b2(e,o)){if(t.leaf||Ab(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ad([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,c;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),n.leaf){const h=Zce(e,n.children,t);if(-1!==h)return n.children.splice(h,1),r.push(n),this._condense(r),this}c||n.leaf||!Ab(n,s)?l?(a++,n=l.children[a],c=!1):n=null:(r.push(n),o.push(a),a=0,l=n,n=n.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const r=n-t+1;let a,o=this._maxEntries;if(r<=o)return a=ad(e.slice(t,n+1)),od(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=ad([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));w9(e,t,n,c,this.compareMinX);for(let h=t;h<=n;h+=c){const u=Math.min(h+c-1,n);w9(e,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const p=Math.min(d+l-1,u);a.children.push(this._build(e,d,p,s-1))}}return od(a,this.toBBox),a}_chooseSubtree(e,t,n,s){for(;s.push(t),!t.leaf&&s.length-1!==n;){let a,r=1/0,o=1/0;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=Rb(c),u=ehe(e,c)-h;u<o?(o=u,r=h<r?h:r,a=c):u===o&&h<r&&(r=h,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),tf(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const n=e[t],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=ad(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,od(n,this.toBBox),od(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=ad([e,t]),this.data.height=e.height+1,this.data.leaf=!1,od(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,r=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=ef(e,0,a,this.toBBox),c=ef(e,a,n,this.toBBox),h=the(l,c),u=Rb(l)+Rb(c);h<r?(r=h,s=a,o=u<o?u:o):h===r&&u<o&&(o=u,s=a)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:Qce,r=e.leaf?this.compareMinY:Jce;this._allDistMargin(e,t,n,s)<this._allDistMargin(e,t,n,r)&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const r=this.toBBox,o=ef(e,0,t,r),a=ef(e,n-t,n,r);let l=M2(o)+M2(a);for(let c=t;c<n-t;c++){const h=e.children[c];tf(o,e.leaf?r(h):h),l+=M2(o)}for(let c=n-t-1;c>=t;c--){const h=e.children[c];tf(a,e.leaf?r(h):h),l+=M2(a)}return l}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)tf(t[s],e)}_condense(e){for(let n,t=e.length-1;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():od(e[t],this.toBBox)}}function Zce(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function od(i,e){ef(i,0,i.children.length,e,i)}function ef(i,e,t,n,s){s||(s=ad(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=i.children[r];tf(s,i.leaf?n(o):o)}return s}function tf(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function Qce(i,e){return i.minX-e.minX}function Jce(i,e){return i.minY-e.minY}function Rb(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function M2(i){return i.maxX-i.minX+(i.maxY-i.minY)}function ehe(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function the(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),r=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-n)}function Ab(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function b2(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function ad(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w9(i,e,t,n,s){const r=[e,t];for(;r.length;){if((t=r.pop())-(e=r.pop())<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;v9(i,o,e,t,s),r.push(e,o,o,t)}}let nh=0;const ws=1<<nh++,It=1<<nh++,Bs=1<<nh++,To=1<<nh++,ih=1<<nh++,nf=1<<nh++,C2=Math.pow(2,6)-1,Lb={[ws]:"boolean",[It]:"number",[Bs]:"string",[To]:"color",[ih]:"number[]",[nf]:"size"},nhe=Object.keys(Lb).map(Number).sort(Ua);function sf(i){const e=[];for(const t of nhe)rf(i,t)&&e.push(Lb[t]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function rf(i,e){return(i&e)===e}function Ul(i,e){return i===e}class wi{constructor(e,t){if(!function ihe(i){return i in Lb}(e))throw new Error(`literal expressions must have a specific type, got ${sf(e)}`);this.type=e,this.value=t}}class she{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function x9(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Bi(i,e,t){switch(typeof i){case"boolean":if(Ul(e,Bs))return new wi(Bs,i?"true":"false");if(!rf(e,ws))throw new Error(`got a boolean, but expected ${sf(e)}`);return new wi(ws,i);case"number":if(Ul(e,nf))return new wi(nf,zs(i));if(Ul(e,ws))return new wi(ws,!!i);if(Ul(e,Bs))return new wi(Bs,i.toString());if(!rf(e,It))throw new Error(`got a number, but expected ${sf(e)}`);return new wi(It,i);case"string":if(Ul(e,To))return new wi(To,o2(i));if(Ul(e,ws))return new wi(ws,!!i);if(!rf(e,Bs))throw new Error(`got a string, but expected ${sf(e)}`);return new wi(Bs,i)}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(0===i.length)throw new Error("empty expression");if("string"==typeof i[0])return function ghe(i,e,t){const n=i[0],s=rhe[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(i,e,t)}(i,e,t);for(const n of i)if("number"!=typeof n)throw new Error("expected an array of numbers");if(Ul(e,nf)){if(2!==i.length)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new wi(nf,i)}if(Ul(e,To)){if(3===i.length)return new wi(To,[...i,1]);if(4===i.length)return new wi(To,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!rf(e,ih))throw new Error(`got an array of numbers, but expected ${sf(e)}`);return new wi(ih,i)}const rhe={get:Je(gt(1,1/0),M9),var:Je(gt(1,1),function ohe(i,e,t){const n=i[1];if("string"!=typeof n)throw new Error("expected a string argument for var operation");return t.variables.add(n),[new wi(Bs,n)]}),has:Je(gt(1,1/0),M9),id:Je(function ahe(i,e,t){t.featureId=!0},ld),concat:Je(gt(2,1/0),Bt(Bs)),"geometry-type":Je(function lhe(i,e,t){t.geometryType=!0},ld),"line-metric":Je(ld),resolution:Je(Pb,ld),zoom:Je(Pb,ld),time:Je(Pb,ld),any:Je(gt(2,1/0),Bt(ws)),all:Je(gt(2,1/0),Bt(ws)),"!":Je(gt(1,1),Bt(ws)),"==":Je(gt(2,2),Bt(C2)),"!=":Je(gt(2,2),Bt(C2)),">":Je(gt(2,2),Bt(It)),">=":Je(gt(2,2),Bt(It)),"<":Je(gt(2,2),Bt(It)),"<=":Je(gt(2,2),Bt(It)),"*":Je(gt(2,1/0),b9),coalesce:Je(gt(2,1/0),b9),"/":Je(gt(2,2),Bt(It)),"+":Je(gt(2,1/0),Bt(It)),"-":Je(gt(2,2),Bt(It)),clamp:Je(gt(3,3),Bt(It)),"%":Je(gt(2,2),Bt(It)),"^":Je(gt(2,2),Bt(It)),abs:Je(gt(1,1),Bt(It)),floor:Je(gt(1,1),Bt(It)),ceil:Je(gt(1,1),Bt(It)),round:Je(gt(1,1),Bt(It)),sin:Je(gt(1,1),Bt(It)),cos:Je(gt(1,1),Bt(It)),atan:Je(gt(1,2),Bt(It)),sqrt:Je(gt(1,1),Bt(It)),match:Je(gt(4,1/0),C9,function hhe(i,e,t){const n=i.length-1,r=Bi(i[1],Bs|It|ws,t),o=Bi(i[i.length-1],e,t),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=Bi(i[l+2],r.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Bi(i[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[r,...a,o]}),between:Je(gt(3,3),Bt(It)),interpolate:Je(gt(6,1/0),C9,function uhe(i,e,t){const n=i[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const l=n[1];if("number"!=typeof l||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);s=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new wi(It,s);let o;try{o=Bi(i[2],It,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){try{const c=Bi(i[l+3],It,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Bi(i[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[r,o,...a]}),case:Je(gt(3,1/0),function che(i,e,t){const s=i.length-1;if(s%2==0)throw new Error(`expected an odd number of arguments for ${i[0]}, got ${s} instead`)},function dhe(i,e,t){const n=Bi(i[i.length-1],e,t),s=new Array(i.length-1);for(let r=0;r<s.length-1;r+=2){try{const o=Bi(i[r+1],ws,t);s[r]=o}catch(o){throw new Error(`failed to parse argument ${r} of case expression: ${o.message}`)}try{const o=Bi(i[r+2],n.type,t);s[r+1]=o}catch(o){throw new Error(`failed to parse argument ${r+1} of case expression: ${o.message}`)}}return s[s.length-1]=n,s}),in:Je(gt(2,2),function phe(i,e,t){let s,n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');if("string"==typeof n[0]){if("literal"!==n[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=Bs}else s=It;const r=new Array(n.length);for(let a=0;a<r.length;a++)try{const l=Bi(n[a],s,t);r[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Bi(i[1],s,t),...r]}),number:Je(gt(1,1/0),Bt(C2)),string:Je(gt(1,1/0),Bt(C2)),array:Je(gt(1,1/0),Bt(It)),color:Je(gt(1,4),Bt(It)),band:Je(gt(1,3),Bt(It)),palette:Je(gt(2,2),function fhe(i,e,t){let n;try{n=Bi(i[1],It,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const s=i[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let o=0;o<r.length;o++){let a;try{a=Bi(s[o],To,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof wi))throw new Error(`the palette color at index ${o} must be a literal value`);r[o]=a}return[n,...r]}),"to-string":Je(gt(1,1),Bt(ws|It|Bs|To))};function M9(i,e,t){const n=i.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=i[r+1];switch(typeof o){case"number":s[r]=new wi(It,o);break;case"string":s[r]=new wi(Bs,o);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}0===r&&t.properties.add(String(o))}return s}function Pb(i,e,t){t.mapState=!0}function ld(i,e,t){if(1!==i.length)throw new Error(`expected no arguments for ${i[0]} operation`);return[]}function gt(i,e){return function(t,n,s){const r=t[0],o=t.length-1;if(i===e){if(o!==i)throw new Error(`expected ${i} argument${1===i?"":"s"} for ${r}, got ${o}`)}else if(o<i||o>e)throw new Error(`expected ${e===1/0?`${i} or more`:`${i} to ${e}`} arguments for ${r}, got ${o}`)}}function b9(i,e,t){const n=i.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=Bi(i[r+1],e,t);s[r]=o}return s}function Bt(i){return function(e,t,n){const s=e.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=Bi(e[o+1],i,n);r[o]=a}return r}}function C9(i,e,t){const s=i.length-1;if(s%2==1)throw new Error(`expected an even number of arguments for operation ${i[0]}, got ${s} instead`)}function Je(...i){return function(e,t,n){const s=e[0];let r;for(let o=0;o<i.length;o++){const a=i[o](e,t,n);if(o==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");r=a}}return new she(t,s,...r)}}function E9(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return E9(i.getGeometries()[0]);default:return""}}function Za(i,e,t){return Do(Bi(i,e,t),t)}function Do(i,e){if(i instanceof wi){if(i.type===To&&"string"==typeof i.value){const n=o2(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case"number":case"string":case"coalesce":return function mhe(i,e){const t=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Do(i.args[r],e);switch(t){case"coalesce":return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a<"u"&&null!==a)return a}throw new Error("Expected one of the values to be non-null")};case"number":case"string":return r=>{for(let o=0;o<n;++o){const a=s[o](r);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}(i,e);case"get":case"var":case"has":return function yhe(i,e){const n=i.args[0].value;switch(i.operator){case"get":return s=>{const r=i.args;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a)o=o[r[a].value];return o};case"var":return s=>s.variables[n];case"has":return s=>{const r=i.args;if(!(n in s.properties))return!1;let o=s.properties[n];for(let a=1,l=r.length;a<l;++a){const h=r[a].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}(i);case"id":return n=>n.featureId;case"geometry-type":return n=>n.geometryType;case"concat":{const n=i.args.map(s=>Do(s,e));return s=>"".concat(...n.map(r=>r(s).toString()))}case"resolution":return n=>n.resolution;case"any":case"all":case"between":case"in":case"!":return function vhe(i,e){const t=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Do(i.args[r],e);switch(t){case"any":return r=>{for(let o=0;o<n;++o)if(s[o](r))return!0;return!1};case"all":return r=>{for(let o=0;o<n;++o)if(!s[o](r))return!1;return!0};case"between":return r=>{const o=s[0](r),a=s[1](r),l=s[2](r);return o>=a&&o<=l};case"in":return r=>{const o=s[0](r);for(let a=1;a<n;++a)if(o===s[a](r))return!0;return!1};case"!":return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${t}`)}}(i,e);case"==":case"!=":case"<":case"<=":case">":case">=":return function _he(i,e){const t=i.operator,n=Do(i.args[0],e),s=Do(i.args[1],e);switch(t){case"==":return r=>n(r)===s(r);case"!=":return r=>n(r)!==s(r);case"<":return r=>n(r)<s(r);case"<=":return r=>n(r)<=s(r);case">":return r=>n(r)>s(r);case">=":return r=>n(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${t}`)}}(i,e);case"*":case"/":case"+":case"-":case"clamp":case"%":case"^":case"abs":case"floor":case"ceil":case"round":case"sin":case"cos":case"atan":case"sqrt":return function khe(i,e){const t=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Do(i.args[r],e);switch(t){case"*":return r=>{let o=1;for(let a=0;a<n;++a)o*=s[a](r);return o};case"/":return r=>s[0](r)/s[1](r);case"+":return r=>{let o=0;for(let a=0;a<n;++a)o+=s[a](r);return o};case"-":return r=>s[0](r)-s[1](r);case"clamp":return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case"%":return r=>s[0](r)%s[1](r);case"^":return r=>Math.pow(s[0](r),s[1](r));case"abs":return r=>Math.abs(s[0](r));case"floor":return r=>Math.floor(s[0](r));case"ceil":return r=>Math.ceil(s[0](r));case"round":return r=>Math.round(s[0](r));case"sin":return r=>Math.sin(s[0](r));case"cos":return r=>Math.cos(s[0](r));case"atan":return 2===n?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case"sqrt":return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${t}`)}}(i,e);case"case":return function whe(i,e){const t=i.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Do(i.args[s],e);return s=>{for(let r=0;r<t-1;r+=2)if(n[r](s))return n[r+1](s);return n[t-1](s)}}(i,e);case"match":return function xhe(i,e){const t=i.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Do(i.args[s],e);return s=>{const r=n[0](s);for(let o=1;o<t-1;o+=2)if(r===n[o](s))return n[o+1](s);return n[t-1](s)}}(i,e);case"interpolate":return function Mhe(i,e){const t=i.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Do(i.args[s],e);return s=>{const r=n[0](s),o=n[1](s);let a,l;for(let c=2;c<t;c+=2){const h=n[c](s);let u=n[c+1](s);const d=Array.isArray(u);if(d&&(u=ele(u)),h>=o)return 2===c?u:d?Che(r,o,a,l,h,u):af(r,o,a,l,h,u);a=h,l=u}return l}}(i,e);case"to-string":return function bhe(i,e){const t=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Do(i.args[r],e);if("to-string"===t)return r=>{const o=s[0](r);return i.args[0].type===To?KM(o):o.toString()};throw new Error(`Unsupported convert operator ${t}`)}(i,e);default:throw new Error(`Unsupported operator ${t}`)}}function af(i,e,t,n,s,r){const o=s-t;if(0===o)return n;const a=e-t;return n+(1===i?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1))*(r-n)}function Che(i,e,t,n,s,r){if(s-t==0)return n;const a=NA(n),l=NA(r);let c=l[2]-a[2];return c>180?c-=360:c<-180&&(c+=360),function tle(i){const e=(i[0]+16)/116,t=i[1],n=i[2]*Math.PI/180,s=WM(e),r=WM(e+t/500*Math.cos(n)),o=WM(e-t/200*Math.sin(n)),a=UM(3.021973625*r-1.617392459*s-.404875592*o),l=UM(-.943766287*r+1.916279586*s+.027607165*o),c=UM(.069407491*r-.22898585*s+1.159737864*o);return[In(a+.5|0,0,255),In(l+.5|0,0,255),In(c+.5|0,0,255),i[3]]}([af(i,e,t,a[0],s,l[0]),af(i,e,t,a[1],s,l[1]),a[2]+af(i,e,t,0,s,c),af(i,e,t,n[3],s,r[3])])}function Ob(i,e,t){return e+":"+i+":"+(t?Ju(t):"null")}const Gr=new class Ehe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];0==(3&e++)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const s=Ob(e,t,n);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,n){const s=Ob(e,t,n);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,n,s,r){const o=Ob(e,t,n),a=o in this.cache_;this.cache_[o]=s,r&&(0===s.getImageState()&&s.load(),1===s.getImageState()?s.ready().then(()=>{this.patternCache_[o]=Vm().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=Vm().createPattern(s.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};let lf=null;class I9 extends Nm{constructor(e,t,n,s,r){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=void 0===s?0:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){lf||(lf=ki(1,1,void 0,{willReadFrequently:!0})),lf.drawImage(this.image_,0,0);try{lf.getImageData(0,0,1,1),this.tainted_=!1}catch{lf=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=ki(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&function KR(i,e){return e&&(i.src=e),i.src&&$R?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(s=>i.complete&&i.width?t(i):n(s))):function Toe(i,e){return new Promise((t,n)=>{function s(){o(),t(i)}function r(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",s),i.removeEventListener("error",r)}i.addEventListener("load",s),i.addEventListener("error",r),e&&(i.src=e)})}(i)}(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,n=ki(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=function Qae(i){return"string"==typeof i?i:KM(i)}(this.color_),n.fillRect(0,0,s.width/e,s.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(2===this.imageState_||3===this.imageState_)e();else{const t=()=>{(2===this.imageState_||3===this.imageState_)&&(this.removeEventListener("change",t),e())};this.addEventListener("change",t)}})),this.ready_}}function Nb(i,e,t,n,s,r){let o=void 0===e?void 0:Gr.get(e,t,s);return o||(o=new I9(i,i&&"src"in i?i.src||void 0:e,t,n,s),Gr.set(e,t,s,o,r)),r&&o&&!Gr.getPattern(e,t,s)&&Gr.set(e,t,s,o,r),o}const She=I9;function ta(i){return i?Array.isArray(i)?KM(i):"object"==typeof i&&"src"in i?function Ihe(i){if(!i.offset||!i.size)return Gr.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Gr.getPattern(e,void 0,i.color);if(t)return t;const n=Gr.get(i.src,"anonymous",null);if(2!==n.getImageState())return null;const s=ki(i.size[0],i.size[1]);return s.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),Nb(s.canvas,e,void 0,2,i.color,!0),Gr.getPattern(e,void 0,i.color)}(i):i:null}const T9="10px sans-serif",js="#000",cd="round",Qa=[],hd="round",hf="#000",uf="center",E2="middle",sh=[0,0,0,0],ud=new qr;let D9,pf=null;const Fb={},The=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Dhe(i,e,t){return`${i} ${e} 16px "${t}"`}const Rhe=function(){let e,t;function n(a){return s.apply(this,arguments)}function s(){return(s=_2(function*(a){yield t.ready;const l=yield t.load(a);if(0===l.length)return!1;const c=xb(a),h=c.families[0].toLowerCase(),u=c.weight;return l.some(d=>d.family.replace(/^['"]|['"]$/g,"").toLowerCase()===h&&d.style===c.style&&(wb[d.weight]||d.weight)==u)})).apply(this,arguments)}function r(){return o.apply(this,arguments)}function o(){return(o=_2(function*(){yield t.ready;let a=!0;const l=ud.getProperties(),c=Object.keys(l).filter(h=>l[h]<100);for(let h=c.length-1;h>=0;--h){const u=c[h];let d=l[u];d<100&&((yield n(u))?(Lp(Fb),ud.set(u,100)):(d+=10,ud.set(u,d,!0),d<100&&(a=!1)))}e=void 0,a||(e=setTimeout(r,100))})).apply(this,arguments)}return function(){var a=_2(function*(l){t||(t=fM?self.fonts:document.fonts);const c=xb(l);if(!c)return;const h=c.families;let u=!1;for(const d of h){if(The.has(d))continue;const p=Dhe(c.style,c.weight,d);void 0===ud.get(p)&&(ud.set(p,0,!0),u=!0)}u&&(clearTimeout(e),e=setTimeout(r,100))});return function(l){return a.apply(this,arguments)}}()}(),Ahe=function(){let i;return function(e){let t=Fb[e];if(null==t){if(fM){const n=xb(e),s=R9(e,"\u017dg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Fb[e]=t}return t}}();function R9(i,e){return pf||(pf=ki(1,1)),i!=D9&&(pf.font=i,D9=pf.font),pf.measureText(e)}function A9(i,e){return R9(i,e).width}function L9(i,e,t){if(e in t)return t[e];const n=e.split("\n").reduce((s,r)=>Math.max(s,A9(i,r)),0);return t[e]=n,n}class Vb{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=zs(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vb({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Qe()}getImage(e){return Qe()}getHitDetectionImage(){return Qe()}getPixelRatio(e){return 1}getImageState(){return Qe()}getImageSize(){return Qe()}getOrigin(){return Qe()}getSize(){return Qe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zs(e)}listenImageChange(e){Qe()}load(){Qe()}unlistenImageChange(e){Qe()}ready(){return Promise.resolve()}}const P9=Vb;class zb extends P9{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?1:2,1===this.imageState_&&this.ready().then(()=>this.imageState_=2),this.render()}clone(){const e=this.getScale(),t=new zb({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=Gr.get(n,null,null)?.getImage(1);if(!s){const r=this.renderOptions_,o=Math.ceil(r.size*e),a=ki(o,o);this.draw_(r,a,e),s=a.canvas,Gr.set(n,null,null,new She(s,void 0,null,2,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let s=this.radius,r=void 0===this.radius2_?s:this.radius2_;if(s<r){const I=s;s=r,r=I}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),l=r*Math.sin(a),h=s-Math.sqrt(r*r-l*l),u=Math.sqrt(l*l+h*h),d=u/l;if("miter"===e&&d<=n)return d*t;const p=t/2/d,f=t/2*(h/u),m=Math.sqrt((s+p)*(s+p)+f*f)-s;if(void 0===this.radius2_||"bevel"===e)return 2*m;const y=s*Math.sin(a),v=r-Math.sqrt(s*s-y*y),w=Math.sqrt(y*y+v*v)/y;return w<=n?2*Math.max(m,w*t/2-r-s):2*m}createRenderOptions(){let o,e=cd,t=hd,n=0,s=null,r=0,a=0;this.stroke_&&(o=ta(this.stroke_.getColor()??hf),a=this.stroke_.getWidth()??1,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??hd,e=this.stroke_.getLineCap()??cd,n=this.stroke_.getMiterLimit()??10);const l=this.calculateLineJoinSize_(t,a,n),c=Math.max(this.radius,this.radius2_||0);return{strokeStyle:o,strokeWidth:a,size:Math.ceil(2*c+l),lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();null===s&&(s=js),t.fillStyle=ta(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),s=0;"string"==typeof n&&(n=Ju(n)),null===n?s=1:Array.isArray(n)&&(s=4===n.length?n[3]:1),0===s&&(t=ki(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,c=a%2==0?n:s;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=js,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const ff=zb;class Hb extends ff{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Hb({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}const S2=Hb;class Bb{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,void 0!==e.color&&this.setColor(e.color)}clone(){const e=this.getColor();return new Bb({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(null!==e&&"object"==typeof e&&"src"in e){const t=Nb(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),0===t.getImageState()&&t.load(),1===t.getImageState()&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ft(e):"object"==typeof e&&"src"in e?e.src+":"+e.offset:Ju(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const ur=Bb;function O9(i,e,t,n){return void 0!==t&&void 0!==n?[t/i,n/e]:void 0!==t?t/i:void 0!==n?n/e:1}class jb extends P9{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;let l,a=e.src;if(Yt(!(void 0!==a&&o),"`image` and `src` cannot be provided at the same time"),(void 0===a||0===a.length)&&o&&(a=o.src||ft(o)),Yt(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Yt(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==e.src?l=0:void 0!==o&&(l="complete"in o?o.complete?o.src?2:0:1:2),this.color_=void 0!==e.color?Ju(e.color):null,this.iconImage_=Nb(o,a,this.crossOrigin_,l,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,void 0!==e.width||void 0!==e.height){let c,h;if(e.size)[c,h]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(O9(p[0],p[1],e.width,e.height))};return void this.listenImageChange(d)}}void 0!==c&&this.setScale(O9(c,h,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new jb({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=s[0]),"fraction"==this.anchorYUnits_&&(e[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=n[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}ready(){return this.iconImage_.ready()}}const N9=jb;class qb{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new qb({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const na=qb;class Wl{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=z9,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new Wl({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=z9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Gb=null;function F9(i,e){if(!Gb){const t=new ur({color:"rgba(255,255,255,0.4)"}),n=new na({color:"#3399CC",width:1.25});Gb=[new Wl({image:new S2({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Gb}function V9(){const i={},e=[255,255,255,1],t=[0,153,255,1];return i.Polygon=[new Wl({fill:new ur({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Wl({stroke:new na({color:e,width:5})}),new Wl({stroke:new na({color:t,width:3})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Wl({image:new S2({radius:6,fill:new ur({color:t}),stroke:new na({color:e,width:1.5})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function z9(i){return i.getGeometry()}const Ur=Wl;class Ub{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=zs(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ur({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ub({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zs(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Vhe=Ub;function zhe(i){return!0}function Hhe(i){const e=x9(),t=function Bhe(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s){const r=i[s],o="filter"in r?Za(r.filter,ws,e):zhe;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Wb(r.style[c],e)}else a=[Wb(r.style,e)];n[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<t;++a)if((0,n[a].filter)(s)&&(!i[a].else||!o)){o=!0;for(const c of n[a].styles){const h=c(s);!h||r.push(h)}}return r}}(i,e),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(s,r){if(n.properties=s.getPropertiesInternal(),n.resolution=r,e.featureId){const o=s.getId();n.featureId=void 0!==o?o:null}return e.geometryType&&(n.geometryType=E9(s.getGeometry())),t(n)}}function H9(i){const e=x9(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=Wb(i[o],e);const s={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},r=new Array(t);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,e.featureId){const c=o.getId();s.featureId=void 0!==c?c:null}let l=0;for(let c=0;c<t;++c){const h=n[c](s);h&&(r[l]=h,l+=1)}return r.length=l,r}}function Wb(i,e){const t=gf(i,"",e),n=mf(i,"",e),s=function jhe(i,e){const t="text-",n=el(i,t+"value",e);if(!n)return null;const s=gf(i,t,e),r=gf(i,t+"background-",e),o=mf(i,t,e),a=mf(i,t+"background-",e),l=el(i,t+"font",e),c=qs(i,t+"max-angle",e),h=qs(i,t+"offset-x",e),u=qs(i,t+"offset-y",e),d=dd(i,t+"overflow",e),p=el(i,t+"placement",e),f=qs(i,t+"repeat",e),g=T2(i,t+"scale",e),m=dd(i,t+"rotate-with-view",e),y=qs(i,t+"rotation",e),_=el(i,t+"align",e),v=el(i,t+"justify",e),k=el(i,t+"baseline",e),w=dd(i,t+"keep-upright",e),I=B9(i,t+"padding",e),b=R2(i,t+"declutter-mode"),D=new Vhe({declutterMode:b});return function(P){if(D.setText(n(P)),s&&D.setFill(s(P)),r&&D.setBackgroundFill(r(P)),o&&D.setStroke(o(P)),a&&D.setBackgroundStroke(a(P)),l&&D.setFont(l(P)),c&&D.setMaxAngle(c(P)),h&&D.setOffsetX(h(P)),u&&D.setOffsetY(u(P)),d&&D.setOverflow(d(P)),p){const z=p(P);if("point"!==z&&"line"!==z)throw new Error("Expected point or line for text-placement");D.setPlacement(z)}if(f&&D.setRepeat(f(P)),g&&D.setScale(g(P)),m&&D.setRotateWithView(m(P)),y&&D.setRotation(y(P)),_){const z=_(P);if("left"!==z&&"center"!==z&&"right"!==z&&"end"!==z&&"start"!==z)throw new Error("Expected left, right, center, start, or end for text-align");D.setTextAlign(z)}if(v){const z=v(P);if("left"!==z&&"right"!==z&&"center"!==z)throw new Error("Expected left, right, or center for text-justify");D.setJustify(z)}if(k){const z=k(P);if("bottom"!==z&&"top"!==z&&"middle"!==z&&"alphabetic"!==z&&"hanging"!==z)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");D.setTextBaseline(z)}return I&&D.setPadding(I(P)),w&&D.setKeepUpright(w(P)),D}}(i,e),r=function qhe(i,e){return"icon-src"in i?function Ghe(i,e){const t="icon-",n=t+"src",s=U9(i[n],n),r=I2(i,t+"anchor",e),o=T2(i,t+"scale",e),a=qs(i,t+"opacity",e),l=I2(i,t+"displacement",e),c=qs(i,t+"rotation",e),h=dd(i,t+"rotate-with-view",e),u=q9(i,t+"anchor-origin"),d=G9(i,t+"anchor-x-units"),p=G9(i,t+"anchor-y-units"),f=function Zhe(i,e){const t=i[e];if(void 0!==t)return W9(t,e)}(i,t+"color"),g=function Khe(i,e){const t=i[e];if(void 0!==t){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}}(i,t+"cross-origin"),m=function Xhe(i,e){const t=i[e];if(void 0!==t)return yf(t,e)}(i,t+"offset"),y=q9(i,t+"offset-origin"),_=D2(i,t+"width"),v=D2(i,t+"height"),k=function Yhe(i,e){const t=i[e];if(void 0!==t){if("number"==typeof t)return zs(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error(`Expected a number or size array for ${e}`);return t}}(i,t+"size"),w=R2(i,t+"declutter-mode"),I=new N9({src:s,anchorOrigin:u,anchorXUnits:d,anchorYUnits:p,color:f,crossOrigin:g,offset:m,offsetOrigin:y,height:v,width:_,size:k,declutterMode:w});return function(b){return a&&I.setOpacity(a(b)),l&&I.setDisplacement(l(b)),c&&I.setRotation(c(b)),h&&I.setRotateWithView(h(b)),o&&I.setScale(o(b)),r&&I.setAnchor(r(b)),I}}(i,e):"shape-points"in i?function Uhe(i,e){const t="shape-",n=t+"points",s=t+"radius",r=Yb(i[n],n),o=Yb(i[s],s),a=gf(i,t,e),l=mf(i,t,e),c=T2(i,t+"scale",e),h=I2(i,t+"displacement",e),u=qs(i,t+"rotation",e),d=dd(i,t+"rotate-with-view",e),p=D2(i,t+"radius2"),f=D2(i,t+"angle"),g=R2(i,t+"declutter-mode"),m=new ff({points:r,radius:o,radius2:p,angle:f,declutterMode:g});return function(y){return a&&m.setFill(a(y)),l&&m.setStroke(l(y)),h&&m.setDisplacement(h(y)),u&&m.setRotation(u(y)),d&&m.setRotateWithView(d(y)),c&&m.setScale(c(y)),m}}(i,e):"circle-radius"in i?function Whe(i,e){const t="circle-",n=gf(i,t,e),s=mf(i,t,e),r=qs(i,t+"radius",e),o=T2(i,t+"scale",e),a=I2(i,t+"displacement",e),l=qs(i,t+"rotation",e),c=dd(i,t+"rotate-with-view",e),h=R2(i,t+"declutter-mode"),u=new S2({radius:5,declutterMode:h});return function(d){return r&&u.setRadius(r(d)),n&&u.setFill(n(d)),s&&u.setStroke(s(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}(i,e):null}(i,e),o=qs(i,"z-index",e);if(!(t||n||s||r||qc(i)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Ur;return function(l){let c=!0;if(t){const h=t(l);h&&(c=!1),a.setFill(h)}if(n){const h=n(l);h&&(c=!1),a.setStroke(h)}if(s){const h=s(l);h&&(c=!1),a.setText(h)}if(r){const h=r(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function gf(i,e,t){let n;if(e+"fill-pattern-src"in i)n=function $he(i,e,t){const n=el(i,e+"pattern-src",t),s=j9(i,e+"pattern-offset",t),r=j9(i,e+"pattern-size",t),o=$b(i,e+"color",t);return function(a){return{src:n(a),offset:s&&s(a),size:r&&r(a),color:o&&o(a)}}}(i,e+"fill-",t);else{if("none"===i[e+"fill-color"])return r=>null;n=$b(i,e+"fill-color",t)}if(!n)return null;const s=new ur;return function(r){const o=n(r);return o===jM?null:(s.setColor(o),s)}}function mf(i,e,t){const n=qs(i,e+"stroke-width",t),s=$b(i,e+"stroke-color",t);if(!n&&!s)return null;const r=el(i,e+"stroke-line-cap",t),o=el(i,e+"stroke-line-join",t),a=B9(i,e+"stroke-line-dash",t),l=qs(i,e+"stroke-line-dash-offset",t),c=qs(i,e+"stroke-miter-limit",t),h=new na;return function(u){if(s){const d=s(u);if(d===jM)return null;h.setColor(d)}if(n&&h.setWidth(n(u)),r){const d=r(u);if("butt"!==d&&"round"!==d&&"square"!==d)throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if("bevel"!==d&&"round"!==d&&"miter"!==d)throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function qs(i,e,t){if(!(e in i))return;const n=Za(i[e],It,t);return function(s){return Yb(n(s),e)}}function el(i,e,t){if(!(e in i))return null;const n=Za(i[e],Bs,t);return function(s){return U9(n(s),e)}}function dd(i,e,t){if(!(e in i))return null;const n=Za(i[e],ws,t);return function(s){const r=n(s);if("boolean"!=typeof r)throw new Error(`Expected a boolean for ${e}`);return r}}function $b(i,e,t){if(!(e in i))return null;const n=Za(i[e],To,t);return function(s){return W9(n(s),e)}}function B9(i,e,t){if(!(e in i))return null;const n=Za(i[e],ih,t);return function(s){return yf(n(s),e)}}function I2(i,e,t){if(!(e in i))return null;const n=Za(i[e],ih,t);return function(s){const r=yf(n(s),e);if(2!==r.length)throw new Error(`Expected two numbers for ${e}`);return r}}function j9(i,e,t){if(!(e in i))return null;const n=Za(i[e],ih,t);return function(s){return $9(n(s),e)}}function T2(i,e,t){if(!(e in i))return null;const n=Za(i[e],ih|It,t);return function(s){return function Qhe(i,e){return"number"==typeof i?i:$9(i,e)}(n(s),e)}}function D2(i,e){const t=i[e];if(void 0!==t){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}}function q9(i,e){const t=i[e];if(void 0!==t){if("bottom-left"!==t&&"bottom-right"!==t&&"top-left"!==t&&"top-right"!==t)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function G9(i,e){const t=i[e];if(void 0!==t){if("pixels"!==t&&"fraction"!==t)throw new Error(`Expected pixels or fraction for ${e}`);return t}}function R2(i,e){const t=i[e];if(void 0!==t){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);if("declutter"!==t&&"obstacle"!==t&&"none"!==t)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function yf(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if("number"!=typeof i[n])throw new Error(`Expected an array of numbers for ${e}`);return i}function U9(i,e){if("string"!=typeof i)throw new Error(`Expected a string for ${e}`);return i}function Yb(i,e){if("number"!=typeof i)throw new Error(`Expected a number for ${e}`);return i}function W9(i,e){if("string"==typeof i)return i;const t=yf(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function $9(i,e){const t=yf(i,e);if(2!==t.length)throw new Error(`Expected an array of two numbers for ${e}`);return t}const K9=class Jhe extends f2{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new k9(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){this.style_=void 0===e?F9:e;const t=function eue(i){if(void 0===i)return F9;if(!i)return null;if("function"==typeof i||i instanceof Ur)return i;if(!Array.isArray(i))return H9([i]);if(0===i.length)return[];const e=i.length,t=i[0];if(t instanceof Ur){const s=new Array(e);for(let r=0;r<e;++r){const o=i[r];if(!(o instanceof Ur))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in t){const s=new Array(e);for(let r=0;r<e;++r){const o=i[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return Hhe(s)}return H9(i)}(e);this.styleFunction_=null===e?void 0:function Nhe(i){let e;if("function"==typeof i)e=i;else{let t;Array.isArray(i)?t=i:(Yt("function"==typeof i.getZIndex,"Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function nue(i,e){Gr.expire()}const iue=class tue extends Om{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Qe()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Jo(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),HM(s,n)}forEachFeatureAtCoordinate(e,t,n,s,r,o,a,l){let c;const h=t.viewState;function u(k,w,I,b){return r.call(o,w,k?I:null,b)}const d=h.projection,p=hA(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&s){const w=Ht(d.getExtent());f.push([-w,0],[w,0])}const g=t.layerStatesArray,m=g.length,y=[],_=[];for(let k=0;k<f.length;k++)for(let w=m-1;w>=0;--w){const I=g[w],b=I.layer;if(b.hasRenderer()&&_b(I,h)&&a.call(l,b)){const D=b.getRenderer(),P=b.getSource();if(D&&P){const z=P.getWrapX()?p:e,Z=u.bind(null,I.managed);_[0]=z[0]+f[k][0],_[1]=z[1]+f[k][1],c=D.forEachFeatureAtCoordinate(_,t,n,Z,y)}if(c)return c}}if(0===y.length)return;const v=1/y.length;return y.forEach((k,w)=>k.distanceSq+=w*v),y.sort((k,w)=>k.distanceSq-w.distanceSq),y.some(k=>c=k.callback(k.feature,k.layer,k.geometry)),c}hasFeatureAtCoordinate(e,t,n,s,r,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,n,s,jc,this,r,o)}getMap(){return this.map_}renderFrame(e){Qe()}scheduleExpireIconCache(e){Gr.canExpireCache()&&e.postRenderFunctions.push(nue)}},rue=class sue extends iue{constructor(e){super(e),this.fontChangeListenerKey_=Mt(ud,"propertychange",e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=k2+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new FA(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){fn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);t.some(a=>a.layer instanceof K9&&a.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,l=t.length;a<l;++a){const c=t[a];e.layerIndex=a;const h=c.layer,u=h.getSourceState();if(!_b(c,s)||"ready"!=u&&"undefined"!=u){h.unrender();continue}const d=h.render(e,o);!d||(d!==o&&(this.children_.push(d),o=d),r.push(c))}this.declutter(e,r),function Aoe(i,e){const t=i.childNodes;for(let n=0;;++n){const s=t[n],r=e[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const s=t[n],r=s.layer;r.getDeclutter()&&r.renderDeclutter(e,s)}t.forEach(n=>n.layer.renderDeferred(e))}}};function X9(i){i instanceof f2?i.setMapInternal(null):i instanceof x2&&i.getLayers().forEach(X9)}function Z9(i,e){if(i instanceof f2)i.setMapInternal(e);else if(i instanceof x2){const t=i.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)Z9(t[n],e)}}const Q9=class oue extends qr{constructor(e){super();const t=function aue(i){let e=null;void 0!==i.keyboardEventTarget&&(e="string"==typeof i.keyboardEventTarget?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&"function"==typeof i.layers.getLayers?i.layers:new x2({layers:i.layers});let s,r,o;return t.layergroup=n,t.target=i.target,t.view=i.view instanceof ea?i.view:new ea,void 0!==i.controls&&(Array.isArray(i.controls)?s=new Hs(i.controls.slice()):(Yt("function"==typeof i.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s=i.controls)),void 0!==i.interactions&&(Array.isArray(i.interactions)?r=new Hs(i.interactions.slice()):(Yt("function"==typeof i.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),r=i.interactions)),void 0!==i.overlays?Array.isArray(i.overlays)?o=new Hs(i.overlays.slice()):(Yt("function"==typeof i.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new Hs,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Soe,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||function fce(i){i=i||{};const e=new Hs;return(void 0===i.zoom||i.zoom)&&e.push(new pce(i.zoomOptions)),(void 0===i.rotate||i.rotate)&&e.push(new uce(i.rotateOptions)),(void 0===i.attribution||i.attribution)&&e.push(new cce(i.attributionOptions)),e}(),this.interactions=t.interactions||_9({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class nce extends class ece{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Lp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){Yt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=y2&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,r=t[e],o=n[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<s&&n[c]<n[l]?c:l;t[e]=t[h],n[e]=n[h],e=h}t[e]=r,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,r=n[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(s[a]>o))break;n[t]=n[a],s[t]=s[a],t=a}n[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==y2?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,t[s++]=o);t.length=s,n.length=s,this.heapify_()}}{constructor(e,t){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(2===n||3===n||4===n){3!==n&&t.removeEventListener("change",this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const s=this.dequeue()[0],r=s.getKey();0===s.getState()&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,s.load())}}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof ea)&&e.view.then(function(s){n.setView(new ea(s))}),this.controls.addEventListener("add",s=>{s.element.setMap(this)}),this.controls.addEventListener("remove",s=>{s.element.setMap(null)}),this.interactions.addEventListener("add",s=>{s.element.setMap(this)}),this.interactions.addEventListener("remove",s=>{s.element.setMap(null)}),this.overlays_.addEventListener("add",s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener("remove",s=>{const r=s.element.getId();void 0!==r&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Z9(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,t,null,void 0!==n.layerFilter?n.layerFilter:jc,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];return function t(n){n.forEach(function(s){s instanceof x2?t(s.getLayers()):e.push(s)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:jc,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/(n.width/s[0]),(a.clientY-n.top)/(n.height/s[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Xc(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ti(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof Hs)return void t.setLayers(e);const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Fn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ti(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return function sce(i,e,t,n,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return y2;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){const n=new Ka(t=t||e.type,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if("pointerdown"===n||"wheel"===n||"keydown"===n){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target,a=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===s?s.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new id("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new id("loadstart",this,e))));const n=this.postRenderFunctions_;if(e)for(let s=0,r=n.length;s<r;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)fn(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new rue(this)),this.mapBrowserEventHandler_=new Jle(this,this.moveTolerance_);for(const r in St)this.mapBrowserEventHandler_.addEventListener(St[r],this.handleMapBrowserEvent.bind(this));let n;if(this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!YR&&{passive:!1}),this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const r=t.getRootNode();n=r instanceof ShadowRoot?r.host:t}this.targetChangeHandlerKeys_=[Mt(n,"keydown",this.handleBrowserEvent,this),Mt(n,"keypress",this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(fn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(fn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Mt(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Mt(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(fn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Gl("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Mt(e,"propertychange",this.render,this),Mt(e,"change",this.render,this),Mt(e,"addlayer",this.handleLayerAdd_,this),Mt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){X9(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(void 0!==t&&PA(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:kM(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ft(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=kM(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Vp(this.previousExtent_)&&!Np(r.extent,this.previousExtent_))&&(this.dispatchEvent(new id("movestart",this,s)),this.previousExtent_=Fl(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!Np(r.extent,this.previousExtent_)&&(this.dispatchEvent(new id("moveend",this,r)),tA(r.extent,this.previousExtent_))),this.dispatchEvent(new id("postrender",this,r)),this.renderComplete_=(this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete"))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Gl("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof ea)return void this.set("view",e);this.set("view",new ea);const t=this;e.then(function(n){t.setView(new ea(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[Math.max(0,r),Math.max(0,o)],!PA(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&aA("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Wa(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}},pd=[0,0,0],J9=class lue{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Yt(function yoe(i,e,t){const n=e||Ua;return i.every(function(s,r){if(0===r)return!0;const o=n(i[r-1],s);return!(o>0||t&&0===o)})}(this.resolutions_,(s,r)=>r-s,!0),"`resolutions` must be sorted in descending order"),!e.origins)for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(t){if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}else t=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Yt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;void 0!==n&&!this.origin_&&!this.origins_&&(this.origin_=Wc(n)),Yt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Yt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Yt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((s,r)=>{const o=new eA(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([t,r,a])}forEachTileCoordParentTileRange(e,t,n,s){let r,o,a,l=null,c=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(void 0!==o&&void 0!==a?(o=Math.floor(o/2),a=Math.floor(a/2),r=Hu(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),t(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const r=2*e[1],o=2*e[2];return Hu(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return Hu(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),c=Math.floor(r*l),h=Math.floor(o*l);return t<s?Hu(c,c,h,h,n):Hu(c,Math.floor(l*(r+1))-1,h,Math.floor(l*(o+1))-1,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,pd);const s=pd[1],r=pd[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,pd),Hu(s,pd[1],r,pd[2],n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=zs(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=zs(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*r[0]*s,a=n[1]-(e[2]+1)*r[1]*s;return Qo(o,a,o+r[0]*s,a+r[1]*s,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=zs(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/n/c[0],u=a*(l[1]-t)/n/c[1];return s?(h=Km(h,5)-1,u=Km(u,5)-1):(h=Ym(h,5),u=Ym(u,5)),s2(o,h,u,r)}getTileCoordForXYAndZ_(e,t,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=zs(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],h=(o[1]-t)/a/l[1];return s?(c=Km(c,5)-1,h=Km(h,5)-1):(c=Ym(c,5),h=Ym(h,5)),s2(n,c,h,r)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return In(uM(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return t9(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}};function eL(i){let e=i.getDefaultTileGrid();return e||(e=function due(i,e,t,n){return function hue(i,e,t,n){n=void 0!==n?n:"top-left";const s=tL(i,e,t);return new J9({extent:i,origin:Voe(i,n),resolutions:s,tileSize:t})}(Kb(i),e,t,n)}(i),i.setDefaultTileGrid(e)),e}function tL(i,e,t,n){e=void 0!==e?e:42,t=zs(void 0!==t?t:256);const s=Hi(i),r=Ht(i);n=n>0?n:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function Kb(i){let e=(i=cn(i)).getExtent();if(!e){const t=180*Hp.degrees/i.getMetersPerUnit();e=Qo(-t,-t,t,t)}return e}const pue=/\{z\}/g,fue=/\{x\}/g,gue=/\{y\}/g,mue=/\{-y\}/g;function vue(i,e){return function(t,n,s){if(!t)return;let r;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(r=a.getHeight()-1)}return function yue(i,e,t,n,s){return i.replace(pue,e.toString()).replace(fue,t.toString()).replace(gue,n.toString()).replace(mue,function(){if(void 0===s)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}(i,o,t[1],t[2],r)}}function nL(i){return i?"function"==typeof i?i:(Array.isArray(i)||(i=[i]),e=>i):null}const iL=class xue extends qr{constructor(e){super(),this.projection=cn(e.projection),this.attributions_=nL(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=nL(e),this.changed()}setState(e){this.state_=e,this.changed()}};class bue extends zr{constructor(e,t){super(e),this.tile=t}}const Cue=class Mue extends iL{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&zs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tmpSize=[0,0],this.key_=e.key||ft(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,r){return Qe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:eL(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(t),o=zs(s.getTileSize(e),this.tmpSize);return 1==r?o:function Bae(i,e,t){return void 0===t&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=void 0!==t?t:this.getProjection(),s=void 0!==t?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=function cue(i,e,t){const n=e[0],s=i.getTileCoordCenter(e),r=Kb(t);if(!Bu(r,s)){const o=Ht(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return e}(s,e,n)),function Wae(i,e){const t=i[0],n=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return!r||r.containsXY(n,s)}(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}};class Zb extends Cue{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Zb.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=ft(t),s=t.getState();let r;1==s?(this.tileLoadingKeys_[n]=!0,r="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=r&&this.dispatchEvent(new bue(r,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function _ue(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(i.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function kue(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=vue(i[s],e);return function wue(i){return 1===i.length?i[0]:function(e,t,n){if(!e)return;const s=function Gae(i){return function Uae(i,e,t){return(e<<i)+t}(i[0],i[1],i[2])}(e),r=Yc(s,i.length);return i[r](e,t,n)}}(n)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}const Eue=Zb;function Iue(i,e){i.getImage().src=e}const Tue=class Sue extends Eue{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Iue,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:QR,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!n2(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||n2(t,e)))return this.tileGrid;const n=ft(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=eL(e)),this.tileGridForProjection[n]}createTile_(e,t,n,s,r,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,void 0!==c?0:4,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener("change",this.handleTileChange.bind(this)),h}getTile(e,t,n,s,r){const o=this.getProjection();if(!o||!r||n2(o,r))return this.getTileInternal(e,t,n,s,o||r);const a=[e,t,n],l=this.getKey(),c=this.getTileGridForProjection(o),h=this.getTileGridForProjection(r),u=this.getTileCoordForTileUrlFunction(a,r),d=new LA(o,c,r,h,a,u,this.getTilePixelRatio(s),this.getGutter(),(p,f,g,m)=>this.getTileInternal(p,f,g,m,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,t,n,s,r){const o=this.getKey();return this.createTile_(e,t,n,s,r,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=cn(e);if(n){const s=ft(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}},Rue=class Due extends Tue{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:function uue(i){const e=i||{},t=e.extent||cn("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:tL(t,e.maxZoom,e.tileSize,e.maxResolution)};return new J9(n)}({extent:Kb(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},Pue=class Lue extends Rue{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}};function rL(i,e){return function(t,n,s,r,o){!function Oue(i,e,t,n,s,r,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof i?i(t,n,s):i,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let h;"text"==c||"json"==c?h=a.responseText:"xml"==c?h=a.responseXML||a.responseText:"arraybuffer"==c&&(h=a.response),h?r(e.readFeatures(h,{extent:t,featureProjection:s}),e.readProjection(h)):o()}catch{o()}}else o()},a.onerror=o,a.send()}(i,e,t,n,s,(a,l)=>{this.addFeatures(a),void 0!==r&&r(a)},()=>{this.changed(),void 0!==o&&o()})}}function Nue(i,e){return[[-1/0,-1/0,1/0,1/0]]}function oL(i,e,t,n){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=_M(i,e,l[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}function A2(i,e,t,n,s,r,o){let a,l;const c=(t-e)/n;if(1===c)a=e;else if(2===c)a=e,l=s;else if(0!==c){let h=i[e],u=i[e+1],d=0;const p=[0];for(let m=e+n;m<t;m+=n){const y=i[m],_=i[m+1];d+=Math.sqrt((y-h)*(y-h)+(_-u)*(_-u)),p.push(d),h=y,u=_}const f=s*d,g=function foe(i,e,t){let n,s;t=t||Ua;let r=0,o=i.length,a=!1;for(;r<o;)n=r+(o-r>>1),s=+t(i[n],e),s<0?r=n+1:(o=n,a=!s);return a?r:~r}(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),a=e+(-g-2)*n):a=e+g*n}o=o>1?o:2,r=r||new Array(o);for(let h=0;h<o;++h)r[h]=void 0===a?NaN:void 0===l?i[a+h]:hr(i[a+h],i[a+n+h],l);return r}function Qb(i,e,t,n,s,r){if(t==e)return null;let o;if(s<i[e+n-1])return r?(o=i.slice(e,e+n),o[n-1]=s,o):null;if(i[t-1]<s)return r?(o=i.slice(t-n,t),o[n-1]=s,o):null;if(s==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;s<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(s==c)return i.slice((a-1)*n,(a-1)*n+n);const u=(s-c)/(i[(a+1)*n-1]-c);o=[];for(let d=0;d<n-1;++d)o.push(hr(i[(a-1)*n+d],i[a*n+d],u));return o.push(s),o}const aL=[1,0,0,1,0,0];class fd{constructor(e,t,n,s,r,o){this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.stride_=s}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?Op(this.flatCoordinates_):_M(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=bo(this.getExtent());this.flatInteriorPoints_=lb(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=function Rle(i,e){const t=[];let r,n=0,s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=cb(i,n,l,2);if(void 0===r&&(r=c),c===r)t.push(e.slice(s,o+1));else{if(0===t.length)continue;t[t.length-1].push(e[s])}s=o+1,n=l}return t}(this.flatCoordinates_,this.ends_),t=oL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=JA(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=A2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,r=n.length;s<r;++s){const o=n[s],a=A2(e,t,o,2,.5);Zo(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const t=(e=cn(e)).getExtent(),n=e.getWorldExtent();if(t&&n){const s=Hi(n)/Hi(t);Jo(aL,n[0],n[3],s,-s,0,0,0),Hl(this.flatCoordinates_,0,this.flatCoordinates_.length,2,aL,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new fd(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=GR((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=Kp(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=sb(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,s);break;case"Polygon":s=[],n.length=rb(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,s)}return s&&(this.simplifiedGeometry_=new fd(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}fd.prototype.getFlatCoordinates=fd.prototype.getOrientedFlatCoordinates;const Yl=fd,Jb=class zue{constructor(e){this.rbush_=new k9(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[ft(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=l,this.items_[ft(a)]=l}this.rbush_.load(n)}remove(e){const t=ft(e),n=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(n)}update(e,t){const n=this.items_[ft(t)];Np([n.minX,n.minY,n.maxX,n.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,r=e.length;s<r;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return qc(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qo(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};class Kl extends zr{constructor(e,t,n){super(e),this.feature=t,this.features=n}}const rh=class Hue extends iL{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=Ap,this.format_=e.format||null,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Yt(this.format_,"`format` must be set when `url` is set"),this.loader_=rL(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:Nue;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let n,s;this.featuresRtree_=t?new Jb:null,this.loadedExtentsRtree_=new Jb,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&void 0===n&&(n=new Hs(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ft(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Kl("addfeature",e))}setupChangeEvents_(e,t){t instanceof Yl||(this.featureChangeKeys_[e]=[Mt(t,"change",this.handleFeatureChange_,this),Mt(t,"propertychange",this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(void 0!==t.getId()){const s=String(t.getId());if(s in this.idIndex_)if(t instanceof Yl){const r=this.idIndex_[s];r instanceof Yl?Array.isArray(r)?r.push(t):this.idIndex_[s]=[r,t]:n=!1}else n=!1;else this.idIndex_[s]=t}return n&&(Yt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=ft(a);this.addToIndex_(l,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],l=ft(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();t.push(h),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener("addfeature"))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new Kl("addfeature",n[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener("removefeature",function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener("add",n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener("remove",n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(fn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Kl("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(s){const r=s.getGeometry();if(r instanceof Yl||r.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const s=n.getGeometry();if(s instanceof Yl||s.intersectsExtent(e)){const r=t(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),qc(this.nullGeometryFeatures_)||Zo(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=oA(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||jc,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),u=a;if(a=h instanceof Yl?0:h.closestPointXY(n,s,o,a),a<u){r=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=s-d,l[2]=n+d,l[3]=s+d}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=ft(t),s=t.getGeometry();if(s){const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);const r=t.getId();if(void 0!==r){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Kl("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:ft(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&qc(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,n);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(h){return ju(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Kl("featuresloadstart")),this.loader_.call(this,l,t,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kl("featuresloadend",void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kl("featuresloaderror"))}),s.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(s){if(Np(s.extent,e))return s});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,s=e.length;n<s;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ft(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(fn),delete this.featureChangeKeys_[t];const s=e.getId();if(void 0!==s){const r=s.toString(),o=this.idIndex_[r];o===e?delete this.idIndex_[r]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),1===o.length&&(this.idIndex_[r]=o[0]))}return delete this.uidIndex_[t],this.hasListener("removefeature")&&this.dispatchEvent(new Kl("removefeature",e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Yt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(rL(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}};class eC extends qr{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new eC(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(fn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Mt(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function Bue(i){if("function"==typeof i)return i;let e;return Array.isArray(i)?e=i:(Yt("function"==typeof i.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Tn=eC;function L2(i,e,t,n){let s=i[e],r=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class P2 extends Bl{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){Zo(this.flatCoordinates,e),this.changed()}clone(){const e=new P2(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Uc(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return e9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:Qb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}getCoordinates(){return jl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return A2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return L2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Kp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new P2(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return u2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}const ia=P2;class tC extends Bl{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zo(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new tC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Uc(this.getExtent(),e,t))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=$a(e,t,r[a],r[a+1]);if(c<s){s=c;for(let h=0;h<o;++h)n[h]=r[a+h];n.length=o}}return s}getCoordinates(){return jl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||this.flatCoordinates.length/this.stride<=e?null:new ui(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let r=0,o=e.length;r<o;r+=n){const a=new ui(e.slice(r,r+n),t);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,r=t.length;s<r;s+=n)if(mM(e,t[s],t[s+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}const gd=tC;class O2 extends Bl{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const s=e,r=[],o=[];for(let l=0,c=s.length;l<c;++l)Zo(r,s[l].getFlatCoordinates()),o.push(r.length);const a=0===s.length?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=o}}appendLineString(e){Zo(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new O2(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Uc(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eb(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nb(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function Fue(i,e,t,n,s,r,o){if(o)return Qb(i,e,t[t.length-1],n,s,r);let a;if(s<i[n-1])return r?(a=i.slice(0,n),a[n-1]=s,a):null;if(i[i.length-1]<s)return r?(a=i.slice(i.length-n),a[n-1]=s,a):null;for(let l=0,c=t.length;l<c;++l){const h=t[l];if(e!=h){if(s<i[e+n-1])return null;if(s<=i[h-1])return Qb(i,e,h,n,s,!1);e=h}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,n=void 0!==n&&n)}getCoordinates(){return Yp(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ia(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new ia(e.slice(r,l),n);s.push(c),r=l}return s}getLength(){const e=this.ends_;let t=0,n=0;for(let s=0,r=e.length;s<r;++s)n+=L2(this.flatCoordinates,t,e[s],this.stride),t=e[s];return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o];Zo(e,A2(t,n,l,r,.5)),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=sb(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new O2(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return function Ile(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){if(u2(i,e,t[r],n,s))return!0;e=t[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=$p(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const md=O2;class N2 extends Bl{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const s=e,r=[],o=[];for(let a=0,l=s.length;a<l;++a){const c=s[a],h=r.length,u=c.getEnds();for(let d=0,p=u.length;d<p;++d)u[d]+=h;Zo(r,c.getFlatCoordinates()),o.push(u)}t=0===s.length?this.getLayout():s[0].getLayout(),e=r,n=o}void 0!==t&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const n=this.flatCoordinates.length;Zo(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,r=t.length;s<r;++s)t[s]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new N2(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Uc(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function wle(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=eb(i,e,a,n,s),e=a[a.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function xle(i,e,t,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const p=t[u];c=nb(i,e,p,n,s,r,o,a,l,c,h),e=p[p.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return function Sle(i,e,t,n,s,r){if(0===t.length)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(ab(i,e,l,n,s,r))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function kle(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=KA(i,e,a,n),e=a[a.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),ub(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,ib(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=oL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=JA(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new gd(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;s9(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ub(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=function Cle(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l],u=[];o=rb(i,e,h,n,s,r,o,u),a.push(u),e=h[h.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new N2(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(0!==t)for(let r=0,o=n.length;r<o;++r)n[r]-=t;return new Io(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),c=l[l.length-1];if(0!==r)for(let u=0,d=l.length;u<d;++u)l[u]-=r;const h=new Io(t.slice(r,c),e,l);s.push(h),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return function Tle(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(n9(i,e,a,n,s))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=QA(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()}}const yd=N2;class F2 extends $A{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(fn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Mt(e[t],"change",this.changed,this))}clone(){const e=new F2(nC(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Uc(this.getExtent(),e,t))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){Fl(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)Fp(e,t[n].getExtent());return e}getGeometries(){return nC(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(s=!0)}return s?new F2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=bo(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(nC(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function nC(i){return i.map(e=>e.clone())}const _f=F2;function iC(i,e,t){const n=t?cn(t.featureProjection):null,s=t?cn(t.dataProjection):null;let r=i;if(n&&s&&!n2(n,s)){e&&(r=i.clone());const o=e?n:s,a=e?s:n;"tile-pixels"===o.getUnits()?r.transform(o,a):r.applyTransform(Xu(o,a))}if(e&&t&&void 0!==t.decimals){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};r===i&&(r=i.clone()),r.applyTransform(a)}return r}const Gue={Point:ui,LineString:ia,Polygon:Io,MultiPoint:gd,MultiLineString:md,MultiPolygon:yd};function lL(i,e){const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(r=>lL({...i,geometry:r})).flat();const n="MultiPolygon"===t.type?"Polygon":t.type;if("GeometryCollection"===n||"Circle"===n)throw new Error("Unsupported geometry type: "+n);const s=t.layout.length;return iC(new Yl(n,"Polygon"===n?function Uue(i,e,t){return Array.isArray(e[0])?(s9(i,0,e,t)||ub(i=i.slice(),0,e,t),i):(hb(i,0,e,t)||d2(i=i.slice(),0,e,t),i)}(t.flatCoordinates,t.ends,s):t.flatCoordinates,t.ends?.flat(),s,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function sC(i,e){if(!i)return null;if(Array.isArray(i)){const n=i.map(s=>sC(s,e));return new _f(n)}return iC(new(0,Gue[i.type])(i.flatCoordinates,i.layout||"XY",i.ends),!1,e)}function V2(i){return"string"==typeof i?JSON.parse(i)||null:null!==i?i:null}function rC(i,e){if(!i)return null;let t;switch(i.type){case"Point":t=function Zue(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:Zc(e.length)}}(i);break;case"LineString":t=function Que(i){const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Zc(e[0]?.length||2)}}(i);break;case"Polygon":t=function nde(i){const e=i.coordinates,t=[],n=e[0]?.[0]?.length;return{type:"Polygon",flatCoordinates:t,ends:$p(t,0,e,n),layout:Zc(n)}}(i);break;case"MultiPoint":t=function ede(i){const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Zc(e[0]?.length||2)}}(i);break;case"MultiLineString":t=function Jue(i){const e=i.coordinates,t=e[0]?.[0]?.length||2,n=[];return{type:"MultiLineString",flatCoordinates:n,ends:$p(n,0,e,t),layout:Zc(t)}}(i);break;case"MultiPolygon":t=function tde(i){const e=i.coordinates,t=[],n=e[0]?.[0]?.[0].length||2;return{type:"MultiPolygon",flatCoordinates:t,ends:QA(t,0,e,n),layout:Zc(n)}}(i);break;case"GeometryCollection":t=function Xue(i,e){return i.geometries.map(function(n){return rC(n)})}(i);break;default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function oC(i,e){const t=(i=iC(i,!0,e)).getType();let n;switch(t){case"Point":n=function lde(i,e){return{type:"Point",coordinates:i.getCoordinates()}}(i);break;case"LineString":n=function sde(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}(i);break;case"Polygon":n=function cde(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}(i,e);break;case"MultiPoint":n=function ode(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}(i);break;case"MultiLineString":n=function rde(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}(i);break;case"MultiPolygon":n=function ade(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}(i,e);break;case"GeometryCollection":n=function ide(i,e){delete(e=Object.assign({},e)).featureProjection;const t=i.getGeometriesArray().map(function(n){return oC(n,e)});return{type:"GeometryCollection",geometries:t}}(i,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return n}const _d=class Yue extends class Wue extends class jue{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Tn,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?cn(t.dataProjection):this.readProjection(e);t.extent&&n&&"tile-pixels"===n.getUnits()&&(n=cn(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Qe()}readFeature(e,t){return Qe()}readFeatures(e,t){return Qe()}readGeometry(e,t){return Qe()}readProjection(e){return Qe()}writeFeature(e,t){return Qe()}writeFeatures(e,t){return Qe()}writeGeometry(e,t){return Qe()}}{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(V2(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(V2(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Qe()}readFeaturesFromObject(e,t){return Qe()}readGeometry(e,t){return this.readGeometryFromObject(V2(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Qe()}readProjection(e){return this.readProjectionFromObject(V2(e))}readProjectionFromObject(e){return Qe()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Qe()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Qe()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Qe()}}{constructor(e){e=e||{},super(),this.dataProjection=cn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=cn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;n="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const s=rC(n.geometry);if(this.featureClass===Yl)return lL({geometry:s,id:n.id,properties:n.properties},t);const r=new Tn;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&r.setGeometryName(n.geometry_name),r.setGeometry(sC(s,t)),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(e,t){let s=null;if("FeatureCollection"===e.type){s=[];const o=e.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],t);!c||s.push(c)}}else s=[this.readFeatureFromObject(e,t)];return s.flat()}readGeometryFromObject(e,t){return function Kue(i,e){return sC(rC(i),e)}(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if("name"==t.type)n=cn(t.properties.name);else{if("EPSG"!==t.type)throw new Error("Unknown SRS type");n=cn("EPSG:"+t.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},s=e.getId();if(void 0!==s&&(n.id=s),!e.hasProperties())return n;const r=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=oC(o,t),delete r[e.getGeometryName()]),qc(r)||(n.properties=r),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,r=e.length;s<r;++s)n.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return oC(e,this.adaptOptions(t))}},cL=class hde{drawCustom(e,t,n,s,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},vf={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},z2=[vf.FILL],Xl=[vf.STROKE],oh=[vf.BEGIN_PATH],hL=[vf.CLOSE_PATH],Ke=vf,kf=class ude extends cL{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Bu(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,n,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=s);let h=e[t],u=e[t+1];const d=this.tmpCoordinate_;let f,g,m,p=!0;for(f=t+s;f<n;f+=s)d[0]=e[f],d[1]=e[f+1],m=yM(c,d),m!==g?(p&&(a[l++]=h,a[l++]=u,p=!1),a[l++]=d[0],a[l++]=d[1]):1===m?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,h=d[0],u=d[1],g=m;return(r&&p||f===t+s)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(e,t,n,s,r){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(c),t=l}return t}drawCustom(e,t,n,s,r){this.beginGeometry(e,t,r);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,h,u,d,p;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();p=0;for(let g=0,m=f.length;g<m;++g){const y=[];p=this.drawCustomCoordinates_(c,p,f[g],a,y),d.push(y)}this.instructions.push([Ke.CUSTOM,l,d,e,n,ib,r]),this.hitDetectionInstructions.push([Ke.CUSTOM,l,d,e,s||n,ib,r]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==o?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),a,u),this.instructions.push([Ke.CUSTOM,l,u,e,n,Yp,r]),this.hitDetectionInstructions.push([Ke.CUSTOM,l,u,e,s||n,Yp,r]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Ke.CUSTOM,l,h,e,n,jl,r]),this.hitDetectionInstructions.push([Ke.CUSTOM,l,h,e,s||n,jl,r]);break;case"MultiPoint":c=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([Ke.CUSTOM,l,h,e,n,jl,r]),this.hitDetectionInstructions.push([Ke.CUSTOM,l,h,e,s||n,jl,r]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([Ke.CUSTOM,l,h,e,n,void 0,r]),this.hitDetectionInstructions.push([Ke.CUSTOM,l,h,e,s||n,void 0,r])}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[Ke.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ke.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const n=e.length;let s,r,o=-1;for(t=0;t<n;++t)s=e[t],r=s[0],r==Ke.END_GEOMETRY?o=t:r==Ke.BEGIN_GEOMETRY&&(s[2]=t,moe(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const n=e.getColor();t.fillPatternScale=n&&"object"==typeof n&&"src"in n?this.pixelRatio:1,t.fillStyle=ta(n||js)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const n=e.getColor();t.strokeStyle=ta(n||hf);const s=e.getLineCap();t.lineCap=void 0!==s?s:cd;const r=e.getLineDash();t.lineDash=r?r.slice():Qa;const o=e.getLineDashOffset();t.lineDashOffset=o||0;const a=e.getLineJoin();t.lineJoin=void 0!==a?a:hd;const l=e.getWidth();t.lineWidth=void 0!==l?l:1;const c=e.getMiterLimit();t.miterLimit=void 0!==c?c:10,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){const t=e.fillStyle,n=[Ke.SET_FILL_STYLE,t];return"string"!=typeof t&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ke.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;("string"!=typeof n||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!Wa(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ke.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=tA(this.maxExtent),this.maxLineWidth>0)&&Pp(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},uL=class mde extends kf{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,l=n.length;this.instructions.push(oh),this.hitDetectionInstructions.push(oh);for(let c=0;c<l;++c){const h=n[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,h,s,!0,!a),p=[Ke.MOVE_TO_LINE_TO,u,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(hL),this.hitDetectionInstructions.push(hL)),t=h}return o&&(this.instructions.push(z2),this.hitDetectionInstructions.push(z2)),a&&(this.instructions.push(Xl),this.hitDetectionInstructions.push(Xl)),t}drawCircle(e,t,n){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([Ke.SET_FILL_STYLE,js]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([Ke.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Qa,0]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[Ke.CIRCLE,c];this.instructions.push(oh,h),this.hitDetectionInstructions.push(oh,h),void 0!==s.fillStyle&&(this.instructions.push(z2),this.hitDetectionInstructions.push(z2)),void 0!==s.strokeStyle&&(this.instructions.push(Xl),this.hitDetectionInstructions.push(Xl)),this.endGeometry(t)}drawPolygon(e,t,n){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([Ke.SET_FILL_STYLE,js]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([Ke.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Qa,0]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([Ke.SET_FILL_STYLE,js]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([Ke.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Qa,0]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Qc(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}};function yde(i,e,t,n,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+s<n;){const[c,h]=l.slice(-2),u=e[o+s],d=e[o+s+1],p=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=p,a>=i){const f=(i-a+p)/p,g=hr(c,u,f),m=hr(h,d,f);l.push(g,m),r.push(l),l=[g,m],a==i&&(o+=s),a=0}else if(a<i)l.push(e[o+s],e[o+s+1]),o+=s;else{const f=p-a,g=hr(c,u,f/p),m=hr(h,d,f/p);l.push(g,m),r.push(l),l=[g,m],a=0,o+=s}}return a>0&&r.push(l),r}function _de(i,e,t,n,s){let h,u,d,p,f,g,m,y,_,v,r=t,o=t,a=0,l=0,c=t;for(u=t;u<n;u+=s){const k=e[u],w=e[u+1];void 0!==f&&(_=k-f,v=w-g,p=Math.sqrt(_*_+v*v),void 0!==m&&(l+=d,h=Math.acos((m*_+y*v)/(d*p)),h>i&&(l>a&&(a=l,r=c,o=u),l=0,c=u-s)),d=p,m=_,y=v),f=k,g=w}return l+=p,l>a?[c,u]:[r,o]}const H2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},kde={Circle:uL,Default:kf,Image:class dde extends kf{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Bu(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),r=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,r);this.instructions.push([Ke.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ke.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),r=[];for(let l=0,c=s.length;l<c;l+=e.getStride())(!this.maxExtent||Bu(this.maxExtent,s.slice(l,l+2)))&&r.push(s[l],s[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,2);this.instructions.push([Ke.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ke.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class fde extends kf{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),a=[Ke.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t,n){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Ke.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Qa,0],oh);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Xl),this.endGeometry(t)}drawMultiLineString(e,t,n){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Ke.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Qa,0],oh);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(Xl),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Xl),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Xl),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(oh)}},Polygon:uL,Text:class vde extends kf{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[js]={fillStyle:js},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const o=this.textState_;if(""===this.text_||!o||!this.textFillState_&&!this.textStrokeState_)return;const a=this.coordinates;let l=a.length;const c=e.getType();let h=null,u=e.getStride();if("line"!==o.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),u=2;break;case"Polygon":h=e.getFlatInteriorPoint(),o.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const k=e.getFlatInteriorPoints();h=[];for(let w=0,I=k.length;w<I;w+=3)o.overflow||d.push(k[w+2]/this.resolution),h.push(k[w],k[w+1]);if(0===h.length)return;u=2}const p=this.appendFlatPointCoordinates(h,u);if(p===l)return;if(d&&(p-l)/2!=h.length/u){let k=l/2;d=d.filter((w,I)=>{const b=a[2*(k+I)]===h[I*u]&&a[2*(k+I)+1]===h[I*u+1];return b||--k,b})}this.saveTextStates_();const f=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,g=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,n);let m=o.padding;if(m!=sh&&(o.scale[0]<0||o.scale[1]<0)){let k=o.padding[0],w=o.padding[1],I=o.padding[2],b=o.padding[3];o.scale[0]<0&&(w=-w,b=-b),o.scale[1]<0&&(k=-k,I=-I),m=[k,w,I,b]}const y=this.pixelRatio;this.instructions.push([Ke.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==sh?sh:m.map(function(k){return k*y}),f,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const _=1/y,v=f?f.slice(0):null;v&&(v[1]=js),this.hitDetectionInstructions.push([Ke.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterMode_,this.declutterImageWithText_,m,v,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?js:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}else{if(!_s(this.maxExtent,e.getExtent()))return;let d;if(h=e.getFlatCoordinates(),"LineString"==c)d=[h.length];else if("MultiLineString"==c)d=e.getEnds();else if("Polygon"==c)d=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const m=e.getEndss();d=[];for(let y=0,_=m.length;y<_;++y)d.push(m[y][0])}this.beginGeometry(e,t,n);const p=o.repeat,f=p?void 0:o.textAlign;let g=0;for(let m=0,y=d.length;m<y;++m){let _;_=p?yde(p*this.resolution,h,g,d[m],u):[h.slice(g,d[m])];for(let v=0,k=_.length;v<k;++v){const w=_[v];let I=0,b=w.length;if(null==f){const P=_de(o.maxAngle,w,0,w.length,2);I=P[0],b=P[1]}for(let P=I;P<b;P+=u)a.push(w[P],w[P+1]);const D=a.length;g=d[m],this.drawChars_(l,D),l=D}}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||uf,justify:t.justify,textBaseline:t.textBaseline||E2,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=H2[s.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Ke.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,l,h,r,d*l,u,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Ke.DRAW_CHARS,e,t,c,s.overflow,a&&js,s.maxAngle,l,h,r,d*l,u,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,s,r;if(e){const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=ta(o.getColor()||js)):(s=null,this.textFillState_=s);const a=e.getStroke();if(a){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),_=a.getMiterLimit();r.lineCap=a.getLineCap()||cd,r.lineDash=g?g.slice():Qa,r.lineDashOffset=void 0===m?0:m,r.lineJoin=a.getLineJoin()||hd,r.lineWidth=void 0===y?1:y,r.miterLimit=void 0===_?10:_,r.strokeStyle=ta(a.getColor()||hf)}else r=null,this.textStrokeState_=r;n=this.textState_;const l=e.getFont()||T9;Rhe(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||E2,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||sh,n.scale=void 0===c?[1,1]:c;const h=e.getOffsetX(),u=e.getOffsetY(),d=e.getRotateWithView(),p=e.getKeepUpright(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==d&&d,this.textKeepUpright_=void 0===p||p,this.textRotation_=void 0===f?0:f,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:ft(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?"string"==typeof s.fillStyle?s.fillStyle:"|"+ft(s.fillStyle):""}else this.text_="";this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}};function Mde(i,e,t,n,s,r,o,a,l,c,h,u,d=!0){let p=i[e],f=i[e+1],g=0,m=0,y=0,_=0;function v(){g=p,m=f,p=i[e+=n],f=i[e+1],_+=y,y=Math.sqrt((p-g)*(p-g)+(f-m)*(f-m))}do{v()}while(e<t-n&&_+y<r);let k=0===y?0:(r-_)/y;const w=hr(g,p,k),I=hr(m,f,k),b=e-n,D=_,P=r+a*l(c,s,h);for(;e<t-n&&_+y<P;)v();k=0===y?0:(P-_)/y;const z=hr(g,p,k),Z=hr(m,f,k);let K=!1;if(d)if(u){const N=[w,I,z,Z];QM(N,0,4,2,u,N,N),K=N[0]>N[2]}else K=w>z;const Q=Math.PI,T=[],O=b+n===e;let R;if(y=0,_=D,p=i[e=b],f=i[e+1],O)return v(),R=Math.atan2(f-m,p-g),K&&(R+=R>0?-Q:Q),T[0]=[(z+w)/2,(Z+I)/2,(P-r)/2,R,s],T;for(let N=0,E=(s=s.replace(/\n/g," ")).length;N<E;){v();let F=Math.atan2(f-m,p-g);if(K&&(F+=F>0?-Q:Q),void 0!==R){let ee=F-R;if(ee+=ee>Q?-2*Q:ee<-Q?2*Q:0,Math.abs(ee)>o)return null}R=F;const L=N;let G=0;for(;N<E;++N){const ae=a*l(c,s[K?E-N-1:N],h);if(e+n<t&&_+y<r+G+ae/2)break;G+=ae}if(N===L)continue;const V=K?s.substring(E-L,E-N):s.substring(L,N);k=0===y?0:(r+G/2-_)/y;const X=hr(g,p,k),$=hr(m,f,k);T.push([X,$,G/2,F,V]),r+=G}return T}const vd=[1/0,1/0,-1/0,-1/0],Zl=[],tl=[],nl=[],Ql=[];function dL(i){return i[3].declutterBox}const pL=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function aC(i,e){return"start"===e?e=pL.test(i)?"right":"left":"end"===e&&(e=pL.test(i)?"left":"right"),H2[e]}function bde(i,e,t){return t>0&&i.push("\n",""),i.push(e,""),i}function Cde(i,e,t){return t%2==0&&(i+=e),i}const Sde=class Ede{constructor(e,t,n,s,r){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new VA:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,s){const r=e+t+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?H2[l.justify]:aC(Array.isArray(e)?e[0]:e,l.textAlign||uf),d=s&&o.lineWidth?o.lineWidth:0,p=Array.isArray(e)?e:String(e).split("\n").reduce(bde,[]),{width:f,height:g,widths:m,heights:y,lineWidths:_}=function Lhe(i,e){const t=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const u=e[c];if("\n"===u||c===h){r=Math.max(r,o),s.push(o),o=0,a+=l,l=0;continue}const d=e[c+1]||i.font,p=A9(d,u);t.push(p),o+=p;const f=Ahe(d);n.push(f),l=Math.max(l,f)}return{width:r,height:a,widths:t,heights:n,lineWidths:s}}(l,p),v=f+d,k=[],w=(v+2)*h[0],I=(g+d)*h[1],b={width:w<0?Math.floor(w):Math.ceil(w),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:k};(1!=h[0]||1!=h[1])&&k.push("scale",h),s&&(k.push("strokeStyle",o.strokeStyle),k.push("lineWidth",d),k.push("lineCap",o.lineCap),k.push("lineJoin",o.lineJoin),k.push("miterLimit",o.miterLimit),k.push("setLineDash",[o.lineDash]),k.push("lineDashOffset",o.lineDashOffset)),n&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const D=.5-u;let P=u*v+D*d;const z=[],Z=[];let R,K=0,Q=0,T=0,O=0;for(let N=0,E=p.length;N<E;N+=2){const F=p[N];if("\n"===F){Q+=K,K=0,P=u*v+D*d,++O;continue}const L=p[N+1]||l.font;L!==R&&(s&&z.push("font",L),n&&Z.push("font",L),R=L),K=Math.max(K,y[T]);const G=[F,P+D*m[T]+u*(m[T]-_[O]),.5*(d+K)+Q];P+=m[T],s&&z.push("strokeText",G),n&&Z.push("fillText",G),++T}return Array.prototype.push.apply(k,z),Array.prototype.push.apply(k,Z),this.labels_[r]=b,b}replayTextBackground_(e,t,n,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,r,o,a,l,c,h,u,d,p,f,g,m){let y=n-(a*=d[0]),_=s-(l*=d[1]);const v=r+c>e?e-c:r,k=o+h>t?t-h:o,w=f[3]+v*d[0]+f[1],I=f[0]+k*d[1]+f[2],b=y-f[3],D=_-f[0];let P;return(g||0!==u)&&(Zl[0]=b,Ql[0]=b,Zl[1]=D,tl[1]=D,tl[0]=b+w,nl[0]=tl[0],nl[1]=D+I,Ql[1]=nl[1]),0!==u?(P=Jo([1,0,0,1,0,0],n,s,1,1,u,-n,-s),Ti(P,Zl),Ti(P,tl),Ti(P,nl),Ti(P,Ql),Qo(Math.min(Zl[0],tl[0],nl[0],Ql[0]),Math.min(Zl[1],tl[1],nl[1],Ql[1]),Math.max(Zl[0],tl[0],nl[0],Ql[0]),Math.max(Zl[1],tl[1],nl[1],Ql[1]),vd)):Qo(Math.min(b,b+w),Math.min(D,D+I),Math.max(b,b+w),Math.max(D,D+I),vd),p&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:v,drawImageH:k,originX:c,originY:h,declutterBox:{minX:vd[0],minY:vd[1],maxX:vd[2],maxY:vd[3],value:m},canvasTransform:P,scale:d}}replayImageOrLabel_(e,t,n,s,r,o,a){const c=s.declutterBox,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=t[0]&&c.maxX+h>=0&&c.minY-h<=t[1]&&c.maxY+h>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,Zl,tl,nl,Ql,o,a),function Phe(i,e,t,n,s,r,o,a,l,c,h){i.save(),1!==t&&(void 0===i.globalAlpha?i.globalAlpha=u=>u.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),function Ohe(i,e){const t=i.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}(n,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,l,c,o*h[0],a*h[1]),i.restore()}(e,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=Ti(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(n[0]%s,n[1]%s),1!==t&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,s){const r=this.textStates[t],o=this.createLabel(e,t,s,n),a=this.strokeStates[n],l=this.pixelRatio,c=aC(Array.isArray(e)?e[0]:e,r.textAlign||uf),h=H2[r.textBaseline||E2],u=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:c*(o.width/l-2*r.scale[0])+2*(.5-c)*u,anchorY:h*o.height/l+2*(.5-h)*u}}execute_(e,t,n,s,r,o,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&Wa(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Hl(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),function Aae(i,e){i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5]}(this.renderedTransform_,n));let u=0;const d=s.length;let f,g,m,y,_,v,k,w,I,b,D,P,z,p=0,Z=0,K=0;const Q=this.coordinateCache_,T=this.viewRotation_,O=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,R={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},N=this.instructions!=s||this.overlaps?0:200;let E,F,L,G;for(;u<d;){const V=s[u];switch(V[0]){case Ke.BEGIN_GEOMETRY:E=V[1],G=V[3],E.getGeometry()?void 0===a||_s(a,G.getExtent())?++u:u=V[2]+1:u=V[2],c&&(c.zIndex=V[4]);break;case Ke.BEGIN_PATH:Z>N&&(this.fill_(e),Z=0),K>N&&(e.stroke(),K=0),!Z&&!K&&(e.beginPath(),_=NaN,v=NaN),++u;break;case Ke.CIRCLE:p=V[1];const $=h[p],ee=h[p+1],de=h[p+2]-$,ue=h[p+3]-ee,fe=Math.sqrt(de*de+ue*ue);e.moveTo($+fe,ee),e.arc($,ee,fe,0,2*Math.PI,!0),++u;break;case Ke.CLOSE_PATH:e.closePath(),++u;break;case Ke.CUSTOM:p=V[1],f=V[2];const Me=V[4],Se=V[5];R.geometry=V[3],R.feature=E,u in Q||(Q[u]=[]);const nt=Q[u];Se?Se(h,p,f,2,nt):(nt[0]=h[p],nt[1]=h[p+1],nt.length=2),c&&(c.zIndex=V[6]),Me(nt,R),++u;break;case Ke.DRAW_IMAGE:p=V[1],f=V[2],I=V[3],g=V[4],m=V[5];let et=V[6];const Ne=V[7],qe=V[8],Rt=V[9],An=V[10];let Mn=V[11];const Cn=V[12];let En=V[13];y=V[14]||"declutter";const Hn=V[15];if(!I&&V.length>=20){b=V[19],D=V[20],P=V[21],z=V[22];const to=this.drawLabelWithPointPlacement_(b,D,P,z);I=to.label,V[3]=I,g=(to.anchorX-V[23])*this.pixelRatio,V[4]=g,m=(to.anchorY-V[24])*this.pixelRatio,V[5]=m,et=I.height,V[6]=et,En=I.width,V[13]=En}let os,eo,Oh,Nh;V.length>25&&(os=V[25]),V.length>17?(eo=V[16],Oh=V[17],Nh=V[18]):(eo=sh,Oh=null,Nh=null),An&&O?Mn+=T:!An&&!O&&(Mn-=T);let Xy=0;for(;p<f;p+=2){if(os&&os[Xy++]<En/this.pixelRatio)continue;const to=this.calculateImageOrLabelDimensions_(I.width,I.height,h[p],h[p+1],En,et,g,m,qe,Rt,Mn,Cn,r,eo,!!Oh||!!Nh,E),Fh=[e,t,I,to,Ne,Oh,Nh];if(l){let no,_a,io,dl,pl;if(Hn){const $n=f-p;if(!Hn[$n]){Hn[$n]={args:Fh,declutterMode:y};continue}const Ds=Hn[$n];no=Ds.args,_a=Ds.declutterMode,delete Hn[$n],io=dL(no)}if(no&&("declutter"!==_a||!l.collides(io))&&(dl=!0),("declutter"!==y||!l.collides(to.declutterBox))&&(pl=!0),"declutter"===_a&&"declutter"===y){const $n=dl&&pl;dl=$n,pl=$n}dl&&("none"!==_a&&l.insert(io),this.replayImageOrLabel_.apply(this,no)),pl&&("none"!==y&&l.insert(to.declutterBox),this.replayImageOrLabel_.apply(this,Fh))}else this.replayImageOrLabel_.apply(this,Fh)}++u;break;case Ke.DRAW_CHARS:const $f=V[1],Yf=V[2],Jd=V[3],SNe=V[4];z=V[5];const INe=V[6],dO=V[7],pO=V[8];P=V[9];const G4=V[10];b=V[11],Array.isArray(b)&&(b=b.reduce(Cde,"")),D=V[12];const fO=[V[13],V[13]];y=V[14]||"declutter";const TNe=V[15],U4=this.textStates[D],Kf=U4.font,Xf=[U4.scale[0]*dO,U4.scale[1]*dO];let Zf;Kf in this.widths_?Zf=this.widths_[Kf]:(Zf={},this.widths_[Kf]=Zf);const gO=L2(h,$f,Yf,2),mO=Math.abs(Xf[0])*L9(Kf,b,Zf);if(SNe||mO<=gO){const no=Mde(h,$f,Yf,2,b,(gO-mO)*aC(b,this.textStates[D].textAlign),INe,Math.abs(Xf[0]),L9,Kf,Zf,O?0:this.viewRotation_,TNe);e:if(no){const _a=[];let io,dl,pl,$n,Ds;if(P)for(io=0,dl=no.length;io<dl;++io){Ds=no[io],pl=Ds[4],$n=this.createLabel(pl,D,"",P),g=Ds[2]+(Xf[0]<0?-G4:G4),m=Jd*$n.height+2*(.5-Jd)*G4*Xf[1]/Xf[0]-pO;const fl=this.calculateImageOrLabelDimensions_($n.width,$n.height,Ds[0],Ds[1],$n.width,$n.height,g,m,0,0,Ds[3],fO,!1,sh,!1,E);if(l&&"declutter"===y&&l.collides(fl.declutterBox))break e;_a.push([e,t,$n,fl,1,null,null])}if(z)for(io=0,dl=no.length;io<dl;++io){Ds=no[io],pl=Ds[4],$n=this.createLabel(pl,D,z,""),g=Ds[2],m=Jd*$n.height-pO;const fl=this.calculateImageOrLabelDimensions_($n.width,$n.height,Ds[0],Ds[1],$n.width,$n.height,g,m,0,0,Ds[3],fO,!1,sh,!1,E);if(l&&"declutter"===y&&l.collides(fl.declutterBox))break e;_a.push([e,t,$n,fl,1,null,null])}l&&"none"!==y&&l.load(_a.map(dL));for(let fl=0,DNe=_a.length;fl<DNe;++fl)this.replayImageOrLabel_.apply(this,_a[fl])}}++u;break;case Ke.END_GEOMETRY:if(void 0!==o){E=V[1];const to=o(E,G,y);if(to)return to}++u;break;case Ke.FILL:N?Z++:this.fill_(e),++u;break;case Ke.MOVE_TO_LINE_TO:for(p=V[1],f=V[2],F=h[p],L=h[p+1],e.moveTo(F,L),_=F+.5|0,v=L+.5|0,p+=2;p<f;p+=2)F=h[p],L=h[p+1],k=F+.5|0,w=L+.5|0,(p==f-2||k!==_||w!==v)&&(e.lineTo(F,L),_=k,v=w);++u;break;case Ke.SET_FILL_STYLE:this.alignAndScaleFill_=V[2],Z&&(this.fill_(e),Z=0,K&&(e.stroke(),K=0)),e.fillStyle=V[1],++u;break;case Ke.SET_STROKE_STYLE:K&&(e.stroke(),K=0),this.setStrokeStyle_(e,V),++u;break;case Ke.STROKE:N?K++:e.stroke(),++u;break;default:++u}}Z&&this.fill_(e),K&&e.stroke()}execute(e,t,n,s,r,o){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,n,s,r){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,r)}},ah=["Polygon","Circle","LineString","Image","Text","Default"],fL=["Image","Text"],Ide=ah.filter(i=>!fL.includes(i)),lC={},Lde=class Ade extends cL{constructor(e,t,n,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?$u(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,n,s){if(!this.image_)return;const r=Hl(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;0===this.transformRotation_&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=r.length;h<u;h+=2){const d=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Jo(a,f,g,1,1,c,-f,-g),o.save(),o.transform.apply(o,a),o.translate(f,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(e,t,n,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Hl(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=s){const l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,s,r){const o=this.context_,a=Hl(e,t,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),n}drawRings_(e,t,n,s){for(let r=0,o=n.length;r<o;++r)t=this.moveToLineTo_(e,t,n[r],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_s(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function vle(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return Hl(n,0,n.length,s,e,t)}(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const n=t.getGeometryFunction()(e);!n||(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),""!==this.text_&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),""!==this.text_&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_s(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(_s(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);n.stroke()}if(""!==this.text_){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_s(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_s(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a)s=this.drawRings_(n,s,r[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Wa(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:uf;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const n=e.getColor();this.fillState_={fillStyle:ta(n||js)}}else this.fillState_=null;if(t){const n=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=r||Qa;this.strokeState_={lineCap:void 0!==s?s:cd,lineDash:1===this.pixelRatio_?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:hd,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:ta(n||hf)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(e){const t=e.getFill();if(t){const p=t.getColor();this.textFillState_={fillStyle:ta(p||js)}}else this.textFillState_=null;const n=e.getStroke();if(n){const p=n.getColor(),f=n.getLineCap(),g=n.getLineDash(),m=n.getLineDashOffset(),y=n.getLineJoin(),_=n.getWidth(),v=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==f?f:cd,lineDash:g||Qa,lineDashOffset:m||0,lineJoin:void 0!==y?y:hd,lineWidth:void 0!==_?_:1,miterLimit:void 0!==v?v:10,strokeStyle:ta(p||hf)}}else this.textStrokeState_=null;const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:void 0!==s?s:T9,textAlign:void 0!==u?u:uf,textBaseline:void 0!==d?d:E2},this.text_=void 0!==h?Array.isArray(h)?h.reduce((p,f,g)=>p+(g%2?" ":f),""):h:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}},sa=.5,gL={Point:function Gde(i,e,t,n,s,r){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=r&&o&&l?{}:void 0;if(o){if(2!=o.getImageState())return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawPoint(e,n,s)}if(l){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(e,n,s)}},LineString:function Bde(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,n,s)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,s)}},Polygon:function Wde(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,n,s)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,s)}},MultiPoint:function Ude(i,e,t,n,s,r){const o=t.getImage(),a=o&&0!==o.getOpacity(),l=t.getText(),c=l&&l.getText(),h=r&&a&&c?{}:void 0;if(a){if(2!=o.getImageState())return;const u=i.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,h),u.drawMultiPoint(e,n,s)}if(c){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(e,n,s)}},MultiLineString:function jde(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,n,s)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,s)}},MultiPolygon:function qde(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,n,s)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,s)}},GeometryCollection:function Hde(i,e,t,n,s,r){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a)(0,gL[o[a].getType()])(i,o[a],t,n,s,r)},Circle:function Vde(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,n,s)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}};function Fde(i,e){return parseInt(ft(i),10)-parseInt(ft(e),10)}function mL(i,e){const t=yL(i,e);return t*t}function yL(i,e){return.5*i/e}function _L(i,e,t,n,s,r,o,a){const l=[],c=t.getImage();if(c){let d=!0;const p=c.getImageState();2==p||3==p?d=!1:0==p&&c.load(),d&&l.push(c.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>s(null)),function zde(i,e,t,n,s,r,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,s);t.getRenderer()?vL(i,l,t,e,o):(0,gL[l.getType()])(i,l,t,e,o,r)}(i,e,t,n,r,o,a),u}function vL(i,e,t,n,s){if("GeometryCollection"!=e.getType())i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),s);else{const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)vL(i,o[a],t,n,s)}}const Yde=class $de extends jA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=t.pixelRatio,f=t.viewHints,g=!(f[0]||f[1]),m=this.context,y=Math.round(Ht(s)/a*p),_=Math.round(Hi(s)/a*p),v=u.getWrapX()&&l.canWrapX(),k=v?Ht(h):null,w=v?Math.ceil((s[2]-h[2])/k)+1:1;let I=v?Math.floor((s[0]-h[0])/k):0;do{let b=this.getRenderTransform(o,a,0,p,y,_,I*k);t.declutter&&(b=b.slice(0)),e.execute(m,[m.canvas.width,m.canvas.height],b,c,g,void 0===n?ah:n?fL:Ide,n?d&&t.declutter[d]:void 0)}while(++I<w)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=ki(this.context.canvas.width,this.context.canvas.height,BA))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,zm(this.context),BA.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){!this.replayGroup_||(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.viewState;this.prepareContainer(e,t);const r=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!this.getLayer().hasListener("prerender")&&!this.getLayer().hasListener("postrender"))return this.container;this.setDrawContext_(),this.preRender(r,e);if(this.clipped_=!1,a&&n.extent&&this.clipping){const c=Ya(n.extent);a=_s(c,e.extent),this.clipped_=a&&!ju(c,e.extent),this.clipped_&&this.clipUnrotated(r,e,c)}return a&&this.renderWorlds(o,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&r.restore(),this.postRender(r,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=n[0]*sa,d=n[1]*sa;h.push(this.getRenderTransform(s,r,o,sa,u,d,0).slice());const p=c.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!ju(f,l)){let m=l[0];const y=Ht(f);let v,_=0;for(;m<f[0];)--_,v=y*_,h.push(this.getRenderTransform(s,r,o,sa,u,d,v).slice()),m+=y;for(_=0,m=l[2];m>f[2];)++_,v=y*_,h.push(this.getRenderTransform(s,r,o,sa,u,d,v).slice()),m-=y}const g=Eo();this.hitDetectionImageData_=function Pde(i,e,t,n,s,r,o,a,l){const c=l?qp(s):s,d=ki(i[0]*sa,i[1]*sa);d.imageSmoothingEnabled=!1;const p=d.canvas,f=new Lde(d,sa,s,null,o,a,l?Ku(Eo(),l):null),g=t.length,m=Math.floor(16777215/g),y={};for(let v=1;v<=g;++v){const k=t[v-1],w=k.getStyleFunction()||n;if(!w)continue;let I=w(k,r);if(!I)continue;Array.isArray(I)||(I=[I]);const D=(v*m).toString(16).padStart(7,"#00000");for(let P=0,z=I.length;P<z;++P){const Z=I[P],K=Z.getGeometryFunction()(k);if(!K||!_s(c,K.getExtent()))continue;const Q=Z.clone(),T=Q.getFill();T&&T.setColor(D);const O=Q.getStroke();O&&(O.setColor(D),O.setLineDash(null)),Q.setText(void 0);const R=Z.getImage();if(R){const L=R.getImageSize();if(!L)continue;const G=ki(L[0],L[1],void 0,{alpha:!1}),V=G.canvas;G.fillStyle=D,G.fillRect(0,0,V.width,V.height),Q.setImage(new N9({img:V,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}const N=Q.getZIndex()||0;let E=y[N];E||(E={},y[N]=E,E.Polygon=[],E.Circle=[],E.LineString=[],E.Point=[]);const F=K.getType();if("GeometryCollection"===F){const L=K.getGeometriesArrayRecursive();for(let G=0,V=L.length;G<V;++G){const X=L[G];E[X.getType().replace("Multi","")].push(X,Q)}}else E[F.replace("Multi","")].push(K,Q)}}const _=Object.keys(y).map(Number).sort(Ua);for(let v=0,k=_.length;v<k;++v){const w=y[_[v]];for(const I in w){const b=w[I];for(let D=0,P=b.length;D<P;D+=2){f.setStyle(b[D+1]);for(let z=0,Z=e.length;z<Z;++z)f.setTransform(e[z]),f.drawGeometry(b[D])}}}return d.getImageData(0,0,p.width,p.height)}(n,h,this.renderedFeatures_,c.getStyleFunction(),l,r,o,mL(r,this.renderedPixelRatio_),g?a:null)}t(function Ode(i,e,t){const n=[];if(t){const s=Math.floor(Math.round(i[0])*sa),r=Math.floor(Math.round(i[1])*sa),o=4*(In(s,0,t.width-1)+In(r,0,t.height-1)*t.width),h=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),u=Math.floor(16777215/e.length);h&&h%u==0&&n.push(e[h/u-1])}return n}(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,n,function(d,p,f){const g=ft(d),m=c[g];if(m){if(!0!==m&&f<m.distanceSq){if(0===f)return c[g]=!0,r.splice(r.lastIndexOf(m),1),s(d,l,p);m.geometry=p,m.distanceSq=f}}else{if(0===f)return c[g]=!0,s(d,l,p);r.push(c[g]={feature:d,layer:l,geometry:p,distanceSq:f,callback:s})}},u?t.declutter?.[u]?.all().map(d=>d.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[0],r=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,u=c.resolution,d=e.pixelRatio,p=t.getRevision(),f=t.getRenderBuffer();let g=t.getRenderOrder();void 0===g&&(g=Fde);const m=c.center.slice(),y=Pp(l,f*u),_=y.slice(),v=[y.slice()],k=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!ju(k,e.extent)){const O=Ht(k),R=Math.max(Ht(y)/2,O);y[0]=k[0]-R,y[2]=k[2]+R,hA(m,h);const N=rA(v[0],h);N[0]<k[0]&&N[2]<k[2]?v.push([N[0]+O,N[1],N[2]+O,N[3]]):N[0]>k[0]&&N[2]>k[2]&&v.push([N[0]-O,N[1],N[2]-O,N[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&ju(this.wrappedRenderedExtent_,y))return Wa(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new class wde{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const r=n[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const n=void 0!==e?e.toString():"0";let s=this.buildersByZIndex_[n];void 0===s&&(s={},this.buildersByZIndex_[n]=s);let r=s[t];return void 0===r&&(r=new(0,kde[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r),r}}(yL(u,d),y,u,d),I=Eo();let b;if(I){for(let O=0,R=v.length;O<R;++O){const E=qp(v[O]);n.loadFeatures(E,u,I)}b=Ku(I,h)}else for(let O=0,R=v.length;O<R;++O)n.loadFeatures(v[O],u,h);const D=mL(u,d);let P=!0;const z=(O,R)=>{let N;const E=O.getStyleFunction()||t.getStyleFunction();if(E&&(N=E(O,u)),N){const F=this.renderFeature(O,D,N,w,b,this.getLayer().getDeclutter(),R);P=P&&!F}},Z=qp(y),K=n.getFeaturesInExtent(Z);g&&K.sort(g);for(let O=0,R=K.length;O<R;++O)z(K[O],O);this.renderedFeatures_=K,this.ready=P;const Q=w.finish(),T=new class Tde{constructor(e,t,n,s,r,o,a){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,a)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let s=this.executorsByZIndex_[n];void 0===s&&(s={},this.executorsByZIndex_[n]=s);const r=e[n];for(const o in r)s[o]=new Sde(this.resolution_,this.pixelRatio_,this.overlaps_,r[o],t)}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,r,o){const a=2*(s=Math.round(s))+1,l=Jo(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ki(a,a));const h=this.hitDetectionContext_;let u;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(u=[1/0,1/0,-1/0,-1/0],qu(u,e),Pp(u,t*(this.renderBuffer_+s),u));const d=function Dde(i){if(void 0!==lC[i])return lC[i];const e=2*i+1,t=i*i,n=new Array(t+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(4*((i+r)*e+(i+o))+3),r>0&&l.push(4*((i-r)*e+(i+o))+3),o>0&&(l.push(4*((i+r)*e+(i-o))+3),r>0&&l.push(4*((i-r)*e+(i-o))+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return lC[i]=s,s}(s);let p;function f(w,I,b){const D=h.getImageData(0,0,a,a).data;for(let P=0,z=d.length;P<z;P++)if(D[d[P]]>0){if(!o||"none"===b||"Image"!==p&&"Text"!==p||o.includes(w)){const Z=(d[P]-3)/4,K=s-Z%a,Q=s-(Z/a|0),T=r(w,I,K*K+Q*Q);if(T)return T}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let m,y,_,v,k;for(g.sort(Ua),m=g.length-1;m>=0;--m){const w=g[m].toString();for(_=this.executorsByZIndex_[w],y=ah.length-1;y>=0;--y)if(p=ah[y],v=_[p],void 0!==v&&(k=v.executeHitDetection(h,l,n,f,u),k))return k}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],r=t[2],o=t[3],a=[n,s,n,o,r,o,r,s];return Hl(a,0,8,2,e,a),a}isEmpty(){return qc(this.executorsByZIndex_)}execute(e,t,n,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?goe:Ua),o=o||ah;const c=ah.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),p=this.executorsByZIndex_[d];for(let f=0,g=o.length;f<g;++f){const m=o[f],y=p[m];if(void 0!==y){const _=null===a?void 0:y.getZIndexContext(),v=_?_.getContext():e,k=this.maxExtent_&&"Image"!==m&&"Text"!==m;if(k&&(v.save(),this.clip(v,n)),_&&"Text"!==m&&"Image"!==m?_.pushFunction(w=>y.execute(w,t,n,s,r,a)):y.execute(v,t,n,s,r,a),k&&v.restore(),_){_.offset();const w=l[h]*c+ah.indexOf(m);this.deferredZIndexContexts_[w]||(this.deferredZIndexContexts_[w]=[]),this.deferredZIndexContexts_[w].push(_)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ua);for(let n=0,s=t.length;n<s;++n)e[t[n]].forEach(r=>{r.draw(this.renderedContext_),r.clear()}),e[t[n]].length=0}}(y,u,d,n.getOverlaps(),Q,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=m,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=T,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,r,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let c=0,h=n.length;c<h;++c)l=_L(s,e,n[c],t,this.boundHandleStyleImageChange_,r,o,a)||l;else l=_L(s,e,n,t,this.boundHandleStyleImageChange_,r,o,a);return l}},lh=class Kde extends K9{constructor(e){super(e)}createRenderer(){return new Yde(this)}},Xde=new ur({color:[78,191,255,.58]}),Zde=new ur({color:[123,226,98,.8]}),Qde=new ur({color:[234,229,77,.8]}),Jde=new ur({color:[234,77,77,.8]}),e1e=new ur({color:[245,40,145,.8]}),kL=new na({color:[39,88,245,.8],width:1}),B2=new na({color:[0,0,0,.8],width:1}),t1e=new na({color:[255,0,0,.58],width:5}),wL=new S2({fill:new ur({color:[78,191,255,.58]}),radius:5}),jt=[{polygon:new Ur({fill:Xde,stroke:kL,image:wL}),green:new Ur({fill:Zde,stroke:B2}),yellow:new Ur({fill:Qde,stroke:B2}),red:new Ur({fill:Jde,stroke:B2}),rosa:new Ur({fill:e1e,stroke:B2}),lineBlue:new Ur({stroke:kL,image:wL}),lineRed:new Ur({stroke:t1e})}];let wf=(()=>{class i{constructor(){this.layers=[],this.layerArraySubject=new ni([{name:"Cargando...",selected:!1}]),this.layerArray$=this.layerArraySubject.asObservable(),this.navToShowSubject=new ni(""),this.navToShow$=this.navToShowSubject.asObservable(),this.polAreaSubject=new ni(0),this.polArea$=this.polAreaSubject.asObservable(),this.layerVisibilitySubject=new ni(null),this.layerVisibility$=this.layerVisibilitySubject.asObservable(),this.menuSubject=new ni(!1),this.menu$=this.menuSubject.asObservable()}getMap(){return this.map=new Q9({view:new ea({center:PM([-97,35.56]),zoom:4.5}),layers:[new Yle({source:new Pue})],target:"map",interactions:_9({doubleClickZoom:!1})}),this.map}getLineVectorSource(){return this.lineVectorSource=new rh({format:new _d}),console.log("Source de lineas desde el map.service.ts"),this.lineVectorSource}getLineVectorLayer(){return this.lineVectorLayer=new lh({source:this.lineVectorSource,visible:!0,zIndex:2,style:jt[0].lineBlue}),this.map.addLayer(this.lineVectorLayer),console.log("Capa de lineas desde el map.service.ts"),this.lineVectorLayer}getDrawnVectorSource(){return this.drawnVectorSource=new rh({format:new _d}),console.log("Source de poligonos desde el map.service.ts"),this.drawnVectorSource}getDrawnVectorLayer(){return this.drawnVectorLayer=new lh({source:this.drawnVectorSource,visible:!0,zIndex:2,style:jt[0].polygon}),this.map.addLayer(this.drawnVectorLayer),console.log("Capa de poligonos desde el map.service.ts"),this.drawnVectorLayer}addFeatureToDrawnVectorSource(t){this.drawnVectorSource.addFeature(t)}removeFeatureFromDrawnVectorSource(t){this.drawnVectorSource.removeFeature(t)}addFeatureToLineVectorSource(t){this.lineVectorSource.addFeature(t)}removeFeatureFromLineVectorSource(t){this.lineVectorSource.removeFeature(t)}setLayerArray(t){this.layerArraySubject.next(t)}setNavToShow(t){this.navToShowSubject.next(t)}setPolygonArea(t){this.polAreaSubject.next(t)}toggleLayerVisibility(t){this.layerVisibilitySubject.next(t)}toggleMenu(t){this.menuSubject.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xL=(()=>{class i{constructor(){this.menuSubject=new ni(!1),this.menu$=this.menuSubject.asObservable()}toggleMenu(t){this.menuSubject.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const h1e=class c1e extends qr{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){ZR(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),fn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Mt(e,"postrender",this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set("element",e)}setMap(e){this.set("map",e)}setOffset(e){this.set("offset",e)}setPosition(e){this.set("position",e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get("position"))return;const n=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),r=this.getRect(s,[Doe(s),Roe(s)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!ju(n,r)){const a=r[0]-n[0],l=n[2]-r[2],c=r[1]-n[1],h=n[3]-r[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),c<0?u[1]=c-o:h<0&&(u[1]=Math.abs(h)+o),0!==u[0]||0!==u[1]){const d=t.getView().getCenterInternal(),p=t.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+u[0],p[1]+u[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),s=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[s,r,s+t[0],r+t[1]]}setPositioning(e){this.set("positioning",e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const n=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(n,s)}updateRenderedPosition(e,t){const n=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let l="0%",c="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?l="-100%":("bottom-center"==r||"center-center"==r||"top-center"==r)&&(l="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?c="-100%":("center-left"==r||"center-center"==r||"center-right"==r)&&(c="-50%");const h=`translate(${l}, ${c}) translate(${e[0]+s[0]}px, ${e[1]+s[1]}px)`;this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}getOptions(){return this.options}};class d1e extends zr{constructor(e,t,n,s){super(e),this.features=n,this.file=t,this.projection=s}}const f1e=class p1e extends sd{constructor(e){e=e||{},super({handleEvent:jc}),this.readAsBuffer_=!1,this.formats_=[];const t=e.formatConstructors?e.formatConstructors:[];for(let n=0,s=t.length;n<s;++n){let r=t[n];"function"==typeof r&&(r=new r),this.formats_.push(r),this.readAsBuffer_=this.readAsBuffer_||"arraybuffer"===r.getType()}this.projection_=e.projection?cn(e.projection):null,this.dropListenKeys_=null,this.source_=e.source||null,this.target=e.target?e.target:null}handleResult_(e,t){const n=t.target.result,s=this.getMap();let o,r=this.projection_;r||(r=Eo(),r||(r=s.getView().getProjection()));const a=this.formats_;for(let l=0,c=a.length;l<c;++l){const h=a[l];let u=n;this.readAsBuffer_&&"arraybuffer"!==h.getType()&&(void 0===o&&(o=(new TextDecoder).decode(n)),u=o);const d=this.tryReadFeatures_(h,u,{featureProjection:r});if(d&&d.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(d)),this.dispatchEvent(new d1e("addfeatures",e,d,r));break}}}registerListeners_(){const e=this.getMap();if(e){const t=this.target?this.target:e.getViewport();this.dropListenKeys_=[Mt(t,"drop",this.handleDrop,this),Mt(t,"dragenter",this.handleStop,this),Mt(t,"dragover",this.handleStop,this),Mt(t,"drop",this.handleStop,this)]}}setActive(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),super.setActive(e)}setMap(e){this.unregisterListeners_(),super.setMap(e),this.getActive()&&this.registerListeners_()}tryReadFeatures_(e,t,n){try{return e.readFeatures(t,n)}catch{return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(fn),this.dropListenKeys_=null)}handleDrop(e){const t=e.dataTransfer.files;for(let n=0,s=t.length;n<s;++n){const r=t.item(n),o=new FileReader;o.addEventListener("load",this.handleResult_.bind(this,r)),this.readAsBuffer_?o.readAsArrayBuffer(r):o.readAsText(r)}}handleStop(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}};class j2 extends Bl{constructor(e,t,n){super(),void 0!==n&&void 0===t?this.setFlatCoordinates(n,e):this.setCenterAndRadius(e,t=t||0,n)}clone(){const e=new j2(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=e-r[0],a=t-r[1],l=o*o+a*a;if(l<s){if(0===l)for(let c=0;c<this.stride;++c)n[c]=r[c];else{const c=this.getRadius()/Math.sqrt(l);n[0]=r[0]+c*o,n[1]=r[1]+c*a;for(let h=2;h<this.stride;++h)n[h]=r[h]}return n.length=this.stride,l}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],r=t-n[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return Qo(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(_s(e,this.getExtent())){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]||vM(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let r=1;r<t;++r)s[t+r]=e[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=ZA(s,0,e);s[r++]=s[0]+t;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(QM(n,0,n.length,s,e,t,n)),this.changed()}}const g1e=j2;class G2 extends zr{constructor(e,t){super(e),this.feature=t}}function U2(i,e){return $a(i[0],i[1],e[0],e[1])}function kd(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function W2(i,e,t){let n,s;e<t?(n=e,s=t):(n=t,s=e);const r=Math.ceil(n),o=Math.floor(s);if(r>o)return U2(wd(i,n),wd(i,s));let a=0;n<r&&(a+=U2(wd(i,n),kd(i,r))),o<s&&(a+=U2(kd(i,o),wd(i,s)));for(let l=r;l<o-1;++l)a+=U2(kd(i,l),kd(i,l+1));return a}function ML(i,e,t){if(e instanceof ia)$2(i,e.getCoordinates(),!1,t);else if(e instanceof md){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s)$2(i,n[s],!1,t)}else if(e instanceof Io){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s)$2(i,n[s],!0,t)}else if(e instanceof yd){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length;a<l;++a)$2(i,o[a],!0,t)}}else if(e instanceof _f){const n=e.getGeometries();for(let s=0;s<n.length;++s)ML(i,n[s],t)}}const cC={index:-1,endIndex:NaN};function $2(i,e,t,n){const s=i[0],r=i[1];for(let o=0,a=e.length-1;o<a;++o){const h=bL(s,r,e[o],e[o+1]);if(0===h.squaredDistance){const u=o+h.along;return void n.push({coordinates:e,ring:t,startIndex:u,endIndex:u})}}}const hC={along:0,squaredDistance:0};function bL(i,e,t,n){const s=t[0],r=t[1],l=n[0]-s,c=n[1]-r;let h=0,u=s,d=r;return(0!==l||0!==c)&&(h=In(((i-s)*l+(e-r)*c)/(l*l+c*c),0,1),u+=l*h,d+=c*h),hC.along=h,hC.squaredDistance=$u($a(i,e,u,d),10),hC}function wd(i,e){const t=i.length;let n=Math.floor(e);const s=e-n;n>=t?n-=t:n<0&&(n+=t);let r=n+1;r>=t&&(r-=t);const o=i[n],a=o[0],l=o[1],c=i[r];return[a+(c[0]-a)*s,l+(c[1]-l)*s]}function v1e(){const i=V9();return function(e,t){return i[e.getGeometry().getType()]}}const uC=class _1e extends ql{constructor(e){const t=e;t.stopDown||(t.stopDown=Vu),super(t),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function k1e(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:jc,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const s=this.mode_;if("Circle"===s)n=(r,o,a)=>{const l=o||new g1e([NaN,NaN]),c=Fn(r[0]),h=Gu(c,Fn(r[r.length-1]));l.setCenterAndRadius(c,Math.sqrt(h),this.geometryLayout_);const u=Eo();return u&&l.transform(a,u),l};else{let r;"Point"===s?r=ui:"LineString"===s?r=ia:"Polygon"===s&&(r=Io),n=(o,a,l)=>(a?a.setCoordinates("Polygon"===s?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a)}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new lh({source:new rh({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:v1e(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Eb,this.freehandCondition_=e.freehand?w2:e.freehandCondition?e.freehandCondition:g9,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener("active",this.updateState_)}setTrace(e){let t;t=e?!0===e?w2:e:bce,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===St.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===St.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===St.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===St.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===St.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===St.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===St.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Ka(St.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),r=ys([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),o=this.traceSource_.getFeaturesInExtent(r);if(0===o.length)return;const a=function m1e(i,e){const t=[];for(let n=0;n<e.length;++n)ML(i,e[n].getGeometry(),t);return t}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex;n===e.startIndex<=t?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const s=Math.ceil(e);let r=Math.floor(t);r===t&&(r-=1),n=r-s+1}else{const s=Math.floor(e);let r=Math.ceil(t);r===t&&(r+=1),n=s-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const s=[];if(t<n){const r=Math.ceil(t);let o=Math.floor(n);o===n&&(o-=1);for(let a=r;a<=o;++a)s.push(kd(e.coordinates,a))}else{const r=Math.floor(t);let o=Math.ceil(n);o===n&&(o+=1);for(let a=r;a>=o;--a)s.push(kd(e.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||-1===t.targetIndex&&Um(t.startPx,e.pixel)<this.snapTolerance_)return;const n=function y1e(i,e,t,n){const s=i[0],r=i[1];let o=1/0,a=-1,l=NaN;for(let u=0;u<e.targets.length;++u){const d=e.targets[u],p=d.coordinates;let g,f=1/0;for(let m=0;m<p.length-1;++m){const v=bL(s,r,p[m],p[m+1]);v.squaredDistance<f&&(f=v.squaredDistance,g=m+v.along)}f<o&&(o=f,d.ring&&e.targetIndex===u&&(d.endIndex>d.startIndex?g<d.startIndex&&(g+=p.length):d.endIndex<d.startIndex&&g>d.startIndex&&(g-=p.length)),l=g,a=u)}const c=e.targets[a];let h=c.ring;if(e.targetIndex===a&&h){const u=wd(c.coordinates,l);Um(t.getPixelFromCoordinate(u),e.startPx)>n&&(h=!1)}if(h){const u=c.coordinates,d=u.length,p=c.startIndex,f=l;if(p<f){const g=W2(u,p,f);W2(u,p,f-d)<g&&(l-=d)}else{const g=W2(u,p,f);W2(u,p,f+d)<g&&(l+=d)}}return cC.index=a,cC.endIndex=l,cC}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(-1!==t.targetIndex){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else this.addOrRemoveTracedCoordinates_(t.targets[t.targetIndex],n.endIndex);t.targetIndex=n.index;const s=t.targets[t.targetIndex];s.endIndex=n.endIndex;const r=wd(s.coordinates,s.endIndex),o=this.getMap().getPixelFromCoordinate(r);e.coordinate=r,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||"Point"===this.mode_)&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,s=t[0]-n[0],r=t[1]-n[1],o=s*s+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)n=!0;else if("Circle"===o)n=2===this.sketchCoords_.length;else if("LineString"===o)s=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],r=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let l=0,c=r.length;l<c;l++){const h=r[l],u=a.getPixelFromCoordinate(h),d=e[0]-u[0],p=e[1]-u[1],f=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(d*d+p*p)<=f,n){this.finishCoordinate_=h;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Tn(new ui(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Tn);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new ia(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=l2(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Tn(new ia(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Tn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new G2("drawstart",this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),r=l2(this.geometryLayout_);let o,a;for(;e.length<r;)e.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===n.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,r;const o=this.mode_;return"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),this.geometryFunction_(r,t,n)):"Polygon"===o&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<e;++r){let o;if("LineString"===s||"Circle"===s){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,n),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===s){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,n)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),s=this.getMap().getView().getProjection();return"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,n,s)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,n,s),t=n.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new gd([t])):"MultiLineString"===this.type_?e.setGeometry(new md([t])):"MultiPolygon"===this.type_&&e.setGeometry(new yd([t])),this.dispatchEvent(new G2("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new G2("drawabort",e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;let s;if(n&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)s=this.sketchCoords_;else{if("Polygon"!==t)return;s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&s.shift(),s.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const r=e[e.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Tn(new ui(s)),this.updateSketchFeatures_(),this.dispatchEvent(new G2("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}},EL=[0,0,0,0],xd=[];class pC extends zr{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}function x1e(i,e){return i.index-e.index}function SL(i,e,t){const n=e.geometry;if("Circle"===n.getType()){let r=n;if(1===e.index){const o=Eo();o&&(r=r.clone().transform(o,t));const a=Gu(r.getCenter(),Fn(i)),l=Math.sqrt(a)-r.getRadius();return l*l}}const s=Fn(i);return xd[0]=Fn(e.segment[0]),xd[1]=Fn(e.segment[1]),function Uoe(i,e){return Gu(i,lA(i,e))}(s,xd)}function IL(i,e,t){const n=e.geometry;if("Circle"===n.getType()&&1===e.index){let r=n;const o=Eo();return o&&(r=r.clone().transform(o,t)),Xc(r.getClosestPoint(Fn(i)))}const s=Fn(i);return xd[0]=Fn(e.segment[0]),xd[1]=Fn(e.segment[1]),Xc(lA(s,xd))}function M1e(){const i=V9();return function(e,t){return i.Point}}const b1e=class w1e extends ql{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:y9,this.defaultDeleteCondition_=function(n){return function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(n)&&n.type==St.SINGLECLICK},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:w2,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Jb,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new lh({source:new rh({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:M1e(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,e.features?t=e.features:e.source&&(this.source_=e.source,t=new Hs(this.source_.getFeatures()),this.source_.addEventListener("addfeature",this.handleSourceAdd_.bind(this)),this.source_.addEventListener("removefeature",this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener("add",this.handleFeatureAdd_.bind(this)),this.features_.addEventListener("remove",this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===e.snapToPointer?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const s=this.SEGMENT_WRITERS_[t.getType()];s&&s(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(n.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener("change",this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Hs;const n=this.featuresBeingModified_.getArray();for(let s=0,r=t.length;s<r;++s){const o=t[s].feature;o&&!n.includes(o)&&this.featuresBeingModified_.push(o)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new pC("modifystart",this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(s){e===s.feature&&n.push(s)});for(let s=n.length-1;s>=0;--s){const r=n[s];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);t.remove(r)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),s={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s],a={feature:e,geometry:t,depth:[s],index:s,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length-1;s<r;++s){const o=n.slice(s,s+2),a={feature:e,geometry:t,index:s,segment:o};this.rBush_.insert(ys(o),a)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[s],index:a,segment:c};this.rBush_.insert(ys(c),h)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[s],index:a,segment:c};this.rBush_.insert(ys(c),h)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let h=0,u=c.length-1;h<u;++h){const d=c.slice(h,h+2),p={feature:e,geometry:t,depth:[a,s],index:h,segment:d};this.rBush_.insert(ys(d),p)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),s={feature:e,geometry:t,index:0,segment:[n,n]},r={feature:e,geometry:t,index:1,segment:[n,n]},o=[s,r];s.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Op(n),s);let a=t;const l=Eo();if(l&&this.getMap()){const c=this.getMap().getView().getProjection();a=a.clone().transform(l,c),a=r9(a).transform(c,l)}this.rBush_.insert(a.getExtent(),r)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let s=0;s<n.length;++s){const r=n[s];(0,this.SEGMENT_WRITERS_[r.getType()])(e,r)}}createOrUpdateVertexFeature_(e,t,n,s){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new Tn(new ui(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",n),r.set("existing",s),r}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&e.type==St.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=St.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==St.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;const n=this.getMap().getView().getProjection(),s=[],r=t.getGeometry().getCoordinates(),o=ys([r]),a=this.rBush_.getInExtent(o),l={};a.sort(x1e);for(let c=0,h=a.length;c<h;++c){const u=a[c],d=u.segment;let p=ft(u.geometry);const f=u.depth;if(f&&(p+="-"+f.join("-")),l[p]||(l[p]=new Array(2)),"Circle"!==u.geometry.getType()||1!==u.index)if(!vs(d[0],r)||l[p][0])if(!vs(d[1],r)||l[p][1])ft(d)in this.vertexSegments_&&!l[p][0]&&!l[p][1]&&s.push(u);else{if(l[p][0]&&0===l[p][0].index){let g=u.geometry.getCoordinates();switch(u.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":g=g[f[1]];case"Polygon":if(u.index!==g[f[0]].length-2)continue}}this.dragSegments_.push([u,1]),l[p][1]=u}else this.dragSegments_.push([u,0]),l[p][0]=u;else vs(IL(e,u,n),r)&&!l[p][0]&&(this.dragSegments_.push([u,0]),l[p][0]=u)}return s}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([r])=>r));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],s=[];for(let r=0,o=this.dragSegments_.length;r<o;++r){const a=this.dragSegments_[r],l=a[0],c=l.feature;n.includes(c)||n.push(c);const h=l.geometry;s.includes(h)||s.push(h);const u=l.depth;let d;const p=l.segment,f=a[1];for(;t.length<h.getStride();)t.push(p[f][t.length]);switch(h.getType()){case"Point":d=t,p[0]=t,p[1]=t;break;case"MultiPoint":d=h.getCoordinates(),d[l.index]=t,p[0]=t,p[1]=t;break;case"LineString":d=h.getCoordinates(),d[l.index+f]=t,p[f]=t;break;case"MultiLineString":case"Polygon":d=h.getCoordinates(),d[u[0]][l.index+f]=t,p[f]=t;break;case"MultiPolygon":d=h.getCoordinates(),d[u[1]][u[0]][l.index+f]=t,p[f]=t;break;case"Circle":const g=h;if(p[0]=t,p[1]=t,0===l.index)this.changingFeature_=!0,g.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const m=e.map.getView().getProjection();let y=Um(Fn(g.getCenter()),Fn(t));const _=Eo();if(_){const v=g.clone().transform(_,m);v.setRadius(y),y=v.transform(m,_).getRadius()}g.setRadius(y),this.changingFeature_=!1}}d&&this.setGeometryCoordinates_(h,d)}this.createOrUpdateVertexFeature_(t,n,s,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=this.findInsertVerticesAndUpdateDragSegments_(e.coordinate);if(n?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,n),this.vertexFeature_)){const s=this.vertexFeature_.getGeometry().getCoordinates();for(let r=n.length-1;r>=0;--r)this.insertVertex_(n[r],s);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],s=n.geometry;if("Circle"===s.getType()){const r=s,o=r.getCenter(),a=n.featureSegments[0],l=n.featureSegments[1];a.segment[0]=o,a.segment[1]=o,l.segment[0]=o,l.segment[1]=o,this.rBush_.update(Op(o),a);let c=r;const h=Eo();if(h){const u=e.map.getView().getProjection();c=c.clone().transform(h,u),c=r9(c).transform(u,h)}this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(ys(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new pC("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),n=t.getPixelFromCoordinate(e),s=t.getView().getProjection(),r=function(l,c){return SL(e,l,s)-SL(e,c,s)};let o,a;if(this.hitDetection_&&t.forEachFeatureAtPixel(n,(c,h,u)=>{u&&"Point"===u.getType()&&(u=new ui(Xc(u.getCoordinates())));const d=u||c.getGeometry();if(d&&"Point"===d.getType()&&c instanceof Tn&&this.features_.getArray().includes(c)){a=d;const p=c.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:c,geometry:a,segment:[p,p]}]}return!0},{layerFilter:"object"==typeof this.hitDetection_?c=>c===this.hitDetection_:void 0}),!o){const h=qp(Pp(Ya(Op(e,EL)),t.getView().getResolution()*this.pixelTolerance_,EL));o=this.rBush_.getInExtent(h)}if(o&&o.length>0){const l=o.sort(r)[0],c=l.segment;let h=IL(e,l,s);const u=t.getPixelFromCoordinate(h);let d=Um(n,u);if(a||d<=this.pixelTolerance_){const p={};if(p[ft(c)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-e[0],this.delta_[1]=h[1]-e[1]),"Circle"===l.geometry.getType()&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);else{const f=t.getPixelFromCoordinate(c[0]),g=t.getPixelFromCoordinate(c[1]),m=Gu(u,f),y=Gu(u,g);if(d=Math.sqrt(Math.min(m,y)),this.snappedToVertex_=d<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_))return void(this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null));this.snappedToVertex_&&(h=m>y?c[1]:c[0]),this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);const _={};_[ft(l.geometry)]=!0;for(let v=1,k=o.length;v<k;++v){const w=o[v].segment;if(!(vs(c[0],w[0])&&vs(c[1],w[1])||vs(c[0],w[1])&&vs(c[1],w[0])))break;{const I=ft(o[v].geometry);I in _||(_[I]=!0,p[ft(w)]=!0)}}}return void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,s=e.feature,r=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<r.getStride();)t.push(0);switch(r.getType()){case"MultiLineString":case"Polygon":l=r.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=r.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=r.getCoordinates(),l.splice(a+1,0,t);break;default:return!1}this.setGeometryCoordinates_(r,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(r,a,o,1);const h={segment:[n[0],t],feature:s,geometry:r,depth:o,index:a};c.insert(ys(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[t,n[1]],feature:s,geometry:r,depth:o,index:a+1};return c.insert(ys(u.segment),u),this.dragSegments_.push([u,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?Xc(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(n=>"Circle"===n.getType()||n.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(ys([e])).some(({segment:n})=>vs(n[0],e)||vs(n[1],e))}removePoint(e){if(e&&(e=Fn(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=St.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([s])=>s));const n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new pC("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1}removeVertex_(){const e=this.dragSegments_,t={};let s,r,o,a,l,c,h,u,d,p,f,n=!1;for(l=e.length-1;l>=0;--l)o=e[l],p=o[0],f=ft(p.feature),p.depth&&(f+="-"+p.depth.join("-")),f in t||(t[f]={}),0===o[1]?(t[f].right=p,t[f].index=p.index):1==o[1]&&(t[f].left=p,t[f].index=p.index+1);for(f in t){switch(d=t[f].right,h=t[f].left,c=t[f].index,u=c-1,p=void 0!==h?h:d,u<0&&(u=0),a=p.geometry,r=a.getCoordinates(),s=r,n=!1,a.getType()){case"MultiLineString":r[p.depth[0]].length>2&&(r[p.depth[0]].splice(c,1),n=!0);break;case"LineString":r.length>2&&(r.splice(c,1),n=!0);break;case"MultiPolygon":s=s[p.depth[1]];case"Polygon":s=s[p.depth[0]],s.length>4&&(c==s.length-1&&(c=0),s.splice(c,1),n=!0,0===c&&(s.pop(),s.push(s[0]),u=s.length-1))}if(n){this.setGeometryCoordinates_(a,r);const g=[];if(void 0!==h&&(this.rBush_.remove(h),g.push(h.segment[0])),void 0!==d&&(this.rBush_.remove(d),g.push(d.segment[1])),void 0!==h&&void 0!==d){const m={depth:p.depth,feature:p.feature,geometry:p.geometry,index:u,segment:g};this.rBush_.insert(ys(m.segment),m)}this.updateSegmentIndices_(a,c,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(n=>"Circle"===n.getType()||n.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(ys([e])).some(({segment:n})=>!(vs(n[0],e)||vs(n[1],e)))}insertPoint(e){const t=e?Fn(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return!!t&&this.findInsertVerticesAndUpdateDragSegments_(t).reduce((s,r)=>s||this.insertVertex_(r,t),!1)}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,s){this.rBush_.forEachInExtent(e.getExtent(),function(r){r.geometry===e&&(void 0===n||void 0===r.depth||Wa(r.depth,n))&&r.index>t&&(r.index+=s)})}},xi=134217729;function Mf(i,e,t,n,s){let r,o,a,l,c=e[0],h=n[0],u=0,d=0;h>c==h>-c?(r=c,c=e[++u]):(r=h,h=n[++d]);let p=0;if(u<i&&d<t)for(h>c==h>-c?(o=c+r,a=r-(o-c),c=e[++u]):(o=h+r,a=r-(o-h),h=n[++d]),r=o,0!==a&&(s[p++]=a);u<i&&d<t;)h>c==h>-c?(o=r+c,l=o-r,a=r-(o-l)+(c-l),c=e[++u]):(o=r+h,l=o-r,a=r-(o-l)+(h-l),h=n[++d]),r=o,0!==a&&(s[p++]=a);for(;u<i;)o=r+c,l=o-r,a=r-(o-l)+(c-l),c=e[++u],r=o,0!==a&&(s[p++]=a);for(;d<t;)o=r+h,l=o-r,a=r-(o-l)+(h-l),h=n[++d],r=o,0!==a&&(s[p++]=a);return(0!==r||0===p)&&(s[p++]=r),p}function ce(i){return new Float64Array(i)}const Md=ce(4),TL=ce(8),DL=ce(12),RL=ce(16),xs=ce(4);function R1e(i,e,t,n,s,r){const o=(e-r)*(t-s),a=(i-s)*(n-r),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=33306690738754716e-32*c?l:-function D1e(i,e,t,n,s,r,o){let a,l,c,h,u,d,p,f,g,m,y,_,v,k,w,I,b,D;const P=i-s,z=t-s,Z=e-r,K=n-r;k=P*K,d=xi*P,p=d-(d-P),f=P-p,d=xi*K,g=d-(d-K),m=K-g,w=f*m-(k-p*g-f*g-p*m),I=Z*z,d=xi*Z,p=d-(d-Z),f=Z-p,d=xi*z,g=d-(d-z),m=z-g,b=f*m-(I-p*g-f*g-p*m),y=w-b,u=w-y,Md[0]=w-(y+u)+(u-b),_=k+y,u=_-k,v=k-(_-u)+(y-u),y=v-I,u=v-y,Md[1]=v-(y+u)+(u-I),D=_+y,u=D-_,Md[2]=_-(D-u)+(y-u),Md[3]=D;let Q=function E1e(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}(4,Md),T=22204460492503146e-32*o;if(Q>=T||-Q>=T||(u=i-P,a=i-(P+u)+(u-s),u=t-z,c=t-(z+u)+(u-s),u=e-Z,l=e-(Z+u)+(u-r),u=n-K,h=n-(K+u)+(u-r),0===a&&0===l&&0===c&&0===h)||(T=11093356479670487e-47*o+33306690738754706e-32*Math.abs(Q),Q+=P*h+K*a-(Z*c+z*l),Q>=T||-Q>=T))return Q;k=a*K,d=xi*a,p=d-(d-a),f=a-p,d=xi*K,g=d-(d-K),m=K-g,w=f*m-(k-p*g-f*g-p*m),I=l*z,d=xi*l,p=d-(d-l),f=l-p,d=xi*z,g=d-(d-z),m=z-g,b=f*m-(I-p*g-f*g-p*m),y=w-b,u=w-y,xs[0]=w-(y+u)+(u-b),_=k+y,u=_-k,v=k-(_-u)+(y-u),y=v-I,u=v-y,xs[1]=v-(y+u)+(u-I),D=_+y,u=D-_,xs[2]=_-(D-u)+(y-u),xs[3]=D;const O=Mf(4,Md,4,xs,TL);k=P*h,d=xi*P,p=d-(d-P),f=P-p,d=xi*h,g=d-(d-h),m=h-g,w=f*m-(k-p*g-f*g-p*m),I=Z*c,d=xi*Z,p=d-(d-Z),f=Z-p,d=xi*c,g=d-(d-c),m=c-g,b=f*m-(I-p*g-f*g-p*m),y=w-b,u=w-y,xs[0]=w-(y+u)+(u-b),_=k+y,u=_-k,v=k-(_-u)+(y-u),y=v-I,u=v-y,xs[1]=v-(y+u)+(u-I),D=_+y,u=D-_,xs[2]=_-(D-u)+(y-u),xs[3]=D;const R=Mf(O,TL,4,xs,DL);k=a*h,d=xi*a,p=d-(d-a),f=a-p,d=xi*h,g=d-(d-h),m=h-g,w=f*m-(k-p*g-f*g-p*m),I=l*c,d=xi*l,p=d-(d-l),f=l-p,d=xi*c,g=d-(d-c),m=c-g,b=f*m-(I-p*g-f*g-p*m),y=w-b,u=w-y,xs[0]=w-(y+u)+(u-b),_=k+y,u=_-k,v=k-(_-u)+(y-u),y=v-I,u=v-y,xs[1]=v-(y+u)+(u-I),D=_+y,u=D-_,xs[2]=_-(D-u)+(y-u),xs[3]=D;const N=Mf(R,DL,4,xs,RL);return RL[N-1]}(i,e,t,n,s,r,c)}function $1e(i,e){var t,n,r,o,a,l,c,h,u,s=0,d=i[0],p=i[1],f=e.length;for(t=0;t<f;t++){n=0;var g=e[t],m=g.length-1;if((h=g[0])[0]!==g[m][0]&&h[1]!==g[m][1])throw new Error("First and last coordinates in a ring must be the same");for(o=h[0]-d,a=h[1]-p;n<m;n++){if(l=(u=g[n+1])[0]-d,c=u[1]-p,0===a&&0===c){if(l<=0&&o>=0||o<=0&&l>=0)return 0}else if(c>=0&&a<=0||c<=0&&a>=0){if(0===(r=R1e(o,l,a,c,0,0)))return 0;(r>0&&c>0&&a<=0||r<0&&c<=0&&a>0)&&s++}h=u,a=c,o=l}}return s%2!=0}function iy(i){return"Feature"===i.type?i.geometry:i}function Sf(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=function Y1e(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if("Feature"===i.type&&null!==i.geometry&&"Point"===i.geometry.type)return[...i.geometry.coordinates];if("Point"===i.type)return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}(i),s=iy(e),r=s.type,o=e.bbox;let a=s.coordinates;if(o&&!1===function X1e(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}(n,o))return!1;"Polygon"===r&&(a=[a]);let l=!1;for(var c=0;c<a.length;++c){const h=$1e(n,a[c]);if(0===h)return!t.ignoreBoundary;h&&(l=!0)}return l}ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(8),ce(8),ce(8),ce(4),ce(8),ce(8),ce(8),ce(12),ce(192),ce(192),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(8),ce(8),ce(8),ce(8),ce(8),ce(8),ce(8),ce(8),ce(8),ce(4),ce(4),ce(4),ce(8),ce(16),ce(16),ce(16),ce(32),ce(32),ce(48),ce(64),ce(1152),ce(1152),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(4),ce(24),ce(24),ce(24),ce(24),ce(24),ce(24),ce(24),ce(24),ce(24),ce(24),ce(1152),ce(1152),ce(1152),ce(1152),ce(1152),ce(2304),ce(2304),ce(3456),ce(5760),ce(8),ce(8),ce(8),ce(16),ce(24),ce(48),ce(48),ce(96),ce(192),ce(384),ce(384),ce(384),ce(768),ce(96),ce(96),ce(96),ce(1152);function Lo(i,e,t={}){const n={type:"Feature"};return(0===t.id||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=i,n}function Rd(i,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}function BC(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}Math;class iP{constructor(e=[],t=tpe){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,s=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(s,o)>=0)break;t[e]=o,e=r}t[e]=s}_down(e){const{data:t,compare:n}=this,s=this.length>>1,r=t[e];for(;e<s;){let o=1+(e<<1),a=t[o];const l=o+1;if(l<this.length&&n(t[l],a)<0&&(o=l,a=t[l]),n(a,r)>=0)break;t[e]=a,e=o}t[e]=r}}function tpe(i,e){return i<e?-1:i>e?1:0}function sP(i,e){return i.p.x>e.p.x?1:i.p.x<e.p.x?-1:i.p.y!==e.p.y?i.p.y>e.p.y?1:-1:1}function npe(i,e){return i.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:i.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:i.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?i.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}class rP{constructor(e,t,n,s){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=n,this.eventId=s,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}}let sy=0,ry=0,oy=0;function oP(i,e){const t="Feature"===i.type?i.geometry:i;let n=t.coordinates;("Polygon"===t.type||"MultiLineString"===t.type)&&(n=[n]),"LineString"===t.type&&(n=[[n]]);for(let s=0;s<n.length;s++)for(let r=0;r<n[s].length;r++){let o=n[s][r][0],a=null;ry+=1;for(let l=0;l<n[s][r].length-1;l++){a=n[s][r][l+1];const c=new rP(o,sy,ry,oy),h=new rP(a,sy,ry,oy+1);c.otherEvent=h,h.otherEvent=c,sP(c,h)>0?(h.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(c),e.push(h),o=a,oy+=1}}sy+=1}class spe{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function rpe(i,e){if(null===i||null===e||i.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.rightSweepEvent)||i.leftSweepEvent.isSamePoint(e.leftSweepEvent)||i.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const t=i.leftSweepEvent.p.x,n=i.leftSweepEvent.p.y,s=i.rightSweepEvent.p.x,r=i.rightSweepEvent.p.y,o=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,h=(c-a)*(s-t)-(l-o)*(r-n);if(0===h)return!1;const p=((l-o)*(n-a)-(c-a)*(t-o))/h,f=((s-t)*(n-a)-(r-n)*(t-o))/h;return p>=0&&p<=1&&f>=0&&f<=1&&[t+p*(s-t),n+p*(r-n)]}function jC(i,e,t={}){const{removeDuplicates:n=!0,ignoreSelfIntersections:s=!0}=t;let r=[];"FeatureCollection"===i.type?r=r.concat(i.features):"Feature"===i.type?r.push(i):("LineString"===i.type||"Polygon"===i.type||"MultiLineString"===i.type||"MultiPolygon"===i.type)&&r.push(Lo(i)),"FeatureCollection"===e.type?r=r.concat(e.features):"Feature"===e.type?r.push(e):("LineString"===e.type||"Polygon"===e.type||"MultiLineString"===e.type||"MultiPolygon"===e.type)&&r.push(Lo(e));const o=function ape(i,e){const t=new iP([],sP);return function ipe(i,e){if("FeatureCollection"===i.type){const t=i.features;for(let n=0;n<t.length;n++)oP(t[n],e)}else oP(i,e)}(i,t),function ope(i,e){e=e||!1;const t=[],n=new iP([],npe);for(;i.length;){const s=i.pop();if(s.isLeftEndpoint){const r=new spe(s);for(let o=0;o<n.data.length;o++){const a=n.data[o];if(e&&a.leftSweepEvent.featureId===s.featureId)continue;const l=rpe(r,a);!1!==l&&t.push(l)}n.push(r)}else!1===s.isLeftEndpoint&&n.pop()}return t}(t,e)}(Rd(r),s);let a=[];if(n){const l={};o.forEach(c=>{const h=c.join(",");l[h]||(l[h]=!0,a.push(c))})}else a=o;return Rd(a.map(l=>function zC(i,e,t={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!BC(i[0])||!BC(i[1]))throw new Error("coordinates must contain numbers");return Lo({type:"Point",coordinates:i},e,t)}(l)))}function yh(i,e){!function aP(i,e){var t,n,s,r,o,a,l,c,h,u,d=0,p="FeatureCollection"===i.type,f="Feature"===i.type,g=p?i.features.length:1;for(t=0;t<g;t++){for(c=p?i.features[t].properties:f?i.properties:{},h=p?i.features[t].bbox:f?i.bbox:void 0,u=p?i.features[t].id:f?i.id:void 0,o=(l=!!(a=p?i.features[t].geometry:f?i.geometry:i)&&"GeometryCollection"===a.type)?a.geometries.length:1,s=0;s<o;s++)if(null!==(r=l?a.geometries[s]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,d,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],d,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,c,h,u))return!1;d++}}(i,function(t,n,s,r,o){var l,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Lo(t,s,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}for(var c=0;c<t.coordinates.length;c++)if(!1===e(Lo({type:l,coordinates:t.coordinates[c]},s),n,c))return!1})}function qC(i,e={}){const t=iy(i);switch(!e.properties&&"Feature"===i.type&&(e.properties=i.properties),t.type){case"Polygon":return function ppe(i,e={}){return lP(iy(i).coordinates,e.properties?e.properties:"Feature"===i.type?i.properties:{})}(t,e);case"MultiPolygon":return function fpe(i,e={}){const n=iy(i).coordinates,s=e.properties?e.properties:"Feature"===i.type?i.properties:{},r=[];return n.forEach(o=>{r.push(lP(o,s))}),Rd(r)}(t,e);default:throw new Error("invalid poly")}}function lP(i,e){return i.length>1?function tP(i,e,t={}){return Lo({type:"MultiLineString",coordinates:i},e,t)}(i,e):function HC(i,e,t={}){if(i.length<2)throw new Error("coordinates must be an array of two or more positions");return Lo({type:"LineString",coordinates:i},e,t)}(i[0],e)}function cP(i,e){for(let t=0;t<i.coordinates.length-1;t++)if(vpe(i.coordinates[t],i.coordinates[t+1],e.coordinates))return!0;return!1}function hP(i,e,t){for(const s of e.coordinates)if(Sf(s,i))return!0;return jC(e,qC(i),{ignoreSelfIntersections:t}).features.length>0}function vpe(i,e,t){const r=e[0]-i[0],o=e[1]-i[1];return(t[0]-i[0])*o-(t[1]-i[1])*r==0&&(Math.abs(r)>=Math.abs(o)?r>0?i[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=i[0]:o>0?i[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=i[1])}class GC{static equalsWithTolerance(e,t,n){return Math.abs(e-t)<=n}}class vr extends Error{constructor(e){super(e),this.name=Object.keys({Exception:vr})[0]}toString(){return this.message}}class at extends vr{constructor(e){super(e),this.name=Object.keys({IllegalArgumentException:at})[0]}}class _h{constructor(e,t){this.low=t||0,this.high=e||0}static toBinaryString(e){let t,n="";for(t=2147483648;t>0;t>>>=1)n+=(e.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)n+=(e.low&t)===t?"1":"0";return n}}function Ce(){}function Cs(){}function $s(){}Ce.NaN=NaN,Ce.isNaN=i=>Number.isNaN(i),Ce.isInfinite=i=>!Number.isFinite(i),Ce.MAX_VALUE=Number.MAX_VALUE,Ce.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Ce.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=new Float64Array(1),n=new Int32Array(t.buffer);Ce.doubleToLongBits=function(s){t[0]=s;let r=0|n[0],o=0|n[1];return 2146435072==(2146435072&o)&&0!=(1048575&o)&&0!==r&&(r=0,o=2146959360),new _h(o,r)},Ce.longBitsToDouble=function(s){return n[0]=s.low,n[1]=s.high,t[0]}}():function(){const e=Math.log2,t=Math.floor,n=Math.pow,s=function(){for(let r=53;r>0;r--){const o=n(2,r)-1;if(t(e(o))+1===r)return o}return 0}();Ce.doubleToLongBits=function(r){let o,a,l,c,h,u,d,p,f;if(r<0||1/r===Number.NEGATIVE_INFINITY?(u=1<<31,r=-r):u=0,0===r)return f=0,p=u,new _h(p,f);if(r===1/0)return f=0,p=2146435072|u,new _h(p,f);if(r!=r)return f=0,p=2146959360,new _h(p,f);if(c=0,f=0,o=t(r),o>1)if(o<=s)c=t(e(o)),c<=20?(f=0,p=o<<20-c&1048575):(l=c-20,a=n(2,l),f=o%a<<32-l,p=o/a&1048575);else for(l=o,f=0;a=l/2,l=t(a),0!==l;)c++,f>>>=1,f|=(1&p)<<31,p>>>=1,a!==l&&(p|=524288);if(d=c+1023,h=0===o,o=r-o,c<52&&0!==o)for(l=0;;){if(a=2*o,a>=1?(o=a-1,h?(d--,h=!1):(l<<=1,l|=1,c++)):(o=a,h?0==--d&&(c++,h=!1):(l<<=1,c++)),20===c)p|=l,l=0;else if(52===c){f|=l;break}if(1===a){c<20?p|=l<<20-c:c<52&&(f|=l<<52-c);break}}return p|=d<<20,p|=u,new _h(p,f)},Ce.longBitsToDouble=function(r){let o,a,l,c;const h=r.high,u=r.low,d=h&1<<31?-1:1;for(l=((2146435072&h)>>20)-1023,c=0,a=1<<19,o=1;o<=20;o++)h&a&&(c+=n(2,-o)),a>>>=1;for(a=1<<31,o=21;o<=52;o++)u&a&&(c+=n(2,-o)),a>>>=1;if(-1023===l){if(0===c)return 0*d;l=-1022}else{if(1024===l)return 0===c?d/0:NaN;c+=1}return d*c*n(2,l)}}();class Ys extends vr{constructor(e){super(e),this.name=Object.keys({RuntimeException:Ys})[0]}}class Ad extends Ys{constructor(){super(),Ad.constructor_.apply(this,arguments)}static constructor_(){0===arguments.length?Ys.constructor_.call(this):1===arguments.length&&Ys.constructor_.call(this,arguments[0])}}class Oe{static isTrue(){if(1===arguments.length)Oe.isTrue(arguments[0],null);else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new Ad:new Ad(t)}}static shouldNeverReachHere(){if(0===arguments.length)Oe.shouldNeverReachHere(null);else if(1===arguments.length){const e=arguments[0];throw new Ad("Should never reach here"+(null!==e?": "+e:""))}}static equals(){if(2===arguments.length)Oe.equals(arguments[0],arguments[1],null);else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];if(!t.equals(e))throw new Ad("Expected "+e+" but encountered "+t+(null!==n?": "+n:""))}}}function If(){}function il(){}const uP=new ArrayBuffer(8),xpe=new Float64Array(uP),dP=new Int32Array(uP);class j{constructor(){j.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)j.constructor_.call(this,0,0);else if(1===arguments.length){const e=arguments[0];j.constructor_.call(this,e.x,e.y,e.getZ())}else if(2===arguments.length)j.constructor_.call(this,arguments[0],arguments[1],j.NULL_ORDINATE);else if(3===arguments.length){const t=arguments[1],n=arguments[2];this.x=arguments[0],this.y=t,this.z=n}}static hashCode(e){return xpe[0]=e,dP[0]^dP[1]}equals2D(){if(1===arguments.length){const e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}if(2===arguments.length){const e=arguments[0],t=arguments[1];return!(!GC.equalsWithTolerance(this.x,e.x,t)||!GC.equalsWithTolerance(this.y,e.y,t))}}setM(e){throw new at("Invalid ordinate index: "+j.M)}equals3D(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||Ce.isNaN(this.getZ())&&Ce.isNaN(e.getZ()))}setX(e){this.x=e}compareTo(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}copy(){return new j(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(e){const t=this.x-e.x,n=this.y-e.y,s=this.getZ()-e.getZ();return Math.sqrt(t*t+n*n+s*s)}getY(){return this.y}getM(){return Ce.NaN}setOrdinate(e,t){switch(e){case j.X:this.x=t;break;case j.Y:this.y=t;break;case j.Z:this.setZ(t);break;default:throw new at("Invalid ordinate index: "+e)}}getZ(){return this.z}getOrdinate(e){switch(e){case j.X:return this.x;case j.Y:return this.y;case j.Z:return this.getZ()}throw new at("Invalid ordinate index: "+e)}equals(e){return e instanceof j&&this.equals2D(e)}equalInZ(e,t){return GC.equalsWithTolerance(this.getZ(),e.getZ(),t)}setZ(e){this.z=e}clone(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return Oe.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}setY(e){this.y=e}distance(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}hashCode(){let e=17;return e=37*e+j.hashCode(this.x),e=37*e+j.hashCode(this.y),e}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}get interfaces_(){return[Cs,If,$s]}}class vh{constructor(){vh.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)vh.constructor_.call(this,2);else if(1===arguments.length){const e=arguments[0];if(2!==e&&3!==e)throw new at("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}static compare(e,t){return e<t?-1:e>t?1:Ce.isNaN(e)?Ce.isNaN(t)?0:-1:Ce.isNaN(t)?1:0}compare(e,t){const n=vh.compare(e.x,t.x);if(0!==n)return n;const s=vh.compare(e.y,t.y);return 0!==s?s:this._dimensionsToTest<=2?0:vh.compare(e.getZ(),t.getZ())}get interfaces_(){return[il]}}function De(i,e){return i.interfaces_&&i.interfaces_.indexOf(e)>-1}j.DimensionalComparator=vh,j.NULL_ORDINATE=Ce.NaN,j.X=0,j.Y=1,j.Z=2,j.M=3;class kh{filter(e){}}class Wr extends vr{constructor(e){super(e),this.name=Object.keys({UnsupportedOperationException:Wr})[0]}}class Gn{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class ly extends vr{constructor(e){super(e),this.name=Object.keys({IndexOutOfBoundsException:ly})[0]}}class kr extends Gn{get(){}set(){}isEmpty(){}}class Ld extends vr{constructor(e){super(e),this.name=Object.keys({NoSuchElementException:Ld})[0]}}class se extends kr{constructor(e){super(),this.array=[],e instanceof Gn&&this.addAll(e)}get interfaces_(){return[kr,Gn]}ensureCapacity(){}add(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(e){for(const t of e)this.array.push(t)}set(e,t){const n=this.array[e];return this.array[e]=t,n}iterator(){return new bpe(this)}get(e){if(e<0||e>=this.size())throw new ly;return this.array[e]}isEmpty(){return 0===this.array.length}sort(e){e?this.array.sort((t,n)=>e.compare(t,n)):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(e){for(let t=0,n=this.array.length;t<n;t++)if(this.array[t]===e)return!!this.array.splice(t,1);return!1}[Symbol.iterator](){return this.array.values()}}class bpe{constructor(e){this.arrayList=e,this.position=0}next(){if(this.position===this.arrayList.size())throw new Ld;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(e){return this.arrayList.set(this.position-1,e)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class $r extends se{constructor(){super(),$r.constructor_.apply(this,arguments)}static constructor_(){if(0!==arguments.length)if(1===arguments.length){const e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.ensureCapacity(e.length),this.add(e,t)}}getCoordinate(e){return this.get(e)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&De(arguments[0],Gn)){const t=arguments[1];let n=!1;for(let s=arguments[0].iterator();s.hasNext();)this.add(s.next(),t),n=!0;return n}return super.addAll.apply(this,arguments)}clone(){const e=super.clone.call(this);for(let t=0;t<this.size();t++)e.add(t,this.get(t).clone());return e}closeRing(){if(this.size()>0){const e=this.get(0).copy();this.add(e,!1)}}toCoordinateArray(){if(0===arguments.length)return this.toArray($r.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray($r.coordArrayType);const t=this.size(),n=new Array(t).fill(null);for(let s=0;s<t;s++)n[s]=this.get(t-s-1);return n}}add(){if(1===arguments.length)return super.add.call(this,arguments[0]);if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof j&&"boolean"==typeof arguments[1]){const e=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(e))return null;super.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1];if(arguments[2])for(let s=0;s<e.length;s++)this.add(e[s],t);else for(let s=e.length-1;s>=0;s--)this.add(e[s],t);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof j){const e=arguments[0],t=arguments[1];if(!arguments[2]){const s=this.size();if(s>0&&(e>0&&this.get(e-1).equals2D(t)||e<s&&this.get(e).equals2D(t)))return null}super.add.call(this,e,t)}}else if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];let r=1;n>s&&(r=-1);for(let o=n;o!==s;o+=r)this.add(e[o],t);return!0}}}$r.coordArrayType=new Array(0).fill(null);let UC=(()=>{class i extends j{constructor(){super(),i.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)j.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof i){const t=arguments[0];j.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof j){const t=arguments[0];j.constructor_.call(this,t.x,t.y)}}else 2===arguments.length&&j.constructor_.call(this,arguments[0],arguments[1],j.NULL_ORDINATE)}setOrdinate(t,n){switch(t){case i.X:this.x=n;break;case i.Y:this.y=n;break;default:throw new at("Invalid ordinate index: "+t)}}setZ(t){throw new at("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new i(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}getZ(){return j.NULL_ORDINATE}getOrdinate(t){switch(t){case i.X:return this.x;case i.Y:return this.y}throw new at("Invalid ordinate index: "+t)}}return i.X=0,i.Y=1,i.Z=-1,i.M=-1,i})(),WC=(()=>{class i extends j{constructor(){super(),i.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)j.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){const t=arguments[0];j.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof j){const t=arguments[0];j.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const s=arguments[2];j.constructor_.call(this,arguments[0],arguments[1],j.NULL_ORDINATE),this._m=s}}setM(t){this._m=t}setZ(t){throw new at("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new i(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}getM(){return this._m}setOrdinate(t,n){switch(t){case i.X:this.x=n;break;case i.Y:this.y=n;break;case i.M:this._m=n;break;default:throw new at("Invalid ordinate index: "+t)}}getZ(){return j.NULL_ORDINATE}getOrdinate(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.M:return this._m}throw new at("Invalid ordinate index: "+t)}}return i.X=0,i.Y=1,i.Z=-1,i.M=2,i})();class wh extends j{constructor(){super(),wh.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)j.constructor_.call(this),this._m=0;else if(1===arguments.length)if(arguments[0]instanceof wh){const e=arguments[0];j.constructor_.call(this,e),this._m=e._m}else arguments[0]instanceof j&&(j.constructor_.call(this,arguments[0]),this._m=this.getM());else if(4===arguments.length){const s=arguments[3];j.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._m=s}}setM(e){this._m=e}getOrdinate(e){switch(e){case j.X:return this.x;case j.Y:return this.y;case j.Z:return this.getZ();case j.M:return this.getM()}throw new at("Invalid ordinate index: "+e)}copy(){return new wh(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}getM(){return this._m}setOrdinate(e,t){switch(e){case j.X:this.x=t;break;case j.Y:this.y=t;break;case j.Z:this.z=t;break;case j.M:this._m=t;break;default:throw new at("Invalid ordinate index: "+e)}}}class Pd{static measures(e){return e instanceof UC?0:e instanceof WC||e instanceof wh?1:0}static create(){if(1===arguments.length)return Pd.create(arguments[0],0);if(2===arguments.length){const e=arguments[0],t=arguments[1];return 2===e?new UC:3===e&&0===t?new j:3===e&&1===t?new WC:4===e&&1===t?new wh:new j}}static dimension(e){return e instanceof UC?2:e instanceof WC?3:e instanceof wh?4:3}}class xh{static log10(e){const t=Math.log(e);return Ce.isInfinite(t)||Ce.isNaN(t)?t:t/xh.LOG_10}static min(e,t,n,s){let r=e;return t<r&&(r=t),n<r&&(r=n),s<r&&(r=s),r}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}}static average(e,t){return(e+t)/2}static wrap(e,t){return e<0?t- -e%t:e%t}static max(){if(3===arguments.length){const t=arguments[1],n=arguments[2];let s=arguments[0];return t>s&&(s=t),n>s&&(s=n),s}if(4===arguments.length){const t=arguments[1],n=arguments[2],s=arguments[3];let r=arguments[0];return t>r&&(r=t),n>r&&(r=n),s>r&&(r=s),r}}}xh.LOG_10=Math.log(10);class is{static arraycopy(e,t,n,s,r){let o=0;for(let a=t;a<t+r;a++)n[s+o]=e[a],o++}static getProperty(e){return{"line.separator":"\n"}[e]}}class mt{constructor(){mt.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof j){const e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof mt&&this.init(arguments[0]);else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])}static intersects(){if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];let r=Math.min(n.x,s.x),o=Math.max(n.x,s.x),a=Math.min(e.x,t.x),l=Math.max(e.x,t.x);return!(a>o||l<r||(r=Math.min(n.y,s.y),o=Math.max(n.y,s.y),a=Math.min(e.y,t.y),l=Math.max(e.y,t.y),a>o)||l<r)}}getArea(){return this.getWidth()*this.getHeight()}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof j){const e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof mt){const e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.isNull()?(this._minx=e,this._maxx=e,this._miny=t,this._maxy=t):(e<this._minx&&(this._minx=e),e>this._maxx&&(this._maxx=e),t<this._miny&&(this._miny=t),t>this._maxy&&(this._maxy=t))}}compareTo(e){const t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}translate(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}copy(){return new mt(this)}expandBy(){if(1===arguments.length){const e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=t,this._maxy+=t,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof mt)return this.covers(arguments[0]);if(arguments[0]instanceof j)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])}hashCode(){let e=17;return e=37*e+j.hashCode(this._minx),e=37*e+j.hashCode(this._maxx),e=37*e+j.hashCode(this._miny),e=37*e+j.hashCode(this._maxy),e}equals(e){if(!(e instanceof mt))return!1;const t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}intersection(e){return this.isNull()||e.isNull()||!this.intersects(e)?new mt:new mt(this._minx>e._minx?this._minx:e._minx,this._maxx<e._maxx?this._maxx:e._maxx,this._miny>e._miny?this._miny:e._miny,this._maxy<e._maxy?this._maxy:e._maxy)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof j){const e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof mt){const e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];return!this.isNull()&&e>=this._minx&&e<=this._maxx&&t>=this._miny&&t<=this._maxy}}intersects(){if(1===arguments.length){if(arguments[0]instanceof mt){const e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof j){const e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof j&&arguments[1]instanceof j){const e=arguments[0],t=arguments[1];return!(this.isNull()||(e.x<t.x?e.x:t.x)>this._maxx||(e.x>t.x?e.x:t.x)<this._minx||(e.y<t.y?e.y:t.y)>this._maxy||(e.y>t.y?e.y:t.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return!this.isNull()&&!(e>this._maxx||e<this._minx||t>this._maxy||t<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}minExtent(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return e<t?e:t}getWidth(){return this.isNull()?0:this._maxx-this._minx}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(e){return!(!this.isNull()&&!e.isNull())||e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return e>t?e:t}centre(){return this.isNull()?null:new j((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof j){const e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof mt){const e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];e<t?(this._minx=e,this._maxx=t):(this._minx=t,this._maxx=e),n<s?(this._miny=n,this._maxy=s):(this._miny=s,this._maxy=n)}}getMaxY(){return this._maxy}distance(e){if(this.intersects(e))return 0;let t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);let n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}get interfaces_(){return[Cs,$s]}}class Pt{static scroll(e,t){const n=Pt.indexOf(t,e);if(n<0)return null;const s=new Array(e.length).fill(null);is.arraycopy(e,n,s,0,e.length-n),is.arraycopy(e,0,s,e.length-n,n),is.arraycopy(s,0,e,0,e.length)}static removeRepeatedPoints(e){return Pt.hasRepeatedPoints(e)?new $r(e,!1).toCoordinateArray():e}static reverse(e){const t=e.length-1,n=Math.trunc(t/2);for(let s=0;s<=n;s++){const r=e[s];e[s]=e[t-s],e[t-s]=r}}static removeNull(e){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&t++;const n=new Array(t).fill(null);if(0===t)return n;let s=0;for(let r=0;r<e.length;r++)null!==e[r]&&(n[s++]=e[r]);return n}static copyDeep(){if(1===arguments.length){const e=arguments[0],t=new Array(e.length).fill(null);for(let n=0;n<e.length;n++)t[n]=e[n].copy();return t}if(5===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3],r=arguments[4];for(let o=0;o<r;o++)n[s+o]=e[t+o].copy()}}static isEqualReversed(e,t){for(let n=0;n<e.length;n++)if(0!==e[n].compareTo(t[e.length-n-1]))return!1;return!0}static envelope(e){const t=new mt;for(let n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}static extract(e,t,n){t=xh.clamp(t,0,e.length);let s=(n=xh.clamp(n,-1,e.length))-t+1;n<0&&(s=0),t>=e.length&&(s=0),n<t&&(s=0);const r=new Array(s).fill(null);if(0===s)return r;let o=0;for(let a=t;a<=n;a++)r[o++]=e[a];return r}static isRing(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))}static ptNotInList(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(Pt.indexOf(s,t)<0)return s}return null}static equals(){if(2===arguments.length){const e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(0!==n.compare(e[s],t[s]))return!1;return!0}}static intersection(e,t){const n=new $r;for(let s=0;s<e.length;s++)t.intersects(e[s])&&n.add(e[s],!0);return n.toCoordinateArray()}static measures(e){if(null===e||0===e.length)return 0;let t=0;for(const n of e)t=Math.max(t,Pd.measures(n));return t}static hasRepeatedPoints(e){for(let t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}static toCoordinateArray(e){return e.toArray(Pt.coordArrayType)}static dimension(e){if(null===e||0===e.length)return 3;let t=0;for(const n of e)t=Math.max(t,Pd.dimension(n));return t}static atLeastNCoordinatesOrNothing(e,t){return t.length>=e?t:[]}static indexOf(e,t){for(let n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}static increasingDirection(e){for(let t=0;t<Math.trunc(e.length/2);t++){const s=e[t].compareTo(e[e.length-1-t]);if(0!==s)return s}return 1}static compare(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e[n].compareTo(t[n]);if(0!==s)return s;n++}return n<t.length?-1:n<e.length?1:0}static minCoordinate(e){let t=null;for(let n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}}Pt.ForwardComparator=class Cpe{compare(e,t){return Pt.compare(e,t)}get interfaces_(){return[il]}},Pt.BidirectionalComparator=class Epe{compare(e,t){const n=e,s=t;if(n.length<s.length)return-1;if(n.length>s.length)return 1;if(0===n.length)return 0;const r=Pt.compare(n,s);return Pt.isEqualReversed(n,s)?0:r}OLDcompare(e,t){const n=e,s=t;if(n.length<s.length)return-1;if(n.length>s.length)return 1;if(0===n.length)return 0;const r=Pt.increasingDirection(n),o=Pt.increasingDirection(s);let a=r>0?0:n.length-1,l=o>0?0:n.length-1;for(let c=0;c<n.length;c++){const h=n[a].compareTo(s[l]);if(0!==h)return h;a+=r,l+=o}return 0}get interfaces_(){return[il]}},Pt.coordArrayType=new Array(0).fill(null);class $C{static isWhitespace(e){return e<=32&&e>=0||127===e}static toUpperCase(e){return e.toUpperCase()}}let Ee=(()=>{class i{static toDimensionSymbol(t){switch(t){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new at("Unknown dimension value: "+t)}static toDimensionValue(t){switch($C.toUpperCase(t)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new at("Unknown dimension symbol: "+t)}}return i.P=0,i.L=1,i.A=2,i.FALSE=-1,i.TRUE=-2,i.DONTCARE=-3,i.SYM_FALSE="F",i.SYM_TRUE="T",i.SYM_DONTCARE="*",i.SYM_P="0",i.SYM_L="1",i.SYM_A="2",i})(),ge=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(i.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const n=arguments[0];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n)}if(2===arguments.length){const n=arguments[0],s=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,s)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new at("This method does not support GeometryCollection arguments")}equal(t,n,s){return 0===s?t.equals(n):t.distance(n)<=s}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new mt(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,n){const s=t.iterator(),r=n.iterator();for(;s.hasNext()&&r.hasNext();){const o=s.next(),a=r.next(),l=o.compareTo(a);if(0!==l)return l}return s.hasNext()?1:r.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getTypeCode()==t.getTypeCode()}get interfaces_(){return[If,Cs,$s]}getClass(){return i}static hasNonEmptyElements(t){for(let n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1}static hasNullElements(t){for(let n=0;n<t.length;n++)if(null===t[n])return!0;return!1}}return i.constructor_=function(e){!e||(this._envelope=null,this._userData=null,this._factory=e,this._SRID=e.getSRID())},i.TYPECODE_POINT=0,i.TYPECODE_MULTIPOINT=1,i.TYPECODE_LINESTRING=2,i.TYPECODE_LINEARRING=3,i.TYPECODE_MULTILINESTRING=4,i.TYPECODE_POLYGON=5,i.TYPECODE_MULTIPOLYGON=6,i.TYPECODE_GEOMETRYCOLLECTION=7,i.TYPENAME_POINT="Point",i.TYPENAME_MULTIPOINT="MultiPoint",i.TYPENAME_LINESTRING="LineString",i.TYPENAME_LINEARRING="LinearRing",i.TYPENAME_MULTILINESTRING="MultiLineString",i.TYPENAME_POLYGON="Polygon",i.TYPENAME_MULTIPOLYGON="MultiPolygon",i.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",i.geometryChangedFilter={get interfaces_(){return[kh]},filter(e){e.geometryChangedAction()}},i})();class Od{filter(e){}}class pP{}let Qt=(()=>{class i{getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getM(t){if(this.hasM()){const n=this.getDimension()-this.getMeasures();return this.getOrdinate(t,n)}return Ce.NaN}setOrdinate(t,n,s){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):Ce.NaN}size(){}getOrdinate(t,n){}get interfaces_(){return[If]}}return i.X=0,i.Y=1,i.Z=2,i.M=3,i})();class ii{static scroll(){if(2===arguments.length){if(De(arguments[0],Qt)&&Number.isInteger(arguments[1])){const e=arguments[0];ii.scroll(e,arguments[1],ii.isRing(e))}else if(De(arguments[0],Qt)&&arguments[1]instanceof j){const e=arguments[0],n=ii.indexOf(arguments[1],e);if(n<=0)return null;ii.scroll(e,n)}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];if(t<=0)return null;const r=e.copy(),o=n?e.size()-1:e.size();for(let a=0;a<o;a++)for(let l=0;l<e.getDimension();l++)e.setOrdinate(a,l,r.getOrdinate((t+a)%o,l));if(n)for(let a=0;a<e.getDimension();a++)e.setOrdinate(o,a,e.getOrdinate(0,a))}}static isEqual(e,t){const n=e.size();if(n!==t.size())return!1;const r=Math.min(e.getDimension(),t.getDimension());for(let o=0;o<n;o++)for(let a=0;a<r;a++){const l=e.getOrdinate(o,a),c=t.getOrdinate(o,a);if(!(e.getOrdinate(o,a)===t.getOrdinate(o,a)||Ce.isNaN(l)&&Ce.isNaN(c)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const e=arguments[0];return ii.minCoordinateIndex(e,0,e.size()-1)}if(3===arguments.length){const e=arguments[0],n=arguments[2];let s=-1,r=null;for(let o=arguments[1];o<=n;o++){const a=e.getCoordinate(o);(null===r||r.compareTo(a)>0)&&(r=a,s=o)}return s}}static extend(e,t,n){const s=e.create(n,t.getDimension()),r=t.size();if(ii.copy(t,0,s,0,r),r>0)for(let o=r;o<n;o++)ii.copy(t,r-1,s,o,1);return s}static reverse(e){const t=e.size()-1,n=Math.trunc(t/2);for(let s=0;s<=n;s++)ii.swap(e,s,t-s)}static ensureValidRing(e,t){const n=t.size();return 0===n?t:n<=3?ii.createClosedRing(e,t,4):t.getOrdinate(0,Qt.X)===t.getOrdinate(n-1,Qt.X)&&t.getOrdinate(0,Qt.Y)===t.getOrdinate(n-1,Qt.Y)?t:ii.createClosedRing(e,t,n+1)}static minCoordinate(e){let t=null;for(let n=0;n<e.size();n++){const s=e.getCoordinate(n);(null===t||t.compareTo(s)>0)&&(t=s)}return t}static copyCoord(e,t,n,s){const r=Math.min(e.getDimension(),n.getDimension());for(let o=0;o<r;o++)n.setOrdinate(s,o,e.getOrdinate(t,o))}static isRing(e){const t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,Qt.X)===e.getOrdinate(t-1,Qt.X)&&e.getOrdinate(0,Qt.Y)===e.getOrdinate(t-1,Qt.Y)}static swap(e,t,n){if(t===n)return null;for(let s=0;s<e.getDimension();s++){const r=e.getOrdinate(t,s);e.setOrdinate(t,s,e.getOrdinate(n,s)),e.setOrdinate(n,s,r)}}static copy(e,t,n,s,r){for(let o=0;o<r;o++)ii.copyCoord(e,t+o,n,s+o)}static indexOf(e,t){for(let n=0;n<t.size();n++)if(e.x===t.getOrdinate(n,Qt.X)&&e.y===t.getOrdinate(n,Qt.Y))return n;return-1}static createClosedRing(e,t,n){const s=e.create(n,t.getDimension()),r=t.size();ii.copy(t,0,s,0,r);for(let o=r;o<n;o++)ii.copy(t,0,s,o,1);return s}}class sc{filter(e){}}class Nd{filter(e,t){}isGeometryChanged(){}isDone(){}}class At extends ge{constructor(){super(),At.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0!==arguments.length&&2===arguments.length){const e=arguments[0];ge.constructor_.call(this,arguments[1]),this.init(e)}}computeEnvelopeInternal(){return this.isEmpty()?new mt:this._points.expandEnvelope(new mt)}isRing(){return this.isClosed()&&Pt.isRing(this.getCoordinates())}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new At(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const n=e;if(this._points.size()!==n._points.size())return!1;for(let s=0;s<this._points.size();s++)if(!this.equal(this._points.getCoordinate(s),n._points.getCoordinate(s),t))return!1;return!0}return super.equalsExact.apply(this,arguments)}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const e=this._points.copy();return ii.reverse(e),this.getFactory().createLineString(e)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return ge.TYPECODE_LINESTRING}getDimension(){return 1}getBoundary(){throw new Wr}isEquivalentClass(e){return e instanceof At}getCoordinateSequence(){return this._points}getPointN(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}normalize(){for(let e=0;e<Math.trunc(this._points.size()/2);e++){const t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0){const n=this._points.copy();ii.reverse(n),this._points=n}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?Ee.FALSE:0}getLength(){return class Mpe{static ofLine(e){const t=e.size();if(t<=1)return 0;let n=0;const s=new j;e.getCoordinate(0,s);let r=s.x,o=s.y;for(let a=1;a<t;a++){e.getCoordinate(a,s);const l=s.x,c=s.y,h=l-r,u=c-o;n+=Math.sqrt(h*h+u*u),r=l,o=c}return n}}.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let n=0,s=0;for(;n<this._points.size()&&s<t._points.size();){const r=this._points.getCoordinate(n).compareTo(t._points.getCoordinate(s));if(0!==r)return r;n++,s++}return n<this._points.size()?1:s<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)}apply(){if(De(arguments[0],Od)){const e=arguments[0];for(let t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(De(arguments[0],Nd)){const e=arguments[0];if(0===this._points.size())return null;for(let t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else(De(arguments[0],sc)||De(arguments[0],kh))&&arguments[0].filter(this)}getCoordinateN(e){return this._points.getCoordinate(e)}getGeometryType(){return ge.TYPENAME_LINESTRING}isEmpty(){return 0===this._points.size()}init(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new at("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}isCoordinate(e){for(let t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}get interfaces_(){return[pP]}}let wr=(()=>{class i extends At{constructor(){super(),i.constructor_.apply(this,arguments)}static constructor_(){At.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction()}copyInternal(){return new i(this._points.copy(),this._factory)}getBoundaryDimension(){return Ee.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return ii.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return ge.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new at("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new at("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return ge.TYPENAME_LINEARRING}}return i.MINIMUM_VALID_SIZE=4,i})();class fP{create(){if(1===arguments.length)arguments[0]instanceof Array||De(arguments[0],Qt);else if(2===arguments.length);else if(3===arguments.length)return this.create(arguments[0],arguments[1])}}class cy{constructor(e){this.str=e}append(e){this.str+=e}setCharAt(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}toString(){return this.str}}class Yr{constructor(){Yr.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];Yr.constructor_.call(this,e,Pt.dimension(e),Pt.measures(e))}else if(Number.isInteger(arguments[0])){const e=arguments[0];this._coordinates=new Array(e).fill(null);for(let t=0;t<e;t++)this._coordinates[t]=new j}else if(De(arguments[0],Qt)){const e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;this._dimension=e.getDimension(),this._measures=e.getMeasures(),this._coordinates=new Array(e.size()).fill(null);for(let t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const e=arguments[0];Yr.constructor_.call(this,e,arguments[1],Pt.measures(e))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1];this._coordinates=new Array(e).fill(null),this._dimension=t;for(let n=0;n<e;n++)this._coordinates[n]=Pd.create(t)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const e=arguments[0],n=arguments[2];this._dimension=arguments[1],this._measures=n,this._coordinates=null===e?new Array(0).fill(null):e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1],n=arguments[2];this._coordinates=new Array(e).fill(null),this._dimension=t,this._measures=n;for(let s=0;s<e;s++)this._coordinates[s]=this.createCoordinate()}}getCoordinate(){if(1===arguments.length)return this._coordinates[arguments[0]];2===arguments.length&&arguments[1].setCoordinate(this._coordinates[arguments[0]])}getCoordinateCopy(e){const t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}createCoordinate(){return Pd.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(e){return this._coordinates[e].x}getMeasures(){return this._measures}expandEnvelope(e){for(let t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}copy(){const e=new Array(this.size()).fill(null);for(let t=0;t<this._coordinates.length;t++){const n=this.createCoordinate();n.setCoordinate(this._coordinates[t]),e[t]=n}return new Yr(e,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const e=new cy(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(let t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}getY(e){return this._coordinates[e].y}toCoordinateArray(){return this._coordinates}getM(e){return this.hasM()?this._coordinates[e].getM():Ce.NaN}setOrdinate(e,t,n){switch(t){case Qt.X:this._coordinates[e].x=n;break;case Qt.Y:this._coordinates[e].y=n;break;default:this._coordinates[e].setOrdinate(t,n)}}getZ(e){return this.hasZ()?this._coordinates[e].getZ():Ce.NaN}size(){return this._coordinates.length}getOrdinate(e,t){switch(t){case Qt.X:return this._coordinates[e].x;case Qt.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}get interfaces_(){return[Qt,$s]}}class Fd{static instance(){return Fd.instanceObject}readResolve(){return Fd.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Yr(arguments[0]);if(De(arguments[0],Qt))return new Yr(arguments[0])}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Yr(arguments[0],t)}if(3===arguments.length){let n=arguments[2],s=arguments[1]-n;return n>1&&(n=1),s>3&&(s=3),s<2&&(s=2),new Yr(arguments[0],s+n,n)}}}get interfaces_(){return[fP,$s]}}Fd.instanceObject=new Fd;class gP extends Gn{contains(){}}class Spe extends gP{}class Mh extends Spe{constructor(e){super(),this.array=[],e instanceof Gn&&this.addAll(e)}contains(e){for(const t of this.array)if(0===t.compareTo(e))return!0;return!1}add(e){if(this.contains(e))return!1;for(let t=0,n=this.array.length;t<n;t++)if(1===this.array[t].compareTo(e))return!!this.array.splice(t,0,e);return this.array.push(e),!0}addAll(e){for(const t of e)this.add(t);return!0}remove(){throw new Wr}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new Ipe(this.array)}}class Ipe{constructor(e){this.array=e,this.position=0}next(){if(this.position===this.array.length)throw new Ld;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new Wr}}class rc{static sort(){const e=arguments[0];if(1===arguments.length)e.sort((t,n)=>t.compareTo(n));else if(2===arguments.length)e.sort((t,n)=>arguments[1].compare(t,n));else if(3===arguments.length){const t=e.slice(arguments[1],arguments[2]);t.sort();const n=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);for(const s of n)e.push(s)}else if(4===arguments.length){const t=e.slice(arguments[1],arguments[2]);t.sort((s,r)=>arguments[3].compare(s,r));const n=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);for(const s of n)e.push(s)}}static asList(e){const t=new se;for(const n of e)t.add(n);return t}static copyOf(e,t){return e.slice(0,t)}}class qt extends ge{constructor(){super(),qt.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0!==arguments.length&&2===arguments.length){let e=arguments[0];if(ge.constructor_.call(this,arguments[1]),null===e&&(e=[]),ge.hasNullElements(e))throw new at("geometries must not contain null elements");this._geometries=e}}computeEnvelopeInternal(){const e=new mt;for(let t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e}getGeometryN(e){return this._geometries[e]}getCoordinates(){const e=new Array(this.getNumPoints()).fill(null);let t=-1;for(let n=0;n<this._geometries.length;n++){const s=this._geometries[n].getCoordinates();for(let r=0;r<s.length;r++)t++,e[t]=s[r]}return e}getArea(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new qt(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const n=e;if(this._geometries.length!==n._geometries.length)return!1;for(let s=0;s<this._geometries.length;s++)if(!this._geometries[s].equalsExact(n._geometries[s],t))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){const e=this._geometries.length,t=new se(e);for(let n=0;n<e;n++)t.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(t)}getTypeCode(){return ge.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let e=Ee.FALSE;for(let t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e}getNumGeometries(){return this._geometries.length}getBoundary(){return ge.checkNotGeometryCollection(this),Oe.shouldNeverReachHere(),null}getGeometryType(){return ge.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}normalize(){for(let e=0;e<this._geometries.length;e++)this._geometries[e].normalize();rc.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let e=Ee.FALSE;for(let t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e}getLength(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e}getNumPoints(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e}compareToSameClass(){if(1===arguments.length){const e=arguments[0],t=new Mh(rc.asList(this._geometries)),n=new Mh(rc.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){const t=arguments[1],n=arguments[0],s=this.getNumGeometries(),r=n.getNumGeometries();let o=0;for(;o<s&&o<r;){const a=this.getGeometryN(o),l=n.getGeometryN(o),c=a.compareToSameClass(l,t);if(0!==c)return c;o++}return o<s?1:o<r?-1:0}}apply(){if(De(arguments[0],Od)){const e=arguments[0];for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(De(arguments[0],Nd)){const e=arguments[0];if(0===this._geometries.length)return null;for(let t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(De(arguments[0],sc)){const e=arguments[0];e.filter(this);for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(De(arguments[0],kh)){const e=arguments[0];e.filter(this);for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}}class bh{}class Ks extends qt{constructor(){super(),Ks.constructor_.apply(this,arguments)}static constructor_(){qt.constructor_.call(this,arguments[0],arguments[1])}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new Ks(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return ge.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const e=new se;for(let n=0;n<this._geometries.length;n++){const r=this._geometries[n].getBoundary();for(let o=0;o<r.getNumGeometries();o++)e.add(r.getGeometryN(o))}const t=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(t))}getGeometryType(){return ge.TYPENAME_MULTIPOLYGON}get interfaces_(){return[bh]}}class mP{get(){}put(){}size(){}values(){}entrySet(){}}class sl extends gP{constructor(e){super(),this.map=new Map,e instanceof Gn&&this.addAll(e)}contains(e){const t=e.hashCode?e.hashCode():e;return!!this.map.has(t)}add(e){const t=e.hashCode?e.hashCode():e;return!this.map.has(t)&&!!this.map.set(t,e)}addAll(e){for(const t of e)this.add(t);return!0}remove(){throw new Wr}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new Tpe(this.map)}[Symbol.iterator](){return this.map}}class Tpe{constructor(e){this.iterator=e.values();const{done:t,value:n}=this.iterator.next();this.done=t,this.value=n}next(){if(this.done)throw new Ld;const e=this.value,{done:t,value:n}=this.iterator.next();return this.done=t,this.value=n,e}hasNext(){return!this.done}remove(){throw new Wr}}class yP extends mP{constructor(){super(),this.map=new Map}get(e){return this.map.get(e)||null}put(e,t){return this.map.set(e,t),t}values(){const e=new se,t=this.map.values();let n=t.next();for(;!n.done;)e.add(n.value),n=t.next();return e}entrySet(){const e=new sl;return this.map.entries().forEach(t=>e.add(t)),e}size(){return this.map.size()}}class Vd{constructor(e){this.value=e}intValue(){return this.value}compareTo(e){return this.value<e?-1:this.value>e?1:0}static compare(e,t){return e<t?-1:e>t?1:0}static isNan(e){return Number.isNaN(e)}static valueOf(e){return new Vd(e)}}class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Jt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ca){const e=arguments[0];this._modelType=e,e===Jt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const e=arguments[0];this._modelType=Jt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Jt){const e=arguments[0];this._modelType=e._modelType,this._scale=e._scale}}static mostPrecise(e,t){return e.compareTo(t)>=0?e:t}equals(e){return e instanceof Jt&&(this._modelType===e._modelType&&this._scale===e._scale)}compareTo(e){const t=e,n=this.getMaximumSignificantDigits(),s=t.getMaximumSignificantDigits();return Vd.compare(n,s)}getType(){return this._modelType}toString(){let e="UNKNOWN";return this._modelType===Jt.FLOATING?e="Floating":this._modelType===Jt.FLOATING_SINGLE?e="Floating-Single":this._modelType===Jt.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}makePrecise(){if("number"==typeof arguments[0]){const e=arguments[0];return Ce.isNaN(e)||this._modelType===Jt.FLOATING_SINGLE?e:this._modelType===Jt.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof j){const e=arguments[0];if(this._modelType===Jt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}getMaximumSignificantDigits(){let e=16;return this._modelType===Jt.FLOATING?e=16:this._modelType===Jt.FLOATING_SINGLE?e=6:this._modelType===Jt.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}setScale(e){this._scale=Math.abs(e)}getScale(){return this._scale}isFloating(){return this._modelType===Jt.FLOATING||this._modelType===Jt.FLOATING_SINGLE}get interfaces_(){return[$s,Cs]}}class ca{constructor(){ca.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const e=arguments[0];this._name=e,ca.nameToTypeMap.put(e,this)}readResolve(){return ca.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[$s]}}ca.nameToTypeMap=new yP,Jt.Type=ca,Jt.FIXED=new ca("FIXED"),Jt.FLOATING=new ca("FLOATING"),Jt.FLOATING_SINGLE=new ca("FLOATING SINGLE"),Jt.maximumPreciseValue=9007199254740992;class Kr extends qt{constructor(){super(),Kr.constructor_.apply(this,arguments)}static constructor_(){qt.constructor_.call(this,arguments[0],arguments[1])}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new Kr(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?Ee.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}getTypeCode(){return ge.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new Wr}getGeometryType(){return ge.TYPENAME_MULTILINESTRING}get interfaces_(){return[pP]}}class _P{}class oc extends vr{constructor(e){super(e),this.name=Object.keys({IllegalStateException:oc})[0]}}class Un extends ge{constructor(){super(),Un.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const e=arguments[0];ge.constructor_.call(this,arguments[1]),this.init(e)}computeEnvelopeInternal(){if(this.isEmpty())return new mt;const e=new mt;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new Un(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))}return super.equalsExact.apply(this,arguments)}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return ge.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new oc("getX called on empty Point");return this.getCoordinate().x}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return ge.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new oc("getY called on empty Point");return this.getCoordinate().y}isSimple(){return!0}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return Ee.FALSE}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)}apply(){if(De(arguments[0],Od)){const e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(De(arguments[0],Nd)){const e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(De(arguments[0],sc)||De(arguments[0],kh))&&arguments[0].filter(this)}isEmpty(){return 0===this._coordinates.size()}init(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Oe.isTrue(e.size()<=1),this._coordinates=e}get interfaces_(){return[_P]}}class Tf{static ofRingSigned(){if(arguments[0]instanceof Array){const e=arguments[0];if(e.length<3)return 0;let t=0;const n=e[0].x;for(let s=1;s<e.length-1;s++)t+=(e[s].x-n)*(e[s-1].y-e[s+1].y);return t/2}if(De(arguments[0],Qt)){const e=arguments[0],t=e.size();if(t<3)return 0;const n=new j,s=new j,r=new j;e.getCoordinate(0,s),e.getCoordinate(1,r);const o=s.x;r.x-=o;let a=0;for(let l=1;l<t-1;l++)n.y=s.y,s.x=r.x,s.y=r.y,e.getCoordinate(l+1,r),r.x-=o,a+=s.x*(n.y-r.y);return a/2}}static ofRing(){return arguments[0]instanceof Array||De(arguments[0],Qt)?Math.abs(Tf.ofRingSigned(arguments[0])):void 0}}class Df{constructor(e){this.str=e}append(e){this.str+=e}setCharAt(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}toString(){return this.str}}class te{constructor(){te.constructor_.apply(this,arguments)}static constructor_(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof te?this.init(arguments[0]):"string"==typeof arguments[0]&&te.constructor_.call(this,te.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[1],n=arguments[2],s=arguments[3];return te.determinant(te.valueOf(arguments[0]),te.valueOf(t),te.valueOf(n),te.valueOf(s))}if(arguments[3]instanceof te&&arguments[2]instanceof te&&arguments[0]instanceof te&&arguments[1]instanceof te){const t=arguments[1],n=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(n))}}static sqr(e){return te.valueOf(e).selfMultiply(e)}static valueOf(){return"string"==typeof arguments[0]?te.parse(arguments[0]):"number"==typeof arguments[0]?new te(arguments[0]):void 0}static sqrt(e){return te.valueOf(e).sqrt()}static parse(e){let t=0;const n=e.length;for(;$C.isWhitespace(e.charAt(t));)t++;let s=!1;if(t<n){const d=e.charAt(t);("-"===d||"+"===d)&&(t++,"-"===d&&(s=!0))}const r=new te;let o=0,a=0,l=0,c=!1;for(;!(t>=n);){const d=e.charAt(t);if(t++,$C.isDigit(d)){const p=d-"0";r.selfMultiply(te.TEN),r.selfAdd(p),o++}else{if("."!==d){if("e"===d||"E"===d){const p=e.substring(t);try{l=Vd.parseInt(p)}catch(f){throw f instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+p+" in string "+e):f}break}throw new NumberFormatException("Unexpected character '"+d+"' at position "+t+" in string "+e)}a=o,c=!0}}let h=r;c||(a=o);const u=o-a-l;if(0===u)h=r;else if(u>0){const d=te.TEN.pow(u);h=r.divide(d)}else if(u<0){const d=te.TEN.pow(-u);h=r.multiply(d)}return s?h.negate():h}static createNaN(){return new te(Ce.NaN,Ce.NaN)}static copy(e){return new te(e)}static magnitude(e){const t=Math.abs(e),n=Math.log(t)/Math.log(10);let s=Math.trunc(Math.floor(n));return 10*Math.pow(10,s)<=t&&(s+=1),s}static stringOfChar(e,t){const n=new Df;for(let s=0;s<t;s++)n.append(e);return n.toString()}le(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}extractSignificantDigits(e,t){let n=this.abs(),s=te.magnitude(n._hi);const r=te.TEN.pow(s);n=n.divide(r),n.gt(te.TEN)?(n=n.divide(te.TEN),s+=1):n.lt(te.ONE)&&(n=n.multiply(te.TEN),s-=1);const o=s+1,a=new Df,l=te.MAX_PRINT_DIGITS-1;for(let c=0;c<=l;c++){e&&c===o&&a.append(".");const h=Math.trunc(n._hi);if(h<0)break;let u=!1,d=0;h>9?(u=!0,d="9"):d="0"+h,a.append(d),n=n.subtract(te.valueOf(h)).multiply(te.TEN),u&&n.selfAdd(te.TEN);let p=!0;const f=te.magnitude(n._hi);if(f<0&&Math.abs(f)>=l-c&&(p=!1),!p)break}return t[0]=s,a.toString()}sqr(){return this.multiply(this)}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}setValue(){return arguments[0]instanceof te||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}multiply(){if(arguments[0]instanceof te){const e=arguments[0];return e.isNaN()?te.createNaN():te.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){const e=arguments[0];return Ce.isNaN(e)?te.createNaN():te.copy(this).selfMultiply(e,0)}}isNaN(){return Ce.isNaN(this._hi)}reciprocal(){let e=null,t=null,n=null,s=null,r=null,o=null,a=null,l=null;r=1/this._hi,o=te.SPLIT*r,e=o-r,l=te.SPLIT*this._hi,e=o-e,t=r-e,n=l-this._hi,a=r*this._hi,n=l-n,s=this._hi-n,l=e*n-a+e*s+t*n+t*s,o=(1-a-l-r*this._lo)/this._hi;const c=r+o;return new te(c,r-c+o)}doubleValue(){return this._hi+this._lo}subtract(){return arguments[0]instanceof te?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0}equals(){if(1===arguments.length&&arguments[0]instanceof te){const e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof te){const e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}min(e){return this.le(e)?this:e}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof te){const e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){const e=arguments[0];let n=null,s=null,r=null,o=null,a=null,l=null,c=null,h=null;return a=this._hi/e,l=te.SPLIT*a,n=l-a,h=te.SPLIT*e,n=l-n,s=a-n,r=h-e,c=a*e,r=h-r,o=e-r,h=n*r-c+n*o+s*r+s*o,l=(this._hi-c-h+this._lo-a*arguments[1])/e,h=a+l,this._hi=h,this._lo=a-h+l,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof te){const e=arguments[0];let t=null,n=null,s=null,r=null,o=null,a=null,l=null,c=null;return o=this._hi/e._hi,a=te.SPLIT*o,t=a-o,c=te.SPLIT*e._hi,t=a-t,n=o-t,s=c-e._hi,l=o*e._hi,s=c-s,r=e._hi-s,c=t*s-l+t*r+n*s+n*r,a=(this._hi-l-c+this._lo-o*e._lo)/e._hi,c=o+a,new te(c,o-c+a)}if("number"==typeof arguments[0]){const e=arguments[0];return Ce.isNaN(e)?te.createNaN():te.copy(this).selfDivide(e,0)}}ge(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}pow(e){if(0===e)return te.valueOf(1);let t=new te(this),n=te.valueOf(1),s=Math.abs(e);if(s>1)for(;s>0;)s%2==1&&n.selfMultiply(t),s/=2,s>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n}ceil(){if(this.isNaN())return te.NaN;const e=Math.ceil(this._hi);let t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new te(e,t)}compareTo(e){return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}max(e){return this.ge(e)?this:e}sqrt(){if(this.isZero())return te.valueOf(0);if(this.isNegative())return te.NaN;const e=1/Math.sqrt(this._hi),n=te.valueOf(this._hi*e),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof te){const e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];let t=null,n=null,s=null,r=null,o=null,a=null;return s=this._hi+e,o=s-this._hi,r=s-o,r=e-o+(this._hi-r),a=r+this._lo,t=s+a,n=a+(s-t),this._hi=t+n,this._lo=n+(t-this._hi),this}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];let n=null,s=null,r=null,o=null,a=null,l=null,c=null,h=null;a=this._hi+e,r=this._lo+t,c=a-this._hi,h=r-this._lo,l=a-c,o=r-h,l=e-c+(this._hi-l),o=t-h+(this._lo-o),c=l+r,n=a+c,s=c+(a-n),c=o+s;const u=n+c,d=c+(n-u);return this._hi=u,this._lo=d,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof te){const e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){const e=arguments[0];let n=null,s=null,r=null,o=null,a=null,l=null;a=te.SPLIT*this._hi,n=a-this._hi,l=te.SPLIT*e,n=a-n,s=this._hi-n,r=l-e,a=this._hi*e,r=l-r,o=e-r,l=n*r-a+n*o+s*r+s*o+(this._hi*arguments[1]+this._lo*e);const c=a+l;n=a-c;const h=l+n;return this._hi=c,this._lo=h,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return te.NaN;const e=Math.floor(this._hi);let t=0;return e===this._hi&&(t=Math.floor(this._lo)),new te(e,t)}negate(){return this.isNaN()?this:new te(-this._hi,-this._lo)}clone(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}intValue(){return Math.trunc(this._hi)}toString(){const e=te.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const e=this.getSpecialNumberString();if(null!==e)return e;const t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),s=t[0]+1;let r=n;return"."===n.charAt(0)?r="0"+n:s<0?r="0."+te.stringOfChar("0",-s)+n:-1===n.indexOf(".")&&(r=n+te.stringOfChar("0",s-n.length)+".0"),this.isNegative()?"-"+r:r}toSciNotation(){if(this.isZero())return te.SCI_NOT_ZERO;const e=this.getSpecialNumberString();if(null!==e)return e;const t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),s=te.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new oc("Found leading zero: "+n);let r="";n.length>1&&(r=n.substring(1));const o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+s:o+s}abs(){return this.isNaN()?te.NaN:this.isNegative()?this.negate():new te(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}add(){if(arguments[0]instanceof te){const e=arguments[0];return te.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){const e=arguments[0];return te.copy(this).selfAdd(e)}}init(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof te){const e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){const t=arguments[1];this._hi=arguments[0],this._lo=t}}gt(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?te.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[$s,Cs,If]}}te.PI=new te(3.141592653589793,12246467991473532e-32),te.TWO_PI=new te(6.283185307179586,24492935982947064e-32),te.PI_2=new te(1.5707963267948966,6123233995736766e-32),te.E=new te(2.718281828459045,14456468917292502e-32),te.NaN=new te(Ce.NaN,Ce.NaN),te.EPS=123259516440783e-46,te.SPLIT=134217729,te.MAX_PRINT_DIGITS=32,te.TEN=te.valueOf(10),te.ONE=te.valueOf(1),te.SCI_NOT_EXPONENT_CHAR="E",te.SCI_NOT_ZERO="0.0E0";let vP=(()=>{class i{static orientationIndex(t,n,s){const r=i.orientationIndexFilter(t,n,s);if(r<=1)return r;const o=te.valueOf(n.x).selfAdd(-t.x),a=te.valueOf(n.y).selfAdd(-t.y),l=te.valueOf(s.x).selfAdd(-n.x),c=te.valueOf(s.y).selfAdd(-n.y);return o.selfMultiply(c).selfSubtract(a.selfMultiply(l)).signum()}static signOfDet2x2(){if(arguments[3]instanceof te&&arguments[2]instanceof te&&arguments[0]instanceof te&&arguments[1]instanceof te){const n=arguments[1],s=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(n.multiply(s)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const n=arguments[1],s=arguments[2],r=arguments[3],o=te.valueOf(arguments[0]),a=te.valueOf(n),l=te.valueOf(s),c=te.valueOf(r);return o.multiply(c).selfSubtract(a.multiply(l)).signum()}}static intersection(t,n,s,r){const o=new te(t.y).selfSubtract(n.y),a=new te(n.x).selfSubtract(t.x),l=new te(t.x).selfMultiply(n.y).selfSubtract(new te(n.x).selfMultiply(t.y)),c=new te(s.y).selfSubtract(r.y),h=new te(r.x).selfSubtract(s.x),u=new te(s.x).selfMultiply(r.y).selfSubtract(new te(r.x).selfMultiply(s.y)),d=a.multiply(u).selfSubtract(h.multiply(l)),p=c.multiply(l).selfSubtract(o.multiply(u)),f=o.multiply(h).selfSubtract(c.multiply(a)),g=d.selfDivide(f).doubleValue(),m=p.selfDivide(f).doubleValue();return Ce.isNaN(g)||Ce.isInfinite(g)||Ce.isNaN(m)||Ce.isInfinite(m)?null:new j(g,m)}static orientationIndexFilter(t,n,s){let r=null;const o=(t.x-s.x)*(n.y-s.y),a=(t.y-s.y)*(n.x-s.x),l=o-a;if(o>0){if(a<=0)return i.signum(l);r=o+a}else{if(!(o<0))return i.signum(l);if(a>=0)return i.signum(l);r=-o-a}const c=i.DP_SAFE_EPSILON*r;return l>=c||-l>=c?i.signum(l):2}static signum(t){return t>0?1:t<0?-1:0}}return i.DP_SAFE_EPSILON=1e-15,i})();class Pe{static isCCW(){if(arguments[0]instanceof Array){const e=arguments[0],t=e.length-1;if(t<3)throw new at("Ring has fewer than 4 points, so orientation cannot be determined");let n=e[0],s=0;for(let u=1;u<=t;u++){const d=e[u];d.y>n.y&&(n=d,s=u)}let r=s;do{r-=1,r<0&&(r=t)}while(e[r].equals2D(n)&&r!==s);let o=s;do{o=(o+1)%t}while(e[o].equals2D(n)&&o!==s);const a=e[r],l=e[o];if(a.equals2D(n)||l.equals2D(n)||a.equals2D(l))return!1;const c=Pe.index(a,n,l);let h=null;return h=0===c?a.x>l.x:c>0,h}if(De(arguments[0],Qt)){const e=arguments[0],t=e.size()-1;if(t<3)throw new at("Ring has fewer than 4 points, so orientation cannot be determined");let n=e.getCoordinate(0),s=0;for(let u=1;u<=t;u++){const d=e.getCoordinate(u);d.y>n.y&&(n=d,s=u)}let r=null,o=s;do{o-=1,o<0&&(o=t),r=e.getCoordinate(o)}while(r.equals2D(n)&&o!==s);let a=null,l=s;do{l=(l+1)%t,a=e.getCoordinate(l)}while(a.equals2D(n)&&l!==s);if(r.equals2D(n)||a.equals2D(n)||r.equals2D(a))return!1;const c=Pe.index(r,n,a);let h=null;return h=0===c?r.x>a.x:c>0,h}}static index(e,t,n){return vP.orientationIndex(e,t,n)}}Pe.CLOCKWISE=-1,Pe.RIGHT=Pe.CLOCKWISE,Pe.COUNTERCLOCKWISE=1,Pe.LEFT=Pe.COUNTERCLOCKWISE,Pe.COLLINEAR=0,Pe.STRAIGHT=Pe.COLLINEAR;class kn extends ge{constructor(){super(),kn.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let e=arguments[0],t=arguments[1];if(ge.constructor_.call(this,arguments[2]),null===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),ge.hasNullElements(t))throw new at("holes must not contain null elements");if(e.isEmpty()&&ge.hasNonEmptyElements(t))throw new at("shell is empty but holes are not");this._shell=e,this._holes=t}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const e=new Array(this.getNumPoints()).fill(null);let t=-1;const n=this._shell.getCoordinates();for(let s=0;s<n.length;s++)t++,e[t]=n[s];for(let s=0;s<this._holes.length;s++){const r=this._holes[s].getCoordinates();for(let o=0;o<r.length;o++)t++,e[t]=r[o]}return e}getArea(){let e=0;e+=Tf.ofRing(this._shell.getCoordinateSequence());for(let t=0;t<this._holes.length;t++)e-=Tf.ofRing(this._holes[t].getCoordinateSequence());return e}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const n=e;if(!this._shell.equalsExact(n._shell,t)||this._holes.length!==n._holes.length)return!1;for(let o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],t))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){const e=this.getExteriorRing().reverse(),t=new Array(this.getNumInteriorRing()).fill(null);for(let n=0;n<t.length;n++)t[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(e,t)}getTypeCode(){return ge.TYPECODE_POLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(let t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}getGeometryType(){return ge.TYPENAME_POLYGON}getExteriorRing(){return this._shell}copyInternal(){const e=this._shell.copy(),t=new Array(this._holes.length).fill(null);for(let n=0;n<this._holes.length;n++)t[n]=this._holes[n].copy();return new kn(e,t,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;const e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal();for(let r=0;r<5;r++){const o=e.getX(r);if(o!==t.getMinX()&&o!==t.getMaxX())return!1;const a=e.getY(r);if(a!==t.getMinY()&&a!==t.getMaxY())return!1}let n=e.getX(0),s=e.getY(0);for(let r=1;r<=4;r++){const o=e.getX(r),a=e.getY(r);if(o!==n==(a!==s))return!1;n=o,s=a}return!0}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);rc.sort(this._holes)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];if(e.isEmpty())return null;const n=e.getCoordinateSequence(),s=ii.minCoordinateIndex(n,0,n.size()-2);ii.scroll(n,s,!0),Pe.isCCW(n)===t&&ii.reverse(n)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getLength(){let e=0;e+=this._shell.getLength();for(let t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e}getNumPoints(){let e=this._shell.getNumPoints();for(let t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e}convexHull(){return this.getExteriorRing().convexHull()}normalized(e,t){const n=e.copy();return this.normalize(n,t),n}compareToSameClass(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){const t=arguments[1],n=arguments[0],o=this._shell.compareToSameClass(n._shell,t);if(0!==o)return o;const a=this.getNumInteriorRing(),l=n.getNumInteriorRing();let c=0;for(;c<a&&c<l;){const h=this.getInteriorRingN(c),u=n.getInteriorRingN(c),d=h.compareToSameClass(u,t);if(0!==d)return d;c++}return c<a?1:c<l?-1:0}}apply(){if(De(arguments[0],Od)){const e=arguments[0];this._shell.apply(e);for(let t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(De(arguments[0],Nd)){const e=arguments[0];if(this._shell.apply(e),!e.isDone())for(let t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(De(arguments[0],sc))arguments[0].filter(this);else if(De(arguments[0],kh)){const e=arguments[0];e.filter(this),this._shell.apply(e);for(let t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(e){return this._holes[e]}get interfaces_(){return[bh]}}class Po extends qt{constructor(){super(),Po.constructor_.apply(this,arguments)}static constructor_(){qt.constructor_.call(this,arguments[0],arguments[1])}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ge){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getTypeCode(){return ge.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return ge.TYPENAME_MULTIPOINT}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new Po(e,this._factory)}isValid(){return!0}getCoordinate(){return 1===arguments.length&&Number.isInteger(arguments[0])?this._geometries[arguments[0]].getCoordinate():super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return Ee.FALSE}get interfaces_(){return[_P]}}class wn{constructor(){wn.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)wn.constructor_.call(this,new Jt,0);else if(1===arguments.length)if(De(arguments[0],fP)){const e=arguments[0];wn.constructor_.call(this,new Jt,0,e)}else arguments[0]instanceof Jt&&wn.constructor_.call(this,arguments[0],0,wn.getDefaultCoordinateSequenceFactory());else if(2===arguments.length)wn.constructor_.call(this,arguments[0],arguments[1],wn.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){const t=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._coordinateSequenceFactory=n,this._SRID=t}}static toMultiPolygonArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toGeometryArray(e){if(null===e)return null;const t=new Array(e.size()).fill(null);return e.toArray(t)}static getDefaultCoordinateSequenceFactory(){return Fd.instance()}static toMultiLineStringArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toLineStringArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toMultiPointArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toLinearRingArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toPointArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toPolygonArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static createPointFromInternalCoord(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}createEmpty(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new at("Invalid dimension: "+e)}}toGeometry(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new j(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new j(e.getMinX(),e.getMinY()),new j(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new j(e.getMinX(),e.getMinY()),new j(e.getMinX(),e.getMaxY()),new j(e.getMaxX(),e.getMaxY()),new j(e.getMaxX(),e.getMinY()),new j(e.getMinX(),e.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];return this.createLineString(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(De(arguments[0],Qt))return new At(arguments[0],this)}}createMultiLineString(){return 0===arguments.length?new Kr(null,this):1===arguments.length?new Kr(arguments[0],this):void 0}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(De(arguments[0],Qt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof wr)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new kn(arguments[0],arguments[1],this)}getSRID(){return this._SRID}createGeometryCollection(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(De(arguments[0],Qt))return new wr(arguments[0],this)}}createMultiPolygon(){return 0===arguments.length?new Ks(null,this):1===arguments.length?new Ks(arguments[0],this):void 0}createMultiPoint(){if(0===arguments.length)return new Po(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Po(arguments[0],this);if(De(arguments[0],Qt)){const e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));const t=new Array(e.size()).fill(null);for(let n=0;n<e.size();n++){const s=this.getCoordinateSequenceFactory().create(1,e.getDimension(),e.getMeasures());ii.copy(e,n,s,0,1),t[n]=this.createPoint(s)}return this.createMultiPoint(t)}}}buildGeometry(e){let t=null,n=!1,s=!1;for(let a=e.iterator();a.hasNext();){const l=a.next(),c=l.getTypeCode();null===t&&(t=c),c!==t&&(n=!0),l instanceof qt&&(s=!0)}if(null===t)return this.createGeometryCollection();if(n||s)return this.createGeometryCollection(wn.toGeometryArray(e));const r=e.iterator().next();if(e.size()>1){if(r instanceof kn)return this.createMultiPolygon(wn.toPolygonArray(e));if(r instanceof At)return this.createMultiLineString(wn.toLineStringArray(e));if(r instanceof Un)return this.createMultiPoint(wn.toPointArray(e));Oe.shouldNeverReachHere("Unhandled geometry type: "+r.getGeometryType())}return r}createMultiPointFromCoords(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof j){const e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(De(arguments[0],Qt))return new Un(arguments[0],this)}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}get interfaces_(){return[$s]}}const kP={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Rpe={};for(const i in kP)Rpe[i]=kP[i].toUpperCase();class Ape{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return e>="0"&&e<="9"||"."==e&&!(void 0!==t&&t)}isWhiteSpace_(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let s,n=e;if("("==e)s=2;else if(","==e)s=5;else if(")"==e)s=3;else if(this.isNumeric_(e)||"-"==e)s=4,n=this.readNumber_();else if(this.isAlpha_(e))s=1,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);s=6}return{position:t,value:n,type:s}}readNumber_(){let e;const t=this.index_;let n=!1,s=!1;do{"."==e?n=!0:("e"==e||"E"==e)&&(s=!0),e=this.nextChar_()}while(this.isNumeric_(e,n)||!s&&("e"==e||"E"==e)||s&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class Lpe{constructor(e,t){this.lexer_=e,this.layout_="XY",this.factory=t}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(1)){const n=t.value;"Z"===n?e="XYZ":"M"===n?e="XYM":"ZM"===n&&(e="XYZM"),"XY"!==e&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(2)){const e=[];do{e.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(2)){const e=this.parsePoint_();if(this.match(3))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(2)){const e=this.parsePointList_();if(this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(2)){const e=this.parseLineStringTextList_();if(this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(2)){let e;if(e=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(2)){const e=this.parseLineStringTextList_();if(this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(2)){const e=this.parsePolygonTextList_();if(this.match(3))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let n=0;n<t;++n){const s=this.token_;if(!this.match(4))break;e.push(s.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(5);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(5);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(5);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(5);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(1)&&"EMPTY"==this.token_.value;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.factory,t=r=>r?new j(...r):new j,n=r=>{const o=r.map(a=>e.createLinearRing(a.map(t)));return o.length>1?e.createPolygon(o[0],o.slice(1)):1===o.length?e.createPolygon(o[0]):e.createPolygon()},s=this.token_;if(this.match(1)){const r=s.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){const o=this.parseGeometryCollectionText_();return e.createGeometryCollection(o)}switch(r){case"POINT":{const o=this.parsePointText_();return o?e.createPoint(new j(...o)):e.createPoint()}case"LINESTRING":{const a=this.parseLineStringText_().map(t);return e.createLineString(a)}case"LINEARRING":{const a=this.parseLineStringText_().map(t);return e.createLinearRing(a)}case"POLYGON":{const o=this.parsePolygonText_();return o&&0!==o.length?n(o):e.createPolygon()}case"MULTIPOINT":{const o=this.parseMultiPointText_();if(!o||0===o.length)return e.createMultiPoint();const a=o.map(t).map(l=>e.createPoint(l));return e.createMultiPoint(a)}case"MULTILINESTRING":{const a=this.parseMultiLineStringText_().map(l=>e.createLineString(l.map(t)));return e.createMultiLineString(a)}case"MULTIPOLYGON":{const o=this.parseMultiPolygonText_();if(!o||0===o.length)return e.createMultiPolygon();const a=o.map(n);return e.createMultiPolygon(a)}default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}function bP(i){if(i.isEmpty())return"";const e=i.getCoordinate(),t=[e.x,e.y];return void 0!==e.z&&!Number.isNaN(e.z)&&t.push(e.z),void 0!==e.m&&!Number.isNaN(e.m)&&t.push(e.m),t.join(" ")}function Rf(i){const e=i.getCoordinates().map(n=>{const s=[n.x,n.y];return void 0!==n.z&&!Number.isNaN(n.z)&&s.push(n.z),void 0!==n.m&&!Number.isNaN(n.m)&&s.push(n.m),s}),t=[];for(let n=0,s=e.length;n<s;++n)t.push(e[n].join(" "));return t.join(", ")}function CP(i){const e=[];e.push("("+Rf(i.getExteriorRing())+")");for(let t=0,n=i.getNumInteriorRing();t<n;++t)e.push("("+Rf(i.getInteriorRingN(t))+")");return e.join(", ")}const zpe={Point:bP,LineString:Rf,LinearRing:Rf,Polygon:CP,MultiPoint:function Ppe(i){const e=[];for(let t=0,n=i.getNumGeometries();t<n;++t)e.push("("+bP(i.getGeometryN(t))+")");return e.join(", ")},MultiLineString:function Npe(i){const e=[];for(let t=0,n=i.getNumGeometries();t<n;++t)e.push("("+Rf(i.getGeometryN(t))+")");return e.join(", ")},MultiPolygon:function Fpe(i){const e=[];for(let t=0,n=i.getNumGeometries();t<n;++t)e.push("("+CP(i.getGeometryN(t))+")");return e.join(", ")},GeometryCollection:function Ope(i){const e=[];for(let t=0,n=i.getNumGeometries();t<n;++t)e.push(EP(i.getGeometryN(t)));return e.join(", ")}};function EP(i){let e=i.getGeometryType();const t=zpe[e];e=e.toUpperCase();const n=function Vpe(i){let e="";if(i.isEmpty())return e;const t=i.getCoordinate();return void 0!==t.z&&!Number.isNaN(t.z)&&(e+="Z"),void 0!==t.m&&!Number.isNaN(t.m)&&(e+="M"),e}(i);return n.length>0&&(e+=" "+n),i.isEmpty()?e+" EMPTY":e+" ("+t(i)+")"}class Hpe{constructor(e){this.geometryFactory=e||new wn,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(e){const t=new Ape(e);return new Lpe(t,this.geometryFactory).parse()}write(e){return EP(e)}}class Oo{constructor(e){this.parser=new Hpe(e)}write(e){return this.parser.write(e)}static toLineString(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}let S=(()=>{class i{static toLocationSymbol(t){switch(t){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new at("Unknown location value: "+t)}}return i.INTERIOR=0,i.BOUNDARY=1,i.EXTERIOR=2,i.NONE=-1,i})(),he=(()=>{class i{static opposite(t){return t===i.LEFT?i.RIGHT:t===i.RIGHT?i.LEFT:t}}return i.ON=0,i.LEFT=1,i.RIGHT=2,i})();class YC{static intersection(e,t,n,s){const r=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,a=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,c=n.x<s.x?n.x:s.x,h=n.y<s.y?n.y:s.y,u=n.x>s.x?n.x:s.x,d=n.y>s.y?n.y:s.y,y=((r>c?r:c)+(a<u?a:u))/2,_=((o>h?o:h)+(l<d?l:d))/2,v=e.x-y,k=e.y-_,w=t.x-y,I=t.y-_,b=n.x-y,D=n.y-_,P=s.x-y,z=s.y-_,Z=k-I,K=w-v,Q=v*I-w*k,T=D-z,O=P-b,R=b*z-P*D,F=Z*O-T*K,L=(K*R-O*Q)/F,G=(T*Q-Z*R)/F;return Ce.isNaN(L)||Ce.isInfinite(L)||Ce.isNaN(G)||Ce.isInfinite(G)?null:new j(L+y,G+_)}}class di{static pointToSegmentString(e,t){if(0===t.length)throw new at("Line array must contain at least one vertex");let n=e.distance(t[0]);for(let s=0;s<t.length-1;s++){const r=di.pointToSegment(e,t[s],t[s+1]);r<n&&(n=r)}return n}static segmentToSegment(e,t,n,s){if(e.equals(t))return di.pointToSegment(e,n,s);if(n.equals(s))return di.pointToSegment(s,e,t);let r=!1;if(mt.intersects(e,t,n,s)){const o=(t.x-e.x)*(s.y-n.y)-(t.y-e.y)*(s.x-n.x);if(0===o)r=!0;else{const c=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,h=((e.y-n.y)*(s.x-n.x)-(e.x-n.x)*(s.y-n.y))/o;(h<0||h>1||c<0||c>1)&&(r=!0)}}else r=!0;return r?xh.min(di.pointToSegment(e,n,s),di.pointToSegment(t,n,s),di.pointToSegment(n,e,t),di.pointToSegment(s,e,t)):0}static pointToLinePerpendicular(e,t,n){const s=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);return Math.abs(((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/s)*Math.sqrt(s)}static pointToSegment(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);const s=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/s;return r<=0?e.distance(t):r>=1?e.distance(n):Math.abs(((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/s)*Math.sqrt(s)}}let Di=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new j,this._intPt[1]=new j,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static nonRobustComputeEdgeDistance(t,n,s){const r=t.x-n.x,o=t.y-n.y,a=Math.sqrt(r*r+o*o);return Oe.isTrue(!(0===a&&!t.equals(n)),"Invalid distance calculation"),a}static computeEdgeDistance(t,n,s){const r=Math.abs(s.x-n.x),o=Math.abs(s.y-n.y);let a=-1;if(t.equals(n))a=0;else if(t.equals(s))a=r>o?r:o;else{const l=Math.abs(t.x-n.x),c=Math.abs(t.y-n.y);a=r>o?l:c,0===a&&!t.equals(n)&&(a=Math.max(l,c))}return Oe.isTrue(!(0===a&&!t.equals(n)),"Bad distance calculation"),a}computeIntersection(t,n,s,r){this._inputLines[0][0]=t,this._inputLines[0][1]=n,this._inputLines[1][0]=s,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,n,s,r)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isInteriorIntersection(){if(0===arguments.length)return!(!this.isInteriorIntersection(0)&&!this.isInteriorIntersection(1));if(1===arguments.length){const t=arguments[0];for(let n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[t][0])&&!this._intPt[n].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}getEdgeDistance(t,n){return i.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===i.COLLINEAR_INTERSECTION}toString(){return Oo.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Oo.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,n){return this._inputLines[t][n]}getIndexAlongSegment(t,n){return this.computeIntLineIndex(),this._intLineIndex[t][n]}getTopologySummary(){const t=new cy;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==i.NO_INTERSECTION}isIntersection(t){for(let n=0;n<this._result;n++)if(this._intPt[n].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][n]]}}return i.DONT_INTERSECT=0,i.DO_INTERSECT=1,i.COLLINEAR=2,i.NO_INTERSECTION=0,i.POINT_INTERSECTION=1,i.COLLINEAR_INTERSECTION=2,i})();class ji extends Di{constructor(){super()}static nearestEndpoint(e,t,n,s){let r=e,o=di.pointToSegment(e,n,s),a=di.pointToSegment(t,n,s);return a<o&&(o=a,r=t),a=di.pointToSegment(n,e,t),a<o&&(o=a,r=n),a=di.pointToSegment(s,e,t),a<o&&(o=a,r=s),r}isInSegmentEnvelopes(e){const t=new mt(this._inputLines[0][0],this._inputLines[0][1]),n=new mt(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const e=arguments[0],t=arguments[1],n=arguments[2];if(this._isProper=!1,mt.intersects(t,n,e)&&0===Pe.index(t,n,e)&&0===Pe.index(n,t,e))return this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),this._result=Di.POINT_INTERSECTION,null;this._result=Di.NO_INTERSECTION}}intersection(e,t,n,s){let r=this.intersectionSafe(e,t,n,s);return this.isInSegmentEnvelopes(r)||(r=new j(ji.nearestEndpoint(e,t,n,s))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}checkDD(e,t,n,s,r){const o=vP.intersection(e,t,n,s),a=this.isInSegmentEnvelopes(o);is.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&is.out.println("Distance = "+r.distance(o))}intersectionSafe(e,t,n,s){let r=YC.intersection(e,t,n,s);return null===r&&(r=ji.nearestEndpoint(e,t,n,s)),r}computeCollinearIntersection(e,t,n,s){const r=mt.intersects(e,t,n),o=mt.intersects(e,t,s),a=mt.intersects(n,s,e),l=mt.intersects(n,s,t);return r&&o?(this._intPt[0]=n,this._intPt[1]=s,Di.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=t,Di.COLLINEAR_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||l?Di.COLLINEAR_INTERSECTION:Di.POINT_INTERSECTION):r&&l?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?Di.COLLINEAR_INTERSECTION:Di.POINT_INTERSECTION):o&&a?(this._intPt[0]=s,this._intPt[1]=e,!s.equals(e)||r||l?Di.COLLINEAR_INTERSECTION:Di.POINT_INTERSECTION):o&&l?(this._intPt[0]=s,this._intPt[1]=t,!s.equals(t)||r||a?Di.COLLINEAR_INTERSECTION:Di.POINT_INTERSECTION):Di.NO_INTERSECTION}computeIntersect(e,t,n,s){if(this._isProper=!1,!mt.intersects(e,t,n,s))return Di.NO_INTERSECTION;const r=Pe.index(e,t,n),o=Pe.index(e,t,s);if(r>0&&o>0||r<0&&o<0)return Di.NO_INTERSECTION;const a=Pe.index(n,s,e),l=Pe.index(n,s,t);return a>0&&l>0||a<0&&l<0?Di.NO_INTERSECTION:0===r&&0===o&&0===a&&0===l?this.computeCollinearIntersection(e,t,n,s):(0===r||0===o||0===a||0===l?(this._isProper=!1,e.equals2D(n)||e.equals2D(s)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(s)?this._intPt[0]=t:0===r?this._intPt[0]=new j(n):0===o?this._intPt[0]=new j(s):0===a?this._intPt[0]=new j(e):0===l&&(this._intPt[0]=new j(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,s)),Di.POINT_INTERSECTION)}}class Hd{constructor(){Hd.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]}static locatePointInRing(){if(arguments[0]instanceof j&&De(arguments[1],Qt)){const t=arguments[1],n=new Hd(arguments[0]),s=new j,r=new j;for(let o=1;o<t.size();o++)if(t.getCoordinate(o,s),t.getCoordinate(o-1,r),n.countSegment(s,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof j&&arguments[1]instanceof Array){const t=arguments[1],n=new Hd(arguments[0]);for(let s=1;s<t.length;s++)if(n.countSegment(t[s],t[s-1]),n.isOnSegment())return n.getLocation();return n.getLocation()}}getLocation(){return this._isPointOnSegment?S.BOUNDARY:this._crossingCount%2==1?S.INTERIOR:S.EXTERIOR}isPointInPolygon(){return this.getLocation()!==S.EXTERIOR}isOnSegment(){return this._isPointOnSegment}countSegment(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){let n=e.x,s=t.x;return n>s&&(n=t.x,s=e.x),this._p.x>=n&&this._p.x<=s&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){let n=Pe.index(e,t,this._p);if(n===Pe.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(n=-n),n===Pe.LEFT&&this._crossingCount++}}}class Xr{static isInRing(e,t){return Xr.locateInRing(e,t)!==S.EXTERIOR}static locateInRing(e,t){return Hd.locatePointInRing(e,t)}static isOnLine(){if(arguments[0]instanceof j&&De(arguments[1],Qt)){const e=arguments[0],t=arguments[1],n=new ji,s=new j,r=new j,o=t.size();for(let a=1;a<o;a++)if(t.getCoordinate(a-1,s),t.getCoordinate(a,r),n.computeIntersection(e,s,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof j&&arguments[1]instanceof Array){const e=arguments[0],t=arguments[1],n=new ji;for(let s=1;s<t.length;s++)if(n.computeIntersection(e,t[s-1],t[s]),n.hasIntersection())return!0;return!1}}}class xr extends Ys{constructor(e,t){super(t?e+" [ "+t+" ]":e),this.pt=t?new j(t):void 0,this.name=Object.keys({TopologyException:xr})[0]}getCoordinate(){return this.pt}}class Es{constructor(){Es.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){const e=arguments[0];this.init(1),this.location[he.ON]=e}else if(arguments[0]instanceof Es){const e=arguments[0];if(this.init(e.location.length),null!==e)for(let t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];this.init(3),this.location[he.ON]=e,this.location[he.LEFT]=t,this.location[he.RIGHT]=n}}setAllLocations(e){for(let t=0;t<this.location.length;t++)this.location[t]=e}isNull(){for(let e=0;e<this.location.length;e++)if(this.location[e]!==S.NONE)return!1;return!0}setAllLocationsIfNull(e){for(let t=0;t<this.location.length;t++)this.location[t]===S.NONE&&(this.location[t]=e)}isLine(){return 1===this.location.length}merge(e){if(e.location.length>this.location.length){const t=new Array(3).fill(null);t[he.ON]=this.location[he.ON],t[he.LEFT]=S.NONE,t[he.RIGHT]=S.NONE,this.location=t}for(let t=0;t<this.location.length;t++)this.location[t]===S.NONE&&t<e.location.length&&(this.location[t]=e.location[t])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const e=this.location[he.LEFT];this.location[he.LEFT]=this.location[he.RIGHT],this.location[he.RIGHT]=e}get(e){return e<this.location.length?this.location[e]:S.NONE}isEqualOnSide(e,t){return this.location[t]===e.location[t]}allPositionsEqual(e){for(let t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}toString(){const e=new Df;return this.location.length>1&&e.append(S.toLocationSymbol(this.location[he.LEFT])),e.append(S.toLocationSymbol(this.location[he.ON])),this.location.length>1&&e.append(S.toLocationSymbol(this.location[he.RIGHT])),e.toString()}setLocations(e,t,n){this.location[he.ON]=e,this.location[he.LEFT]=t,this.location[he.RIGHT]=n}isArea(){return this.location.length>1}isAnyNull(){for(let e=0;e<this.location.length;e++)if(this.location[e]===S.NONE)return!0;return!1}setLocation(){1===arguments.length?this.setLocation(he.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}init(e){this.location=new Array(e).fill(null),this.setAllLocations(S.NONE)}}class bn{constructor(){bn.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const e=arguments[0];this.elt[0]=new Es(e),this.elt[1]=new Es(e)}else if(arguments[0]instanceof bn){const e=arguments[0];this.elt[0]=new Es(e.elt[0]),this.elt[1]=new Es(e.elt[1])}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.elt[0]=new Es(S.NONE),this.elt[1]=new Es(S.NONE),this.elt[e].setLocation(t)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];this.elt[0]=new Es(e,t,n),this.elt[1]=new Es(e,t,n)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];this.elt[0]=new Es(S.NONE,S.NONE,S.NONE),this.elt[1]=new Es(S.NONE,S.NONE,S.NONE),this.elt[e].setLocations(t,n,s)}}static toLineLabel(e){const t=new bn(S.NONE);for(let n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t}getGeometryCount(){let e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}setAllLocations(e,t){this.elt[e].setAllLocations(t)}isNull(e){return this.elt[e].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}isLine(e){return this.elt[e].isLine()}merge(e){for(let t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Es(e.elt[t]):this.elt[t].merge(e.elt[t])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){return 1===arguments.length?this.elt[arguments[0]].get(he.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}toString(){const e=new Df;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}setLocation(){2===arguments.length?this.elt[arguments[0]].setLocation(he.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}isEqualOnSide(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}allPositionsEqual(e,t){return this.elt[e].allPositionsEqual(t)}toLine(e){this.elt[e].isArea()&&(this.elt[e]=new Es(this.elt[e].location[0]))}isArea(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}isAnyNull(e){return this.elt[e].isAnyNull()}}class Bd{constructor(){Bd.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new se,this._pts=new se,this._label=new bn(S.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new se,this._geometryFactory=null,0!==arguments.length&&2===arguments.length){const e=arguments[0];this._geometryFactory=arguments[1],this.computePoints(e),this.computeRing()}}computeRing(){if(null!==this._ring)return null;const e=new Array(this._pts.size()).fill(null);for(let t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=Pe.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(e){this._startDe=e;let t=e,n=!0;do{if(null===t)throw new xr("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new xr("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);const s=t.getLabel();Oe.isTrue(s.isArea()),this.mergeLabel(s),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(e){return this._pts.get(e)}computeMaxNodeDegree(){this._maxNodeDegree=0;let e=this._startDe;do{const n=e.getNode().getEdges().getOutgoingDegree(this);n>this._maxNodeDegree&&(this._maxNodeDegree=n),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2}addPoints(e,t,n){const s=e.getCoordinates();if(t){let r=1;n&&(r=0);for(let o=r;o<s.length;o++)this._pts.add(s[o])}else{let r=s.length-2;n&&(r=s.length-1);for(let o=r;o>=0;o--)this._pts.add(s[o])}}containsPoint(e){const t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e)||!Xr.isInRing(e,t.getCoordinates()))return!1;for(let s=this._holes.iterator();s.hasNext();)if(s.next().containsPoint(e))return!1;return!0}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}setShell(e){this._shell=e,null!==e&&e.addHole(this)}toPolygon(e){const t=new Array(this._holes.size()).fill(null);for(let s=0;s<this._holes.size();s++)t[s]=this._holes.get(s).getLinearRing();return e.createPolygon(this.getLinearRing(),t)}isHole(){return this._isHole}setInResult(){let e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)}addHole(e){this._holes.add(e)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){const e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){const t=arguments[1],n=arguments[0].getLocation(t,he.RIGHT);if(n===S.NONE)return null;if(this._label.getLocation(t)===S.NONE)return this._label.setLocation(t,n),null}}}class KC extends Bd{constructor(){super(),KC.constructor_.apply(this,arguments)}static constructor_(){Bd.constructor_.call(this,arguments[0],arguments[1])}getNext(e){return e.getNextMin()}setEdgeRing(e,t){e.setMinEdgeRing(t)}}class hy extends Bd{constructor(){super(),hy.constructor_.apply(this,arguments)}static constructor_(){Bd.constructor_.call(this,arguments[0],arguments[1])}linkDirectedEdgesForMinimalEdgeRings(){let e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}buildMinimalRings(){const e=new se;let t=this._startDe;do{if(null===t.getMinEdgeRing()){const n=new KC(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e}getNext(e){return e.getNext()}setEdgeRing(e,t){e.setEdgeRing(t)}}class SP{locate(e){}}class Bpe{hasNext(){}next(){}remove(){}}class jd{constructor(){jd.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}static isAtomic(e){return!(e instanceof qt)}next(){if(this._atStart)return this._atStart=!1,jd.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ld;const e=this._parent.getGeometryN(this._index++);return e instanceof qt?(this._subcollectionIterator=new jd(e),this._subcollectionIterator.next()):e}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}remove(){throw new Wr(this.getClass().getName())}get interfaces_(){return[Bpe]}}class Zr{constructor(){Zr.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._geom=arguments[0]}static locatePointInPolygon(e,t){if(t.isEmpty())return S.EXTERIOR;const n=t.getExteriorRing(),s=Zr.locatePointInRing(e,n);if(s!==S.INTERIOR)return s;for(let r=0;r<t.getNumInteriorRing();r++){const o=t.getInteriorRingN(r),a=Zr.locatePointInRing(e,o);if(a===S.BOUNDARY)return S.BOUNDARY;if(a===S.INTERIOR)return S.EXTERIOR}return S.INTERIOR}static locatePointInRing(e,t){return t.getEnvelopeInternal().intersects(e)?Xr.locateInRing(e,t.getCoordinates()):S.EXTERIOR}static isContained(e,t){return S.EXTERIOR!==Zr.locate(e,t)}static locate(e,t){return t.isEmpty()||!t.getEnvelopeInternal().intersects(e)?S.EXTERIOR:Zr.locateInGeometry(e,t)}static containsPointInPolygon(e,t){return S.EXTERIOR!==Zr.locatePointInPolygon(e,t)}static locateInGeometry(e,t){if(t instanceof kn)return Zr.locatePointInPolygon(e,t);if(t instanceof qt){const n=new jd(t);for(;n.hasNext();){const s=n.next();if(s!==t){const r=Zr.locateInGeometry(e,s);if(r!==S.EXTERIOR)return r}}}return S.EXTERIOR}locate(e){return Zr.locate(e,this._geom)}get interfaces_(){return[SP]}}class jpe extends mP{}function IP(i){return null==i?0:i.color}function Gt(i){return null==i?null:i.parent}function ua(i,e){null!==i&&(i.color=e)}function XC(i){return null==i?null:i.left}function TP(i){return null==i?null:i.right}class No extends jpe{constructor(){super(),this.root_=null,this.size_=0}get(e){let t=this.root_;for(;null!==t;){const n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null}put(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let s,r,n=this.root_;do{if(s=n,r=e.compareTo(n.key),r<0)n=n.left;else{if(!(r>0)){const a=n.value;return n.value=t,a}n=n.right}}while(null!==n);const o={key:e,left:null,right:null,value:t,parent:s,color:0,getValue(){return this.value},getKey(){return this.key}};return r<0?s.left=o:s.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(e){let t;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)Gt(e)===XC(Gt(Gt(e)))?(t=TP(Gt(Gt(e))),1===IP(t)?(ua(Gt(e),0),ua(t,0),ua(Gt(Gt(e)),1),e=Gt(Gt(e))):(e===TP(Gt(e))&&(e=Gt(e),this.rotateLeft(e)),ua(Gt(e),0),ua(Gt(Gt(e)),1),this.rotateRight(Gt(Gt(e))))):(t=XC(Gt(Gt(e))),1===IP(t)?(ua(Gt(e),0),ua(t,0),ua(Gt(Gt(e)),1),e=Gt(Gt(e))):(e===XC(Gt(e))&&(e=Gt(e),this.rotateRight(e)),ua(Gt(e),0),ua(Gt(Gt(e)),1),this.rotateLeft(Gt(Gt(e)))));this.root_.color=0}values(){const e=new se;let t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=No.successor(t));)e.add(t.value);return e}entrySet(){const e=new sl;let t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=No.successor(t));)e.add(t);return e}rotateLeft(e){if(null!=e){const t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}}rotateRight(e){if(null!=e){const t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}}getFirstEntry(){let e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}static successor(e){let t;if(null===e)return null;if(null!==e.right){for(t=e.right;null!==t.left;)t=t.left;return t}{t=e.parent;let n=e;for(;null!==t&&n===t.right;)n=t,t=t.parent;return t}}size(){return this.size_}containsKey(e){let t=this.root_;for(;null!==t;){const n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return!0;t=t.right}}return!1}}class uy{constructor(){uy.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new No,this._edgeList=null,this._ptInAreaLocation=[S.NONE,S.NONE]}getNextCW(e){this.getEdges();const t=this._edgeList.indexOf(e);let n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(e){let t=S.NONE;for(let s=this.iterator();s.hasNext();){const o=s.next().getLabel();o.isArea(e)&&o.getLocation(e,he.LEFT)!==S.NONE&&(t=o.getLocation(e,he.LEFT))}if(t===S.NONE)return null;let n=t;for(let s=this.iterator();s.hasNext();){const r=s.next(),o=r.getLabel();if(o.getLocation(e,he.ON)===S.NONE&&o.setLocation(e,he.ON,n),o.isArea(e)){const a=o.getLocation(e,he.LEFT),l=o.getLocation(e,he.RIGHT);if(l!==S.NONE){if(l!==n)throw new xr("side location conflict",r.getCoordinate());a===S.NONE&&Oe.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),n=a}else Oe.isTrue(o.getLocation(e,he.LEFT)===S.NONE,"found single null side"),o.setLocation(e,he.RIGHT,n),o.setLocation(e,he.LEFT,n)}}}getCoordinate(){const e=this.iterator();return e.hasNext()?e.next().getCoordinate():null}checkAreaLabelsConsistent(e){const t=this.getEdges();if(t.size()<=0)return!0;const n=t.size()-1,r=t.get(n).getLabel().getLocation(e,he.LEFT);Oe.isTrue(r!==S.NONE,"Found unlabelled area edge");let o=r;for(let a=this.iterator();a.hasNext();){const c=a.next().getLabel();Oe.isTrue(c.isArea(e),"Found non-area edge");const h=c.getLocation(e,he.LEFT),u=c.getLocation(e,he.RIGHT);if(h===u||u!==o)return!1;o=h}return!0}findIndex(e){this.iterator();for(let t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new se(this._edgeMap.values())),this._edgeList}getLocation(e,t,n){return this._ptInAreaLocation[e]===S.NONE&&(this._ptInAreaLocation[e]=Zr.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]}toString(){const e=new Df;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(let t=this.iterator();t.hasNext();){const n=t.next();e.append(n),e.append("\n")}return e.toString()}computeEdgeEndLabels(e){for(let t=this.iterator();t.hasNext();)t.next().computeLabel(e)}computeLabelling(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const t=[!1,!1];for(let n=this.iterator();n.hasNext();){const r=n.next().getLabel();for(let o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===S.BOUNDARY&&(t[o]=!0)}for(let n=this.iterator();n.hasNext();){const s=n.next(),r=s.getLabel();for(let o=0;o<2;o++)if(r.isAnyNull(o)){let a=S.NONE;if(t[o])a=S.EXTERIOR;else{const l=s.getCoordinate();a=this.getLocation(o,l,e)}r.setAllLocationsIfNull(o,a)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(e,t){this._edgeMap.put(e,t),this._edgeList=null}print(e){is.out.println("EdgeEndStar:   "+this.getCoordinate());for(let t=this.iterator();t.hasNext();)t.next().print(e)}isAreaLabelsConsistent(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}}let Qr=(()=>{class i{static isNorthern(t){return t===i.NE||t===i.NW}static isOpposite(t,n){return t!==n&&(t-n+4)%4==2}static commonHalfPlane(t,n){if(t===n)return t;if((t-n+4)%4==2)return-1;const r=t<n?t:n;return 0===r&&3===(t>n?t:n)?3:r}static isInHalfPlane(t,n){return n===i.SE?t===i.SE||t===i.SW:t===n||t===n+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new at("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?i.NE:i.SE:n>=0?i.NW:i.SW}if(arguments[0]instanceof j&&arguments[1]instanceof j){const t=arguments[0],n=arguments[1];if(n.x===t.x&&n.y===t.y)throw new at("Cannot compute the quadrant for two identical points "+t);return n.x>=t.x?n.y>=t.y?i.NE:i.SE:n.y>=t.y?i.NW:i.SW}}}return i.NE=0,i.NW=1,i.SW=2,i.SE=3,i})();class ZC extends uy{constructor(){super(),ZC.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let e=null,t=null,n=this._SCANNING_FOR_INCOMING;for(let s=0;s<this._resultAreaEdgeList.size();s++){const r=this._resultAreaEdgeList.get(s),o=r.getSym();if(r.getLabel().isArea())switch(null===e&&r.isInResult()&&(e=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;t.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new xr("no outgoing dirEdge found",this.getCoordinate());Oe.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}insert(e){this.insertEdgeEnd(e,e)}getRightmostEdge(){const e=this.getEdges(),t=e.size();if(t<1)return null;const n=e.get(0);if(1===t)return n;const s=e.get(t-1),r=n.getQuadrant(),o=s.getQuadrant();return Qr.isNorthern(r)&&Qr.isNorthern(o)?n:Qr.isNorthern(r)||Qr.isNorthern(o)?0!==n.getDy()?n:0!==s.getDy()?s:(Oe.shouldNeverReachHere("found two horizontal edges incident on node"),null):s}updateLabelling(e){for(let t=this.iterator();t.hasNext();){const s=t.next().getLabel();s.setAllLocationsIfNull(0,e.getLocation(0)),s.setAllLocationsIfNull(1,e.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let e=null,t=null;for(let n=this._edgeList.size()-1;n>=0;n--){const s=this._edgeList.get(n),r=s.getSym();null===t&&(t=r),null!==e&&r.setNext(e),e=s}t.setNext(e)}computeDepths(){if(1===arguments.length){const e=arguments[0],t=this.findIndex(e),n=e.getDepth(he.LEFT),s=e.getDepth(he.RIGHT),r=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,r)!==s)throw new xr("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){const t=arguments[1];let s=arguments[2];for(let r=arguments[0];r<t;r++){const o=this._edgeList.get(r);o.setEdgeDepths(he.RIGHT,s),s=o.getDepth(he.LEFT)}return s}}mergeSymLabels(){for(let e=this.iterator();e.hasNext();){const t=e.next();t.getLabel().merge(t.getSym().getLabel())}}linkMinimalDirectedEdges(e){let t=null,n=null,s=this._SCANNING_FOR_INCOMING;for(let r=this._resultAreaEdgeList.size()-1;r>=0;r--){const o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),s){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),s=this._SCANNING_FOR_INCOMING}}s===this._LINKING_TO_OUTGOING&&(Oe.isTrue(null!==t,"found null for first outgoing dirEdge"),Oe.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}getOutgoingDegree(){if(0===arguments.length){let e=0;for(let t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){const e=arguments[0];let t=0;for(let n=this.iterator();n.hasNext();)n.next().getEdgeRing()===e&&t++;return t}}getLabel(){return this._label}findCoveredLineEdges(){let e=S.NONE;for(let n=this.iterator();n.hasNext();){const s=n.next(),r=s.getSym();if(!s.isLineEdge()){if(s.isInResult()){e=S.INTERIOR;break}if(r.isInResult()){e=S.EXTERIOR;break}}}if(e===S.NONE)return null;let t=e;for(let n=this.iterator();n.hasNext();){const s=n.next(),r=s.getSym();s.isLineEdge()?s.getEdge().setCovered(t===S.INTERIOR):(s.isInResult()&&(t=S.EXTERIOR),r.isInResult()&&(t=S.INTERIOR))}}computeLabelling(e){super.computeLabelling.call(this,e),this._label=new bn(S.NONE);for(let t=this.iterator();t.hasNext();){const r=t.next().getEdge().getLabel();for(let o=0;o<2;o++){const a=r.getLocation(o);(a===S.INTERIOR||a===S.BOUNDARY)&&this._label.setLocation(o,S.INTERIOR)}}}print(e){is.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let t=this.iterator();t.hasNext();){const n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new se;for(let e=this.iterator();e.hasNext();){const t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList}}class dy{constructor(){dy.constructor_.apply(this,arguments)}static constructor_(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])}setVisited(e){this._isVisited=e}setInResult(e){this._isInResult=e}setLabel(e){this._label=e}getLabel(){return this._label}setCovered(e){this._isCovered=e,this._isCoveredSet=!0}updateIM(e){Oe.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class rl extends dy{constructor(){super(),rl.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[1];this._coord=arguments[0],this._edges=t,this._label=new bn(0,S.NONE)}isIncidentEdgeInResult(){for(let e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}computeMergedLocation(e,t){let n=S.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){const s=e.getLocation(t);n!==S.BOUNDARY&&(n=s)}return n}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const e=arguments[0],t=arguments[1];null===this._label?this._label=new bn(e,t):this._label.setLocation(e,t)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof rl)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof bn){const e=arguments[0];for(let t=0;t<2;t++){const n=this.computeMergedLocation(e,t);this._label.getLocation(t)===S.NONE&&this._label.setLocation(t,n)}}}add(e){this._edges.insert(e),e.setNode(this)}setLabelBoundary(e){if(null===this._label)return null;let t=S.NONE;null!==this._label&&(t=this._label.getLocation(e));let n=null;n=t===S.BOUNDARY?S.INTERIOR:S.BOUNDARY,this._label.setLocation(e,n)}print(e){e.println("node "+this._coord+" lbl: "+this._label)}computeIM(e){}}class QC{createNode(e){return new rl(e,null)}}class JC extends QC{constructor(){super()}createNode(e){return new rl(e,new ZC)}}class qd{constructor(){qd.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new No,this.nodeFact=null,this.nodeFact=arguments[0]}print(e){for(let t=this.iterator();t.hasNext();)t.next().print(e)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(e){const t=new se;for(let n=this.iterator();n.hasNext();){const s=n.next();s.getLabel().getLocation(e)===S.BOUNDARY&&t.add(s)}return t}add(e){const t=e.getCoordinate();this.addNode(t).add(e)}find(e){return this.nodeMap.get(e)}addNode(){if(arguments[0]instanceof j){const e=arguments[0];let t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof rl){const e=arguments[0],t=this.nodeMap.get(e.getCoordinate());return null===t?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}}class da{constructor(){da.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length)da.constructor_.call(this,arguments[0],arguments[1],arguments[2],null);else if(4===arguments.length){const t=arguments[1],n=arguments[2],s=arguments[3];da.constructor_.call(this,arguments[0]),this.init(t,n),this._label=s}}compareDirection(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:Pe.index(e._p0,e._p1,this._p1)}getDy(){return this._dy}print(e){const t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),s=n.lastIndexOf("."),r=n.substring(s+1);e.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}getLabel(){return this._label}getEdge(){return this._edge}toString(){const e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}computeLabel(e){}init(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Qr.quadrant(this._dx,this._dy),Oe.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getCoordinate(){return this._p0}setNode(e){this._node=e}compareTo(e){return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getQuadrant(){return this._quadrant}getNode(){return this._node}get interfaces_(){return[Cs]}}class Af extends da{constructor(){super(),Af.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const e=arguments[0],t=arguments[1];if(da.constructor_.call(this,e),this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{const n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}static depthFactor(e,t){return e===S.EXTERIOR&&t===S.INTERIOR?1:e===S.INTERIOR&&t===S.EXTERIOR?-1:0}setVisited(e){this._isVisited=e}setDepth(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new xr("assigned depths do not match",this.getCoordinate());this._depth[e]=t}isInteriorAreaEdge(){let e=!0;for(let t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,he.LEFT)===S.INTERIOR&&this._label.getLocation(t,he.RIGHT)===S.INTERIOR||(e=!1);return e}setNextMin(e){this._nextMin=e}print(e){super.print.call(this,e),e.print(" "+this._depth[he.LEFT]+"/"+this._depth[he.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}setMinEdgeRing(e){this._minEdgeRing=e}getSym(){return this._sym}isForward(){return this._isForward}setSym(e){this._sym=e}setVisitedEdge(e){this.setVisited(e),this._sym.setVisited(e)}getNextMin(){return this._nextMin}getDepth(e){return this._depth[e]}computeDirectedLabel(){this._label=new bn(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}isLineEdge(){const e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,S.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,S.EXTERIOR);return e&&t&&n}setEdgeRing(e){this._edgeRing=e}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}setInResult(e){this._isInResult=e}getEdge(){return this._edge}printEdge(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}setEdgeDepths(e,t){let n=this.getEdge().getDepthDelta();this._isForward||(n=-n);let s=1;e===he.LEFT&&(s=-1);const r=he.opposite(e),a=t+n*s;this.setDepth(e,t),this.setDepth(r,a)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(e){this._next=e}isVisited(){return this._isVisited}}class Ch{constructor(){Ch.constructor_.apply(this,arguments)}static constructor_(){this._edges=new se,this._nodes=null,this._edgeEndList=new se,0===arguments.length?this._nodes=new qd(new QC):1===arguments.length&&(this._nodes=new qd(arguments[0]))}static linkResultDirectedEdges(e){for(let t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}printEdges(e){e.println("Edges:");for(let t=0;t<this._edges.size();t++){e.println("edge "+t+":");const n=this._edges.get(t);n.print(e),n.eiList.print(e)}}debugPrintln(e){is.out.println(e)}isBoundaryNode(e,t){const n=this._nodes.find(t);if(null===n)return!1;const s=n.getLabel();return null!==s&&s.getLocation(e)===S.BOUNDARY}linkAllDirectedEdges(){for(let e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()}debugPrint(e){is.out.print(e)}findEdgeEnd(e){for(let t=this.getEdgeEnds().iterator();t.hasNext();){const n=t.next();if(n.getEdge()===e)return n}return null}getNodes(){return this._nodes.values()}findEdge(e,t){for(let n=0;n<this._edges.size();n++){const s=this._edges.get(n),r=s.getCoordinates();if(e.equals(r[0])&&t.equals(r[1]))return s}return null}find(e){return this._nodes.find(e)}addNode(){return arguments[0]instanceof rl||arguments[0]instanceof j?this._nodes.addNode(arguments[0]):void 0}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}matchInSameDirection(e,t,n,s){return!!e.equals(n)&&Pe.index(e,t,s)===Pe.COLLINEAR&&Qr.quadrant(e,t)===Qr.quadrant(n,s)}getEdgeEnds(){return this._edgeEndList}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(e,t){for(let n=0;n<this._edges.size();n++){const s=this._edges.get(n),r=s.getCoordinates();if(this.matchInSameDirection(e,t,r[0],r[1])||this.matchInSameDirection(e,t,r[r.length-1],r[r.length-2]))return s}return null}insertEdge(e){this._edges.add(e)}addEdges(e){for(let t=e.iterator();t.hasNext();){const n=t.next();this._edges.add(n);const s=new Af(n,!0),r=new Af(n,!1);s.setSym(r),r.setSym(s),this.add(s),this.add(r)}}add(e){this._nodes.add(e),this._edgeEndList.add(e)}}class py{constructor(){py.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=new wn,this._geomGraph=null,this._disconnectedRingcoord=null,this._geomGraph=arguments[0]}static findDifferentPoint(e,t){for(let n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}visitInteriorRing(e,t){if(e.isEmpty())return null;const n=e.getCoordinates(),s=n[0],r=py.findDifferentPoint(n,s),o=t.findEdgeInSameDirection(s,r),a=t.findEdgeEnd(o);let l=null;a.getLabel().getLocation(0,he.RIGHT)===S.INTERIOR?l=a:a.getSym().getLabel().getLocation(0,he.RIGHT)===S.INTERIOR&&(l=a.getSym()),Oe.isTrue(null!==l,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(l)}visitShellInteriors(e,t){if(e instanceof kn&&this.visitInteriorRing(e.getExteriorRing(),t),e instanceof Ks){const n=e;for(let s=0;s<n.getNumGeometries();s++){const r=n.getGeometryN(s);this.visitInteriorRing(r.getExteriorRing(),t)}}}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(e){for(let t=e.getEdgeEnds().iterator();t.hasNext();){const n=t.next();n.getLabel().getLocation(0,he.RIGHT)===S.INTERIOR&&n.setInResult(!0)}}visitLinkedDirectedEdges(e){const t=e;let n=e;do{Oe.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==t)}buildEdgeRings(e){const t=new se;for(let n=e.iterator();n.hasNext();){const s=n.next();if(s.isInResult()&&null===s.getEdgeRing()){const r=new hy(s,this._geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();const o=r.buildMinimalRings();t.addAll(o)}}return t}hasUnvisitedShellEdge(e){for(let t=0;t<e.size();t++){const n=e.get(t);if(n.isHole())continue;const s=n.getEdges();let r=s.get(0);if(r.getLabel().getLocation(0,he.RIGHT)===S.INTERIOR)for(let o=0;o<s.size();o++)if(r=s.get(o),!r.isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}return!1}isInteriorsConnected(){const e=new se;this._geomGraph.computeSplitEdges(e);const t=new Ch(new JC);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();const n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}}class DP{computeEdgeEnds(){if(1===arguments.length){const e=arguments[0],t=new se;for(let n=e;n.hasNext();){const s=n.next();this.computeEdgeEnds(s,t)}return t}if(2===arguments.length){const e=arguments[0],t=arguments[1],n=e.getEdgeIntersectionList();n.addEndpoints();const s=n.iterator();let r=null,o=null;if(!s.hasNext())return null;let a=s.next();do{r=o,o=a,a=null,s.hasNext()&&(a=s.next()),null!==o&&(this.createEdgeEndForPrev(e,t,o,r),this.createEdgeEndForNext(e,t,o,a))}while(null!==o)}}createEdgeEndForNext(e,t,n,s){const r=n.segmentIndex+1;if(r>=e.getNumPoints()&&null===s)return null;let o=e.getCoordinate(r);null!==s&&s.segmentIndex===n.segmentIndex&&(o=s.coord);const a=new da(e,n.coord,o,new bn(e.getLabel()));t.add(a)}createEdgeEndForPrev(e,t,n,s){let r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}let o=e.getCoordinate(r);null!==s&&s.segmentIndex>=r&&(o=s.coord);const a=new bn(e.getLabel());a.flip();const l=new da(e,n.coord,o,a);t.add(l)}}const RP={reverseOrder:function(){return{compare:(i,e)=>e.compareTo(i)}},min:function(i){return RP.sort(i),i.get(0)},sort:function(i,e){const t=i.toArray();e?rc.sort(t,e):rc.sort(t);const n=i.iterator();for(let s=0,r=t.length;s<r;s++)n.next(),n.set(t[s])},singletonList:function(i){const e=new se;return e.add(i),e}},pa=RP;class Eh{constructor(){Eh.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[1],n=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=n}static isAdjacentSegments(e,t){return 1===Math.abs(e-t)}isTrivialIntersection(e,t,n,s){if(e===n&&1===this._li.getIntersectionNum()){if(Eh.isAdjacentSegments(t,s))return!0;if(e.isClosed()){const r=e.getNumPoints()-1;if(0===t&&s===r||0===s&&t===r)return!0}}return!1}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(e,t){for(let n=t.iterator();n.hasNext();){const r=n.next().getCoordinate();if(e.isIntersection(r))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(e,t){return null!==t&&!(!this.isBoundaryPointInternal(e,t[0])&&!this.isBoundaryPointInternal(e,t[1]))}setBoundaryNodes(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t}addIntersections(e,t,n,s){if(e===n&&t===s)return null;this.numTests++;const r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[s],l=n.getCoordinates()[s+1];this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,s)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,s,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(e){this._isDoneWhenProperInt=e}}class e4{constructor(){e4.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[1];this.mce=arguments[0],this.chainIndex=t}computeIntersections(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}}let AP=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],n=arguments[1];this._eventType=i.DELETE,this._xValue=t,this._insertEvent=n}else if(3===arguments.length){const t=arguments[0],n=arguments[1],s=arguments[2];this._eventType=i.INSERT,this._label=t,this._xValue=n,this._obj=s}}getObject(){return this._obj}getDeleteEventIndex(){return this._deleteEventIndex}isDelete(){return this._eventType===i.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}compareTo(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===i.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}get interfaces_(){return[Cs]}}return i.INSERT=1,i.DELETE=2,i})();class t4 extends class qpe{}{constructor(){super(),t4.constructor_.apply(this,arguments)}static constructor_(){this.events=new se,this.nOverlaps=null}prepareEvents(){pa.sort(this.events);for(let e=0;e<this.events.size();e++){const t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}computeIntersections(){if(1===arguments.length){const e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let t=0;t<this.events.size();t++){const n=this.events.get(t);if(n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Eh&&De(arguments[0],kr)&&De(arguments[1],kr)){const e=arguments[0],t=arguments[1],n=arguments[2];this.addEdges(e,e),this.addEdges(t,t),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&De(arguments[0],kr)&&arguments[1]instanceof Eh){const e=arguments[0],t=arguments[1];arguments[2]?this.addEdges(e,null):this.addEdges(e),this.computeIntersections(t)}}addEdge(e,t){const n=e.getMonotoneChainEdge(),s=n.getStartIndexes();for(let r=0;r<s.length-1;r++){const o=new e4(n,r),a=new AP(t,n.getMinX(r),o);this.events.add(a),this.events.add(new AP(n.getMaxX(r),a))}}processOverlaps(e,t,n,s){const r=n.getObject();for(let o=e;o<t;o++){const a=this.events.get(o);if(a.isInsert()){const l=a.getObject();n.isSameLabel(a)||(r.computeIntersections(l,s),this.nOverlaps++)}}}addEdges(){if(1===arguments.length)for(let t=arguments[0].iterator();t.hasNext();){const n=t.next();this.addEdge(n,n)}else if(2===arguments.length){const t=arguments[1];for(let n=arguments[0].iterator();n.hasNext();){const s=n.next();this.addEdge(s,t)}}}}class Ri{isInBoundary(e){}}class LP{isInBoundary(e){return e%2==1}get interfaces_(){return[Ri]}}class PP{isInBoundary(e){return e>0}get interfaces_(){return[Ri]}}class OP{isInBoundary(e){return e>1}get interfaces_(){return[Ri]}}class NP{isInBoundary(e){return 1===e}get interfaces_(){return[Ri]}}Ri.Mod2BoundaryNodeRule=LP,Ri.EndPointBoundaryNodeRule=PP,Ri.MultiValentEndPointBoundaryNodeRule=OP,Ri.MonoValentEndPointBoundaryNodeRule=NP,Ri.MOD2_BOUNDARY_RULE=new LP,Ri.ENDPOINT_BOUNDARY_RULE=new PP,Ri.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new OP,Ri.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new NP,Ri.OGC_SFS_BOUNDARY_RULE=Ri.MOD2_BOUNDARY_RULE;class Sh{constructor(){Sh.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=Ri.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){const e=arguments[0];if(null===e)throw new at("Rule must be non-null");this._boundaryRule=e}}locateInPolygonRing(e,t){return t.getEnvelopeInternal().intersects(e)?Xr.locateInRing(e,t.getCoordinates()):S.EXTERIOR}intersects(e,t){return this.locate(e,t)!==S.EXTERIOR}updateLocationInfo(e){e===S.INTERIOR&&(this._isIn=!0),e===S.BOUNDARY&&this._numBoundaries++}computeLocation(e,t){if(t instanceof Un&&this.updateLocationInfo(this.locateOnPoint(e,t)),t instanceof At)this.updateLocationInfo(this.locateOnLineString(e,t));else if(t instanceof kn)this.updateLocationInfo(this.locateInPolygon(e,t));else if(t instanceof Kr){const n=t;for(let s=0;s<n.getNumGeometries();s++){const r=n.getGeometryN(s);this.updateLocationInfo(this.locateOnLineString(e,r))}}else if(t instanceof Ks){const n=t;for(let s=0;s<n.getNumGeometries();s++){const r=n.getGeometryN(s);this.updateLocationInfo(this.locateInPolygon(e,r))}}else if(t instanceof qt){const n=new jd(t);for(;n.hasNext();){const s=n.next();s!==t&&this.computeLocation(e,s)}}}locateOnPoint(e,t){return t.getCoordinate().equals2D(e)?S.INTERIOR:S.EXTERIOR}locateOnLineString(e,t){if(!t.getEnvelopeInternal().intersects(e))return S.EXTERIOR;const n=t.getCoordinateSequence();return t.isClosed()||!e.equals(n.getCoordinate(0))&&!e.equals(n.getCoordinate(n.size()-1))?Xr.isOnLine(e,n)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}locateInPolygon(e,t){if(t.isEmpty())return S.EXTERIOR;const n=t.getExteriorRing(),s=this.locateInPolygonRing(e,n);if(s===S.EXTERIOR)return S.EXTERIOR;if(s===S.BOUNDARY)return S.BOUNDARY;for(let r=0;r<t.getNumInteriorRing();r++){const o=t.getInteriorRingN(r),a=this.locateInPolygonRing(e,o);if(a===S.INTERIOR)return S.EXTERIOR;if(a===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}locate(e,t){return t.isEmpty()?S.EXTERIOR:t instanceof At?this.locateOnLineString(e,t):t instanceof kn?this.locateInPolygon(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?S.BOUNDARY:this._numBoundaries>0||this._isIn?S.INTERIOR:S.EXTERIOR)}}class fy{visitItem(e){}}class Gd{constructor(){Gd.constructor_.apply(this,arguments)}static constructor_(){this._min=Ce.POSITIVE_INFINITY,this._max=Ce.NEGATIVE_INFINITY}getMin(){return this._min}intersects(e,t){return!(this._min>t||this._max<e)}getMax(){return this._max}toString(){return Oo.toLineString(new j(this._min,0),new j(this._max,0))}}Gd.NodeComparator=class Gpe{compare(e,t){const r=(e._min+e._max)/2,o=(t._min+t._max)/2;return r<o?-1:r>o?1:0}get interfaces_(){return[il]}};class n4 extends Gd{constructor(){super(),n4.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[1],n=arguments[2];this._min=arguments[0],this._max=t,this._item=n}query(e,t,n){if(!this.intersects(e,t))return null;n.visitItem(this._item)}}class i4 extends Gd{constructor(){super(),i4.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[1];this._node1=arguments[0],this._node2=t,this.buildExtent(this._node1,this._node2)}buildExtent(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)}query(e,t,n){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)}}class s4{constructor(){s4.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new se,this._root=null,this._level=0}buildTree(){pa.sort(this._leaves,new Gd.NodeComparator);let e=this._leaves,t=null,n=new se;for(;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}insert(e,t,n){if(null!==this._root)throw new oc("Index cannot be added to once it has been queried");this._leaves.add(new n4(e,t,n))}query(e,t,n){if(this.init(),null===this._root)return null;this._root.query(e,t,n)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(e){is.out.println(Oo.toLineString(new j(e._min,this._level),new j(e._max,this._level)))}init(){if(null!==this._root||0===this._leaves.size())return null;this.buildRoot()}buildLevel(e,t){this._level++,t.clear();for(let n=0;n<e.size();n+=2){const s=e.get(n);if(null===(n+1<e.size()?e.get(n):null))t.add(s);else{const o=new i4(e.get(n),e.get(n+1));t.add(o)}}}}class tn{constructor(){tn.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)tn.constructor_.call(this,new j,new j);else if(1===arguments.length){const e=arguments[0];tn.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){const t=arguments[1];this.p0=arguments[0],this.p1=t}else if(4===arguments.length){const n=arguments[2],s=arguments[3];tn.constructor_.call(this,new j(arguments[0],arguments[1]),new j(n,s))}}static midPoint(e,t){return new j((e.x+t.x)/2,(e.y+t.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof tn){const e=arguments[0],t=Pe.index(this.p0,this.p1,e.p0),n=Pe.index(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof j)return Pe.index(this.p0,this.p1,arguments[0])}toGeometry(e){return e.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return tn.midPoint(this.p0,this.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(e,t){const n=this.p0.x+e*(this.p1.x-this.p0.x),s=this.p0.y+e*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o);let l=0,c=0;if(0!==t){if(a<=0)throw new oc("Cannot compute offset from zero-length line segment");l=t*r/a,c=t*o/a}return new j(n-c,s+l)}setCoordinates(){if(1===arguments.length){const e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=t.x,this.p1.y=t.y}}segmentFraction(e){let t=this.projectionFactor(e);return t<0?t=0:(t>1||Ce.isNaN(t))&&(t=1),t}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}distance(){if(arguments[0]instanceof tn){const e=arguments[0];return di.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof j)return di.pointToSegment(arguments[0],this.p0,this.p1)}equals(e){if(!(e instanceof tn))return!1;const t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}intersection(e){const t=new ji;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}project(){if(arguments[0]instanceof j){const e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new j(e);const t=this.projectionFactor(e),n=new j;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof tn){const e=arguments[0],t=this.projectionFactor(e.p0),n=this.projectionFactor(e.p1);if(t>=1&&n>=1||t<=0&&n<=0)return null;let s=this.project(e.p0);t<0&&(s=this.p0),t>1&&(s=this.p1);let r=this.project(e.p1);return n<0&&(r=this.p0),n>1&&(r=this.p1),new tn(s,r)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(e){return 0===e?this.p0:this.p1}distancePerpendicular(e){return di.pointToLinePerpendicular(e,this.p0,this.p1)}closestPoint(e){const t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}projectionFactor(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;const t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,s=t*t+n*n;return s<=0?Ce.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/s}closestPoints(e){const t=this.intersection(e);if(null!==t)return[t,t];const n=new Array(2).fill(null);let s=Ce.MAX_VALUE,r=null;const o=this.closestPoint(e.p0);s=o.distance(e.p0),n[0]=o,n[1]=e.p0;const a=this.closestPoint(e.p1);r=a.distance(e.p1),r<s&&(s=r,n[0]=a,n[1]=e.p1);const l=e.closestPoint(this.p0);r=l.distance(this.p0),r<s&&(s=r,n[0]=this.p0,n[1]=l);const c=e.closestPoint(this.p1);return r=c.distance(this.p1),r<s&&(s=r,n[0]=this.p1,n[1]=c),n}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(e){const t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}reverse(){const e=this.p0;this.p0=this.p1,this.p1=e}equalsTopo(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}lineIntersection(e){return YC.intersection(this.p0,this.p1,e.p0,e.p1)}isHorizontal(){return this.p0.y===this.p1.y}reflect(e){const t=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),s=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=t*t+n*n,o=t*t-n*n,a=e.getX(),l=e.getY();return new j((-o*a-2*t*n*l-2*t*s)/r,(o*l-2*t*n*a-2*n*s)/r)}pointAlong(e){const t=new j;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}hashCode(){let e=Ce.doubleToLongBits(this.p0.x);e^=31*Ce.doubleToLongBits(this.p0.y);const t=Math.trunc(e)^Math.trunc(e>>32);let n=Ce.doubleToLongBits(this.p1.x);return n^=31*Ce.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)}get interfaces_(){return[Cs,$s]}}class Ss{constructor(){Ss.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){const t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}}static getLines(){if(1===arguments.length)return Ss.getLines(arguments[0],!1);if(2===arguments.length){if(De(arguments[0],Gn)&&De(arguments[1],Gn)){const t=arguments[1];for(let n=arguments[0].iterator();n.hasNext();){const s=n.next();Ss.getLines(s,t)}return t}if(arguments[0]instanceof ge&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1],n=new se;return e.apply(new Ss(n,t)),n}if(arguments[0]instanceof ge&&De(arguments[1],Gn)){const e=arguments[0],t=arguments[1];return e instanceof At?t.add(e):e.apply(new Ss(t)),t}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&De(arguments[0],Gn)&&De(arguments[1],Gn)){const t=arguments[1],n=arguments[2];for(let s=arguments[0].iterator();s.hasNext();){const r=s.next();Ss.getLines(r,t,n)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ge&&De(arguments[1],Gn)){const t=arguments[1];return arguments[0].apply(new Ss(t,arguments[2])),t}}}static getGeometry(){if(1===arguments.length){const e=arguments[0];return e.getFactory().buildGeometry(Ss.getLines(e))}if(2===arguments.length){const e=arguments[0],t=arguments[1];return e.getFactory().buildGeometry(Ss.getLines(e,t))}}filter(e){if(this._isForcedToLineString&&e instanceof wr){const t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof At&&this._lines.add(e)}setForceToLineString(e){this._isForcedToLineString=e}get interfaces_(){return[kh]}}class r4{constructor(){r4.constructor_.apply(this,arguments)}static constructor_(){this._items=new se}getItems(){return this._items}visitItem(e){this._items.add(e)}get interfaces_(){return[fy]}}class Ih{constructor(){Ih.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const e=arguments[0];if(!(De(e,bh)||e instanceof wr))throw new at("Argument must be Polygonal or LinearRing");this._geom=e}locate(e){null===this._index&&(this._index=new my(this._geom),this._geom=null);const t=new Hd(e),n=new gy(t);return this._index.query(e.y,e.y,n),t.getLocation()}get interfaces_(){return[SP]}}class gy{constructor(){gy.constructor_.apply(this,arguments)}static constructor_(){this._counter=null,this._counter=arguments[0]}visitItem(e){const t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}get interfaces_(){return[fy]}}class my{constructor(){my.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new s4;const e=arguments[0];e.isEmpty()?this._isEmpty=!0:this.init(e)}init(e){for(let n=Ss.getLines(e).iterator();n.hasNext();){const r=n.next().getCoordinates();this.addLine(r)}}addLine(e){for(let t=1;t<e.length;t++){const n=new tn(e[t-1],e[t]),s=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(s,r,n)}}query(){if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this._isEmpty)return new se;const n=new r4;return this._index.query(e,t,n),n.getItems()}if(3===arguments.length){if(this._isEmpty)return null;this._index.query(arguments[0],arguments[1],arguments[2])}}}Ih.SegmentVisitor=gy,Ih.IntervalIndexedGeometry=my;class o4{constructor(){o4.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[1],n=arguments[2];this.coord=new j(arguments[0]),this.segmentIndex=t,this.dist=n}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}compareTo(e){return this.compare(e.segmentIndex,e.dist)}isEndPoint(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}get interfaces_(){return[Cs]}}class a4{constructor(){a4.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new No,this.edge=null,this.edge=arguments[0]}print(e){e.println("Intersections:");for(let t=this.iterator();t.hasNext();)t.next().print(e)}addEndpoints(){const e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}createSplitEdge(e,t){let n=t.segmentIndex-e.segmentIndex+2;const r=t.dist>0||!t.coord.equals2D(this.edge.pts[t.segmentIndex]);r||n--;const o=new Array(n).fill(null);let a=0;o[a++]=new j(e.coord);for(let l=e.segmentIndex+1;l<=t.segmentIndex;l++)o[a++]=this.edge.pts[l];return r&&(o[a]=t.coord),new Fo(o,new bn(this.edge._label))}add(e,t,n){const s=new o4(e,t,n),r=this._nodeMap.get(s);return null!==r?r:(this._nodeMap.put(s,s),s)}isIntersection(e){for(let t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(e){this.addEndpoints();const t=this.iterator();let n=t.next();for(;t.hasNext();){const s=t.next(),r=this.createSplitEdge(n,s);e.add(r),n=s}}}class Ot{constructor(){Ot.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(Ee.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const e=arguments[0];Ot.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof Ot){const e=arguments[0];Ot.constructor_.call(this),this._matrix[S.INTERIOR][S.INTERIOR]=e._matrix[S.INTERIOR][S.INTERIOR],this._matrix[S.INTERIOR][S.BOUNDARY]=e._matrix[S.INTERIOR][S.BOUNDARY],this._matrix[S.INTERIOR][S.EXTERIOR]=e._matrix[S.INTERIOR][S.EXTERIOR],this._matrix[S.BOUNDARY][S.INTERIOR]=e._matrix[S.BOUNDARY][S.INTERIOR],this._matrix[S.BOUNDARY][S.BOUNDARY]=e._matrix[S.BOUNDARY][S.BOUNDARY],this._matrix[S.BOUNDARY][S.EXTERIOR]=e._matrix[S.BOUNDARY][S.EXTERIOR],this._matrix[S.EXTERIOR][S.INTERIOR]=e._matrix[S.EXTERIOR][S.INTERIOR],this._matrix[S.EXTERIOR][S.BOUNDARY]=e._matrix[S.EXTERIOR][S.BOUNDARY],this._matrix[S.EXTERIOR][S.EXTERIOR]=e._matrix[S.EXTERIOR][S.EXTERIOR]}}static isTrue(e){return e>=0||e===Ee.TRUE}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return t===Ee.SYM_DONTCARE||t===Ee.SYM_TRUE&&(e>=0||e===Ee.TRUE)||t===Ee.SYM_FALSE&&e===Ee.FALSE||t===Ee.SYM_P&&e===Ee.P||t===Ee.SYM_L&&e===Ee.L||t===Ee.SYM_A&&e===Ee.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new Ot(arguments[0]).matches(t)}}isIntersects(){return!this.isDisjoint()}set(){if(1===arguments.length){const e=arguments[0];for(let t=0;t<e.length;t++){const n=Math.trunc(t/3);this._matrix[n][t%3]=Ee.toDimensionValue(e.charAt(t))}}else 3===arguments.length&&(this._matrix[arguments[0]][arguments[1]]=arguments[2])}isContains(){return Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.EXTERIOR][S.INTERIOR]===Ee.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===Ee.FALSE}isWithin(){return Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.INTERIOR][S.EXTERIOR]===Ee.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===Ee.FALSE}isTouches(e,t){return e>t?this.isTouches(t,e):(e===Ee.A&&t===Ee.A||e===Ee.L&&t===Ee.L||e===Ee.L&&t===Ee.A||e===Ee.P&&t===Ee.A||e===Ee.P&&t===Ee.L)&&this._matrix[S.INTERIOR][S.INTERIOR]===Ee.FALSE&&(Ot.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||Ot.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||Ot.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))}isOverlaps(e,t){return e===Ee.P&&t===Ee.P||e===Ee.A&&t===Ee.A?Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&Ot.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR])&&Ot.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR]):e===Ee.L&&t===Ee.L&&1===this._matrix[S.INTERIOR][S.INTERIOR]&&Ot.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR])&&Ot.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR])}isEquals(e,t){return e===t&&Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.INTERIOR][S.EXTERIOR]===Ee.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===Ee.FALSE&&this._matrix[S.EXTERIOR][S.INTERIOR]===Ee.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===Ee.FALSE}matches(e){if(9!==e.length)throw new at("Should be length 9: "+e);for(let t=0;t<3;t++)for(let n=0;n<3;n++)if(!Ot.matches(this._matrix[t][n],e.charAt(3*t+n)))return!1;return!0}add(e){for(let t=0;t<3;t++)for(let n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))}isDisjoint(){return this._matrix[S.INTERIOR][S.INTERIOR]===Ee.FALSE&&this._matrix[S.INTERIOR][S.BOUNDARY]===Ee.FALSE&&this._matrix[S.BOUNDARY][S.INTERIOR]===Ee.FALSE&&this._matrix[S.BOUNDARY][S.BOUNDARY]===Ee.FALSE}isCrosses(e,t){return e===Ee.P&&t===Ee.L||e===Ee.P&&t===Ee.A||e===Ee.L&&t===Ee.A?Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&Ot.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR]):e===Ee.L&&t===Ee.P||e===Ee.A&&t===Ee.P||e===Ee.A&&t===Ee.L?Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&Ot.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR]):e===Ee.L&&t===Ee.L&&0===this._matrix[S.INTERIOR][S.INTERIOR]}isCovers(){return(Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])||Ot.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||Ot.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||Ot.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))&&this._matrix[S.EXTERIOR][S.INTERIOR]===Ee.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===Ee.FALSE}isCoveredBy(){return(Ot.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])||Ot.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||Ot.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||Ot.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))&&this._matrix[S.INTERIOR][S.EXTERIOR]===Ee.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===Ee.FALSE}setAtLeast(){if(1===arguments.length){const e=arguments[0];for(let t=0;t<e.length;t++){const n=Math.trunc(t/3);this.setAtLeast(n,t%3,Ee.toDimensionValue(e.charAt(t)))}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];this._matrix[e][t]<n&&(this._matrix[e][t]=n)}}setAtLeastIfValid(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}toString(){const e=new cy("123456789");for(let t=0;t<3;t++)for(let n=0;n<3;n++)e.setCharAt(3*t+n,Ee.toDimensionSymbol(this._matrix[t][n]));return e.toString()}setAll(e){for(let t=0;t<3;t++)for(let n=0;n<3;n++)this._matrix[t][n]=e}get(e,t){return this._matrix[e][t]}transpose(){let e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}get interfaces_(){return[If]}}let Upe=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map(()=>Array(3));for(let t=0;t<2;t++)for(let n=0;n<3;n++)this._depth[t][n]=i.NULL_VALUE}static depthAtLocation(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:i.NULL_VALUE}getDepth(t,n){return this._depth[t][n]}setDepth(t,n,s){this._depth[t][n]=s}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let n=0;n<3;n++)if(this._depth[t][n]!==i.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===i.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===i.NULL_VALUE:void 0}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let n=this._depth[t][1];this._depth[t][2]<n&&(n=this._depth[t][2]),n<0&&(n=0);for(let s=1;s<3;s++){let r=0;this._depth[t][s]>n&&(r=1),this._depth[t][s]=r}}}getDelta(t){return this._depth[t][he.RIGHT]-this._depth[t][he.LEFT]}getLocation(t,n){return this._depth[t][n]<=0?S.EXTERIOR:S.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let n=0;n<2;n++)for(let s=1;s<3;s++){const r=t.getLocation(n,s);(r===S.EXTERIOR||r===S.INTERIOR)&&(this.isNull(n,s)?this._depth[n][s]=i.depthAtLocation(r):this._depth[n][s]+=i.depthAtLocation(r))}}else if(3===arguments.length){const t=arguments[0],n=arguments[1];arguments[2]===S.INTERIOR&&this._depth[t][n]++}}}return i.NULL_VALUE=-1,i})();class yy{constructor(){yy.constructor_.apply(this,arguments)}static constructor_(){this._data=null,this._size=0,0===arguments.length?yy.constructor_.call(this,10):1===arguments.length&&(this._data=new Array(arguments[0]).fill(null))}size(){return this._size}addAll(e){if(null===e||0===e.length)return null;this.ensureCapacity(this._size+e.length),is.arraycopy(e,0,this._data,this._size,e.length),this._size+=e.length}ensureCapacity(e){if(e<=this._data.length)return null;const t=Math.max(e,2*this._data.length);this._data=rc.copyOf(this._data,t)}toArray(){const e=new Array(this._size).fill(null);return is.arraycopy(this._data,0,e,0,this._size),e}add(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}class l4{static toIntArray(e){const t=new Array(e.size()).fill(null);for(let n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}findChainEnd(e,t){const n=Qr.quadrant(e[t],e[t+1]);let s=t+1;for(;s<e.length&&Qr.quadrant(e[s-1],e[s])===n;)s++;return s-1}OLDgetChainStartIndices(e){let t=0;const n=new se;n.add(t);do{const r=this.findChainEnd(e,t);n.add(r),t=r}while(t<e.length-1);return l4.toIntArray(n)}getChainStartIndices(e){let t=0;const n=new yy(Math.trunc(e.length/2));n.add(t);do{const s=this.findChainEnd(e,t);n.add(s),t=s}while(t<e.length-1);return n.toArray()}}class c4{constructor(){c4.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const e=arguments[0];this.e=e,this.pts=e.getCoordinates();const t=new l4;this.startIndex=t.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(e){const t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}getMinX(e){const t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n}computeIntersectsForChain(){if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],arguments[3])}else if(6===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3],r=arguments[4],o=arguments[5];if(t-e==1&&r-s==1)return o.addIntersections(this.e,e,n.e,s),null;if(!this.overlaps(e,t,n,s,r))return null;const a=Math.trunc((e+t)/2),l=Math.trunc((s+r)/2);e<a&&(s<l&&this.computeIntersectsForChain(e,a,n,s,l,o),l<r&&this.computeIntersectsForChain(e,a,n,l,r,o)),a<t&&(s<l&&this.computeIntersectsForChain(a,t,n,s,l,o),l<r&&this.computeIntersectsForChain(a,t,n,l,r,o))}}overlaps(e,t,n,s,r){return mt.intersects(this.pts[e],this.pts[t],n.pts[s],n.pts[r])}getStartIndexes(){return this.startIndex}computeIntersects(e,t){for(let n=0;n<this.startIndex.length-1;n++)for(let s=0;s<e.startIndex.length-1;s++)this.computeIntersectsForChain(n,e,s,t)}}class Fo extends dy{constructor(){super(),Fo.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new a4(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Upe,this._depthDelta=0,1===arguments.length)Fo.constructor_.call(this,arguments[0],null);else if(2===arguments.length){const t=arguments[1];this.pts=arguments[0],this._label=t}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof Ot&&arguments[0]instanceof bn))return super.updateIM.apply(this,arguments);{const e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,he.ON),e.getLocation(1,he.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,he.LEFT),e.getLocation(1,he.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,he.RIGHT),e.getLocation(1,he.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new Fo(e,bn.toLineLabel(this._label))}setIsolated(e){this._isIsolated=e}setName(e){this._name=e}equals(e){if(!(e instanceof Fo))return!1;const t=e;if(this.pts.length!==t.pts.length)return!1;let n=!0,s=!0,r=this.pts.length;for(let o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(t.pts[o])||(n=!1),this.pts[o].equals2D(t.pts[--r])||(s=!1),!n&&!s)return!1;return!0}getCoordinate(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}setDepthDelta(e){this._depthDelta=e}getEdgeIntersectionList(){return this.eiList}addIntersections(e,t,n){for(let s=0;s<e.getIntersectionNum();s++)this.addIntersection(e,t,n,s)}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}print(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(let t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)}computeIM(e){Fo.updateIM(this._label,e)}isCollapsed(){return!(!this._label.isArea()||3!==this.pts.length||!this.pts[0].equals(this.pts[2]))}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(e){e.print("edge "+this._name+": ");for(let t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new c4(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new mt;for(let e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}addIntersection(e,t,n,s){const r=new j(e.getIntersection(s));let o=t,a=e.getEdgeDistance(n,s);const l=o+1;l<this.pts.length&&r.equals2D(this.pts[l])&&(o=l,a=0),this.eiList.add(r,o,a)}toString(){const e=new cy;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(let t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}isPointwiseEqual(e){if(this.pts.length!==e.pts.length)return!1;for(let t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}}class Mr extends Ch{constructor(){super(),Mr.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new yP,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sh,2===arguments.length)Mr.constructor_.call(this,arguments[0],arguments[1],Ri.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){const t=arguments[1],n=arguments[2];this._argIndex=arguments[0],this._parentGeom=t,this._boundaryNodeRule=n,null!==t&&this.add(t)}}static determineBoundary(e,t){return e.isInBoundary(t)?S.BOUNDARY:S.INTERIOR}insertBoundaryPoint(e,t){const s=this._nodes.addNode(t).getLabel();let r=1,o=S.NONE;o=s.getLocation(e,he.ON),o===S.BOUNDARY&&r++;const a=Mr.determineBoundary(this._boundaryNodeRule,r);s.setLocation(e,a)}computeSelfNodes(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){const t=arguments[1],n=arguments[2],s=new Eh(arguments[0],!0,!1);s.setIsDoneIfProperInt(n);const r=this.createEdgeSetIntersector(),o=this._parentGeom instanceof wr||this._parentGeom instanceof kn||this._parentGeom instanceof Ks;return r.computeIntersections(this._edges,s,t||!o),this.addSelfIntersectionNodes(this._argIndex),s}}addPolygon(e){this.addPolygonRing(e.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(let t=0;t<e.getNumInteriorRing();t++){const n=e.getInteriorRingN(t);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR)}}addEdge(e){this.insertEdge(e);const t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],S.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],S.BOUNDARY)}addLineString(e){const t=Pt.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;const n=new Fo(t,new bn(this._argIndex,S.INTERIOR));this._lineEdgeMap.put(e,n),this.insertEdge(n),Oe.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null);let n=0;for(let s=e.iterator();s.hasNext();){const r=s.next();t[n++]=r.getCoordinate().copy()}return t}addSelfIntersectionNodes(e){for(let t=this._edges.iterator();t.hasNext();){const n=t.next(),s=n.getLabel().getLocation(e);for(let r=n.eiList.iterator();r.hasNext();){const o=r.next();this.addSelfIntersectionNode(e,o.coord,s)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof ge))return super.add.apply(this,arguments);{const e=arguments[0];if(e.isEmpty())return null;if(e instanceof Ks&&(this._useBoundaryDeterminationRule=!1),e instanceof kn)this.addPolygon(e);else if(e instanceof At)this.addLineString(e);else if(e instanceof Un)this.addPoint(e);else if(e instanceof Po)this.addCollection(e);else if(e instanceof Kr)this.addCollection(e);else if(e instanceof Ks)this.addCollection(e);else{if(!(e instanceof qt))throw new Wr(e.getGeometryType());this.addCollection(e)}}}addCollection(e){for(let t=0;t<e.getNumGeometries();t++){const n=e.getGeometryN(t);this.add(n)}}locate(e){return De(this._parentGeom,bh)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ih(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)}findEdge(){return 1===arguments.length&&arguments[0]instanceof At?this._lineEdgeMap.get(arguments[0]):super.findEdge.apply(this,arguments)}computeSplitEdges(e){for(let t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(e)}computeEdgeIntersections(e,t,n){const s=new Eh(t,n,!0);return s.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,s),s}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof Un){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,S.INTERIOR)}else arguments[0]instanceof j&&this.insertPoint(this._argIndex,arguments[0],S.INTERIOR)}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(e,t,n){if(this.isBoundaryNode(e,t))return null;n===S.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n)}addPolygonRing(e,t,n){if(e.isEmpty())return null;const s=Pt.removeRepeatedPoints(e.getCoordinates());if(s.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=s[0],null;let r=t,o=n;Pe.isCCW(s)&&(r=n,o=t);const a=new Fo(s,new bn(this._argIndex,S.BOUNDARY,r,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,s[0],S.BOUNDARY)}insertPoint(e,t,n){const s=this._nodes.addNode(t),r=s.getLabel();null===r?s._label=new bn(e,n):r.setLocation(e,n)}createEdgeSetIntersector(){return new t4}}class _y extends da{constructor(){super(),_y.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new se,1===arguments.length)_y.constructor_.call(this,null,arguments[0]);else if(2===arguments.length){const t=arguments[1];da.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new bn(t.getLabel())),this.insert(t)}}insert(e){this._edgeEnds.add(e)}print(e){e.println("EdgeEndBundle--\x3e Label: "+this._label);for(let t=this.iterator();t.hasNext();)t.next().print(e),e.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(e,t){let n=0,s=!1;for(let o=this.iterator();o.hasNext();){const l=o.next().getLabel().getLocation(e);l===S.BOUNDARY&&n++,l===S.INTERIOR&&(s=!0)}let r=S.NONE;s&&(r=S.INTERIOR),n>0&&(r=Mr.determineBoundary(t,n)),this._label.setLocation(e,r)}computeLabelSide(e,t){for(let n=this.iterator();n.hasNext();){const s=n.next();if(s.getLabel().isArea()){const r=s.getLabel().getLocation(e,t);if(r===S.INTERIOR)return this._label.setLocation(e,t,S.INTERIOR),null;r===S.EXTERIOR&&this._label.setLocation(e,t,S.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(e){this.computeLabelSide(e,he.LEFT),this.computeLabelSide(e,he.RIGHT)}updateIM(e){Fo.updateIM(this._label,e)}computeLabel(e){let t=!1;for(let n=this.iterator();n.hasNext();)n.next().getLabel().isArea()&&(t=!0);this._label=t?new bn(S.NONE,S.NONE,S.NONE):new bn(S.NONE);for(let n=0;n<2;n++)this.computeLabelOn(n,e),t&&this.computeLabelSides(n)}}class Wpe extends uy{constructor(){super()}updateIM(e){for(let t=this.iterator();t.hasNext();)t.next().updateIM(e)}insert(e){let t=this._edgeMap.get(e);null===t?(t=new _y(e),this.insertEdgeEnd(e,t)):t.insert(e)}}class h4 extends rl{constructor(){super(),h4.constructor_.apply(this,arguments)}static constructor_(){rl.constructor_.call(this,arguments[0],arguments[1])}computeIM(e){e.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}updateIMFromEdges(e){this._edges.updateIM(e)}}class FP extends QC{constructor(){super()}createNode(e){return new h4(e,new Wpe)}}class u4{constructor(){u4.constructor_.apply(this,arguments)}static constructor_(){this._nodes=new qd(new FP)}insertEdgeEnds(e){for(let t=e.iterator();t.hasNext();){const n=t.next();this._nodes.add(n)}}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(e,t){for(let n=e.getNodeIterator();n.hasNext();){const s=n.next();this._nodes.addNode(s.getCoordinate()).setLabel(t,s.getLabel().getLocation(t))}}build(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);const n=(new DP).computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}computeIntersectionNodes(e,t){for(let n=e.getEdgeIterator();n.hasNext();){const s=n.next(),r=s.getLabel().getLocation(t);for(let o=s.getEdgeIntersectionList().iterator();o.hasNext();){const a=o.next(),l=this._nodes.addNode(a.coord);r===S.BOUNDARY?l.setLabelBoundary(t):l.getLabel().isNull(t)&&l.setLabel(t,S.INTERIOR)}}}}class d4{constructor(){d4.constructor_.apply(this,arguments)}static constructor_(){this._li=new ji,this._geomGraph=null,this._nodeGraph=new u4,this._invalidPoint=null,this._geomGraph=arguments[0]}isNodeEdgeAreaLabelsConsistent(){for(let e=this._nodeGraph.getNodeIterator();e.hasNext();){const t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=t.getCoordinate().copy(),!1}return!0}hasDuplicateRings(){for(let e=this._nodeGraph.getNodeIterator();e.hasNext();)for(let n=e.next().getEdges().iterator();n.hasNext();){const s=n.next();if(s.getEdgeEnds().size()>1)return this._invalidPoint=s.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){const e=this._geomGraph.computeSelfNodes(this._li,!0,!0);return e.hasProperIntersection()?(this._invalidPoint=e.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}getInvalidPoint(){return this._invalidPoint}}class VP{getBounds(){}}class Vo{constructor(){Vo.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;const t=arguments[1];this._bounds=arguments[0],this._item=t}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[VP,$s]}}var zP=Ut(475);class vy{constructor(){this._fpQueue=new zP((e,t)=>e.compareTo(t)<0)}poll(){return this._fpQueue.poll()}size(){return this._fpQueue.size}clear(){this._fpQueue=new zP}peek(){return this._fpQueue.peek()}remove(){return this._fpQueue.poll()}isEmpty(){return this._fpQueue.isEmpty()}add(e){this._fpQueue.add(e)}}class $pe{query(){}insert(e,t){}remove(e,t){}}class Xs{constructor(){Xs.constructor_.apply(this,arguments)}static constructor_(){this._childBoundables=new se,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])}getLevel(){return this._level}addChildBoundable(e){Oe.isTrue(null===this._bounds),this._childBoundables.add(e)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}get interfaces_(){return[VP,$s]}}class Vn{static distance(e,t,n,s){const r=n-e,o=s-t;return Math.sqrt(r*r+o*o)}static maximumDistance(e,t){const n=Math.min(e.getMinX(),t.getMinX()),s=Math.min(e.getMinY(),t.getMinY()),r=Math.max(e.getMaxX(),t.getMaxX()),o=Math.max(e.getMaxY(),t.getMaxY());return Vn.distance(n,s,r,o)}static minMaxDistance(e,t){const n=e.getMinX(),s=e.getMinY(),r=e.getMaxX(),o=e.getMaxY(),a=t.getMinX(),l=t.getMinY(),c=t.getMaxX(),h=t.getMaxY();let u=Vn.maxDistance(n,s,n,o,a,l,a,h);return u=Math.min(u,Vn.maxDistance(n,s,n,o,a,l,c,l)),u=Math.min(u,Vn.maxDistance(n,s,n,o,c,h,a,h)),u=Math.min(u,Vn.maxDistance(n,s,n,o,c,h,c,l)),u=Math.min(u,Vn.maxDistance(n,s,r,s,a,l,a,h)),u=Math.min(u,Vn.maxDistance(n,s,r,s,a,l,c,l)),u=Math.min(u,Vn.maxDistance(n,s,r,s,c,h,a,h)),u=Math.min(u,Vn.maxDistance(n,s,r,s,c,h,c,l)),u=Math.min(u,Vn.maxDistance(r,o,n,o,a,l,a,h)),u=Math.min(u,Vn.maxDistance(r,o,n,o,a,l,c,l)),u=Math.min(u,Vn.maxDistance(r,o,n,o,c,h,a,h)),u=Math.min(u,Vn.maxDistance(r,o,n,o,c,h,c,l)),u=Math.min(u,Vn.maxDistance(r,o,r,s,a,l,a,h)),u=Math.min(u,Vn.maxDistance(r,o,r,s,a,l,c,l)),u=Math.min(u,Vn.maxDistance(r,o,r,s,c,h,a,h)),u=Math.min(u,Vn.maxDistance(r,o,r,s,c,h,c,l)),u}static maxDistance(e,t,n,s,r,o,a,l){let c=Vn.distance(e,t,r,o);return c=Math.max(c,Vn.distance(e,t,a,l)),c=Math.max(c,Vn.distance(n,s,r,o)),c=Math.max(c,Vn.distance(n,s,a,l)),c}}class ss{constructor(){ss.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;const t=arguments[1],n=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=n,this._distance=this.distance()}static area(e){return e.getBounds().getArea()}static isComposite(e){return e instanceof Xs}maximumDistance(){return Vn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(e,t){const n=ss.isComposite(this._boundable1),s=ss.isComposite(this._boundable2);if(n&&s)return ss.area(this._boundable1)>ss.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,t),null):(this.expand(this._boundable2,this._boundable1,!0,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,e,t),null;if(s)return this.expand(this._boundable2,this._boundable1,!0,e,t),null;throw new at("neither boundable is composite")}isLeaves(){return!(ss.isComposite(this._boundable1)||ss.isComposite(this._boundable2))}getBoundable(e){return 0===e?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}compareTo(e){return this._distance<e._distance?-1:this._distance>e._distance?1:0}expand(e,t,n,s,r){for(let a=e.getChildBoundables().iterator();a.hasNext();){const l=a.next();let c=null;c=n?new ss(t,l,this._itemDistance):new ss(l,t,this._itemDistance),c.getDistance()<r&&s.add(c)}}get interfaces_(){return[Cs]}}class fa{constructor(){fa.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new se,this._nodeCapacity=null,0===arguments.length)fa.constructor_.call(this,fa.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const e=arguments[0];Oe.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}}static compareDoubles(e,t){return e>t?1:e<t?-1:0}queryInternal(){if(De(arguments[2],fy)&&arguments[0]instanceof Object&&arguments[1]instanceof Xs){const e=arguments[0],n=arguments[2],s=arguments[1].getChildBoundables();for(let r=0;r<s.size();r++){const o=s.get(r);!this.getIntersectsOp().intersects(o.getBounds(),e)||(o instanceof Xs?this.queryInternal(e,o,n):o instanceof Vo?n.visitItem(o.getItem()):Oe.shouldNeverReachHere())}}else if(De(arguments[2],kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Xs){const e=arguments[0],n=arguments[2],s=arguments[1].getChildBoundables();for(let r=0;r<s.size();r++){const o=s.get(r);!this.getIntersectsOp().intersects(o.getBounds(),e)||(o instanceof Xs?this.queryInternal(e,o,n):o instanceof Vo?n.add(o.getItem()):Oe.shouldNeverReachHere())}}}insert(e,t){Oe.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Vo(e,t))}boundablesAtLevel(){if(1===arguments.length){const e=arguments[0],t=new se;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];if(Oe.isTrue(e>-2),t.getLevel()===e)return n.add(t),null;for(let s=t.getChildBoundables().iterator();s.hasNext();){const r=s.next();r instanceof Xs?this.boundablesAtLevel(e,r,n):(Oe.isTrue(r instanceof Vo),-1===e&&n.add(r))}return null}}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){const e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];let s=this.removeItem(t,n);if(s)return!0;let r=null;for(let o=t.getChildBoundables().iterator();o.hasNext();){const a=o.next();if(this.getIntersectsOp().intersects(a.getBounds(),e)&&a instanceof Xs&&(s=this.remove(e,a,n),s)){r=a;break}}return null!==r&&r.getChildBoundables().isEmpty()&&t.getChildBoundables().remove(r),s}}createHigherLevels(e,t){Oe.isTrue(!e.isEmpty());const n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let t=0;for(let n=arguments[0].getChildBoundables().iterator();n.hasNext();){const s=n.next();if(s instanceof Xs){const r=this.depth(s);r>t&&(t=r)}}return t+1}}createParentBoundables(e,t){Oe.isTrue(!e.isEmpty());const n=new se;n.add(this.createNode(t));const s=new se(e);pa.sort(s,this.getComparator());for(let r=s.iterator();r.hasNext();){const o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}getNodeCapacity(){return this._nodeCapacity}lastNode(e){return e.get(e.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let t=0;for(let n=arguments[0].getChildBoundables().iterator();n.hasNext();){const s=n.next();s instanceof Xs?t+=this.size(s):s instanceof Vo&&(t+=1)}return t}}removeItem(e,t){let n=null;for(let s=e.getChildBoundables().iterator();s.hasNext();){const r=s.next();r instanceof Vo&&r.getItem()===t&&(n=r)}return null!==n&&(e.getChildBoundables().remove(n),!0)}itemsTree(){if(0===arguments.length){this.build();const e=this.itemsTree(this._root);return null===e?new se:e}if(1===arguments.length){const e=arguments[0],t=new se;for(let n=e.getChildBoundables().iterator();n.hasNext();){const s=n.next();if(s instanceof Xs){const r=this.itemsTree(s);null!==r&&t.add(r)}else s instanceof Vo?t.add(s.getItem()):Oe.shouldNeverReachHere()}return t.size()<=0?null:t}}query(){if(1===arguments.length){const e=arguments[0];this.build();const t=new se;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}get interfaces_(){return[$s]}}fa.IntersectsOp=function Ype(){},fa.DEFAULT_NODE_CAPACITY=10;class Kpe{distance(e,t){}}class zn extends fa{constructor(){super(),zn.constructor_.apply(this,arguments)}static constructor_(){0===arguments.length?zn.constructor_.call(this,zn.DEFAULT_NODE_CAPACITY):1===arguments.length&&fa.constructor_.call(this,arguments[0])}static getItems(e){const t=new Array(e.size()).fill(null);let n=0;for(;!e.isEmpty();){const s=e.poll();t[n]=s.getBoundable(0).getItem(),n++}return t}static avg(e,t){return(e+t)/2}static centreY(e){return zn.avg(e.getMinY(),e.getMaxY())}static centreX(e){return zn.avg(e.getMinX(),e.getMaxX())}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof mt))return super.insert.apply(this,arguments);{const e=arguments[0],t=arguments[1];if(e.isNull())return null;super.insert.call(this,e,t)}}getIntersectsOp(){return zn.intersectsOp}verticalSlices(e,t){const n=Math.trunc(Math.ceil(e.size()/t)),s=new Array(t).fill(null),r=e.iterator();for(let o=0;o<t;o++){s[o]=new se;let a=0;for(;r.hasNext()&&a<n;){const l=r.next();s[o].add(l),a++}}return s}query(){if(1===arguments.length)return super.query.call(this,arguments[0]);2===arguments.length&&super.query.call(this,arguments[0],arguments[1])}getComparator(){return zn.yComparator}createParentBoundablesFromVerticalSlice(e,t){return super.createParentBoundables.call(this,e,t)}remove(){return 2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof mt?super.remove.call(this,arguments[0],arguments[1]):super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(e,t){Oe.isTrue(!e.isEmpty());const n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),s=new se(e);pa.sort(s,zn.xComparator);const r=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,t)}nearestNeighbour(){if(1===arguments.length){if(De(arguments[0],Kpe)){const e=arguments[0];if(this.isEmpty())return null;const t=new ss(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof ss){const e=arguments[0];let t=Ce.POSITIVE_INFINITY,n=null;const s=new vy;for(s.add(e);!s.isEmpty()&&t>0;){const r=s.poll(),o=r.getDistance();if(o>=t)break;r.isLeaves()?(t=o,n=r):r.expandToQueue(s,t)}return null===n?null:[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}}else{if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this.isEmpty()||e.isEmpty())return null;const n=new ss(this.getRoot(),e.getRoot(),t);return this.nearestNeighbour(n)}if(3===arguments.length){const n=arguments[2],s=new Vo(arguments[0],arguments[1]),r=new ss(this.getRoot(),s,n);return this.nearestNeighbour(r)[0]}if(4===arguments.length){const n=arguments[2],s=arguments[3],r=new Vo(arguments[0],arguments[1]),o=new ss(this.getRoot(),r,n);return this.nearestNeighbourK(o,s)}}}isWithinDistance(){if(2===arguments.length){const e=arguments[0],t=arguments[1];let n=Ce.POSITIVE_INFINITY;const s=new vy;for(s.add(e);!s.isEmpty();){const r=s.poll(),o=r.getDistance();if(o>t)return!1;if(r.maximumDistance()<=t)return!0;if(r.isLeaves()){if(n=o,n<=t)return!0}else r.expandToQueue(s,n)}return!1}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=new ss(this.getRoot(),e.getRoot(),t);return this.isWithinDistance(s,n)}}createParentBoundablesFromVerticalSlices(e,t){Oe.isTrue(e.length>0);const n=new se;for(let s=0;s<e.length;s++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[s],t));return n}nearestNeighbourK(){if(2===arguments.length)return this.nearestNeighbourK(arguments[0],Ce.POSITIVE_INFINITY,arguments[1]);if(3===arguments.length){const e=arguments[0],n=arguments[2];let s=arguments[1];const r=new vy;r.add(e);const o=new vy;for(;!r.isEmpty()&&s>=0;){const a=r.poll(),l=a.getDistance();if(l>=s)break;a.isLeaves()?o.size()<n?o.add(a):(o.peek().getDistance()>l&&(o.poll(),o.add(a)),s=o.peek().getDistance()):a.expandToQueue(r,s)}return zn.getItems(o)}}createNode(e){return new ky(e)}get interfaces_(){return[$pe,$s]}}class ky extends Xs{constructor(){super(),ky.constructor_.apply(this,arguments)}static constructor_(){Xs.constructor_.call(this,arguments[0])}computeBounds(){let e=null;for(let t=this.getChildBoundables().iterator();t.hasNext();){const n=t.next();null===e?e=new mt(n.getBounds()):e.expandToInclude(n.getBounds())}return e}}zn.STRtreeNode=ky,zn.xComparator=new class{get interfaces_(){return[il]}compare(i,e){return fa.compareDoubles(zn.centreX(i.getBounds()),zn.centreX(e.getBounds()))}},zn.yComparator=new class{get interfaces_(){return[il]}compare(i,e){return fa.compareDoubles(zn.centreY(i.getBounds()),zn.centreY(e.getBounds()))}},zn.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(i,e){return i.intersects(e)}},zn.DEFAULT_NODE_CAPACITY=10;class p4{constructor(){p4.constructor_.apply(this,arguments)}static constructor_(){this._graph=null,this._rings=new se,this._totalEnv=new mt,this._index=null,this._nestedPt=null,this._graph=arguments[0]}add(e){this._rings.add(e),this._totalEnv.expandToInclude(e.getEnvelopeInternal())}getNestedPoint(){return this._nestedPt}buildIndex(){this._index=new zn;for(let e=0;e<this._rings.size();e++){const t=this._rings.get(e),n=t.getEnvelopeInternal();this._index.insert(n,t)}}isNonNested(){this.buildIndex();for(let e=0;e<this._rings.size();e++){const t=this._rings.get(e),n=t.getCoordinates(),s=this._index.query(t.getEnvelopeInternal());for(let r=0;r<s.size();r++){const o=s.get(r),a=o.getCoordinates();if(t===o||!t.getEnvelopeInternal().intersects(o.getEnvelopeInternal()))continue;const l=zo.findPtNotNode(n,o,this._graph);if(null!==l&&Xr.isInRing(l,a))return this._nestedPt=l,!1}}return!0}}let Wn=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){if(this._errorType=null,this._pt=null,1===arguments.length)i.constructor_.call(this,arguments[0],null);else if(2===arguments.length){const n=arguments[1];this._errorType=arguments[0],null!==n&&(this._pt=n.copy())}}getCoordinate(){return this._pt}getMessage(){return i.errMsg[this._errorType]}toString(){let t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}getErrorType(){return this._errorType}}return i.ERROR=0,i.REPEATED_POINT=1,i.HOLE_OUTSIDE_SHELL=2,i.NESTED_HOLES=3,i.DISCONNECTED_INTERIOR=4,i.SELF_INTERSECTION=5,i.RING_SELF_INTERSECTION=6,i.NESTED_SHELLS=7,i.DUPLICATE_RINGS=8,i.TOO_FEW_POINTS=9,i.INVALID_COORDINATE=10,i.RING_NOT_CLOSED=11,i.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],i})();class zo{constructor(){zo.constructor_.apply(this,arguments)}static constructor_(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null,this._parentGeometry=arguments[0]}static findPtNotNode(e,t,n){const r=n.findEdge(t).getEdgeIntersectionList();for(let o=0;o<e.length;o++){const a=e[o];if(!r.isIntersection(a))return a}return null}static isValid(){if(arguments[0]instanceof ge)return new zo(arguments[0]).isValid();if(arguments[0]instanceof j){const e=arguments[0];return!(Ce.isNaN(e.x)||Ce.isInfinite(e.x)||Ce.isNaN(e.y)||Ce.isInfinite(e.y))}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){const e=arguments[0];for(let t=0;t<e.length;t++)if(!zo.isValid(e[t]))return this._validErr=new Wn(Wn.INVALID_COORDINATE,e[t]),null}else if(arguments[0]instanceof kn){const e=arguments[0];if(this.checkInvalidCoordinates(e.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(let t=0;t<e.getNumInteriorRing();t++)if(this.checkInvalidCoordinates(e.getInteriorRingN(t).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(e,t){if(e.getNumInteriorRing()<=0)return null;const n=new p4(t);for(let r=0;r<e.getNumInteriorRing();r++){const o=e.getInteriorRingN(r);o.isEmpty()||n.add(o)}n.isNonNested()||(this._validErr=new Wn(Wn.NESTED_HOLES,n.getNestedPoint()))}checkConsistentArea(e){const t=new d4(e);if(!t.isNodeConsistentArea())return this._validErr=new Wn(Wn.SELF_INTERSECTION,t.getInvalidPoint()),null;t.hasDuplicateRings()&&(this._validErr=new Wn(Wn.DUPLICATE_RINGS,t.getInvalidPoint()))}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(e,t,n){const s=e.getCoordinates(),r=t.getCoordinates(),o=zo.findPtNotNode(s,t,n);if(null!==o&&!Xr.isInRing(o,r))return o;const a=zo.findPtNotNode(r,e,n);return null!==a?Xr.isInRing(a,s)?a:null:(Oe.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}checkNoSelfIntersectingRings(e){for(let t=e.getEdgeIterator();t.hasNext();){const n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this._validErr)return null}}checkHolesInShell(e,t){if(e.getNumInteriorRing()<=0)return null;const n=e.getExteriorRing(),s=n.isEmpty(),r=new Ih(n);for(let o=0;o<e.getNumInteriorRing();o++){const a=e.getInteriorRingN(o);let l=null;if(!a.isEmpty()){if(l=zo.findPtNotNode(a.getCoordinates(),n,t),null===l)return null;if(s||S.EXTERIOR===r.locate(l))return this._validErr=new Wn(Wn.HOLE_OUTSIDE_SHELL,l),null}}}checkShellNotNested(e,t,n){const s=e.getCoordinates(),r=t.getExteriorRing();if(r.isEmpty())return null;const o=r.getCoordinates(),a=zo.findPtNotNode(s,r,n);if(null===a||!Xr.isInRing(a,o))return null;if(t.getNumInteriorRing()<=0)return this._validErr=new Wn(Wn.NESTED_SHELLS,a),null;let c=null;for(let h=0;h<t.getNumInteriorRing();h++){const u=t.getInteriorRingN(h);if(c=this.checkShellInsideHole(e,u,n),null===c)return null}this._validErr=new Wn(Wn.NESTED_SHELLS,c)}checkClosedRings(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this._validErr)return null;for(let t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this._validErr)return null}checkConnectedInteriors(e){const t=new py(e);t.isInteriorsConnected()||(this._validErr=new Wn(Wn.DISCONNECTED_INTERIOR,t.getCoordinate()))}checkNoSelfIntersectingRing(e){const t=new Mh;let n=!0;for(let s=e.iterator();s.hasNext();){const r=s.next();if(n)n=!1;else{if(t.contains(r.coord))return this._validErr=new Wn(Wn.RING_SELF_INTERSECTION,r.coord),null;t.add(r.coord)}}}checkTooFewPoints(e){if(e.hasTooFewPoints())return this._validErr=new Wn(Wn.TOO_FEW_POINTS,e.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof Un)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof Po)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof wr){const e=arguments[0];if(this.checkInvalidCoordinates(e.getCoordinates()),null!==this._validErr||(this.checkClosedRing(e),null!==this._validErr))return null;const t=new Mr(0,e);if(this.checkTooFewPoints(t),null!==this._validErr)return null;const n=new ji;t.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(t)}else if(arguments[0]instanceof At){const e=arguments[0];if(this.checkInvalidCoordinates(e.getCoordinates()),null!==this._validErr)return null;const t=new Mr(0,e);this.checkTooFewPoints(t)}else if(arguments[0]instanceof kn){const e=arguments[0];if(this.checkInvalidCoordinates(e),null!==this._validErr||(this.checkClosedRings(e),null!==this._validErr))return null;const t=new Mr(0,e);if(this.checkTooFewPoints(t),null!==this._validErr||(this.checkConsistentArea(t),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(t),null!==this._validErr)||(this.checkHolesInShell(e,t),null!==this._validErr)||(this.checkHolesNotNested(e,t),null!==this._validErr))return null;this.checkConnectedInteriors(t)}else if(arguments[0]instanceof Ks){const e=arguments[0];for(let n=0;n<e.getNumGeometries();n++){const s=e.getGeometryN(n);if(this.checkInvalidCoordinates(s),null!==this._validErr||(this.checkClosedRings(s),null!==this._validErr))return null}const t=new Mr(0,e);if(this.checkTooFewPoints(t),null!==this._validErr||(this.checkConsistentArea(t),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(t),null!==this._validErr))return null;for(let n=0;n<e.getNumGeometries();n++){const s=e.getGeometryN(n);if(this.checkHolesInShell(s,t),null!==this._validErr)return null}for(let n=0;n<e.getNumGeometries();n++){const s=e.getGeometryN(n);if(this.checkHolesNotNested(s,t),null!==this._validErr)return null}if(this.checkShellsNotNested(e,t),null!==this._validErr)return null;this.checkConnectedInteriors(t)}else if(arguments[0]instanceof qt){const e=arguments[0];for(let t=0;t<e.getNumGeometries();t++){const n=e.getGeometryN(t);if(this.checkValid(n),null!==this._validErr)return null}}else if(arguments[0]instanceof ge){const e=arguments[0];if(this._validErr=null,e.isEmpty())return null;if(e instanceof Un)this.checkValid(e);else if(e instanceof Po)this.checkValid(e);else if(e instanceof wr)this.checkValid(e);else if(e instanceof At)this.checkValid(e);else if(e instanceof kn)this.checkValid(e);else if(e instanceof Ks)this.checkValid(e);else{if(!(e instanceof qt))throw new Wr(e.getGeometryType());this.checkValid(e)}}}setSelfTouchingRingFormingHoleValid(e){this._isSelfTouchingRingFormingHoleValid=e}checkClosedRing(e){if(e.isEmpty())return null;if(!e.isClosed()){let t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this._validErr=new Wn(Wn.RING_NOT_CLOSED,t)}}checkShellsNotNested(e,t){for(let n=0;n<e.getNumGeometries();n++){const r=e.getGeometryN(n).getExteriorRing();for(let o=0;o<e.getNumGeometries();o++){if(n===o)continue;const a=e.getGeometryN(o);if(this.checkShellNotNested(r,a,t),null!==this._validErr)return null}}}}class al{constructor(){al.constructor_.apply(this,arguments)}static constructor_(){this._interiorPoint=null,this._maxWidth=-1,this.process(arguments[0])}static avg(e,t){return(e+t)/2}static getInteriorPoint(e){return new al(e).getInteriorPoint()}process(e){if(e.isEmpty())return null;if(e instanceof kn)this.processPolygon(e);else if(e instanceof qt){const t=e;for(let n=0;n<t.getNumGeometries();n++)this.process(t.getGeometryN(n))}}getInteriorPoint(){return this._interiorPoint}processPolygon(e){const t=new ll(e);t.process();const n=t.getWidth();n>this._maxWidth&&(this._maxWidth=n,this._interiorPoint=t.getInteriorPoint())}}class ll{constructor(){ll.constructor_.apply(this,arguments)}static constructor_(){this._polygon=null,this._interiorPointY=null,this._interiorSectionWidth=0,this._interiorPoint=null;const e=arguments[0];this._polygon=e,this._interiorPointY=Lf.getScanLineY(e)}static isEdgeCrossingCounted(e,t,n){const s=e.getY(),r=t.getY();return!(s===r||s===n&&r<n||r===n&&s<n)}static intersectsHorizontalLine(){if(2===arguments.length){const e=arguments[0],t=arguments[1];return!(t<e.getMinY()||t>e.getMaxY())}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];return!(e.getY()>n&&t.getY()>n||e.getY()<n&&t.getY()<n)}}static intersection(e,t,n){const s=e.getX(),r=t.getX();if(s===r)return s;const o=r-s,l=(t.getY()-e.getY())/o;return s+(n-e.getY())/l}findBestMidpoint(e){if(0===e.size())return null;Oe.isTrue(e.size()%2==0,"Interior Point robustness failure: odd number of scanline crossings"),e.sort(new HP);for(let t=0;t<e.size();t+=2){const n=e.get(t),s=e.get(t+1),r=s-n;if(r>this._interiorSectionWidth){this._interiorSectionWidth=r;const o=al.avg(n,s);this._interiorPoint=new j(o,this._interiorPointY)}}}getWidth(){return this._interiorSectionWidth}getInteriorPoint(){return this._interiorPoint}addEdgeCrossing(e,t,n,s){if(!ll.intersectsHorizontalLine(e,t,n)||!ll.isEdgeCrossingCounted(e,t,n))return null;const r=ll.intersection(e,t,n);s.add(r)}process(){if(this._polygon.isEmpty())return null;this._interiorPoint=new j(this._polygon.getCoordinate());const e=new se;this.scanRing(this._polygon.getExteriorRing(),e);for(let t=0;t<this._polygon.getNumInteriorRing();t++)this.scanRing(this._polygon.getInteriorRingN(t),e);this.findBestMidpoint(e)}scanRing(e,t){if(!ll.intersectsHorizontalLine(e.getEnvelopeInternal(),this._interiorPointY))return null;const n=e.getCoordinateSequence();for(let s=1;s<n.size();s++){const r=n.getCoordinate(s-1),o=n.getCoordinate(s);this.addEdgeCrossing(r,o,this._interiorPointY,t)}}}class HP{compare(e,t){return e<t?-1:e>t?1:0}get interfaces_(){return[il]}}ll.DoubleComparator=HP;class Lf{constructor(){Lf.constructor_.apply(this,arguments)}static constructor_(){this._poly=null,this._centreY=null,this._hiY=Ce.MAX_VALUE,this._loY=-Ce.MAX_VALUE;const e=arguments[0];this._poly=e,this._hiY=e.getEnvelopeInternal().getMaxY(),this._loY=e.getEnvelopeInternal().getMinY(),this._centreY=al.avg(this._loY,this._hiY)}static getScanLineY(e){return new Lf(e).getScanLineY()}process(e){const t=e.getCoordinateSequence();for(let n=0;n<t.size();n++){const s=t.getY(n);this.updateInterval(s)}}getScanLineY(){this.process(this._poly.getExteriorRing());for(let t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return al.avg(this._hiY,this._loY)}updateInterval(e){e<=this._centreY?e>this._loY&&(this._loY=e):e>this._centreY&&e<this._hiY&&(this._hiY=e)}}al.InteriorPointPolygon=ll,al.ScanLineYOrdinateFinder=Lf;let rs=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){const n=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n)}else if(4===arguments.length){const n=arguments[1],s=arguments[2],r=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n),this.setJoinStyle(s),this.setMitreLimit(r)}}static bufferDistanceError(t){const n=Math.PI/2/t;return 1-Math.cos(n/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(t){this._joinStyle=t}setSimplifyFactor(t){this._simplifyFactor=t<0?0:t}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(t){this._endCapStyle=t}getMitreLimit(){return this._mitreLimit}setMitreLimit(t){this._mitreLimit=t}setSingleSided(t){this._isSingleSided=t}}return i.CAP_ROUND=1,i.CAP_FLAT=2,i.CAP_SQUARE=3,i.JOIN_ROUND=1,i.JOIN_MITRE=2,i.JOIN_BEVEL=3,i.DEFAULT_QUADRANT_SEGMENTS=8,i.DEFAULT_MITRE_LIMIT=5,i.DEFAULT_SIMPLIFY_FACTOR=.01,i})();class Jr{static relativeSign(e,t){return e<t?-1:e>t?1:0}static compareValue(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0}static compare(e,t,n){if(t.equals2D(n))return 0;const s=Jr.relativeSign(t.x,n.x),r=Jr.relativeSign(t.y,n.y);switch(e){case 0:return Jr.compareValue(s,r);case 1:return Jr.compareValue(r,s);case 2:return Jr.compareValue(r,-s);case 3:return Jr.compareValue(-s,r);case 4:return Jr.compareValue(-s,-r);case 5:return Jr.compareValue(-r,-s);case 6:return Jr.compareValue(-r,s);case 7:return Jr.compareValue(s,-r)}return Oe.shouldNeverReachHere("invalid octant value"),0}}class f4{constructor(){f4.constructor_.apply(this,arguments)}static constructor_(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];this._segString=e,this.coord=new j(t),this.segmentIndex=n,this._segmentOctant=s,this._isInterior=!t.equals2D(e.getCoordinate(n))}getCoordinate(){return this.coord}print(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}compareTo(e){const t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Jr.compare(this._segmentOctant,this.coord,t.coord):1:-1}isEndPoint(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e}toString(){return this.segmentIndex+":"+this.coord.toString()}isInterior(){return this._isInterior}get interfaces_(){return[Cs]}}class g4{constructor(){g4.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new No,this._edge=null,this._edge=arguments[0]}getSplitCoordinates(){const e=new $r;this.addEndpoints();const t=this.iterator();let n=t.next();for(;t.hasNext();){const s=t.next();this.addEdgeCoordinates(n,s,e),n=s}return e.toCoordinateArray()}print(e){e.println("Intersections:");for(let t=this.iterator();t.hasNext();)t.next().print(e)}findCollapsesFromExistingVertices(e){for(let t=0;t<this._edge.size()-2;t++){const n=this._edge.getCoordinate(t),r=(this._edge.getCoordinate(t+1),this._edge.getCoordinate(t+2));n.equals2D(r)&&e.add(Vd.valueOf(t+1))}}addEdgeCoordinates(e,t,n){const s=this.createSplitEdgePts(e,t);n.add(s,!1)}findCollapseIndex(e,t,n){if(!e.coord.equals2D(t.coord))return!1;let s=t.segmentIndex-e.segmentIndex;return t.isInterior()||s--,1===s&&(n[0]=e.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(e){const t=new Array(1).fill(null),n=this.iterator();let s=n.next();for(;n.hasNext();){const r=n.next();this.findCollapseIndex(s,r,t)&&e.add(Vd.valueOf(t[0])),s=r}}getEdge(){return this._edge}addEndpoints(){const e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)}createSplitEdge(e,t){const n=this.createSplitEdgePts(e,t);return new ga(n,this._edge.getData())}add(e,t){const n=new f4(this._edge,e,t,this._edge.getSegmentOctant(t)),s=this._nodeMap.get(n);return null!==s?(Oe.isTrue(s.coord.equals2D(e),"Found equal nodes with different coordinates"),s):(this._nodeMap.put(n,n),n)}checkSplitEdgesCorrectness(e){const t=this._edge.getCoordinates(),s=e.get(0).getCoordinate(0);if(!s.equals2D(t[0]))throw new Ys("bad split edge start point at "+s);const o=e.get(e.size()-1).getCoordinates(),a=o[o.length-1];if(!a.equals2D(t[t.length-1]))throw new Ys("bad split edge end point at "+a)}addCollapsedNodes(){const e=new se;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(let t=e.iterator();t.hasNext();){const n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}}createSplitEdgePts(e,t){let n=t.segmentIndex-e.segmentIndex+2;if(2===n)return[new j(e.coord),new j(t.coord)];const s=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(s);r||n--;const o=new Array(n).fill(null);let a=0;o[a++]=new j(e.coord);for(let l=e.segmentIndex+1;l<=t.segmentIndex;l++)o[a++]=this._edge.getCoordinate(l);return r&&(o[a]=new j(t.coord)),o}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(e){this.addEndpoints(),this.addCollapsedNodes();const t=this.iterator();let n=t.next();for(;t.hasNext();){const s=t.next(),r=this.createSplitEdge(n,s);e.add(r),n=s}}}class wy{static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new at("Cannot compute the octant for point ( "+e+", "+t+" )");const n=Math.abs(e),s=Math.abs(t);return e>=0?t>=0?n>=s?0:1:n>=s?7:6:t>=0?n>=s?3:2:n>=s?4:5}if(arguments[0]instanceof j&&arguments[1]instanceof j){const e=arguments[0],t=arguments[1],n=t.x-e.x,s=t.y-e.y;if(0===n&&0===s)throw new at("Cannot compute the octant for two identical points "+e);return wy.octant(n,s)}}}class jP{getCoordinates(){}size(){}getCoordinate(e){}isClosed(){}setData(e){}getData(){}}class Xpe{addIntersection(e,t){}get interfaces_(){return[jP]}}class ga{constructor(){ga.constructor_.apply(this,arguments)}static constructor_(){this._nodeList=new g4(this),this._pts=null,this._data=null;const t=arguments[1];this._pts=arguments[0],this._data=t}static getNodedSubstrings(){if(1===arguments.length){const e=arguments[0],t=new se;return ga.getNodedSubstrings(e,t),t}if(2===arguments.length){const t=arguments[1];for(let n=arguments[0].iterator();n.hasNext();)n.next().getNodeList().addSplitEdges(t)}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(e){return this._pts[e]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}toString(){return Oo.toLineString(new Yr(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(e,t){let n=t;const s=n+1;return s<this._pts.length&&e.equals2D(this._pts[s])&&(n=s),this._nodeList.add(e,n)}addIntersections(e,t,n){for(let s=0;s<e.getIntersectionNum();s++)this.addIntersection(e,t,n,s)}setData(e){this._data=e}safeOctant(e,t){return e.equals2D(t)?0:wy.octant(e,t)}getData(){return this._data}addIntersection(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){const t=arguments[1],r=new j(arguments[0].getIntersection(arguments[3]));this.addIntersection(r,t)}}get interfaces_(){return[Xpe]}}class m4{getNodedSubstrings(){}computeNodes(e){}}class xy{constructor(){xy.constructor_.apply(this,arguments)}static constructor_(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length)xy.constructor_.call(this,arguments[0],arguments[1],0,0);else if(4===arguments.length){const t=arguments[1];this._noder=arguments[0],this._scaleFactor=t,this._isScaled=!this.isIntegerPrecision()}}rescale(){if(De(arguments[0],Gn))for(let t=arguments[0].iterator();t.hasNext();){const n=t.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){const e=arguments[0];for(let t=0;t<e.length;t++)e[t].x=e[t].x/this._scaleFactor+this._offsetX,e[t].y=e[t].y/this._scaleFactor+this._offsetY;2===e.length&&e[0].equals2D(e[1])&&is.out.println(e)}}scale(){if(De(arguments[0],Gn)){const e=arguments[0],t=new se(e.size());for(let n=e.iterator();n.hasNext();){const s=n.next();t.add(new ga(this.scale(s.getCoordinates()),s.getData()))}return t}if(arguments[0]instanceof Array){const e=arguments[0],t=new Array(e.length).fill(null);for(let s=0;s<e.length;s++)t[s]=new j(Math.round((e[s].x-this._offsetX)*this._scaleFactor),Math.round((e[s].y-this._offsetY)*this._scaleFactor),e[s].getZ());return Pt.removeRepeatedPoints(t)}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){const e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}computeNodes(e){let t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}get interfaces_(){return[m4]}}class Pf{constructor(){Pf.constructor_.apply(this,arguments)}static constructor_(){this._li=new ji,this._segStrings=null,this._segStrings=arguments[0]}checkEndPtVertexIntersections(){if(0===arguments.length)for(let e=this._segStrings.iterator();e.hasNext();){const n=e.next().getCoordinates();this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings)}else if(2===arguments.length){const e=arguments[0];for(let n=arguments[1].iterator();n.hasNext();){const r=n.next().getCoordinates();for(let o=1;o<r.length-1;o++)if(r[o].equals(e))throw new Ys("found endpt/interior pt intersection at index "+o+" :pt "+e)}}}checkInteriorIntersections(){if(0===arguments.length)for(let e=this._segStrings.iterator();e.hasNext();){const t=e.next();for(let n=this._segStrings.iterator();n.hasNext();){const s=n.next();this.checkInteriorIntersections(t,s)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1],n=e.getCoordinates(),s=t.getCoordinates();for(let r=0;r<n.length-1;r++)for(let o=0;o<s.length-1;o++)this.checkInteriorIntersections(e,r,t,o)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];if(e===n&&t===s)return null;const r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[s],l=n.getCoordinates()[s+1];if(this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,r,o)||this.hasInteriorIntersection(this._li,a,l)))throw new Ys("found non-noded intersection at "+r+"-"+o+" and "+a+"-"+l)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0===arguments.length)for(let e=this._segStrings.iterator();e.hasNext();){const t=e.next();this.checkCollapses(t)}else if(1===arguments.length){const t=arguments[0].getCoordinates();for(let n=0;n<t.length-2;n++)this.checkCollapse(t[n],t[n+1],t[n+2])}}hasInteriorIntersection(e,t,n){for(let s=0;s<e.getIntersectionNum();s++){const r=e.getIntersection(s);if(!r.equals(t)&&!r.equals(n))return!0}return!1}checkCollapse(e,t,n){if(e.equals(n))throw new Ys("found non-noded collapse at "+Pf.fact.createLineString([e,t,n]))}}Pf.fact=new wn;class y4{constructor(){y4.constructor_.apply(this,arguments)}static constructor_(){this._overlapSeg1=new tn,this._overlapSeg2=new tn}overlap(){if(2===arguments.length);else if(4===arguments.length){const n=arguments[2],s=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),n.getLineSegment(s,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}class My{constructor(){My.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;const t=arguments[1],n=arguments[2],s=arguments[3];this._pts=arguments[0],this._start=t,this._end=n,this._context=s}computeOverlaps(){if(2===arguments.length){const e=arguments[0];this.computeOverlaps(this._start,this._end,e,e._start,e._end,arguments[1])}else if(6===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3],r=arguments[4],o=arguments[5];if(t-e==1&&r-s==1)return o.overlap(this,e,n,s),null;if(!this.overlaps(e,t,n,s,r))return null;const a=Math.trunc((e+t)/2),l=Math.trunc((s+r)/2);e<a&&(s<l&&this.computeOverlaps(e,a,n,s,l,o),l<r&&this.computeOverlaps(e,a,n,l,r,o)),a<t&&(s<l&&this.computeOverlaps(a,t,n,s,l,o),l<r&&this.computeOverlaps(a,t,n,l,r,o))}}setId(e){this._id=e}select(e,t){this.computeSelect(e,this._start,this._end,t)}getEnvelope(){return null===this._env&&(this._env=new mt(this._pts[this._start],this._pts[this._end])),this._env}overlaps(e,t,n,s,r){return mt.intersects(this._pts[e],this._pts[t],n._pts[s],n._pts[r])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}getLineSegment(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]}computeSelect(e,t,n,s){const r=this._pts[t],o=this._pts[n];if(n-t==1)return s.select(this,t),null;if(!e.intersects(r,o))return null;const a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,s),a<n&&this.computeSelect(e,a,n,s)}getCoordinates(){const e=new Array(this._end-this._start+1).fill(null);let t=0;for(let n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e}}class by{static findChainEnd(e,t){let n=t;for(;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;const s=Qr.quadrant(e[n],e[n+1]);let r=t+1;for(;r<e.length&&(e[r-1].equals2D(e[r])||Qr.quadrant(e[r-1],e[r])===s);)r++;return r-1}static getChains(){if(1===arguments.length)return by.getChains(arguments[0],null);if(2===arguments.length){const e=arguments[0],t=arguments[1],n=new se;let s=0;do{const r=by.findChainEnd(e,s),o=new My(e,s,r,t);n.add(o),s=r}while(s<e.length-1);return n}}}class Cy{constructor(){Cy.constructor_.apply(this,arguments)}static constructor_(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])}setSegmentIntersector(e){this._segInt=e}get interfaces_(){return[m4]}}class Ud extends Cy{constructor(){super(),Ud.constructor_.apply(this,arguments)}static constructor_(){this._monoChains=new se,this._index=new zn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0!==arguments.length&&1===arguments.length&&Cy.constructor_.call(this,arguments[0])}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return ga.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(e){for(let n=by.getChains(e.getCoordinates(),e).iterator();n.hasNext();){const s=n.next();s.setId(this._idCounter++),this._index.insert(s.getEnvelope(),s),this._monoChains.add(s)}}computeNodes(e){this._nodedSegStrings=e;for(let t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}intersectChains(){const e=new Ey(this._segInt);for(let t=this._monoChains.iterator();t.hasNext();){const n=t.next();for(let r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){const o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,e),this._nOverlaps++),this._segInt.isDone())return null}}}}class Ey extends y4{constructor(){super(),Ey.constructor_.apply(this,arguments)}static constructor_(){this._si=null,this._si=arguments[0]}overlap(){if(4!==arguments.length)return super.overlap.apply(this,arguments);{const t=arguments[1],n=arguments[2],s=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,t,o,s)}}}Ud.SegmentOverlapAction=Ey;let qP=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;const t=arguments[0],n=arguments[1],s=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=n,this._li=s,n<=0)throw new at("Scale factor must be non-zero");1!==n&&(this._pt=new j(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new j,this._p1Scaled=new j),this.initCorners(this._pt)}intersectsScaled(t,n){const s=Math.min(t.x,n.x),r=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y),l=this._maxx<s||this._minx>r||this._maxy<o||this._miny>a;if(l)return!1;const c=this.intersectsToleranceSquare(t,n);return Oe.isTrue(!(l&&c),"Found bad envelope test"),c}copyScaled(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)}getSafeEnvelope(){if(null===this._safeEnv){const t=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new mt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}intersectsPixelClosure(t,n){return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))}intersectsToleranceSquare(t,n){let s=!1,r=!1;return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(s=!0),this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.isProper())||s&&r||t.equals(this._pt)||n.equals(this._pt))}addSnappedNode(t,n){const s=t.getCoordinate(n),r=t.getCoordinate(n+1);return!!this.intersects(s,r)&&(t.addIntersection(this.getCoordinate(),n),!0)}initCorners(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new j(this._maxx,this._maxy),this._corner[1]=new j(this._minx,this._maxy),this._corner[2]=new j(this._minx,this._miny),this._corner[3]=new j(this._maxx,this._miny)}intersects(t,n){return 1===this._scaleFactor?this.intersectsScaled(t,n):(this.copyScaled(t,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(t){return Math.round(t*this._scaleFactor)}getCoordinate(){return this._originalPt}}return i.SAFE_ENV_EXPANSION_FACTOR=.75,i})();class _4{constructor(){_4.constructor_.apply(this,arguments)}static constructor_(){this.selectedSegment=new tn}select(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))}}class Sy{constructor(){Sy.constructor_.apply(this,arguments)}static constructor_(){this._index=null,this._index=arguments[0]}snap(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=e.getSafeEnvelope(),r=new Iy(e,t,n);return this._index.query(s,new class{get interfaces_(){return[fy]}visitItem(o){o.select(s,r)}}),r.isNodeAdded()}}}class Iy extends _4{constructor(){super(),Iy.constructor_.apply(this,arguments)}static constructor_(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;const t=arguments[1],n=arguments[2];this._hotPixel=arguments[0],this._parentEdge=t,this._hotPixelVertexIndex=n}select(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof My))return super.select.apply(this,arguments);{const t=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,t)}}isNodeAdded(){return this._isNodeAdded}}Sy.HotPixelSnapAction=Iy;class v4{isDone(){}processIntersections(e,t,n,s){}}class k4{constructor(){k4.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new se}isDone(){return!1}processIntersections(e,t,n,s){if(e===n&&t===s)return null;const r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[s],l=n.getCoordinates()[s+1];if(this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(let c=0;c<this._li.getIntersectionNum();c++)this._interiorIntersections.add(this._li.getIntersection(c));e.addIntersections(this._li,t,0),n.addIntersections(this._li,s,1)}}getInteriorIntersections(){return this._interiorIntersections}get interfaces_(){return[v4]}}class w4{constructor(){w4.constructor_.apply(this,arguments)}static constructor_(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;const e=arguments[0];this._pm=e,this._li=new ji,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}checkCorrectness(e){const t=ga.getNodedSubstrings(e),n=new Pf(t);try{n.checkValid()}catch(s){if(!(s instanceof vr))throw s;s.printStackTrace()}}getNodedSubstrings(){return ga.getNodedSubstrings(this._nodedSegStrings)}snapRound(e,t){const n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}findInteriorIntersections(e,t){const n=new k4(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()}computeVertexSnaps(){if(De(arguments[0],Gn))for(let t=arguments[0].iterator();t.hasNext();){const n=t.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof ga){const e=arguments[0],t=e.getCoordinates();for(let n=0;n<t.length;n++){const s=new qP(t[n],this._scaleFactor,this._li);this._pointSnapper.snap(s,e,n)&&e.addIntersection(t[n],n)}}}computeNodes(e){this._nodedSegStrings=e,this._noder=new Ud,this._pointSnapper=new Sy(this._noder.getIndex()),this.snapRound(e,this._li)}computeIntersectionSnaps(e){for(let t=e.iterator();t.hasNext();){const n=t.next(),s=new qP(n,this._scaleFactor,this._li);this._pointSnapper.snap(s)}}get interfaces_(){return[m4]}}class Ty extends vr{constructor(e){super(e),this.name=Object.keys({EmptyStackException:Ty})[0]}}class x4 extends kr{constructor(){super(),this.array=[]}add(e){return this.array.push(e),!0}get(e){if(e<0||e>=this.size())throw new ly;return this.array[e]}push(e){return this.array.push(e),e}pop(){if(0===this.array.length)throw new Ty;return this.array.pop()}peek(){if(0===this.array.length)throw new Ty;return this.array[this.array.length-1]}empty(){return 0===this.array.length}isEmpty(){return this.empty()}search(e){return this.array.indexOf(e)}size(){return this.array.length}toArray(){return this.array.slice()}}class M4{constructor(){M4.constructor_.apply(this,arguments)}static constructor_(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}getCoordinate(){return this._minCoord}getRightmostSide(e,t){let n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n}findRightmostEdgeAtVertex(){const e=this._minDe.getEdge().getCoordinates();Oe.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");const t=e[this._minIndex-1],n=e[this._minIndex+1],s=Pe.index(this._minCoord,n,t);let r=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&s===Pe.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&s===Pe.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}getRightmostSideOfSegment(e,t){const s=e.getEdge().getCoordinates();if(t<0||t+1>=s.length||s[t].y===s[t+1].y)return-1;let r=he.LEFT;return s[t].y<s[t+1].y&&(r=he.RIGHT),r}getEdge(){return this._orientedDe}checkForRightmostCoordinate(e){const t=e.getEdge().getCoordinates();for(let n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])}findRightmostEdgeAtNode(){const t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(e){for(let n=e.iterator();n.hasNext();){const s=n.next();!s.isForward()||this.checkForRightmostCoordinate(s)}Oe.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===he.LEFT&&(this._orientedDe=this._minDe.getSym())}}class Zpe{constructor(){this.array=[]}addLast(e){this.array.push(e)}removeFirst(){return this.array.shift()}isEmpty(){return 0===this.array.length}}class b4{constructor(){b4.constructor_.apply(this,arguments)}static constructor_(){this._finder=null,this._dirEdgeList=new se,this._nodes=new se,this._rightMostCoord=null,this._env=null,this._finder=new M4}clearVisitedEdges(){for(let e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)}compareTo(e){return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}getEnvelope(){if(null===this._env){const e=new mt;for(let t=this._dirEdgeList.iterator();t.hasNext();){const s=t.next().getEdge().getCoordinates();for(let r=0;r<s.length-1;r++)e.expandToInclude(s[r])}this._env=e}return this._env}addReachable(e){const t=new x4;for(t.add(e);!t.empty();){const n=t.pop();this.add(n,t)}}copySymDepths(e){const t=e.getSym();t.setDepth(he.LEFT,e.getDepth(he.RIGHT)),t.setDepth(he.RIGHT,e.getDepth(he.LEFT))}add(e,t){e.setVisited(!0),this._nodes.add(e);for(let n=e.getEdges().iterator();n.hasNext();){const s=n.next();this._dirEdgeList.add(s);const o=s.getSym().getNode();o.isVisited()||t.push(o)}}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(e){let t=null;for(let n=e.getEdges().iterator();n.hasNext();){const s=n.next();if(s.isVisited()||s.getSym().isVisited()){t=s;break}}if(null===t)throw new xr("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(let n=e.getEdges().iterator();n.hasNext();){const s=n.next();s.setVisited(!0),this.copySymDepths(s)}}computeDepth(e){this.clearVisitedEdges();const t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(he.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}create(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(let e=this._dirEdgeList.iterator();e.hasNext();){const t=e.next();t.getDepth(he.RIGHT)>=1&&t.getDepth(he.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}computeDepths(e){const t=new sl,n=new Zpe,s=e.getNode();for(n.addLast(s),t.add(s),e.setVisited(!0);!n.isEmpty();){const r=n.removeFirst();t.add(r),this.computeNodeDepth(r);for(let o=r.getEdges().iterator();o.hasNext();){const l=o.next().getSym();if(l.isVisited())continue;const c=l.getNode();t.contains(c)||(n.addLast(c),t.add(c))}}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}get interfaces_(){return[Cs]}}let Th=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Pe.COUNTERCLOCKWISE,this._inputLine=arguments[0]}static simplify(t,n){return new i(t).simplify(n)}isDeletable(t,n,s,r){const o=this._inputLine[t],a=this._inputLine[n],l=this._inputLine[s];return!(!this.isConcave(o,a,l)||!this.isShallow(o,a,l,r))&&this.isShallowSampled(o,a,t,s,r)}deleteShallowConcavities(){let t=1,n=this.findNextNonDeletedIndex(t),s=this.findNextNonDeletedIndex(n),r=!1;for(;s<this._inputLine.length;){let o=!1;this.isDeletable(t,n,s,this._distanceTol)&&(this._isDeleted[n]=i.DELETE,o=!0,r=!0),t=o?s:n,n=this.findNextNonDeletedIndex(t),s=this.findNextNonDeletedIndex(n)}return r}isShallowConcavity(t,n,s,r){return Pe.index(t,n,s)===this._angleOrientation&&di.pointToSegment(n,t,s)<r}isShallowSampled(t,n,s,r,o){let a=Math.trunc((r-s)/i.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(let l=s;l<r;l+=a)if(!this.isShallow(t,n,this._inputLine[l],o))return!1;return!0}isConcave(t,n,s){return Pe.index(t,n,s)===this._angleOrientation}simplify(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Pe.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);let n=!1;do{n=this.deleteShallowConcavities()}while(n);return this.collapseLine()}findNextNonDeletedIndex(t){let n=t+1;for(;n<this._inputLine.length&&this._isDeleted[n]===i.DELETE;)n++;return n}isShallow(t,n,s,r){return di.pointToSegment(n,t,s)<r}collapseLine(){const t=new $r;for(let n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==i.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}return i.INIT=0,i.DELETE=1,i.KEEP=1,i.NUM_PTS_TO_CHECK=10,i})();class Of{constructor(){Of.constructor_.apply(this,arguments)}static constructor_(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new se}getCoordinates(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)}setPrecisionModel(e){this._precisionModel=e}addPt(e){const t=new j(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)}reverse(){}addPts(e,t){if(t)for(let n=0;n<e.length;n++)this.addPt(e[n]);else for(let n=e.length-1;n>=0;n--)this.addPt(e[n])}isRedundant(e){if(this._ptList.size()<1)return!1;const t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance}toString(){return(new wn).createLineString(this.getCoordinates()).toString()}closeRing(){if(this._ptList.size()<1)return null;const e=new j(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)}setMinimumVertexDistance(e){this._minimimVertexDistance=e}}Of.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);class Nt{static toDegrees(e){return 180*e/Math.PI}static isAcute(e,t,n){return(e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y)>0}static isObtuse(e,t,n){return(e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y)<0}static interiorAngle(e,t,n){const s=Nt.angle(t,e),r=Nt.angle(t,n);return Math.abs(r-s)}static normalizePositive(e){if(e<0){for(;e<0;)e+=Nt.PI_TIMES_2;e>=Nt.PI_TIMES_2&&(e=0)}else{for(;e>=Nt.PI_TIMES_2;)e-=Nt.PI_TIMES_2;e<0&&(e=0)}return e}static angleBetween(e,t,n){const s=Nt.angle(t,e),r=Nt.angle(t,n);return Nt.diff(s,r)}static diff(e,t){let n=null;return n=e<t?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n}static toRadians(e){return e*Math.PI/180}static normalize(e){for(;e>Math.PI;)e-=Nt.PI_TIMES_2;for(;e<=-Math.PI;)e+=Nt.PI_TIMES_2;return e}static angle(){if(1===arguments.length){const e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){const e=arguments[0],t=arguments[1];return Math.atan2(t.y-e.y,t.x-e.x)}}static getTurn(e,t){const n=Math.sin(t-e);return n>0?Nt.COUNTERCLOCKWISE:n<0?Nt.CLOCKWISE:Nt.NONE}static angleBetweenOriented(e,t,n){const s=Nt.angle(t,e),o=Nt.angle(t,n)-s;return o<=-Math.PI?o+Nt.PI_TIMES_2:o>Math.PI?o-Nt.PI_TIMES_2:o}}Nt.PI_TIMES_2=2*Math.PI,Nt.PI_OVER_2=Math.PI/2,Nt.PI_OVER_4=Math.PI/4,Nt.COUNTERCLOCKWISE=Pe.COUNTERCLOCKWISE,Nt.CLOCKWISE=Pe.CLOCKWISE,Nt.NONE=Pe.COLLINEAR;let Qpe=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new tn,this._seg1=new tn,this._offset0=new tn,this._offset1=new tn,this._side=0,this._hasNarrowConcaveAngle=!1;const n=arguments[1],s=arguments[2];this._precisionModel=arguments[0],this._bufParams=n,this._li=new ji,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===rs.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(s)}getCoordinates(){return this._segList.getCoordinates()}addMitreJoin(t,n,s,r){const o=YC.intersection(n.p0,n.p1,s.p0,s.p1);if(null!==o&&(r<=0?1:o.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(o),null;this.addLimitedMitreJoin(n,s,r,this._bufParams.getMitreLimit())}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(t,n,s){this._s1=t,this._s2=n,this._side=s,this._seg1.setCoordinates(t,n),this.computeOffsetSegment(this._seg1,s,this._distance,this._offset1)}addLimitedMitreJoin(t,n,s,r){const o=this._seg0.p1,a=Nt.angle(o,this._seg0.p0),c=Nt.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1)/2,h=Nt.normalize(a+c),u=Nt.normalize(h+Math.PI),d=r*s,f=s-d*Math.abs(Math.sin(c)),g=o.x+d*Math.cos(u),m=o.y+d*Math.sin(u),y=new j(g,m),_=new tn(o,y),v=_.pointAlongOffset(1,f),k=_.pointAlongOffset(1,-f);this._side===he.LEFT?(this._segList.addPt(v),this._segList.addPt(k)):(this._segList.addPt(k),this._segList.addPt(v))}addDirectedFillet(t,n,s,r,o){const a=r===Pe.CLOCKWISE?-1:1,l=Math.abs(n-s),c=Math.trunc(l/this._filletAngleQuantum+.5);if(c<1)return null;const h=l/c,u=new j;for(let d=0;d<c;d++){const p=n+a*d*h;u.x=t.x+o*Math.cos(p),u.y=t.y+o*Math.sin(p),this._segList.addPt(u)}}computeOffsetSegment(t,n,s,r){const o=n===he.LEFT?1:-1,a=t.p1.x-t.p0.x,l=t.p1.y-t.p0.y,c=Math.sqrt(a*a+l*l),h=o*s*a/c,u=o*s*l/c;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+h,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+h}addInsideTurn(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){const s=new j((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(s);const r=new j((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(t){const n=new j(t.x+this._distance,t.y);this._segList.addPt(n),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}addBevelJoin(t,n){this._segList.addPt(t.p1),this._segList.addPt(n.p0)}init(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===rs.JOIN_BEVEL||this._bufParams.getJoinStyle()===rs.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Pe.CLOCKWISE,this._distance))}addNextSegment(t,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;const s=Pe.index(this._s0,this._s1,this._s2),r=s===Pe.CLOCKWISE&&this._side===he.LEFT||s===Pe.COUNTERCLOCKWISE&&this._side===he.RIGHT;0===s?this.addCollinear(n):r?this.addOutsideTurn(s,n):this.addInsideTurn(s,n)}addLineEndCap(t,n){const s=new tn(t,n),r=new tn;this.computeOffsetSegment(s,he.LEFT,this._distance,r);const o=new tn;this.computeOffsetSegment(s,he.RIGHT,this._distance,o);const c=Math.atan2(n.y-t.y,n.x-t.x);switch(this._bufParams.getEndCapStyle()){case rs.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(n,c+Math.PI/2,c-Math.PI/2,Pe.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case rs.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(o.p1);break;case rs.CAP_SQUARE:const h=new j;h.x=Math.abs(this._distance)*Math.cos(c),h.y=Math.abs(this._distance)*Math.sin(c);const u=new j(r.p1.x+h.x,r.p1.y+h.y),d=new j(o.p1.x+h.x,o.p1.y+h.y);this._segList.addPt(u),this._segList.addPt(d)}}addOutsideTurn(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===rs.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===rs.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}createSquare(t){this._segList.addPt(new j(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new j(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new j(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new j(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}addSegments(t,n){this._segList.addPts(t,n)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(t,n,s,r,o){let c=Math.atan2(n.y-t.y,n.x-t.x);const d=Math.atan2(s.y-t.y,s.x-t.x);r===Pe.CLOCKWISE?c<=d&&(c+=2*Math.PI):c>=d&&(c-=2*Math.PI),this._segList.addPt(n),this.addDirectedFillet(t,c,d,r,o),this._segList.addPt(s)}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}}return i.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,i.MAX_CLOSING_SEG_LEN_FACTOR=80,i})();class Dy{constructor(){Dy.constructor_.apply(this,arguments)}static constructor_(){this._distance=0,this._precisionModel=null,this._bufParams=null;const t=arguments[1];this._precisionModel=arguments[0],this._bufParams=t}static copyCoordinates(e){const t=new Array(e.length).fill(null);for(let n=0;n<t.length;n++)t[n]=new j(e[n]);return t}getOffsetCurve(e,t){if(this._distance=t,0===t)return null;const n=t<0,s=Math.abs(t),r=this.getSegGen(s);e.length<=1?this.computePointCurve(e[0],r):this.computeOffsetCurve(e,n,r);const o=r.getCoordinates();return n&&Pt.reverse(o),o}computeSingleSidedBufferCurve(e,t,n){const s=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);const r=Th.simplify(e,-s),o=r.length-1;n.initSideSegments(r[o],r[o-1],he.LEFT),n.addFirstSegment();for(let a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(e,!1);const r=Th.simplify(e,s),o=r.length-1;n.initSideSegments(r[0],r[1],he.LEFT),n.addFirstSegment();for(let a=2;a<=o;a++)n.addNextSegment(r[a],!0)}n.addLastSegment(),n.closeRing()}computeRingBufferCurve(e,t,n){let s=this.simplifyTolerance(this._distance);t===he.RIGHT&&(s=-s);const r=Th.simplify(e,s),o=r.length-1;n.initSideSegments(r[o-1],r[0],t);for(let a=1;a<=o;a++)n.addNextSegment(r[a],1!==a);n.closeRing()}computeLineBufferCurve(e,t){const n=this.simplifyTolerance(this._distance),s=Th.simplify(e,n),r=s.length-1;t.initSideSegments(s[0],s[1],he.LEFT);for(let l=2;l<=r;l++)t.addNextSegment(s[l],!0);t.addLastSegment(),t.addLineEndCap(s[r-1],s[r]);const o=Th.simplify(e,-n),a=o.length-1;t.initSideSegments(o[a],o[a-1],he.LEFT);for(let l=a-2;l>=0;l--)t.addNextSegment(o[l],!0);t.addLastSegment(),t.addLineEndCap(o[1],o[0]),t.closeRing()}computePointCurve(e,t){switch(this._bufParams.getEndCapStyle()){case rs.CAP_ROUND:t.createCircle(e);break;case rs.CAP_SQUARE:t.createSquare(e)}}getLineCurve(e,t){if(this._distance=t,this.isLineOffsetEmpty(t))return null;const n=Math.abs(t),s=this.getSegGen(n);return e.length<=1?this.computePointCurve(e[0],s):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(e,t<0,s):this.computeLineBufferCurve(e,s),s.getCoordinates()}getBufferParameters(){return this._bufParams}simplifyTolerance(e){return e*this._bufParams.getSimplifyFactor()}getRingCurve(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return Dy.copyCoordinates(e);const s=this.getSegGen(n);return this.computeRingBufferCurve(e,t,s),s.getCoordinates()}computeOffsetCurve(e,t,n){const s=this.simplifyTolerance(this._distance);if(t){const r=Th.simplify(e,-s),o=r.length-1;n.initSideSegments(r[o],r[o-1],he.LEFT),n.addFirstSegment();for(let a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{const r=Th.simplify(e,s),o=r.length-1;n.initSideSegments(r[0],r[1],he.LEFT),n.addFirstSegment();for(let a=2;a<=o;a++)n.addNextSegment(r[a],!0)}n.addLastSegment()}isLineOffsetEmpty(e){return 0===e||e<0&&!this._bufParams.isSingleSided()}getSegGen(e){return new Qpe(this._precisionModel,this._bufParams,e)}}class Nf{constructor(){Nf.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=null,this._shellList=new se,this._geometryFactory=arguments[0]}static findEdgeRingContaining(e,t){const n=e.getLinearRing(),s=n.getEnvelopeInternal();let r=n.getCoordinateN(0),o=null,a=null;for(let l=t.iterator();l.hasNext();){const c=l.next(),h=c.getLinearRing(),u=h.getEnvelopeInternal();if(u.equals(s)||!u.contains(s))continue;r=Pt.ptNotInList(n.getCoordinates(),h.getCoordinates());let d=!1;Xr.isInRing(r,h.getCoordinates())&&(d=!0),d&&(null===o||a.contains(u))&&(o=c,a=o.getLinearRing().getEnvelopeInternal())}return o}sortShellsAndHoles(e,t,n){for(let s=e.iterator();s.hasNext();){const r=s.next();r.isHole()?n.add(r):t.add(r)}}computePolygons(e){const t=new se;for(let n=e.iterator();n.hasNext();){const r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t}placeFreeHoles(e,t){for(let n=t.iterator();n.hasNext();){const s=n.next();if(null===s.getShell()){const r=Nf.findEdgeRingContaining(s,e);if(null===r)throw new xr("unable to assign hole to a shell",s.getCoordinate(0));s.setShell(r)}}}buildMinimalEdgeRings(e,t,n){const s=new se;for(let r=e.iterator();r.hasNext();){const o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();const a=o.buildMinimalRings(),l=this.findShell(a);null!==l?(this.placePolygonHoles(l,a),t.add(l)):n.addAll(a)}else s.add(o)}return s}buildMaximalEdgeRings(e){const t=new se;for(let n=e.iterator();n.hasNext();){const s=n.next();if(s.isInResult()&&s.getLabel().isArea()&&null===s.getEdgeRing()){const r=new hy(s,this._geometryFactory);t.add(r),r.setInResult()}}return t}placePolygonHoles(e,t){for(let n=t.iterator();n.hasNext();){const s=n.next();s.isHole()&&s.setShell(e)}}getPolygons(){return this.computePolygons(this._shellList)}findShell(e){let t=0,n=null;for(let s=e.iterator();s.hasNext();){const r=s.next();r.isHole()||(n=r,t++)}return Oe.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n}add(){if(1===arguments.length){const e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){const e=arguments[0];Ch.linkResultDirectedEdges(arguments[1]);const n=this.buildMaximalEdgeRings(e),s=new se,r=this.buildMinimalEdgeRings(n,this._shellList,s);this.sortShellsAndHoles(r,this._shellList,s),this.placeFreeHoles(this._shellList,s)}}}class Ry{constructor(){Ry.constructor_.apply(this,arguments)}static constructor_(){this._subgraphs=null,this._seg=new tn,this._subgraphs=arguments[0]}findStabbedSegments(){if(1===arguments.length){const e=arguments[0],t=new se;for(let n=this._subgraphs.iterator();n.hasNext();){const s=n.next(),r=s.getEnvelope();e.y<r.getMinY()||e.y>r.getMaxY()||this.findStabbedSegments(e,s.getDirectedEdges(),t)}return t}if(3===arguments.length)if(De(arguments[2],kr)&&arguments[0]instanceof j&&arguments[1]instanceof Af){const e=arguments[0],t=arguments[1],n=arguments[2],s=t.getEdge().getCoordinates();for(let r=0;r<s.length-1;r++){if(this._seg.p0=s[r],this._seg.p1=s[r+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<e.x||this._seg.isHorizontal()||e.y<this._seg.p0.y||e.y>this._seg.p1.y||Pe.index(this._seg.p0,this._seg.p1,e)===Pe.RIGHT)continue;let a=t.getDepth(he.LEFT);this._seg.p0.equals(s[r])||(a=t.getDepth(he.RIGHT));const l=new Ay(this._seg,a);n.add(l)}}else if(De(arguments[2],kr)&&arguments[0]instanceof j&&De(arguments[1],kr)){const e=arguments[0],n=arguments[2];for(let s=arguments[1].iterator();s.hasNext();){const r=s.next();!r.isForward()||this.findStabbedSegments(e,r,n)}}}getDepth(e){const t=this.findStabbedSegments(e);return 0===t.size()?0:pa.min(t)._leftDepth}}class Ay{constructor(){Ay.constructor_.apply(this,arguments)}static constructor_(){this._upwardSeg=null,this._leftDepth=null;const t=arguments[1];this._upwardSeg=new tn(arguments[0]),this._leftDepth=t}compareX(e,t){const n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}toString(){return this._upwardSeg.toString()}compareTo(e){const t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;let n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),0!==n)?n:this._upwardSeg.compareTo(t._upwardSeg)}get interfaces_(){return[Cs]}}Ry.DepthSegment=Ay;class Ly extends vr{constructor(){super(),Ly.constructor_.apply(this,arguments)}static constructor_(){vr.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}class Dh{constructor(){Dh.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){const e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[1];this.x=arguments[0],this.y=t,this.w=1}else if(arguments[0]instanceof Dh&&arguments[1]instanceof Dh){const e=arguments[0],t=arguments[1];this.x=e.y*t.w-t.y*e.w,this.y=t.x*e.w-e.x*t.w,this.w=e.x*t.y-t.x*e.y}else if(arguments[0]instanceof j&&arguments[1]instanceof j){const e=arguments[0],t=arguments[1];this.x=e.y-t.y,this.y=t.x-e.x,this.w=e.x*t.y-t.x*e.y}}else if(3===arguments.length){const t=arguments[1],n=arguments[2];this.x=arguments[0],this.y=t,this.w=n}else if(4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3],r=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,l=n.y-s.y,c=s.x-n.x,h=n.x*s.y-s.x*n.y;this.x=o*h-c*a,this.y=l*a-r*h,this.w=r*c-l*o}}getCoordinate(){const e=new j;return e.x=this.getX(),e.y=this.getY(),e}getX(){const e=this.x/this.w;if(Ce.isNaN(e)||Ce.isInfinite(e))throw new Ly;return e}getY(){const e=this.y/this.w;if(Ce.isNaN(e)||Ce.isInfinite(e))throw new Ly;return e}}class Is{constructor(){Is.constructor_.apply(this,arguments)}static constructor_(){this.p0=null,this.p1=null,this.p2=null;const t=arguments[1],n=arguments[2];this.p0=arguments[0],this.p1=t,this.p2=n}static isAcute(e,t,n){return!(!Nt.isAcute(e,t,n)||!Nt.isAcute(t,n,e)||!Nt.isAcute(n,e,t))}static circumcentre(e,t,n){const s=n.x,r=n.y,o=e.x-s,a=e.y-r,l=t.x-s,c=t.y-r,h=2*Is.det(o,a,l,c),u=Is.det(a,o*o+a*a,c,l*l+c*c),d=Is.det(o,o*o+a*a,l,l*l+c*c);return new j(s-u/h,r+d/h)}static perpendicularBisector(e,t){const n=t.x-e.x,s=t.y-e.y,r=new Dh(e.x+n/2,e.y+s/2,1),o=new Dh(e.x-s+n/2,e.y+n+s/2,1);return new Dh(r,o)}static angleBisector(e,t,n){const s=t.distance(e),o=s/(s+t.distance(n));return new j(e.x+o*(n.x-e.x),e.y+o*(n.y-e.y))}static inCentre(e,t,n){const s=t.distance(n),r=e.distance(n),o=e.distance(t),a=s+r+o;return new j((s*e.x+r*t.x+o*n.x)/a,(s*e.y+r*t.y+o*n.y)/a)}static area(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}static signedArea(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}static det(e,t,n,s){return e*s-t*n}static interpolateZ(e,t,n,s){const r=t.x,o=t.y,a=n.x-r,l=s.x-r,c=n.y-o,h=s.y-o,u=a*h-l*c,d=e.x-r,p=e.y-o,f=(h*d-l*p)/u,g=(-c*d+a*p)/u;return t.getZ()+f*(n.getZ()-t.getZ())+g*(s.getZ()-t.getZ())}static longestSideLength(e,t,n){const s=e.distance(t),r=t.distance(n),o=n.distance(e);let a=s;return r>a&&(a=r),o>a&&(a=o),a}static circumcentreDD(e,t,n){const s=te.valueOf(e.x).subtract(n.x),r=te.valueOf(e.y).subtract(n.y),o=te.valueOf(t.x).subtract(n.x),a=te.valueOf(t.y).subtract(n.y),l=te.determinant(s,r,o,a).multiply(2),c=s.sqr().add(r.sqr()),h=o.sqr().add(a.sqr()),u=te.determinant(r,c,a,h),d=te.determinant(s,c,o,h),p=te.valueOf(n.x).subtract(u.divide(l)).doubleValue(),f=te.valueOf(n.y).add(d.divide(l)).doubleValue();return new j(p,f)}static area3D(e,t,n){const s=t.x-e.x,r=t.y-e.y,o=t.getZ()-e.getZ(),a=n.x-e.x,l=n.y-e.y,c=n.getZ()-e.getZ(),h=r*c-o*l,u=o*a-s*c,d=s*l-r*a;return Math.sqrt(h*h+u*u+d*d)/2}static centroid(e,t,n){return new j((e.x+t.x+n.x)/3,(e.y+t.y+n.y)/3)}interpolateZ(e){if(null===e)throw new at("Supplied point is null.");return Is.interpolateZ(e,this.p0,this.p1,this.p2)}longestSideLength(){return Is.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return Is.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return Is.circumcentre(this.p0,this.p1,this.p2)}inCentre(){return Is.inCentre(this.p0,this.p1,this.p2)}area(){return Is.area(this.p0,this.p1,this.p2)}signedArea(){return Is.signedArea(this.p0,this.p1,this.p2)}area3D(){return Is.area3D(this.p0,this.p1,this.p2)}centroid(){return Is.centroid(this.p0,this.p1,this.p2)}}class C4{constructor(){C4.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new se;const t=arguments[1],n=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=n}addRingSide(e,t,n,s,r){if(0===t&&e.length<wr.MINIMUM_VALID_SIZE)return null;let o=s,a=r;e.length>=wr.MINIMUM_VALID_SIZE&&Pe.isCCW(e)&&(o=r,a=s,n=he.opposite(n));const l=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(l,o,a)}addRingBothSides(e,t){this.addRingSide(e,t,he.LEFT,S.EXTERIOR,S.INTERIOR),this.addRingSide(e,t,he.RIGHT,S.INTERIOR,S.EXTERIOR)}addPoint(e){if(this._distance<=0)return null;const t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)}addPolygon(e){let t=this._distance,n=he.LEFT;this._distance<0&&(t=-this._distance,n=he.RIGHT);const s=e.getExteriorRing(),r=Pt.removeRepeatedPoints(s.getCoordinates());if(this._distance<0&&this.isErodedCompletely(s,this._distance)||this._distance<=0&&r.length<3)return null;this.addRingSide(r,t,n,S.EXTERIOR,S.INTERIOR);for(let o=0;o<e.getNumInteriorRing();o++){const a=e.getInteriorRingN(o),l=Pt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(l,t,he.opposite(n),S.INTERIOR,S.EXTERIOR)}}isTriangleErodedCompletely(e,t){const n=new Is(e[0],e[1],e[2]),s=n.inCentre();return di.pointToSegment(s,n.p0,n.p1)<Math.abs(t)}addLineString(e){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;const t=Pt.removeRepeatedPoints(e.getCoordinates());if(Pt.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{const n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)}}add(e){if(e.isEmpty())return null;if(e instanceof kn)this.addPolygon(e);else if(e instanceof At)this.addLineString(e);else if(e instanceof Un)this.addPoint(e);else if(e instanceof Po)this.addCollection(e);else if(e instanceof Kr)this.addCollection(e);else if(e instanceof Ks)this.addCollection(e);else{if(!(e instanceof qt))throw new Wr(e.getGeometryType());this.addCollection(e)}}addCurve(e,t,n){if(null===e||e.length<2)return null;const s=new ga(e,new bn(0,S.BOUNDARY,t,n));this._curveList.add(s)}getCurves(){return this.add(this._inputGeom),this._curveList}isErodedCompletely(e,t){const n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);const s=e.getEnvelopeInternal(),r=Math.min(s.getHeight(),s.getWidth());return t<0&&2*Math.abs(t)>r}addCollection(e){for(let t=0;t<e.getNumGeometries();t++){const n=e.getGeometryN(t);this.add(n)}}}class Wd{constructor(){Wd.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._orientation=null;const e=arguments[0];this._pts=e,this._orientation=Wd.orientation(e)}static orientation(e){return 1===Pt.increasingDirection(e)}static compareOriented(e,t,n,s){const r=t?1:-1,o=s?1:-1,a=t?e.length:-1,l=s?n.length:-1;let c=t?0:e.length-1,h=s?0:n.length-1;for(;;){const u=e[c].compareTo(n[h]);if(0!==u)return u;c+=r,h+=o;const d=c===a,p=h===l;if(d&&!p)return-1;if(!d&&p)return 1;if(d&&p)return 0}}compareTo(e){return Wd.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}get interfaces_(){return[Cs]}}class Py{constructor(){Py.constructor_.apply(this,arguments)}static constructor_(){this._edges=new se,this._ocaMap=new No}print(e){e.print("MULTILINESTRING ( ");for(let t=0;t<this._edges.size();t++){const n=this._edges.get(t);t>0&&e.print(","),e.print("(");const s=n.getCoordinates();for(let r=0;r<s.length;r++)r>0&&e.print(","),e.print(s[r].x+" "+s[r].y);e.println(")")}e.print(")  ")}addAll(e){for(let t=e.iterator();t.hasNext();)this.add(t.next())}findEdgeIndex(e){for(let t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(e){return this._edges.get(e)}findEqualEdge(e){const t=new Wd(e.getCoordinates());return this._ocaMap.get(t)}add(e){this._edges.add(e);const t=new Wd(e.getCoordinates());this._ocaMap.put(t,e)}}class Oy{constructor(){Oy.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]}static isAdjacentSegments(e,t){return 1===Math.abs(e-t)}isTrivialIntersection(e,t,n,s){if(e===n&&1===this._li.getIntersectionNum()){if(Oy.isAdjacentSegments(t,s))return!0;if(e.isClosed()){const r=e.size()-1;if(0===t&&s===r||0===s&&t===r)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(e,t,n,s){if(e===n&&t===s)return null;this.numTests++;const r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[s],l=n.getCoordinates()[s+1];this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,s)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,s,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}get interfaces_(){return[v4]}}class $d{constructor(){$d.constructor_.apply(this,arguments)}static constructor_(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Py,this._bufParams=arguments[0]}static convertSegStrings(e){const t=new wn,n=new se;for(;e.hasNext();){const s=e.next(),r=t.createLineString(s.getCoordinates());n.add(r)}return t.buildGeometry(n)}static depthDelta(e){const t=e.getLocation(0,he.LEFT),n=e.getLocation(0,he.RIGHT);return t===S.INTERIOR&&n===S.EXTERIOR?1:t===S.EXTERIOR&&n===S.INTERIOR?-1:0}createEmptyResultGeometry(){return this._geomFact.createPolygon()}getNoder(e){if(null!==this._workingNoder)return this._workingNoder;const t=new Ud,n=new ji;return n.setPrecisionModel(e),t.setSegmentIntersector(new Oy(n)),t}buffer(e,t){let n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();const s=new Dy(n,this._bufParams),o=new C4(e,t,s).getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new Ch(new JC),this._graph.addEdges(this._edgeList.getEdges());const a=this.createSubgraphs(this._graph),l=new Nf(this._geomFact);this.buildSubgraphs(a,l);const c=l.getPolygons();return c.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(c)}computeNodedEdges(e,t){const n=this.getNoder(t);n.computeNodes(e);for(let r=n.getNodedSubstrings().iterator();r.hasNext();){const o=r.next(),a=o.getCoordinates();if(2===a.length&&a[0].equals2D(a[1]))continue;const l=o.getData(),c=new Fo(o.getCoordinates(),new bn(l));this.insertUniqueEdge(c)}}setNoder(e){this._workingNoder=e}setWorkingPrecisionModel(e){this._workingPrecisionModel=e}insertUniqueEdge(e){const t=this._edgeList.findEqualEdge(e);if(null!==t){const n=t.getLabel();let s=e.getLabel();t.isPointwiseEqual(e)||(s=new bn(e.getLabel()),s.flip()),n.merge(s);const r=$d.depthDelta(s),a=t.getDepthDelta()+r;t.setDepthDelta(a)}else this._edgeList.add(e),e.setDepthDelta($d.depthDelta(e.getLabel()))}buildSubgraphs(e,t){const n=new se;for(let s=e.iterator();s.hasNext();){const r=s.next(),o=r.getRightmostCoordinate(),l=new Ry(n).getDepth(o);r.computeDepth(l),r.findResultEdges(),n.add(r),t.add(r.getDirectedEdges(),r.getNodes())}}createSubgraphs(e){const t=new se;for(let n=e.getNodes().iterator();n.hasNext();){const s=n.next();if(!s.isVisited()){const r=new b4;r.create(s),t.add(r)}}return pa.sort(t,pa.reverseOrder()),t}}class Ai{constructor(){Ai.constructor_.apply(this,arguments)}static constructor_(){if(this._argGeom=null,this._distance=null,this._bufParams=new rs,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){const t=arguments[1];this._argGeom=arguments[0],this._bufParams=t}}static bufferOp(){if(2===arguments.length){const t=arguments[1];return new Ai(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ge&&"number"==typeof arguments[1]){const t=arguments[1],n=arguments[2],s=new Ai(arguments[0]);return s.setQuadrantSegments(n),s.getResultGeometry(t)}if(arguments[2]instanceof rs&&arguments[0]instanceof ge&&"number"==typeof arguments[1]){const t=arguments[1];return new Ai(arguments[0],arguments[2]).getResultGeometry(t)}}else if(4===arguments.length){const t=arguments[1],n=arguments[2],s=arguments[3],r=new Ai(arguments[0]);return r.setQuadrantSegments(n),r.setEndCapStyle(s),r.getResultGeometry(t)}}static precisionScaleFactor(e,t,n){const s=e.getEnvelopeInternal(),r=xh.max(Math.abs(s.getMaxX()),Math.abs(s.getMaxY()),Math.abs(s.getMinX()),Math.abs(s.getMinY())),l=Math.trunc(Math.log(r+2*(t>0?t:0))/Math.log(10)+1);return Math.pow(10,n-l)}bufferFixedPrecision(e){const t=new xy(new w4(new Jt(1)),e.getScale()),n=new $d(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0===arguments.length){for(let e=Ai.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(t){if(!(t instanceof xr))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){const t=Ai.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),n=new Jt(t);this.bufferFixedPrecision(n)}}bufferOriginalPrecision(){try{const e=new $d(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Ys))throw e;this._saveException=e}}getResultGeometry(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}setEndCapStyle(e){this._bufParams.setEndCapStyle(e)}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;const e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Jt.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}setQuadrantSegments(e){this._bufParams.setQuadrantSegments(e)}}Ai.CAP_ROUND=rs.CAP_ROUND,Ai.CAP_BUTT=rs.CAP_FLAT,Ai.CAP_FLAT=rs.CAP_FLAT,Ai.CAP_SQUARE=rs.CAP_SQUARE,Ai.MAX_PRECISION_DIGITS=12;class Ff{constructor(){Ff.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new tn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof At&&"number"==typeof arguments[1]){const t=arguments[1];Ff.constructor_.call(this,arguments[0].getCoordinates(),t)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1];this._srcPts=e,this._isClosed=Ff.isClosed(e),this._snapTolerance=t}}static isClosed(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])}snapVertices(e,t){const n=this._isClosed?e.size()-1:e.size();for(let s=0;s<n;s++){const r=e.get(s),o=this.findSnapForVertex(r,t);null!==o&&(e.set(s,new j(o)),0===s&&this._isClosed&&e.set(e.size()-1,new j(o)))}}findSnapForVertex(e,t){for(let n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null}snapTo(e){const t=new $r(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()}snapSegments(e,t){if(0===t.length)return null;let n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(let s=0;s<n;s++){const r=t[s],o=this.findSegmentIndexToSnap(r,e);o>=0&&e.add(o+1,new j(r),!1)}}findSegmentIndexToSnap(e,t){let n=Ce.MAX_VALUE,s=-1;for(let r=0;r<t.size()-1;r++){if(this._seg.p0=t.get(r),this._seg.p1=t.get(r+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}const o=this._seg.distance(e);o<this._snapTolerance&&o<n&&(n=o,s=r)}return s}setAllowSnappingToSourceVertices(e){this._allowSnappingToSourceVertices=e}}class E4{constructor(){E4.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}transformPoint(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}transformPolygon(e,t){let n=!0;const s=this.transformLinearRing(e.getExteriorRing(),e);(null===s||!(s instanceof wr)||s.isEmpty())&&(n=!1);const r=new se;for(let o=0;o<e.getNumInteriorRing();o++){const a=this.transformLinearRing(e.getInteriorRingN(o),e);null===a||a.isEmpty()||(a instanceof wr||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(s,r.toArray([]));{const o=new se;return null!==s&&o.add(s),o.addAll(r),this._factory.buildGeometry(o)}}createCoordinateSequence(e){return this._factory.getCoordinateSequenceFactory().create(e)}getInputGeometry(){return this._inputGeom}transformMultiLineString(e,t){const n=new se;for(let s=0;s<e.getNumGeometries();s++){const r=this.transformLineString(e.getGeometryN(s),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}transformCoordinates(e,t){return this.copy(e)}transformLineString(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}transformMultiPoint(e,t){const n=new se;for(let s=0;s<e.getNumGeometries();s++){const r=this.transformPoint(e.getGeometryN(s),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}transformMultiPolygon(e,t){const n=new se;for(let s=0;s<e.getNumGeometries();s++){const r=this.transformPolygon(e.getGeometryN(s),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}copy(e){return e.copy()}transformLinearRing(e,t){const n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this._factory.createLinearRing(null);const s=n.size();return s>0&&s<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)}transformGeometryCollection(e,t){const n=new se;for(let s=0;s<e.getNumGeometries();s++){const r=this.transform(e.getGeometryN(s));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(wn.toGeometryArray(n)):this._factory.buildGeometry(n)}transform(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Un)return this.transformPoint(e,null);if(e instanceof Po)return this.transformMultiPoint(e,null);if(e instanceof wr)return this.transformLinearRing(e,null);if(e instanceof At)return this.transformLineString(e,null);if(e instanceof Kr)return this.transformMultiLineString(e,null);if(e instanceof kn)return this.transformPolygon(e,null);if(e instanceof Ks)return this.transformMultiPolygon(e,null);if(e instanceof qt)return this.transformGeometryCollection(e,null);throw new at("Unknown Geometry subtype: "+e.getGeometryType())}}let S4=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._srcGeom=null,this._srcGeom=arguments[0]}static computeSizeBasedSnapTolerance(t){const n=t.getEnvelopeInternal();return Math.min(n.getHeight(),n.getWidth())*i.SNAP_PRECISION_FACTOR}static computeOverlaySnapTolerance(){if(1===arguments.length){const t=arguments[0];let n=i.computeSizeBasedSnapTolerance(t);const s=t.getPrecisionModel();if(s.getType()===Jt.FIXED){const r=1/s.getScale()*2/1.415;r>n&&(n=r)}return n}if(2===arguments.length){const n=arguments[1];return Math.min(i.computeOverlaySnapTolerance(arguments[0]),i.computeOverlaySnapTolerance(n))}}static snapToSelf(t,n,s){return new i(t).snapToSelf(n,s)}static snap(t,n,s){const r=new Array(2).fill(null),o=new i(t);r[0]=o.snapTo(n,s);const a=new i(n);return r[1]=a.snapTo(r[0],s),r}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}snapTo(t,n){const s=this.extractTargetCoordinates(t);return new Ny(n,s).transform(this._srcGeom)}snapToSelf(t,n){const s=this.extractTargetCoordinates(this._srcGeom),o=new Ny(t,s,!0).transform(this._srcGeom);let a=o;return n&&De(a,bh)&&(a=Ai.bufferOp(o,0)),a}extractTargetCoordinates(t){const n=new Mh,s=t.getCoordinates();for(let r=0;r<s.length;r++)n.add(s[r]);return n.toArray(new Array(0).fill(null))}computeMinimumSegmentLength(t){let n=Ce.MAX_VALUE;for(let s=0;s<t.length-1;s++){const r=t[s].distance(t[s+1]);r<n&&(n=r)}return n}}return i.SNAP_PRECISION_FACTOR=1e-9,i})();class Ny extends E4{constructor(){super(),Ny.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){const t=arguments[1];this._snapTolerance=arguments[0],this._snapPts=t}else if(3===arguments.length){const t=arguments[1],n=arguments[2];this._snapTolerance=arguments[0],this._snapPts=t,this._isSelfSnap=n}}transformCoordinates(e,t){const n=e.toCoordinateArray(),s=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(s)}snapLine(e,t){const n=new Ff(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)}}class ma{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new _h,this._commonSignExp=null}getCommon(){return Ce.longBitsToDouble(this._commonBits)}add(e){const t=Ce.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=ma.signExpBits(this._commonBits),this._isFirst=!1,null):ma.signExpBits(t)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=ma.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=ma.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))}toString(){if(1===arguments.length){const e=arguments[0],t=Ce.longBitsToDouble(e),s="0000000000000000000000000000000000000000000000000000000000000000"+_h.toBinaryString(e),r=s.substring(s.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+t+" ]"}}getClass(){return ma}get interfaces_(){return[]}static getBit(e,t){const n=1<<t%32;return t<32?0!=(e.low&n)?1:0:0!=(e.high&n)?1:0}static signExpBits(e){return e.high>>>20}static zeroLowerBits(e,t){let n="low";return t>32&&(e.low=0,t%=32,n="high"),t>0&&(e[n]&=t<32?~((1<<t)-1):0),e}static numCommonMostSigMantissaBits(e,t){let n=0;for(let s=52;s>=0;s--){if(ma.getBit(e,s)!==ma.getBit(t,s))return n;n++}return 52}}class Vf{constructor(){Vf.constructor_.apply(this,arguments)}static constructor_(){this._commonCoord=null,this._ccFilter=new Fy}add(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}removeCommonBits(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;const t=new j(this._commonCoord);t.x=-t.x,t.y=-t.y;const n=new zf(t);return e.apply(n),e.geometryChanged(),e}addCommonBits(e){const t=new zf(this._commonCoord);e.apply(t),e.geometryChanged()}getCommonCoordinate(){return this._commonCoord}}class Fy{constructor(){Fy.constructor_.apply(this,arguments)}static constructor_(){this._commonBitsX=new ma,this._commonBitsY=new ma}filter(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)}getCommonCoordinate(){return new j(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}get interfaces_(){return[Od]}}class zf{constructor(){zf.constructor_.apply(this,arguments)}static constructor_(){this.trans=null,this.trans=arguments[0]}filter(e,t){const n=e.getOrdinate(t,0)+this.trans.x,s=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,s)}isGeometryChanged(){return!0}isDone(){return!1}get interfaces_(){return[Nd]}}Vf.CommonCoordinateFilter=Fy,Vf.Translater=zf;class I4{constructor(){I4.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new se,this._resultLineList=new se;const t=arguments[1],n=arguments[2];this._op=arguments[0],this._geometryFactory=t,this._ptLocator=n}collectLines(e){for(let t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){const n=t.next();this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}}labelIsolatedLine(e,t){const n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)}build(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList}collectLineEdge(e,t,n){const s=e.getLabel(),r=e.getEdge();e.isLineEdge()&&!e.isVisited()&&gn.isResultOfOp(s,t)&&!r.isCovered()&&(n.add(r),e.setVisitedEdge(!0))}findCoveredLineEdges(){for(let e=this._op.getGraph().getNodes().iterator();e.hasNext();)e.next().getEdges().findCoveredLineEdges();for(let e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){const t=e.next(),n=t.getEdge();if(t.isLineEdge()&&!n.isCoveredSet()){const s=this._op.isCoveredByA(t.getCoordinate());n.setCovered(s)}}}labelIsolatedLines(e){for(let t=e.iterator();t.hasNext();){const n=t.next(),s=n.getLabel();n.isIsolated()&&(s.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}buildLines(e){for(let t=this._lineEdgesList.iterator();t.hasNext();){const n=t.next(),s=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(s),n.setInResult(!0)}}collectBoundaryTouchEdge(e,t,n){const s=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;Oe.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),gn.isResultOfOp(s,t)&&t===gn.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))}}class T4{constructor(){T4.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._resultPointList=new se;const t=arguments[1];this._op=arguments[0],this._geometryFactory=t}build(e){return this.extractNonCoveredResultNodes(e),this._resultPointList}extractNonCoveredResultNodes(e){for(let t=this._op.getGraph().getNodes().iterator();t.hasNext();){const n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==gn.INTERSECTION)){const s=n.getLabel();gn.isResultOfOp(s,e)&&this.filterCoveredNodeToPoint(n)}}}filterCoveredNodeToPoint(e){const t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){const n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}}}class D4{constructor(){D4.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._data=null;const t=arguments[1];this._pts=arguments[0],this._data=t}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(e){return this._pts[e]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(e){return e===this._pts.length-1?-1:wy.octant(this.getCoordinate(e),this.getCoordinate(e+1))}setData(e){this._data=e}getData(){return this._data}toString(){return Oo.toLineString(new Yr(this._pts))}get interfaces_(){return[jP]}}class Ts{constructor(){Ts.constructor_.apply(this,arguments)}static constructor_(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._keepIntersections=!0,this._isInteriorIntersectionsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new se,this._intersectionCount=0,this._li=arguments[0],this._interiorIntersection=null}static createAllIntersectionsFinder(e){const t=new Ts(e);return t.setFindAllIntersections(!0),t}static isInteriorVertexIntersection(){if(4===arguments.length){const e=arguments[0],t=arguments[1],s=arguments[3];return!(arguments[2]&&s||!e.equals2D(t))}if(8===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3],r=arguments[4],o=arguments[5],a=arguments[6],l=arguments[7];return!!(Ts.isInteriorVertexIntersection(e,n,r,a)||Ts.isInteriorVertexIntersection(e,s,r,l)||Ts.isInteriorVertexIntersection(t,n,o,a)||Ts.isInteriorVertexIntersection(t,s,o,l))}}static createInteriorIntersectionCounter(e){const t=new Ts(e);return t.setInteriorIntersectionsOnly(!0),t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t}static createIntersectionCounter(e){const t=new Ts(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t}static isEndSegment(e,t){return 0===t||t>=e.size()-2}static createAnyIntersectionFinder(e){return new Ts(e)}static createInteriorIntersectionsFinder(e){const t=new Ts(e);return t.setFindAllIntersections(!0),t.setInteriorIntersectionsOnly(!0),t}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(e){this._findAllIntersections=e}setKeepIntersections(e){this._keepIntersections=e}getIntersection(){return this._interiorIntersection}processIntersections(e,t,n,s){if(!this._findAllIntersections&&this.hasIntersection())return null;const r=e===n;if(r&&t===s||this._isCheckEndSegmentsOnly&&!Ts.isEndSegment(e,t)&&!Ts.isEndSegment(n,s))return null;const a=e.getCoordinate(t),l=e.getCoordinate(t+1),c=n.getCoordinate(s),h=n.getCoordinate(s+1),u=0===t,d=t+2===e.size(),p=0===s,f=s+2===n.size();this._li.computeIntersection(a,l,c,h);const g=this._li.hasIntersection()&&this._li.isInteriorIntersection();let m=!1;this._isInteriorIntersectionsOnly||(m=!(r&&Math.abs(s-t)<=1)&&Ts.isInteriorVertexIntersection(a,l,c,h,u,d,p,f)),(g||m)&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=a,this._intSegments[1]=l,this._intSegments[2]=c,this._intSegments[3]=h,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}setInteriorIntersectionsOnly(e){this._isInteriorIntersectionsOnly=e}setCheckEndSegmentsOnly(e){this._isCheckEndSegmentsOnly=e}getIntersectionSegments(){return this._intSegments}get interfaces_(){return[v4]}}class Vy{constructor(){Vy.constructor_.apply(this,arguments)}static constructor_(){this._li=new ji,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]}static computeIntersections(e){const t=new Vy(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(e){this._findAllIntersections=e}checkInteriorIntersections(){this._isValid=!0,this._segInt=new Ts(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);const e=new Ud;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new xr(this.getErrorMessage(),this._segInt.getIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";const e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Oo.toLineString(e[0],e[1])+" and "+Oo.toLineString(e[2],e[3])}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}}class Hf{constructor(){Hf.constructor_.apply(this,arguments)}static constructor_(){this._nv=null,this._nv=new Vy(Hf.toSegmentStrings(arguments[0]))}static toSegmentStrings(e){const t=new se;for(let n=e.iterator();n.hasNext();){const s=n.next();t.add(new D4(s.getCoordinates(),s))}return t}static checkValid(e){new Hf(e).checkValid()}checkValid(){this._nv.checkValid()}}class zy{constructor(){zy.constructor_.apply(this,arguments)}static constructor_(){this._mapOp=null,this._mapOp=arguments[0]}static map(e,t){return new zy(t).map(e)}map(e){const t=new se;for(let n=0;n<e.getNumGeometries();n++){const s=this._mapOp.map(e.getGeometryN(n));s.isEmpty()||t.add(s)}return e.getFactory().createGeometryCollection(wn.toGeometryArray(t))}}class lc{constructor(){lc.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new ji,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Mr(0,e)}else if(2===arguments.length)lc.constructor_.call(this,arguments[0],arguments[1],Ri.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];e.getPrecisionModel().compareTo(t.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mr(0,e,n),this._arg[1]=new Mr(1,t,n)}}setComputationPrecision(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)}getArgGeometry(e){return this._arg[e].getGeometry()}}let gn=(()=>{class i extends lc{constructor(){super(),i.constructor_.apply(this,arguments)}static constructor_(){this._ptLocator=new Sh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Py,this._resultPolyList=new se,this._resultLineList=new se,this._resultPointList=new se;const t=arguments[0];lc.constructor_.call(this,t,arguments[1]),this._graph=new Ch(new JC),this._geomFact=t.getFactory()}static overlayOp(t,n,s){return new i(t,n).getResultGeometry(s)}static union(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return i.createEmptyResult(i.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}if(t.isGeometryCollection()||n.isGeometryCollection())throw new at("This method does not support GeometryCollection arguments");return br.overlayOp(t,n,i.UNION)}static intersection(t,n){if(t.isEmpty()||n.isEmpty())return i.createEmptyResult(i.INTERSECTION,t,n,t.getFactory());if(t.isGeometryCollection()){const s=n;return zy.map(t,new class{get interfaces_(){return[MapOp]}map(r){return i.intersection(r,s)}})}return br.overlayOp(t,n,i.INTERSECTION)}static symDifference(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return i.createEmptyResult(i.SYMDIFFERENCE,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}if(t.isGeometryCollection()||n.isGeometryCollection())throw new at("This method does not support GeometryCollection arguments");return br.overlayOp(t,n,i.SYMDIFFERENCE)}static resultDimension(t,n,s){const r=n.getDimension(),o=s.getDimension();let a=-1;switch(t){case i.INTERSECTION:a=Math.min(r,o);break;case i.UNION:a=Math.max(r,o);break;case i.DIFFERENCE:a=r;break;case i.SYMDIFFERENCE:a=Math.max(r,o)}return a}static createEmptyResult(t,n,s,r){const a=i.resultDimension(t,n,s);return r.createEmpty(a)}static difference(t,n){if(t.isEmpty())return i.createEmptyResult(i.DIFFERENCE,t,n,t.getFactory());if(n.isEmpty())return t.copy();if(t.isGeometryCollection()||n.isGeometryCollection())throw new at("This method does not support GeometryCollection arguments");return br.overlayOp(t,n,i.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){const t=arguments[0],n=arguments[1],s=t.getLocation(0),r=t.getLocation(1);return i.isResultOfOp(s,r,n)}if(3===arguments.length){let t=arguments[0],n=arguments[1];switch(t===S.BOUNDARY&&(t=S.INTERIOR),n===S.BOUNDARY&&(n=S.INTERIOR),arguments[2]){case i.INTERSECTION:return t===S.INTERIOR&&n===S.INTERIOR;case i.UNION:return t===S.INTERIOR||n===S.INTERIOR;case i.DIFFERENCE:return t===S.INTERIOR&&n!==S.INTERIOR;case i.SYMDIFFERENCE:return t===S.INTERIOR&&n!==S.INTERIOR||t!==S.INTERIOR&&n===S.INTERIOR}return!1}}insertUniqueEdge(t){const n=this._edgeList.findEqualEdge(t);if(null!==n){const s=n.getLabel();let r=t.getLabel();n.isPointwiseEqual(t)||(r=new bn(t.getLabel()),r.flip());const o=n.getDepth();o.isNull()&&o.add(s),o.add(r),s.merge(r)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(let t=this._graph.getEdgeEnds().iterator();t.hasNext();){const n=t.next(),s=n.getSym();n.isInResult()&&s.isInResult()&&(n.setInResult(!1),s.setInResult(!1))}}mergeSymLabels(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);const n=new se;this._arg[0].computeSplitEdges(n),this._arg[1].computeSplitEdges(n),this.insertUniqueEdges(n),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();const r=new Nf(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();const o=new I4(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(t);const a=new T4(this,this._geomFact,this._ptLocator);this._resultPointList=a.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}findResultAreaEdges(t){for(let n=this._graph.getEdgeEnds().iterator();n.hasNext();){const s=n.next(),r=s.getLabel();r.isArea()&&!s.isInteriorAreaEdge()&&i.isResultOfOp(r.getLocation(0,he.RIGHT),r.getLocation(1,he.RIGHT),t)&&s.setInResult(!0)}}computeLabelsFromDepths(){for(let t=this._edgeList.iterator();t.hasNext();){const n=t.next(),s=n.getLabel(),r=n.getDepth();if(!r.isNull()){r.normalize();for(let o=0;o<2;o++)!s.isNull(o)&&s.isArea()&&!r.isNull(o)&&(0===r.getDelta(o)?s.toLine(o):(Oe.isTrue(!r.isNull(o,he.LEFT),"depth of LEFT side has not been initialized"),s.setLocation(o,he.LEFT,r.getLocation(o,he.LEFT)),Oe.isTrue(!r.isNull(o,he.RIGHT),"depth of RIGHT side has not been initialized"),s.setLocation(o,he.RIGHT,r.getLocation(o,he.RIGHT))))}}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}isCoveredByLA(t){return!(!this.isCovered(t,this._resultLineList)&&!this.isCovered(t,this._resultPolyList))}computeGeometry(t,n,s,r){const o=new se;return o.addAll(t),o.addAll(n),o.addAll(s),o.isEmpty()?i.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)}isCovered(t,n){for(let s=n.iterator();s.hasNext();){const r=s.next();if(this._ptLocator.locate(t,r)!==S.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){const t=new se;for(let n=this._edgeList.iterator();n.hasNext();){const s=n.next();s.isCollapsed()&&(n.remove(),t.add(s.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const n=t.next(),s=n.getEdges().getLabel();n.getLabel().merge(s)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(let n=t.iterator();n.hasNext();){const s=n.next();this.insertUniqueEdge(s)}}labelIncompleteNode(t,n){const s=this._ptLocator.locate(t.getCoordinate(),this._arg[n].getGeometry());t.getLabel().setLocation(n,s)}copyPoints(t){for(let n=this._arg[t].getNodeIterator();n.hasNext();){const s=n.next();this._graph.addNode(s.getCoordinate()).setLabel(t,s.getLabel().getLocation(t))}}computeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const n=t.next(),s=n.getLabel();n.isIsolated()&&(s.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(s)}}}return i.INTERSECTION=1,i.UNION=2,i.DIFFERENCE=3,i.SYMDIFFERENCE=4,i})();class cc{constructor(){cc.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;const t=arguments[1];this._geom[0]=arguments[0],this._geom[1]=t,this.computeSnapTolerance()}static overlayOp(e,t,n){return new cc(e,t).getResultGeometry(n)}static union(e,t){return cc.overlayOp(e,t,gn.UNION)}static intersection(e,t){return cc.overlayOp(e,t,gn.INTERSECTION)}static symDifference(e,t){return cc.overlayOp(e,t,gn.SYMDIFFERENCE)}static difference(e,t){return cc.overlayOp(e,t,gn.DIFFERENCE)}selfSnap(e){return new S4(e).snapTo(e,this._snapTolerance)}removeCommonBits(e){this._cbr=new Vf,this._cbr.add(e[0]),this._cbr.add(e[1]);const t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t}prepareResult(e){return this._cbr.addCommonBits(e),e}getResultGeometry(e){const t=this.snap(this._geom),n=gn.overlayOp(t[0],t[1],e);return this.prepareResult(n)}checkValid(e){e.isValid()||is.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=S4.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(e){const t=this.removeCommonBits(e);return S4.snap(t[0],t[1],this._snapTolerance)}}class br{constructor(){br.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null);const t=arguments[1];this._geom[0]=arguments[0],this._geom[1]=t}static overlayOp(e,t,n){return new br(e,t).getResultGeometry(n)}static union(e,t){return br.overlayOp(e,t,gn.UNION)}static intersection(e,t){return br.overlayOp(e,t,gn.INTERSECTION)}static symDifference(e,t){return br.overlayOp(e,t,gn.SYMDIFFERENCE)}static difference(e,t){return br.overlayOp(e,t,gn.DIFFERENCE)}getResultGeometry(e){let t=null,n=!1,s=null;try{t=gn.overlayOp(this._geom[0],this._geom[1],e),n=!0}catch(r){if(!(r instanceof Ys))throw r;s=r}if(!n)try{t=cc.overlayOp(this._geom[0],this._geom[1],e)}catch(r){throw r instanceof Ys?s:r}return t}}class Yd{constructor(){Yd.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._polygons=new se,this._lines=new se,this._points=new se,this._dimension=Ee.FALSE}static extract(){if(De(arguments[0],Gn)){const e=arguments[0],t=new Yd;return t.add(e),t}if(arguments[0]instanceof ge){const e=arguments[0],t=new Yd;return t.add(e),t}}getFactory(){return this._geomFactory}filter(e){return this.recordDimension(e.getDimension()),e instanceof qt||e.isEmpty()?null:e instanceof kn?(this._polygons.add(e),null):e instanceof At?(this._lines.add(e),null):e instanceof Un?(this._points.add(e),null):void Oe.shouldNeverReachHere("Unhandled geometry type: "+e.getGeometryType())}getExtract(e){switch(e){case 0:return this._points;case 1:return this._lines;case 2:return this._polygons}return Oe.shouldNeverReachHere("Invalid dimension: "+e),null}recordDimension(e){e>this._dimension&&(this._dimension=e)}getDimension(){return this._dimension}isEmpty(){return this._polygons.isEmpty()&&this._lines.isEmpty()&&this._points.isEmpty()}add(){if(De(arguments[0],Gn)){const e=arguments[0];for(const t of e)this.add(t)}else if(arguments[0]instanceof ge){const e=arguments[0];null===this._geomFactory&&(this._geomFactory=e.getFactory()),e.apply(this)}}get interfaces_(){return[sc]}}class Ho{constructor(){Ho.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;const e=arguments[0];this._geomFactory=Ho.extractFactory(e),this._inputGeoms=e}static extractFactory(e){return e.isEmpty()?null:e.iterator().next().getFactory()}static createList(){if(2===arguments.length){const e=arguments[0],t=arguments[1],n=new se;return n.add(e),n.add(t),n}if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=new se;return s.add(e),s.add(t),s.add(n),s}}static combine(){return 1===arguments.length?new Ho(arguments[0]).combine():2===arguments.length?new Ho(Ho.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Ho(Ho.createList(arguments[0],arguments[1],arguments[2])).combine():void 0}extractElements(e,t){if(null===e)return null;for(let n=0;n<e.getNumGeometries();n++){const s=e.getGeometryN(n);this._skipEmpty&&s.isEmpty()||t.add(s)}}combine(){const e=new se;for(let t=this._inputGeoms.iterator();t.hasNext();){const n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(e)}}class Hy{constructor(){Hy.constructor_.apply(this,arguments)}static constructor_(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;const t=arguments[1];this._pointGeom=arguments[0],this._otherGeom=t,this._geomFact=t.getFactory()}static union(e,t){return new Hy(e,t).union()}union(){const e=new Sh,t=new Mh;for(let r=0;r<this._pointGeom.getNumGeometries();r++){const a=this._pointGeom.getGeometryN(r).getCoordinate();e.locate(a,this._otherGeom)===S.EXTERIOR&&t.add(a)}if(0===t.size())return this._otherGeom;let n=null;const s=Pt.toCoordinateArray(t);return n=1===s.length?this._geomFact.createPoint(s[0]):this._geomFact.createMultiPointFromCoords(s),Ho.combine(n,this._otherGeom)}}class Kd{constructor(){Kd.constructor_.apply(this,arguments)}static constructor_(){this._comps=null,this._comps=arguments[0]}static getPolygons(){if(1===arguments.length)return Kd.getPolygons(arguments[0],new se);if(2===arguments.length){const e=arguments[0],t=arguments[1];return e instanceof kn?t.add(e):e instanceof qt&&e.apply(new Kd(t)),t}}filter(e){e instanceof kn&&this._comps.add(e)}get interfaces_(){return[sc]}}class GP{static union(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return gn.createEmptyResult(gn.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return ge.checkNotGeometryCollection(e),ge.checkNotGeometryCollection(t),br.overlayOp(e,t,gn.UNION)}}class Cr{constructor(){Cr.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._g0=null,this._g1=null,this._isUnionSafe=null;const e=arguments[0],t=arguments[1];this._g0=e,this._g1=t,this._geomFactory=e.getFactory()}static containsProperly(){if(2===arguments.length){const e=arguments[0],t=arguments[1];return!e.isNull()&&t.getX()>e.getMinX()&&t.getX()<e.getMaxX()&&t.getY()>e.getMinY()&&t.getY()<e.getMaxY()}if(3===arguments.length){const e=arguments[0],n=arguments[2];return Cr.containsProperly(e,arguments[1])&&Cr.containsProperly(e,n)}}static union(e,t){return new Cr(e,t).union()}static intersects(e,t,n){return e.intersects(t)||e.intersects(n)}static overlapEnvelope(e,t){const n=e.getEnvelopeInternal(),s=t.getEnvelopeInternal();return n.intersection(s)}static extractBorderSegments(e,t,n){e.apply(new class{get interfaces_(){return[Nd]}filter(s,r){if(r<=0)return null;const o=s.getCoordinate(r-1),a=s.getCoordinate(r);if(Cr.intersects(t,o,a)&&!Cr.containsProperly(t,o,a)){const c=new tn(o,a);n.add(c)}}isDone(){return!1}isGeometryChanged(){return!1}})}static unionBuffer(e,t){const s=e.getFactory().createGeometryCollection([e,t]);return Ai.bufferOp(s,0)}isBorderSegmentsSame(e,t){const n=this.extractBorderSegments(this._g0,this._g1,t),s=new se;return Cr.extractBorderSegments(e,t,s),this.isEqual(n,s)}union(){const e=Cr.overlapEnvelope(this._g0,this._g1);if(e.isNull()){const a=this._g0.copy(),l=this._g1.copy();return Ho.combine(a,l)}const t=new se,n=this.extractByEnvelope(e,this._g0,t),s=this.extractByEnvelope(e,this._g1,t),r=this.unionFull(n,s);let o=null;return this._isUnionSafe=this.isBorderSegmentsSame(r,e),o=this._isUnionSafe?this.combine(r,t):this.unionFull(this._g0,this._g1),o}extractBorderSegments(e,t,n){const s=new se;return Cr.extractBorderSegments(e,n,s),null!==t&&Cr.extractBorderSegments(t,n,s),s}isUnionOptimized(){return this._isUnionSafe}extractByEnvelope(e,t,n){const s=new se;for(let r=0;r<t.getNumGeometries();r++){const o=t.getGeometryN(r);if(o.getEnvelopeInternal().intersects(e))s.add(o);else{const a=o.copy();n.add(a)}}return this._geomFactory.buildGeometry(s)}isEqual(e,t){if(e.size()!==t.size())return!1;const n=new sl(e);for(const s of t)if(!n.contains(s))return!1;return!0}combine(e,t){return t.size()<=0?e:(t.add(e),Ho.combine(t))}unionFull(e,t){try{return GP.union(e,t)}catch(n){if(n instanceof xr)return Cr.unionBuffer(e,t);throw n}}}let Jpe=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new se)}static getGeometry(t,n){return n>=t.size()?null:t.get(n)}static union(t){return new i(t).union()}static restrictToPolygons(t){if(De(t,bh))return t;const n=Kd.getPolygons(t);return 1===n.size()?n.get(0):t.getFactory().createMultiPolygon(wn.toPolygonArray(n))}reduceToGeometries(t){const n=new se;for(let s=t.iterator();s.hasNext();){const r=s.next();let o=null;De(r,kr)?o=this.unionTree(r):r instanceof ge&&(o=r),n.add(o)}return n}union(){if(null===this._inputPolys)throw new oc("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();const t=new zn(i.STRTREE_NODE_CAPACITY);for(let r=this._inputPolys.iterator();r.hasNext();){const o=r.next();t.insert(o.getEnvelopeInternal(),o)}this._inputPolys=null;const n=t.itemsTree();return this.unionTree(n)}binaryUnion(){if(1===arguments.length){const t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){const t=arguments[0],n=arguments[1],s=arguments[2];if(s-n<=1){const r=i.getGeometry(t,n);return this.unionSafe(r,null)}if(s-n==2)return this.unionSafe(i.getGeometry(t,n),i.getGeometry(t,n+1));{const r=Math.trunc((s+n)/2),o=this.binaryUnion(t,n,r),a=this.binaryUnion(t,r,s);return this.unionSafe(o,a)}}}unionSafe(t,n){return null===t&&null===n?null:null===t?n.copy():null===n?t.copy():this.unionActual(t,n)}unionActual(t,n){const s=Cr.union(t,n);return i.restrictToPolygons(s)}unionTree(t){const n=this.reduceToGeometries(t);return this.binaryUnion(n)}}return i.STRTREE_NODE_CAPACITY=4,i})();class Rh{constructor(){Rh.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFact=null,this._extracter=null,1===arguments.length)(De(arguments[0],Gn)||arguments[0]instanceof ge)&&this.extract(arguments[0]);else if(2===arguments.length){const e=arguments[0];this._geomFact=arguments[1],this.extract(e)}}static union(){if(1===arguments.length){if(De(arguments[0],Gn))return new Rh(arguments[0]).union();if(arguments[0]instanceof ge)return new Rh(arguments[0]).union()}else if(2===arguments.length)return new Rh(arguments[0],arguments[1]).union()}extract(){(De(arguments[0],Gn)||arguments[0]instanceof ge)&&(this._extracter=Yd.extract(arguments[0]))}unionWithNull(e,t){return null===e&&null===t?null:null===t?e:null===e?t:gn.union(e,t)}unionNoOpt(e){const t=this._geomFact.createPoint();return br.overlayOp(e,t,gn.UNION)}union(){if(null===this._geomFact&&(this._geomFact=this._extracter.getFactory()),null===this._geomFact)return null;if(this._extracter.isEmpty())return this._geomFact.createEmpty(this._extracter.getDimension());const e=this._extracter.getExtract(0),t=this._extracter.getExtract(1),n=this._extracter.getExtract(2);let s=null;if(e.size()>0){const c=this._geomFact.buildGeometry(e);s=this.unionNoOpt(c)}let r=null;if(t.size()>0){const c=this._geomFact.buildGeometry(t);r=this.unionNoOpt(c)}let o=null;n.size()>0&&(o=Jpe.union(n));const a=this.unionWithNull(r,o);let l=null;return l=null===s?a:null===a?s:Hy.union(s,a),null===l?this._geomFact.createGeometryCollection():l}}class hc{constructor(){hc.constructor_.apply(this,arguments)}static constructor_(){this._areaBasePt=null,this._triangleCent3=new j,this._areasum2=0,this._cg3=new j,this._lineCentSum=new j,this._totalLength=0,this._ptCount=0,this._ptCentSum=new j;const e=arguments[0];this._areaBasePt=null,this.add(e)}static centroid3(e,t,n,s){return s.x=e.x+t.x+n.x,s.y=e.y+t.y+n.y,null}static getCentroid(e){return new hc(e).getCentroid()}static area2(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}setAreaBasePoint(e){this._areaBasePt=e}addPoint(e){this._ptCount+=1,this._ptCentSum.x+=e.x,this._ptCentSum.y+=e.y}addLineSegments(e){let t=0;for(let n=0;n<e.length-1;n++){const s=e[n].distance(e[n+1]);0!==s&&(t+=s,this._lineCentSum.x+=s*((e[n].x+e[n+1].x)/2),this._lineCentSum.y+=s*((e[n].y+e[n+1].y)/2))}this._totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])}addHole(e){const t=Pe.isCCW(e);for(let n=0;n<e.length-1;n++)this.addTriangle(this._areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}getCentroid(){const e=new j;if(Math.abs(this._areasum2)>0)e.x=this._cg3.x/3/this._areasum2,e.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)e.x=this._lineCentSum.x/this._totalLength,e.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;e.x=this._ptCentSum.x/this._ptCount,e.y=this._ptCentSum.y/this._ptCount}return e}add(){if(arguments[0]instanceof kn){const e=arguments[0];this.addShell(e.getExteriorRing().getCoordinates());for(let t=0;t<e.getNumInteriorRing();t++)this.addHole(e.getInteriorRingN(t).getCoordinates())}else if(arguments[0]instanceof ge){const e=arguments[0];if(e.isEmpty())return null;if(e instanceof Un)this.addPoint(e.getCoordinate());else if(e instanceof At)this.addLineSegments(e.getCoordinates());else if(e instanceof kn)this.add(e);else if(e instanceof qt){const t=e;for(let n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}}}addShell(e){e.length>0&&this.setAreaBasePoint(e[0]);const t=!Pe.isCCW(e);for(let n=0;n<e.length-1;n++)this.addTriangle(this._areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}addTriangle(e,t,n,s){const r=s?1:-1;hc.centroid3(e,t,n,this._triangleCent3);const o=hc.area2(e,t,n);this._cg3.x+=r*o*this._triangleCent3.x,this._cg3.y+=r*o*this._triangleCent3.y,this._areasum2+=r*o}}class By{constructor(){By.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=Ce.MAX_VALUE,this._interiorPoint=null;const e=arguments[0];e.isEmpty()?this._centroid=null:(this._centroid=hc.getCentroid(e),e.getPrecisionModel().makePrecise(this._centroid)),this.addInterior(e),null===this._interiorPoint&&this.addEndpoints(e)}static getInteriorPoint(e){return new By(e).getInteriorPoint()}add(e){const t=e.distance(this._centroid);t<this._minDistance&&(this._interiorPoint=new j(e),this._minDistance=t)}getInteriorPoint(){return this._interiorPoint}addEndpoints(){if(arguments[0]instanceof ge){const e=arguments[0];if(e instanceof At)this.addEndpoints(e.getCoordinates());else if(e instanceof qt){const t=e;for(let n=0;n<t.getNumGeometries();n++)this.addEndpoints(t.getGeometryN(n))}}else if(arguments[0]instanceof Array){const e=arguments[0];this.add(e[0]),this.add(e[e.length-1])}}addInterior(){if(arguments[0]instanceof ge){const e=arguments[0];if(e instanceof At)this.addInterior(e.getCoordinates());else if(e instanceof qt){const t=e;for(let n=0;n<t.getNumGeometries();n++)this.addInterior(t.getGeometryN(n))}}else if(arguments[0]instanceof Array){const e=arguments[0];for(let t=1;t<e.length-1;t++)this.add(e[t])}}}class Xd{constructor(){Xd.constructor_.apply(this,arguments)}static constructor_(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length)this._inputGeom=arguments[0];else if(2===arguments.length){const t=arguments[1];this._inputGeom=arguments[0],this._isClosedEndpointsInInterior=!t.isInBoundary(2)}}static isSimple(){return 1===arguments.length?new Xd(arguments[0]).isSimple():2===arguments.length?new Xd(arguments[0],arguments[1]).isSimple():void 0}isSimpleMultiPoint(e){if(e.isEmpty())return!0;const t=new Mh;for(let n=0;n<e.getNumGeometries();n++){const r=e.getGeometryN(n).getCoordinate();if(t.contains(r))return this._nonSimpleLocation=r,!1;t.add(r)}return!0}isSimplePolygonal(e){for(let n=Ss.getLines(e).iterator();n.hasNext();){const s=n.next();if(!this.isSimpleLinearGeometry(s))return!1}return!0}hasClosedEndpointIntersection(e){const t=new No;for(let n=e.getEdgeIterator();n.hasNext();){const s=n.next(),r=s.isClosed(),o=s.getCoordinate(0);this.addEndpoint(t,o,r);const a=s.getCoordinate(s.getNumPoints()-1);this.addEndpoint(t,a,r)}for(let n=t.values().iterator();n.hasNext();){const s=n.next();if(s.isClosed&&2!==s.degree)return this._nonSimpleLocation=s.getCoordinate(),!0}return!1}getNonSimpleLocation(){return this._nonSimpleLocation}isSimpleLinearGeometry(e){if(e.isEmpty())return!0;const t=new Mr(0,e),n=new ji,s=t.computeSelfNodes(n,!0);return!(s.hasIntersection()&&(s.hasProperIntersection()?(this._nonSimpleLocation=s.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(t)||this._isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)))}hasNonEndpointIntersection(e){for(let t=e.getEdgeIterator();t.hasNext();){const n=t.next(),s=n.getMaximumSegmentIndex();for(let r=n.getEdgeIntersectionList().iterator();r.hasNext();){const o=r.next();if(!o.isEndPoint(s))return this._nonSimpleLocation=o.getCoordinate(),!0}}return!1}addEndpoint(e,t,n){let s=e.get(t);null===s&&(s=new jy(t),e.put(t,s)),s.addEndpoint(n)}computeSimple(e){return this._nonSimpleLocation=null,!!e.isEmpty()||(e instanceof At||e instanceof Kr?this.isSimpleLinearGeometry(e):e instanceof Po?this.isSimpleMultiPoint(e):De(e,bh)?this.isSimplePolygonal(e):!(e instanceof qt)||this.isSimpleGeometryCollection(e))}isSimple(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}isSimpleGeometryCollection(e){for(let t=0;t<e.getNumGeometries();t++){const n=e.getGeometryN(t);if(!this.computeSimple(n))return!1}return!0}}class jy{constructor(){jy.constructor_.apply(this,arguments)}static constructor_(){this.pt=null,this.isClosed=null,this.degree=null,this.pt=arguments[0],this.isClosed=!1,this.degree=0}getCoordinate(){return this.pt}addEndpoint(e){this.degree++,this.isClosed|=e}}Xd.EndpointInfo=jy;class Bf{constructor(){Bf.constructor_.apply(this,arguments)}static constructor_(){this._coordSet=new sl,this._list=new se}static filterCoordinates(e){const t=new Bf;for(let n=0;n<e.length;n++)t.filter(e[n]);return t.getCoordinates()}filter(e){this._coordSet.add(e)&&this._list.add(e)}getCoordinates(){const e=new Array(this._list.size()).fill(null);return this._list.toArray(e)}get interfaces_(){return[Od]}}class Zd{constructor(){Zd.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){const e=arguments[0];Zd.constructor_.call(this,Zd.extractCoordinates(e),e.getFactory())}else if(2===arguments.length){const t=arguments[1];this._inputPts=Bf.filterCoordinates(arguments[0]),this._geomFactory=t}}static extractCoordinates(e){const t=new Bf;return e.apply(t),t.getCoordinates()}lineOrPolygon(e){if(3===(e=this.cleanRing(e)).length)return this._geomFactory.createLineString([e[0],e[1]]);const t=this._geomFactory.createLinearRing(e);return this._geomFactory.createPolygon(t)}cleanRing(e){Oe.equals(e[0],e[e.length-1]);const t=new se;let n=null;for(let r=0;r<=e.length-2;r++){const o=e[r],a=e[r+1];o.equals(a)||null!==n&&this.isBetween(n,o,a)||(t.add(o),n=o)}t.add(e[e.length-1]);const s=new Array(t.size()).fill(null);return t.toArray(s)}isBetween(e,t,n){return 0===Pe.index(e,t,n)&&(e.x!==n.x&&(e.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=e.x)||e.y!==n.y&&(e.y<=t.y&&t.y<=n.y||n.y<=t.y&&t.y<=e.y))}reduce(e){const t=this.computeOctRing(e);if(null===t)return e;const n=new Mh;for(let r=0;r<t.length;r++)n.add(t[r]);for(let r=0;r<e.length;r++)Xr.isInRing(e[r],t)||n.add(e[r]);const s=Pt.toCoordinateArray(n);return s.length<3?this.padArray3(s):s}getConvexHull(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);let e=this._inputPts;this._inputPts.length>50&&(e=this.reduce(this._inputPts));const t=this.preSort(e),n=this.grahamScan(t),s=this.toCoordinateArray(n);return this.lineOrPolygon(s)}padArray3(e){const t=new Array(3).fill(null);for(let n=0;n<t.length;n++)t[n]=n<e.length?e[n]:e[0];return t}computeOctPts(e){const t=new Array(8).fill(null);for(let n=0;n<t.length;n++)t[n]=e[0];for(let n=1;n<e.length;n++)e[n].x<t[0].x&&(t[0]=e[n]),e[n].x-e[n].y<t[1].x-t[1].y&&(t[1]=e[n]),e[n].y>t[2].y&&(t[2]=e[n]),e[n].x+e[n].y>t[3].x+t[3].y&&(t[3]=e[n]),e[n].x>t[4].x&&(t[4]=e[n]),e[n].x-e[n].y>t[5].x-t[5].y&&(t[5]=e[n]),e[n].y<t[6].y&&(t[6]=e[n]),e[n].x+e[n].y<t[7].x+t[7].y&&(t[7]=e[n]);return t}toCoordinateArray(e){const t=new Array(e.size()).fill(null);for(let n=0;n<e.size();n++){const s=e.get(n);t[n]=s}return t}grahamScan(e){let t=null;const n=new x4;n.push(e[0]),n.push(e[1]),n.push(e[2]);for(let s=3;s<e.length;s++){for(t=n.pop();!n.empty()&&Pe.index(n.peek(),t,e[s])>0;)t=n.pop();n.push(t),n.push(e[s])}return n.push(e[0]),n}preSort(e){let t=null;for(let n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y===e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return rc.sort(e,1,e.length,new jf(e[0])),e}computeOctRing(e){const t=this.computeOctPts(e),n=new $r;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}}class jf{constructor(){jf.constructor_.apply(this,arguments)}static constructor_(){this._origin=null,this._origin=arguments[0]}static polarCompare(e,t,n){const s=t.x-e.x,r=t.y-e.y,o=n.x-e.x,a=n.y-e.y,l=Pe.index(e,t,n);if(l===Pe.COUNTERCLOCKWISE)return 1;if(l===Pe.CLOCKWISE)return-1;const c=s*s+r*r,h=o*o+a*a;return c<h?-1:c>h?1:0}compare(e,t){return jf.polarCompare(this._origin,e,t)}get interfaces_(){return[il]}}Zd.RadialComparator=jf;class qy{constructor(){qy.constructor_.apply(this,arguments)}static constructor_(){this._li=new ji,this._ptLocator=new Sh,this._arg=null,this._nodes=new qd(new FP),this._im=null,this._isolatedEdges=new se,this._invalidPoint=null,this._arg=arguments[0]}insertEdgeEnds(e){for(let t=e.iterator();t.hasNext();){const n=t.next();this._nodes.add(n)}}computeProperIntersectionIM(e,t){const n=this._arg[0].getGeometry().getDimension(),s=this._arg[1].getGeometry().getDimension(),r=e.hasProperIntersection(),o=e.hasProperInteriorIntersection();2===n&&2===s?r&&t.setAtLeast("212101212"):2===n&&1===s?(r&&t.setAtLeast("FFF0FFFF2"),o&&t.setAtLeast("1FFFFF1FF")):1===n&&2===s?(r&&t.setAtLeast("F0FFFFFF2"),o&&t.setAtLeast("1F1FFFFFF")):1===n&&1===s&&o&&t.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(e,t){for(let n=this._arg[e].getEdgeIterator();n.hasNext();){const s=n.next();s.isIsolated()&&(this.labelIsolatedEdge(s,t,this._arg[t].getGeometry()),this._isolatedEdges.add(s))}}labelIsolatedEdge(e,t,n){if(n.getDimension()>0){const s=this._ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(t,s)}else e.getLabel().setAllLocations(t,S.EXTERIOR)}computeIM(){const e=new Ot;if(e.set(S.EXTERIOR,S.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);const t=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);const n=new DP,s=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(s);const r=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}labelNodeEdges(){for(let e=this._nodes.iterator();e.hasNext();)e.next().getEdges().computeLabelling(this._arg)}copyNodesAndLabels(e){for(let t=this._arg[e].getNodeIterator();t.hasNext();){const n=t.next();this._nodes.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}}labelIntersectionNodes(e){for(let t=this._arg[e].getEdgeIterator();t.hasNext();){const n=t.next(),s=n.getLabel().getLocation(e);for(let r=n.getEdgeIntersectionList().iterator();r.hasNext();){const o=r.next(),a=this._nodes.find(o.coord);a.getLabel().isNull(e)&&(s===S.BOUNDARY?a.setLabelBoundary(e):a.setLabel(e,S.INTERIOR))}}}labelIsolatedNode(e,t){const n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}computeIntersectionNodes(e){for(let t=this._arg[e].getEdgeIterator();t.hasNext();){const n=t.next(),s=n.getLabel().getLocation(e);for(let r=n.getEdgeIntersectionList().iterator();r.hasNext();){const o=r.next(),a=this._nodes.addNode(o.coord);s===S.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,S.INTERIOR)}}}labelIsolatedNodes(){for(let e=this._nodes.iterator();e.hasNext();){const t=e.next(),n=t.getLabel();Oe.isTrue(n.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}updateIM(e){for(let t=this._isolatedEdges.iterator();t.hasNext();)t.next().updateIM(e);for(let t=this._nodes.iterator();t.hasNext();){const n=t.next();n.updateIM(e),n.updateIMFromEdges(e)}}computeDisjointIM(e){const t=this._arg[0].getGeometry();t.isEmpty()||(e.set(S.INTERIOR,S.EXTERIOR,t.getDimension()),e.set(S.BOUNDARY,S.EXTERIOR,t.getBoundaryDimension()));const n=this._arg[1].getGeometry();n.isEmpty()||(e.set(S.EXTERIOR,S.INTERIOR,n.getDimension()),e.set(S.EXTERIOR,S.BOUNDARY,n.getBoundaryDimension()))}}class Gy{constructor(){Gy.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectEnv=arguments[0].getEnvelopeInternal()}static contains(e,t){return new Gy(e).contains(t)}isContainedInBoundary(e){if(e instanceof kn)return!1;if(e instanceof Un)return this.isPointContainedInBoundary(e);if(e instanceof At)return this.isLineStringContainedInBoundary(e);for(let t=0;t<e.getNumGeometries();t++){const n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0}isLineSegmentContainedInBoundary(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(e){const t=e.getCoordinateSequence(),n=new j,s=new j;for(let r=0;r<t.size()-1;r++)if(t.getCoordinate(r,n),t.getCoordinate(r+1,s),!this.isLineSegmentContainedInBoundary(n,s))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof Un)return this.isPointContainedInBoundary(arguments[0].getCoordinate());if(arguments[0]instanceof j){const e=arguments[0];return e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX()||e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()}}contains(e){return!(!this._rectEnv.contains(e.getEnvelopeInternal())||this.isContainedInBoundary(e))}}class R4{constructor(){R4.constructor_.apply(this,arguments)}static constructor_(){this._li=new ji,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;const e=arguments[0];this._rectEnv=e,this._diagUp0=new j(e.getMinX(),e.getMinY()),this._diagUp1=new j(e.getMaxX(),e.getMaxY()),this._diagDown0=new j(e.getMinX(),e.getMaxY()),this._diagDown1=new j(e.getMaxX(),e.getMinY())}intersects(e,t){const n=new mt(e,t);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(e)||this._rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){const r=e;e=t,t=r}let s=!1;return t.y>e.y&&(s=!0),s?this._li.computeIntersection(e,t,this._diagDown0,this._diagDown1):this._li.computeIntersection(e,t,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class qf{constructor(){qf.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(e){for(let t=0;t<e.getNumGeometries()&&!this._isDone;t++){const n=e.getGeometryN(t);if(n instanceof qt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}}class Gf{constructor(){Gf.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;const e=arguments[0];this._rectangle=e,this._rectEnv=e.getEnvelopeInternal()}static intersects(e,t){return new Gf(e).intersects(t)}intersects(e){if(!this._rectEnv.intersects(e.getEnvelopeInternal()))return!1;const t=new A4(this._rectEnv);if(t.applyTo(e),t.intersects())return!0;const n=new L4(this._rectangle);if(n.applyTo(e),n.containsPoint())return!0;const s=new P4(this._rectangle);return s.applyTo(e),!!s.intersects()}}class A4 extends qf{constructor(){super(),A4.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1,this._rectEnv=arguments[0]}intersects(){return this._intersects}visit(e){const t=e.getEnvelopeInternal();return this._rectEnv.intersects(t)?this._rectEnv.contains(t)||t.getMinX()>=this._rectEnv.getMinX()&&t.getMaxX()<=this._rectEnv.getMaxX()||t.getMinY()>=this._rectEnv.getMinY()&&t.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}isDone(){return!0===this._intersects}}class L4 extends qf{constructor(){super(),L4.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;const e=arguments[0];this._rectSeq=e.getExteriorRing().getCoordinateSequence(),this._rectEnv=e.getEnvelopeInternal()}visit(e){if(!(e instanceof kn))return null;const t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;const n=new j;for(let s=0;s<4;s++)if(this._rectSeq.getCoordinate(s,n),t.contains(n)&&Zr.containsPointInPolygon(n,e))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}isDone(){return!0===this._containsPoint}}class P4 extends qf{constructor(){super(),P4.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new j,this._p1=new j,this._rectEnv=arguments[0].getEnvelopeInternal(),this._rectIntersector=new R4(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(e){const t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;const n=Ss.getLines(e);this.checkIntersectionWithLineStrings(n)}checkIntersectionWithLineStrings(e){for(let t=e.iterator();t.hasNext();){const n=t.next();if(this.checkIntersectionWithSegments(n),this._hasIntersection)return null}}checkIntersectionWithSegments(e){const t=e.getCoordinateSequence();for(let n=1;n<t.size();n++)if(t.getCoordinate(n-1,this._p0),t.getCoordinate(n,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class xn extends lc{constructor(){super(),xn.constructor_.apply(this,arguments)}static constructor_(){this._relate=null,2===arguments.length?(lc.constructor_.call(this,arguments[0],arguments[1]),this._relate=new qy(this._arg)):3===arguments.length&&(lc.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._relate=new qy(this._arg))}static equalsTopo(e,t){return!!e.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&xn.relate(e,t).isEquals(e.getDimension(),t.getDimension())}static relate(){return 2===arguments.length?new xn(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new xn(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}static overlaps(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new xn(e,t).getIntersectionMatrix().isOverlaps(e.getDimension(),t.getDimension())}static disjoint(e,t){return!xn.intersects(e,t)}static covers(e,t){return!(2===t.getDimension()&&e.getDimension()<2||1===t.getDimension()&&e.getDimension()<1&&t.getLength()>0||!e.getEnvelopeInternal().covers(t.getEnvelopeInternal()))&&(!!e.isRectangle()||new xn(e,t).getIntersectionMatrix().isCovers())}static intersects(e,t){if(!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal()))return!1;if(e.isRectangle())return Gf.intersects(e,t);if(t.isRectangle())return Gf.intersects(t,e);if(e.isGeometryCollection()||t.isGeometryCollection()){for(let s=0;s<e.getNumGeometries();s++)for(let r=0;r<t.getNumGeometries();r++)if(xn.intersects(e.getGeometryN(s),t.getGeometryN(r)))return!0;return!1}return new xn(e,t).getIntersectionMatrix().isIntersects()}static touches(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new xn(e,t).getIntersectionMatrix().isTouches(e.getDimension(),t.getDimension())}static crosses(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new xn(e,t).getIntersectionMatrix().isCrosses(e.getDimension(),t.getDimension())}static contains(e,t){return!(2===t.getDimension()&&e.getDimension()<2||1===t.getDimension()&&e.getDimension()<1&&t.getLength()>0||!e.getEnvelopeInternal().contains(t.getEnvelopeInternal()))&&(e.isRectangle()?Gy.contains(e,t):new xn(e,t).getIntersectionMatrix().isContains())}getIntersectionMatrix(){return this._relate.computeIM()}}class Uy{constructor(){Uy.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=Ce.MAX_VALUE,this._interiorPoint=null;const e=arguments[0];this._centroid=hc.getCentroid(e),this.add(e)}static getInteriorPoint(e){return new Uy(e).getInteriorPoint()}add(){if(arguments[0]instanceof ge){const e=arguments[0];if(e instanceof Un)this.add(e.getCoordinate());else if(e instanceof qt){const t=e;for(let n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}}else if(arguments[0]instanceof j){const e=arguments[0],t=e.distance(this._centroid);t<this._minDistance&&(this._interiorPoint=new j(e),this._minDistance=t)}}getInteriorPoint(){return this._interiorPoint}}let cl=(()=>{class i{constructor(){i.constructor_.apply(this,arguments)}static constructor_(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)i.constructor_.call(this,arguments[0],i.INSIDE_AREA,arguments[1]);else if(3===arguments.length){const n=arguments[1],s=arguments[2];this._component=arguments[0],this._segIndex=n,this._pt=s}}getSegmentIndex(){return this._segIndex}getCoordinate(){return this._pt}isInsideArea(){return this._segIndex===i.INSIDE_AREA}toString(){return this._component.getGeometryType()+"["+this._segIndex+"]-"+Oo.toPoint(this._pt)}getGeometryComponent(){return this._component}}return i.INSIDE_AREA=-1,i})();class Qd{constructor(){Qd.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._pts=arguments[0]}static getPoints(){if(1===arguments.length){const e=arguments[0];return e instanceof Un?pa.singletonList(e):Qd.getPoints(e,new se)}if(2===arguments.length){const e=arguments[0],t=arguments[1];return e instanceof Un?t.add(e):e instanceof qt&&e.apply(new Qd(t)),t}}filter(e){e instanceof Un&&this._pts.add(e)}get interfaces_(){return[sc]}}class Wy{constructor(){Wy.constructor_.apply(this,arguments)}static constructor_(){this._locations=null,this._locations=arguments[0]}static getLocations(e){const t=new se;return e.apply(new Wy(t)),t}filter(e){if(e.isEmpty())return null;(e instanceof Un||e instanceof At||e instanceof kn)&&this._locations.add(new cl(e,0,e.getCoordinate()))}get interfaces_(){return[sc]}}class uc{constructor(){uc.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sh,this._minDistanceLocation=null,this._minDistance=Ce.MAX_VALUE,2===arguments.length)uc.constructor_.call(this,arguments[0],arguments[1],0);else if(3===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t,this._terminateDistance=n}}static distance(e,t){return new uc(e,t).distance()}static isWithinDistance(e,t,n){return!(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>n)&&new uc(e,t,n).distance()<=n}static nearestPoints(e,t){return new uc(e,t).nearestPoints()}computeContainmentDistance(){if(0===arguments.length){const e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1],n=this._geom[e];if(n.getDimension()<2)return null;const s=1-e,r=Kd.getPolygons(n);if(r.size()>0){const o=Wy.getLocations(this._geom[s]);if(this.computeContainmentDistance(o,r,t),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[s]=t[0],this._minDistanceLocation[e]=t[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&De(arguments[0],kr)&&De(arguments[1],kr)){const e=arguments[0],t=arguments[1],n=arguments[2];for(let s=0;s<e.size();s++){const r=e.get(s);for(let o=0;o<t.size();o++)if(this.computeContainmentDistance(r,t.get(o),n),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof cl&&arguments[1]instanceof kn){const e=arguments[0],t=arguments[1],n=arguments[2],s=e.getCoordinate();if(S.EXTERIOR!==this._ptLocator.locate(s,t))return this._minDistance=0,n[0]=e,n[1]=new cl(t,s),null}}computeMinDistanceLinesPoints(e,t,n){for(let s=0;s<e.size();s++){const r=e.get(s);for(let o=0;o<t.size();o++){const a=t.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}}}computeFacetDistance(){const e=new Array(2).fill(null),t=Ss.getLines(this._geom[0]),n=Ss.getLines(this._geom[1]),s=Qd.getPoints(this._geom[0]),r=Qd.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,r,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,s,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(s,r,e),this.updateMinDistance(e,!1)}nearestLocations(){return this.computeMinDistance(),this._minDistanceLocation}updateMinDistance(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])}nearestPoints(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]}computeMinDistance(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof Un){const e=arguments[0],t=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this._minDistance)return null;const s=e.getCoordinates(),r=t.getCoordinate();for(let o=0;o<s.length-1;o++){const a=di.pointToSegment(r,s[o],s[o+1]);if(a<this._minDistance){this._minDistance=a;const c=new tn(s[o],s[o+1]).closestPoint(r);n[0]=new cl(e,o,c),n[1]=new cl(t,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof At){const e=arguments[0],t=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this._minDistance)return null;const s=e.getCoordinates(),r=t.getCoordinates();for(let o=0;o<s.length-1;o++){const a=new mt(s[o],s[o+1]);if(!(a.distance(t.getEnvelopeInternal())>this._minDistance))for(let l=0;l<r.length-1;l++){const c=new mt(r[l],r[l+1]);if(a.distance(c)>this._minDistance)continue;const h=di.segmentToSegment(s[o],s[o+1],r[l],r[l+1]);if(h<this._minDistance){this._minDistance=h;const u=new tn(s[o],s[o+1]),d=new tn(r[l],r[l+1]),p=u.closestPoints(d);n[0]=new cl(e,o,p[0]),n[1]=new cl(t,l,p[1])}if(this._minDistance<=this._terminateDistance)return null}}}}computeMinDistancePoints(e,t,n){for(let s=0;s<e.size();s++){const r=e.get(s);for(let o=0;o<t.size();o++){const a=t.get(o),l=r.getCoordinate().distance(a.getCoordinate());if(l<this._minDistance&&(this._minDistance=l,n[0]=new cl(r,0,r.getCoordinate()),n[1]=new cl(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}}distance(){if(null===this._geom[0]||null===this._geom[1])throw new at("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}computeMinDistanceLines(e,t,n){for(let s=0;s<e.size();s++){const r=e.get(s);for(let o=0;o<t.size();o++){const a=t.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}}}}class Ah{constructor(){Ah.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length)Ah.constructor_.call(this,arguments[0],Ri.MOD2_BOUNDARY_RULE);else if(2===arguments.length){const e=arguments[0],t=arguments[1];this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}}static getBoundary(){return 1===arguments.length?new Ah(arguments[0]).getBoundary():2===arguments.length?new Ah(arguments[0],arguments[1]).getBoundary():void 0}boundaryMultiLineString(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();const t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)}getBoundary(){return this._geom instanceof At?this.boundaryLineString(this._geom):this._geom instanceof Kr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(e){const t=new se;this._endpointMap=new No;for(let n=0;n<e.getNumGeometries();n++){const s=e.getGeometryN(n);0!==s.getNumPoints()&&(this.addEndpoint(s.getCoordinateN(0)),this.addEndpoint(s.getCoordinateN(s.getNumPoints()-1)))}for(let n=this._endpointMap.entrySet().iterator();n.hasNext();){const s=n.next(),o=s.getValue().count;this._bnRule.isInBoundary(o)&&t.add(s.getKey())}return Pt.toCoordinateArray(t)}addEndpoint(e){let t=this._endpointMap.get(e);null===t&&(t=new O4,this._endpointMap.put(e,t)),t.count++}}class O4{constructor(){O4.constructor_.apply(this,arguments)}static constructor_(){this.count=null}}At.prototype.getBoundary=function(){return Ah.getBoundary(this)},Kr.prototype.getBoundary=function(){return Ah.getBoundary(this)},ge.prototype.equalsTopo=function(i){return xn.equalsTopo(this,i)},ge.prototype.equals=function(i){return null!==i&&xn.equalsTopo(this,i)},ge.prototype.union=function(){return 0===arguments.length?Rh.union(this):1===arguments.length?GP.union(this,arguments[0]):void 0},ge.prototype.isValid=function(){return zo.isValid(this)},ge.prototype.intersection=function(i){return gn.intersection(this,i)},ge.prototype.covers=function(i){return xn.covers(this,i)},ge.prototype.coveredBy=function(i){return xn.covers(i,this)},ge.prototype.touches=function(i){return xn.touches(this,i)},ge.prototype.intersects=function(i){return xn.intersects(this,i)},ge.prototype.within=function(i){return xn.contains(i,this)},ge.prototype.overlaps=function(i){return xn.overlaps(this,i)},ge.prototype.disjoint=function(i){return xn.disjoint(this,i)},ge.prototype.crosses=function(i){return xn.crosses(this,i)},ge.prototype.buffer=function(){return 1===arguments.length?Ai.bufferOp(this,arguments[0]):2===arguments.length?Ai.bufferOp(this,arguments[0],arguments[1]):3===arguments.length?Ai.bufferOp(this,arguments[0],arguments[1],arguments[2]):void 0},ge.prototype.convexHull=function(){return new Zd(this).getConvexHull()},ge.prototype.relate=function(){if(1===arguments.length)return xn.relate(this,arguments[0]);if(2===arguments.length){const e=arguments[1];return xn.relate(this,arguments[0]).matches(e)}},ge.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();const i=hc.getCentroid(this);return this.createPointFromInternalCoord(i,this)},ge.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();let i=null;const e=this.getDimension();i=0===e?new Uy(this):1===e?new By(this):new al(this);const t=i.getInteriorPoint();return this.createPointFromInternalCoord(t,this)},ge.prototype.symDifference=function(i){return gn.symDifference(this,i)},ge.prototype.createPointFromInternalCoord=function(i,e){return e.getPrecisionModel().makePrecise(i),e.getFactory().createPoint(i)},ge.prototype.toText=function(){return(new Oo).write(this)},ge.prototype.toString=function(){return this.toText()},ge.prototype.contains=function(i){return xn.contains(this,i)},ge.prototype.difference=function(i){return gn.difference(this,i)},ge.prototype.isSimple=function(){return new Xd(this).isSimple()},ge.prototype.isWithinDistance=function(i,e){return!(this.getEnvelopeInternal().distance(i.getEnvelopeInternal())>e)&&uc.isWithinDistance(this,i,e)},ge.prototype.distance=function(i){return uc.distance(this,i)};const tfe=class extends qr{constructor(e){e=e||{},super();var n,t=this.input=e.input;t||(t=this.input=document.createElement("input"),e.type&&t.setAttribute("type",e.type),void 0!==e.min&&t.setAttribute("min",e.min),void 0!==e.max&&t.setAttribute("max",e.max),void 0!==e.step&&t.setAttribute("step",e.step),e.parent&&e.parent.appendChild(t)),e.disabled&&(t.disabled=!0),void 0!==e.checked&&(t.checked=!!e.checked),void 0!==e.val&&(t.value=e.val),e.hidden&&t.classList.add("ol-input-hidden"),t.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),t.addEventListener("focusout",function(){this.element&&(n&&clearTimeout(n),n=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,t){var n=function(s){this.moving=!0,this.element.classList.add("ol-moving");var r=function(o){"pointerup"===o.type&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),o.target===e&&t(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),s.stopPropagation(),s.preventDefault()}.bind(this);e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1)}setValue(e){void 0!==e&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},N4=class extends tfe{constructor(e){super(e=e||{});var t=this.element=document.createElement("label");e.html instanceof Element?t.appendChild(e.html):void 0!==e.html&&(t.innerHTML=e.html),t.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(document.createElement("span")),e.after&&t.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},sfe=class extends N4{constructor(e){super(e=e||{}),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},ofe=class extends N4{constructor(e){super(e=e||{}),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}};var yt={create:function(i,e){var t;if(e=e||{},"TEXT"===i)t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else for(var n in t=document.createElement(i.toLowerCase()),/button/i.test(i)&&t.setAttribute("type","button"),e)switch(n){case"className":e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break;case"text":t.innerText=e.text;break;case"html":e.html instanceof Element?t.appendChild(e.html):void 0!==e.html&&(t.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(t);break;case"options":if(/select/i.test(i))for(var s in e.options)yt.create("OPTION",{html:s,value:e.options[s],parent:t});break;case"style":yt.setStyle(t,e.style);break;case"change":case"click":yt.addListener(t,n,e[n]);break;case"on":for(var r in e.on)yt.addListener(t,r,e.on[r]);break;case"checked":t.checked=!!e.checked;break;default:t.setAttribute(n,e[n])}return t},createSwitch:function(i){var e=yt.create("INPUT",{type:"checkbox",on:i.on,click:i.click,change:i.change,parent:i.parent}),t=Object.assign({input:e},i||{});return new sfe(t),e},createCheck:function(i){var e=yt.create("INPUT",{name:i.name,type:"radio"===i.type?"radio":"checkbox",on:i.on,parent:i.parent}),t=Object.assign({input:e},i||{});return"radio"===i.type?new ofe(t):new N4(t),e},setHTML:function(i,e){e instanceof Element?i.appendChild(e):void 0!==e&&(i.innerHTML=e)},appendText:function(i,e){i.appendChild(document.createTextNode(e||""))},addListener:function(i,e,t,n){"string"==typeof e&&(e=e.split(" ")),e.forEach(function(s){i.addEventListener(s,t,n)})},removeListener:function(i,e,t){"string"==typeof e&&(e=e.split(" ")),e.forEach(function(n){i.removeEventListener(n,t)})},show:function(i){i.style.display=""},hide:function(i){i.style.display="none"},hidden:function(i){return"none"===yt.getStyle(i,"display")},toggle:function(i){i.style.display="none"===i.style.display?"":"none"},setStyle:function(i,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":i.style[t]="number"==typeof e[t]?e[t]+"px":e[t];break;default:i.style[t]=e[t]}},getStyle:function(i,e){var t,s,r,o,n=(i.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=n.getComputedStyle(i,null).getPropertyValue(e);else if(i.currentStyle&&(e=e.replace(/-(\w)/g,function(s,r){return r.toUpperCase()}),/^\d+(em|pt|%|ex)?$/i.test(t=i.currentStyle[e])))return s=t,r=i.style.left,o=i.runtimeStyle.left,i.runtimeStyle.left=i.currentStyle.left,i.style.left=s||0,s=i.style.pixelLeft+"px",i.style.left=r,i.runtimeStyle.left=o,s;return/px$/.test(t)?parseInt(t):t},outerHeight:function(i){return i.offsetHeight+yt.getStyle(i,"marginBottom")},outerWidth:function(i){return i.offsetWidth+yt.getStyle(i,"marginLeft")},offsetRect:function(i){var e=i.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(i){var e={left:0,top:0},t=function(n){if(!n)return e;if("absolute"===yt.getStyle(n,"position")&&"none"!==yt.getStyle(n,"transform")){var s=n.getBoundingClientRect();return e.left+=s.left,e.top+=s.top,e}return t(n.offsetParent)};return t(i.offsetParent)},positionRect:function(i,e){var t=0,n=0,s=function(r){if(r)return t+=r.offsetLeft,n+=r.offsetTop,s(r.offsetParent);var o={top:i.offsetTop+n,left:i.offsetLeft+t};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+i.offsetHeight,o.right=o.top+i.offsetWidth,o};return s(i.offsetParent)},scrollDiv:function(i,e){var s,h,u,_,v,t=!1,n=0,r=0,o="function"==typeof(e=e||{}).onmove?e.onmove:function(){},a=e.vertical?"screenY":"screenX",l=e.vertical?"scrollTop":"scrollLeft",c=!1,d=0,p=function(){v&&(d++,setTimeout(f))},f=function(){if(v){if(--d)return;var b=i.clientHeight,D=i.scrollHeight;v.style.height=100*(h=b/D)+"%",v.style.top=i.scrollTop/D*100+"%",_.style.height=b+"px",b>D-.5?_.classList.add("ol-100pc"):_.classList.remove("ol-100pc")}},g=function(b){b.target.classList.contains("ol-noscroll")||(c=!1,t=b[a],r=new Date,i.classList.add("ol-move"),b.preventDefault(),window.addEventListener("pointermove",m),yt.addListener(window,["pointerup","pointercancel"],w))},m=function(b){if(!1!==t){var D=(u?-1/h:1)*(t-b[a]);c=c||Math.round(D),i[l]+=D,(s=new Date)-r&&(n=(n+D/(s-r))/2),t=b[a],r=s,D&&o(!0)}else c=!0},y=function(b){var D=b>0?Math.min(100,b/2):Math.max(-100,b/2);b-=D,i[l]+=D,-1<b&&b<1?(c?setTimeout(function(){i.classList.remove("ol-move")}):i.classList.remove("ol-move"),c=!1,o(!1)):setTimeout(function(){y(b)},40)};if(e.vertical&&e.minibar){var k=function(b){i.removeEventListener("pointermove",k),i.parentNode.classList.add("ol-miniscroll"),v=yt.create("DIV"),_=yt.create("DIV",{className:"ol-scroll",html:v}),i.parentNode.insertBefore(_,i),v.addEventListener("pointerdown",function(D){u=!0,g(D)}),e.mousewheel&&(yt.addListener(_,["mousewheel","DOMMouseScroll","onmousewheel"],function(D){I(D)}),yt.addListener(v,["mousewheel","DOMMouseScroll","onmousewheel"],function(D){I(D)})),i.parentNode.addEventListener("pointerenter",p),window.addEventListener("resize",p),!1!==b&&p()};i.parentNode?k(!1):i.addEventListener("pointermove",k),i.addEventListener("scroll",function(){p()})}i.style["touch-action"]="none",i.style.overflow="hidden",i.classList.add("ol-scrolldiv"),yt.addListener(i,["pointerdown"],function(b){u=!1,g(b)}),i.addEventListener("click",function(b){i.classList.contains("ol-move")&&(b.preventDefault(),b.stopPropagation())},!0);var w=function(b){(r=new Date-r)>100||u?n=0:r>0&&(n=((n||0)+(t-b[a])/r)/2),y(!1===e.animate?0:200*n),t=!1,n=0,r=0,i.classList.contains("ol-move")?i.classList.remove("ol-hasClick"):(i.classList.add("ol-hasClick"),setTimeout(function(){i.classList.remove("ol-hasClick")},500)),u=!1,window.removeEventListener("pointermove",m),yt.removeListener(window,["pointerup","pointercancel"],w)},I=function(b){var D=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));return i.classList.add("ol-move"),i[l]-=30*D,i.classList.remove("ol-move"),!1};return e.mousewheel&&yt.addListener(i,["mousewheel","DOMMouseScroll","onmousewheel"],I),{refresh:p}},dispatchEvent:function(i,e){var t;try{t=new CustomEvent(i)}catch{(t=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,{})}e.dispatchEvent(t)},setCursor:function(i,e){i instanceof Q9&&(i=i.getTargetElement()),!("ontouchstart"in window)&&i instanceof Element&&(i.style.cursor=e)}};const dc=yt,lfe=class extends Zp{constructor(e){e=e||{};var t=document.createElement("div");t.className=(e.className||"")+" ol-button ol-unselectable ol-control",super({element:t,target:e.target});var n=this,s=this.button_=document.createElement(/ol-text-button/.test(e.className)?"div":"button");for(var o in s.setAttribute("id",e.id?e.id:"ol-button-"+ft(this)),this.button_.className=e.classButton||"",s.type="button",e.title&&(s.title=e.title),e.name&&(s.name=e.name),e.html instanceof Element?s.appendChild(e.html):s.innerHTML=e.html||"",s.addEventListener("click",function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),e.handleClick&&e.handleClick.call(n,a)}),t.appendChild(s),!e.title&&s.firstElementChild&&(s.title=s.firstElementChild.title),e.title&&this.set("title",e.title),e.title&&this.set("title",e.title),e.name&&this.set("name",e.name),e.attributes||{})this.button_.setAttribute(o,e.attributes[o])}setVisible(e){e?dc.show(this.element):dc.hide(this.element)}getDisable(){var e=this.element.querySelector("button");return e&&e.disabled}setDisable(e){this.getDisable()!=e&&(this.element.querySelector("button").disabled=e)}setTitle(e){this.button_.setAttribute("title",e)}setHtml(e){dc.setHTML(this.button_,e)}getButtonElement(){return this.button_}},Er=class extends lfe{constructor(e){(e=e||{}).toggleFn&&(e.onToggle=e.toggleFn),e.handleClick=function(){t.toggle(),e.onToggle&&e.onToggle.call(t,t.getActive())},e.className=(e.className||"")+" ol-toggle",super(e);var t=this;this.interaction_=e.interaction,this.interaction_&&(this.interaction_.setActive(e.active),this.interaction_.on("change:active",function(){t.setActive(t.interaction_.getActive())})),this.set("title",e.title),this.set("autoActivate",e.autoActivate),e.bar&&this.setSubBar(e.bar),this.setActive(e.active),this.setDisable(e.disable)}setMap(e){!e&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),super.setMap(e),e&&(this.interaction_&&e.addInteraction(this.interaction_),this.subbar_&&e.addControl(this.subbar_))}getSubBar(){return this.subbar_}setSubBar(e){var t=this.getMap();t&&this.subbar_&&t.removeControl(this.subbar_),this.subbar_=e,e&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),t&&t.addControl(this.subbar_),e.element.id&&(this.getButtonElement().setAttribute("aria-controls",e.element.id),e.element.setAttribute("aria-labelledby",this.getButtonElement().id),this.on("change:active",function(n){this.getButtonElement().setAttribute("aria-expanded",!!n.active)}.bind(this))))}getDisable(){var e=this.element.querySelector("button");return e&&e.disabled}setDisable(e){this.getDisable()!=e&&(this.element.querySelector("button").disabled=e,e&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!e,disable:e}))}getActive(){return this.element.classList.contains("ol-active")}toggle(){this.getActive()?this.setActive(!1):this.setActive(!0)}setActive(e){this.interaction_&&this.interaction_.setActive(e),this.subbar_&&this.subbar_.setActive(e),this.getActive()!==e&&(e?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.button_.setAttribute("aria-pressed",e),this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e}))}setInteraction(e){this.interaction_=e}getInteraction(){return this.interaction_}},F4=class extends Zp{constructor(e){e=e||{};var t=document.createElement("div");if(t.classList.add("ol-unselectable","ol-control","ol-bar"),e.className){var n=e.className.split(" ").filter(function(o){return o.length>0});t.classList.add.apply(t.classList,n)}if(e.group&&t.classList.add("ol-group"),super({element:t,target:e.target}),this.element.setAttribute("id",e.id?e.id:"ol-bar-"+ft(this)),this.set("toggleOne",e.toggleOne),this.set("autoDeactivate",e.autoDeactivate),this.controls_=[],e.controls instanceof Array)for(var s=0;s<e.controls.length;s++)this.addControl(e.controls[s]);for(var r in e.attributes||{})this.element.setAttribute(r,e.attributes[r])}setVisible(e){this.element.style.display=e?"":"none"}getVisible(){return"none"!=this.element.style.display}setMap(e){super.setMap(e);for(var t=0;t<this.controls_.length;t++)this.controls_[t].setMap(e)}getControls(){return this.controls_}setPosition(e){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),e=e.split("-");for(var t=0;t<e.length;t++)switch(e[t]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+e[t])}}addControl(e){this.controls_.push(e),e.setTarget(this.element),this.getMap()&&this.getMap().addControl(e),e._activateBar&&e.un("change:active",e._activateBar),e._activateBar=function(t){this.onActivateControl_(t,e)}.bind(this),e.on("change:active",e._activateBar),e.getActive&&this.onActivateControl_({target:e,active:e.getActive()},e)}removeControl(e){const t=this.controls_.indexOf(e);t>-1&&(this.controls_.splice(t,1),this.getMap()&&this.getMap().removeControl(e),e._activateBar&&e.un("change:active",e._activateBar),delete e._activateBar)}deactivateControls(e){for(var t=0;t<this.controls_.length;t++)this.controls_[t]!==e&&this.controls_[t].setActive&&this.controls_[t].setActive(!1)}getActiveControls(){for(var n,e=[],t=0;n=this.controls_[t];t++)n.getActive&&n.getActive()&&e.push(n);return e}setActive(e){if(!e&&this.get("autoDeactivate")&&this.deactivateControls(),e)for(var s,t=this.getControls(),n=0;s=t[n];n++)s.get("autoActivate")&&s.setActive(!0)}onActivateControl_(e,t){if(this.get("toggleOne"))if(e.active){var n;for(n=0;n<this.controls_.length&&this.controls_[n]!==t;n++);if(n==this.controls_.length)return;this.deactivateControls(this.controls_[n])}else if(!this.getActiveControls().length)for(var r,s=0;r=this.controls_[s];s++)if(r.get("autoActivate")){r.setActive(!0);break}this.dispatchEvent(e.type?{type:"control:active",control:t,active:e.active}:{type:"control:add",control:t,active:e.active})}getControlsByName(e){return this.getControls().filter(function(n){return n.get("name")===e})}};var UP=class extends ql{constructor(e){e=e||{},super({handleDownEvent:function(n){return t.handleDownEvent_(n)},handleDragEvent:function(n){return this.handleDragEvent_(n)},handleMoveEvent:function(n){return this.handleMoveEvent_(n)},handleUpEvent:function(n){return this.handleUpEvent_(n)}});var t=this;this.selection_=new Hs,this.handles_=new Hs,this.overlayLayer_=new lh({source:new rh({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(n){return t.style[(n.get("handle")||"default")+(n.get("constraint")||"")+(n.get("option")||"")]},updateWhileAnimating:!0,updateWhileInteracting:!0}),this.features_=e.features,"function"==typeof e.filter&&(this._filter=e.filter),this.layers_=e.layers?e.layers instanceof Array?e.layers:[e.layers]:null,this._handleEvent=e.condition||function(){return!0},this.addFn_=e.addCondition||function(){return!1},this.setPointRadius(e.pointRadius),this.set("translateFeature",!1!==e.translateFeature),this.set("translate",!1!==e.translate),this.set("translateBBox",!0===e.translateBBox),this.set("stretch",!1!==e.stretch),this.set("scale",!1!==e.scale),this.set("rotate",!1!==e.rotate),this.set("keepAspectRatio",e.keepAspectRatio||function(n){return n.originalEvent.shiftKey}),this.set("modifyCenter",e.modifyCenter||function(n){return n.originalEvent.metaKey||n.originalEvent.ctrlKey}),this.set("noFlip",e.noFlip||!1),this.set("selection",!1!==e.selection),this.set("hitTolerance",e.hitTolerance||0),this.set("enableRotatedTransform",e.enableRotatedTransform||!1),this.set("keepRectangle",e.keepRectangle||!1),this.set("buffer",e.buffer||0),this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle(),this.on("change:active",e.select?function(n){this.getActive()?this.setSelection(e.select.getFeatures().getArray()):(e.select.getFeatures().extend(this.selection_),this.selection_.forEach(function(s){e.select.getFeatures().push(s)}),this.select(null))}.bind(this):function(n){this.select(null)}.bind(this))}setMap(e){var t=this.getMap();t&&(t.removeLayer(this.overlayLayer_),this.previousCursor_&&dc.setCursor(t,this.previousCursor_),this.previousCursor_=void 0),super.setMap(e),this.overlayLayer_.setMap(e),null===e&&this.select(null),null!==e&&(this.isTouch=/touch/.test(e.getViewport().className),this.setDefaultStyle())}setActive(e){this.overlayLayer_&&this.overlayLayer_.setVisible(e),super.setActive(e)}setDefaultStyle(e){var t=(e=e||{}).pointStroke||new na({color:[255,0,0,1],width:1}),n=e.stroke||new na({color:[255,0,0,1],width:1,lineDash:[4,4]}),s=e.fill||new ur({color:[255,0,0,.01]}),r=e.pointFill||new ur({color:[255,255,255,.8]}),o=new ff({fill:r,stroke:t,radius:this.isTouch?12:6,displacement:this.isTouch?[24,-24]:[12,-12],points:15});o.setDisplacement||(o.getAnchor()[0]=this.isTouch?-10:-5);var a=new ff({fill:r,stroke:t,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),l=new ff({fill:r,stroke:t,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function c(h,u,d){return[new Ur({image:h,stroke:u,fill:d})]}this.style={default:c(a,n,s),translate:c(a,t,r),rotate:c(o,t,r),rotate0:c(a,t,r),scale:c(a,t,r),scale1:c(a,t,r),scale2:c(a,t,r),scale3:c(a,t,r),scalev:c(l,t,r),scaleh1:c(l,t,r),scalev2:c(l,t,r),scaleh3:c(l,t,r)},this.drawSketch_()}setStyle(e,t){if(t){this.style[e]=t instanceof Array?t:[t];for(var n=0;n<this.style[e].length;n++){var s=this.style[e][n].getImage();s&&("rotate"==e&&(s.getAnchor()[0]=-5),this.isTouch&&s.setScale(1.8));var r=this.style[e][n].getText();r&&("rotate"==e&&r.setOffsetX(this.isTouch?14:7),this.isTouch&&r.setScale(1.8))}this.drawSketch_()}}getFeatureAtPixel_(e){var t=this;return this.getMap().forEachFeatureAtPixel(e,function(n,s){var r=!1;if(!s){if(n===t.bbox_)return!!t.get("translateBBox")&&{feature:n,handle:"translate",constraint:"",option:""};if(t.handles_.forEach(function(a){a===n&&(r=!0)}),r)return{feature:n,handle:n.get("handle"),constraint:n.get("constraint"),option:n.get("option")}}if(!t.get("selection"))return t.selection_.getArray().some(function(a){return n===a})?{feature:n}:null;if(t._filter)return t._filter(n,s)?{feature:n}:null;if(t.layers_){for(var o=0;o<t.layers_.length;o++)if(t.layers_[o]===s)return{feature:n};return null}return t.features_?(t.features_.forEach(function(a){a===n&&(r=!0)}),r?{feature:n}:null):{feature:n}},{hitTolerance:this.get("hitTolerance")})||{}}getGeometryRotateToZero_(e,t){var n=e.getGeometry(),s=this.getMap().getView().getRotation();if(0===s||!this.get("enableRotatedTransform"))return t?n.clone():n;var r=n.clone();return r.rotate(-1*s,this.getMap().getView().getCenter()),r}_isRectangle(e){return!(!this.get("keepRectangle")||"Polygon"!==e.getType())&&5===e.getCoordinates()[0].length}drawSketch_(e){var t,n,s,r=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),this.selection_.getLength()){var l,o=this.getMap().getView().getRotation(),a=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent();r&&(l=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4)).unshift(l[3]),a=Pp(a,this.get("buffer")),this.selection_.forEach(function(g){var m=this.getGeometryRotateToZero_(g).getExtent();Fp(a,m)}.bind(this));var c=1===this.selection_.getLength()?this._pointRadius(this.selection_.item(0)):0;if(c&&!(c instanceof Array)&&(c=[c,c]),!0===e)this.ispt_||(this.overlayLayer_.getSource().addFeature(new Tn({geometry:new ui(this.center_),handle:"rotate0"})),s=nd(a),this.get("enableRotatedTransform")&&0!==o&&s.rotate(o,this.getMap().getView().getCenter()),n=this.bbox_=new Tn(s),this.overlayLayer_.getSource().addFeature(n));else{if(this.ispt_){var h=this.getMap().getPixelFromCoordinate(bo(a));if(h){var u=c&&c[0]||10,d=c&&c[1]||10;a=ys([this.getMap().getCoordinateFromPixel([h[0]-u,h[1]-d]),this.getMap().getCoordinateFromPixel([h[0]+u,h[1]+d])])}}s=r?new Io([l]):nd(a),this.get("enableRotatedTransform")&&0!==o&&s.rotate(o,this.getMap().getView().getCenter()),n=this.bbox_=new Tn(s);var p=[],f=s.getCoordinates()[0];if(!this.ispt_||c){if(p.push(n),!this.iscircle_&&!this.ispt_&&this.get("stretch")&&this.get("scale"))for(t=0;t<f.length-1;t++)n=new Tn({geometry:new ui([(f[t][0]+f[t+1][0])/2,(f[t][1]+f[t+1][1])/2]),handle:"scale",constraint:t%2?"h":"v",option:t}),p.push(n);if(this.get("scale"))for(t=0;t<f.length-1;t++)n=new Tn({geometry:new ui(f[t]),handle:"scale",option:t}),p.push(n);this.get("translate")&&!this.get("translateFeature")&&(n=new Tn({geometry:new ui([(f[0][0]+f[2][0])/2,(f[0][1]+f[2][1])/2]),handle:"translate"}),p.push(n))}!this.iscircle_&&this.get("rotate")&&(n=new Tn({geometry:new ui(f[3]),handle:"rotate"}),p.push(n)),this.overlayLayer_.getSource().addFeatures(p)}}}select(e,t){if(e){if(e.getGeometry&&e.getGeometry()){if(t)this.selection_.push(e);else{var n=this.selection_.getArray().indexOf(e);this.selection_.removeAt(n)}this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:e,features:this.selection_})}}else this.selection_&&(this.selection_.clear(),this.drawSketch_())}setSelection(e){this.selection_.clear(),e.forEach(function(t){this.selection_.push(t)}.bind(this)),this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})}watchFeatures_(){this._featureListeners&&this._featureListeners.forEach(function(e){zA(e)}),this._featureListeners=[],this.selection_.forEach(function(e){this._featureListeners.push(e.on("change",function(){this.isUpdating_||this.drawSketch_()}.bind(this)))}.bind(this))}handleDownEvent_(e){if(this._handleEvent(e,this.selection_)){var t=this.getFeatureAtPixel_(e.pixel),n=t.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(n)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(t.handle="translate"),t.handle){this.mode_=t.handle,this.opt_=t.option,this.constraint_=t.constraint;var s=this.getMap().getView().getRotation();this.coordinate_=n.get("handle")?n.getGeometry().getCoordinates():e.coordinate,this.pixel_=this.getMap().getCoordinateFromPixel(this.coordinate_),this.geoms_=[],this.rotatedGeoms_=[];var r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0];this.hasChanged_=!1;for(var l,a=0;l=this.selection_.item(a);a++)if(this.geoms_.push(l.getGeometry().clone()),r=Fp(r,l.getGeometry().getExtent()),this.get("enableRotatedTransform")&&0!==s){var c=this.getGeometryRotateToZero_(l,!0);this.rotatedGeoms_.push(c),o=Fp(o,c.getExtent())}if(this.extent_=nd(r).getCoordinates()[0],this.get("enableRotatedTransform")&&0!==s&&(this.rotatedExtent_=nd(o).getCoordinates()[0]),"rotate"===this.mode_){this.center_=this.getCenter()||bo(r);var h=e.map.getTargetElement();dc.setCursor(h,this.Cursors.rotate0),this.previousCursor_=h.style.cursor}else this.center_=bo(r);return this.angle_=Math.atan2(this.center_[1]-e.coordinate[1],this.center_[0]-e.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!0}if(this.get("selection")){if(n){this.addFn_(e)||this.selection_.clear();var u=this.selection_.getArray().indexOf(n);u<0?this.selection_.push(n):this.selection_.removeAt(u)}else this.selection_.clear();return this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:n,features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!1}}}getCenter(){return this.get("center")}setCenter(e){return this.set("center",e)}handleDragEvent_(e){if(this._handleEvent(e,this.features_)){var n,s,r,o,t=this.getMap().getView().getRotation(),a=[this.coordinate_[0],this.coordinate_[1]],l=[e.coordinate[0],e.coordinate[1]];switch(this.isUpdating_=!0,this.hasChanged_=!0,this.mode_){case"rotate":var c=Math.atan2(this.center_[1]-l[1],this.center_[0]-l[0]);if(!this.ispt)for(n=0;r=this.selection_.item(n);n++)(o=this.geoms_[n].clone()).rotate(c-this.angle_,this.center_),"Circle"==o.getType()&&o.setCenterAndRadius(o.getCenter(),o.getRadius()),r.setGeometry(o);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:c-this.angle_,pixel:e.pixel,coordinate:e.coordinate});break;case"translate":var h=l[0]-a[0],u=l[1]-a[1];for(n=0;r=this.selection_.item(n);n++)r.getGeometry().translate(h,u);this.handles_.forEach(function(P){P.getGeometry().translate(h,u)}),this.coordinate_=e.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[h,u],pixel:e.pixel,coordinate:e.coordinate});break;case"scale":var d=this.center_;if(this.get("modifyCenter")(e)){var p=this.extent_;this.get("enableRotatedTransform")&&0!==t&&(p=this.rotatedExtent_),d=p[(Number(this.opt_)+2)%4]}var f=1==this.geoms_.length&&this._isRectangle(this.geoms_[0]),g=this.constraint_,m=this.opt_,y=this.coordinate_,_=e.coordinate;if(this.get("enableRotatedTransform")&&0!==t){var v=new ui(this.coordinate_);v.rotate(-1*t,d),y=v.getCoordinates();var k=new ui(e.coordinate);k.rotate(-1*t,d),_=k.getCoordinates()}var w=(_[0]-d[0])/(y[0]-d[0]),I=(_[1]-d[1])/(y[1]-d[1]),b=[_[0]-y[0],_[1]-y[1]];if(this.get("enableRotatedTransform")&&0!==t){var D=new ui(d);D.rotate(-1*t,this.getMap().getView().getCenter()),d=D.getCoordinates()}for(this.get("noFlip")&&(w<0&&(w=-w),I<0&&(I=-I)),this.constraint_?"h"==this.constraint_?w=1:I=1:this.get("keepAspectRatio")(e)&&(w=I=Math.min(w,I)),n=0;r=this.selection_.item(n);n++)(o=0!==t&&this.get("enableRotatedTransform")?this.rotatedGeoms_[n].clone():this.geoms_[n].clone()).applyTransform(function(P,z,Z){if(Z<2)return z;if(f){var K=[[6],[0,8],[2],[4]],Q=[P[0],P[1]],T=[P[2],P[3]],O=[P[4],P[5]],R=[P[6],P[7]],N=[P[8],P[9]];if(g){var E=m%2==0?this._countVector(Q,T):this._countVector(R,Q),F=this._projectVectorOnVector(b,E),G=[...K[m],...K[m+1<K.length?m+1:0]];for(s=0;s<P.length;s+=Z)z[s]=G.includes(s)?P[s]+F[0]:P[s],z[s+1]=G.includes(s)?P[s+1]+F[1]:P[s+1]}else{var V,X;switch(m){case 0:b=this._countVector(R,_),V=this._projectVectorOnVector(b,this._countVector(O,R)),X=this._projectVectorOnVector(b,this._countVector(Q,R)),[z[0],z[1]]=this._movePoint(Q,V),[z[4],z[5]]=this._movePoint(O,X),[z[6],z[7]]=this._movePoint(R,b),[z[8],z[9]]=this._movePoint(N,V);break;case 1:b=this._countVector(Q,_),V=this._projectVectorOnVector(b,this._countVector(R,Q)),X=this._projectVectorOnVector(b,this._countVector(T,Q)),[z[0],z[1]]=this._movePoint(Q,b),[z[2],z[3]]=this._movePoint(T,V),[z[6],z[7]]=this._movePoint(R,X),[z[8],z[9]]=this._movePoint(N,b);break;case 2:b=this._countVector(T,_),V=this._projectVectorOnVector(b,this._countVector(Q,T)),X=this._projectVectorOnVector(b,this._countVector(O,T)),[z[0],z[1]]=this._movePoint(Q,X),[z[2],z[3]]=this._movePoint(T,b),[z[4],z[5]]=this._movePoint(O,V),[z[8],z[9]]=this._movePoint(N,X);break;case 3:b=this._countVector(O,_),V=this._projectVectorOnVector(b,this._countVector(T,O)),X=this._projectVectorOnVector(b,this._countVector(R,O)),[z[2],z[3]]=this._movePoint(T,X),[z[4],z[5]]=this._movePoint(O,b),[z[6],z[7]]=this._movePoint(R,V)}}}else for(s=0;s<P.length;s+=Z)1!=w&&(z[s]=d[0]+(P[s]-d[0])*w),1!=I&&(z[s+1]=d[1]+(P[s+1]-d[1])*I);return"Circle"==o.getType()&&o.setCenterAndRadius(o.getCenter(),o.getRadius()),z}.bind(this)),this.get("enableRotatedTransform")&&0!==t&&o.rotate(t,this.getMap().getView().getCenter()),r.setGeometry(o);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[w,I],pixel:e.pixel,coordinate:e.coordinate})}this.isUpdating_=!1}}handleMoveEvent_(e){if(this._handleEvent(e,this.features_)&&!this.mode_){var t=this.getFeatureAtPixel_(e.pixel),n=e.map.getTargetElement();if(t.feature){var s=t.handle?this.Cursors[(t.handle||"default")+(t.constraint||"")+(t.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=n.style.cursor),dc.setCursor(n,s)}else void 0!==this.previousCursor_&&dc.setCursor(n,this.previousCursor_),this.previousCursor_=void 0}}handleUpEvent_(e){if("rotate"===this.mode_){var t=e.map.getTargetElement();dc.setCursor(t,this.Cursors.default),this.previousCursor_=void 0}return this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_,transformed:this.hasChanged_}),this.drawSketch_(),this.hasChanged_=!1,this.mode_=null,!1}setPointRadius(e){this._pointRadius="function"==typeof e?e:function(){return e}}getFeatures(){return this.selection_}_projectVectorOnVector(e,t){var n=(e[0]*t[0]+e[1]*t[1])/(t[0]*t[0]+t[1]*t[1]);return[t[0]*n,t[1]*n]}_countVector(e,t){return[t[0]-e[0],t[1]-e[1]]}_movePoint(e,t){return[e[0]+t[0],e[1]+t[1]]}};UP.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"};const ufe=UP;class dfe{constructor(e,t,n,s,r,o,a,l,c,h,u){this.positive=e,this.state=t,this.total=n,this.positiveIncrease=s,this.hospitalizedCumulative=r,this.hospitalizedCurrently=o,this.totalTestResults=a,this.stateName=l,this.population=c,this.casePerc=h,this.hospPerc=u}getPositive(){return this.positive}setPositive(e){this.positive=e}getState(){return this.state}setState(e){this.state=e}getTotal(){return this.total}setTotal(e){this.total=e}getPositiveIncrease(){return this.positiveIncrease}setPositiveIncrease(e){this.positiveIncrease=e}getHospitalizedCumulative(){return this.hospitalizedCumulative}setHospitalizedCumulative(e){this.hospitalizedCumulative=e}getHospitalizedCurrently(){return this.hospitalizedCurrently}setHospitalizedCurrently(e){this.hospitalizedCurrently=e}getTotalTestResults(){return this.totalTestResults}setTotalTestResults(e){this.totalTestResults=e}getStateName(){return this.stateName}setStateName(e){this.stateName=e}getPopulation(){return this.population}setPopulation(e){this.population=e}getHospPerc(){return this.hospPerc}setHospPerc(e){this.hospPerc=e}getCasePerc(){return this.casePerc}setCasePerc(e){this.casePerc=e}}class pfe{constructor(e,t,n=!1){this._state=e,this._name=t,this._selected=n}get state(){return this._state}set state(e){this._state=e}get name(){return this._name}set name(e){this._name=e}get selected(){return this._selected}set selected(e){this._selected=e}}let WP=(()=>{class i{constructor(t){this._http=t,this.selectedStateSubject=new ni({codigo:"",value:!1}),this.selectedState$=this.selectedStateSubject.asObservable(),this.activateCompare=new ni(!1),this.resetStyleSubject=new ni({value:!1,codigo:"",selected:!1}),this.resetStyle$=this.resetStyleSubject.asObservable(),this.resetStylesSubject=new ni(!1),this.resetStyles$=this.resetStylesSubject.asObservable(),this.countriesData=[],this.statesInfo=[],this.urlCovidData="https://api.covidtracking.com/v1/states/current.json",this.urlStatesInfo="https://api.covidtracking.com/v1/states/info.json",this.urlPopulationData="assets/data/us-states-population.json"}getCovidData(){return this._http.get(this.urlCovidData).pipe(_t(t=>t.map(n=>new dfe(n.positive,n.state,n.total,n.positiveIncrease,n.hospitalizedCumulative,n.hospitalizedCurrently,n.totalTestResults,n.stateName=""))))}getStatesInfo(){return this._http.get(this.urlStatesInfo).pipe(_t(t=>t.map(n=>new pfe(n.state,n.name))))}setSelectedState(t,n){this.selectedStateSubject.next({codigo:t,value:n})}setCompare(t){this.activateCompare.next(t)}setOriginalStyle(t,n,s){this.resetStyleSubject.next({value:t,codigo:n,selected:s})}setOriginalStyles(t){this.resetStylesSubject.next(t)}getPopulationData(){return this._http.get(this.urlPopulationData)}}return i.\u0275fac=function(t){return new(t||i)(be(GT))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Uf(i){return[i.x,i.y]}class V4{constructor(e,t){this.geometryFactory=e||new wn,this.ol=t||typeof ol<"u"&&ol}inject(e,t,n,s,r,o,a,l){this.ol={geom:{Point:e,LineString:t,LinearRing:n,Polygon:s,MultiPoint:r,MultiLineString:o,MultiPolygon:a,GeometryCollection:l}}}read(e){const t=this.ol;return e instanceof t.geom.Point?this.convertFromPoint(e):e instanceof t.geom.LineString?this.convertFromLineString(e):e instanceof t.geom.LinearRing?this.convertFromLinearRing(e):e instanceof t.geom.Polygon?this.convertFromPolygon(e):e instanceof t.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof t.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof t.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof t.geom.GeometryCollection?this.convertFromCollection(e):void 0}convertFromPoint(e){const t=e.getCoordinates();return this.geometryFactory.createPoint(new j(t[0],t[1]))}convertFromLineString(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(t){return new j(t[0],t[1])}))}convertFromLinearRing(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(t){return new j(t[0],t[1])}))}convertFromPolygon(e){const t=e.getLinearRings();let n=null;const s=[];for(let r=0;r<t.length;r++){const o=this.convertFromLinearRing(t[r]);0===r?n=o:s.push(o)}return this.geometryFactory.createPolygon(n,s)}convertFromMultiPoint(e){const t=e.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(t)}convertFromMultiLineString(e){const t=e.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(t)}convertFromMultiPolygon(e){const t=e.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(t)}convertFromCollection(e){const t=e.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(t)}write(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}convertToPoint(e){return new this.ol.geom.Point([e.x,e.y])}convertToLineString(e){const t=e._points._coordinates.map(Uf);return new this.ol.geom.LineString(t)}convertToLinearRing(e){const t=e._points._coordinates.map(Uf);return new this.ol.geom.LinearRing(t)}convertToPolygon(e){const t=[e._shell._points._coordinates.map(Uf)];for(let n=0;n<e._holes.length;n++)t.push(e._holes[n]._points._coordinates.map(Uf));return new this.ol.geom.Polygon(t)}convertToMultiPoint(e){return new this.ol.geom.MultiPoint(e.getCoordinates().map(Uf))}convertToMultiLineString(e){const t=[];for(let n=0;n<e._geometries.length;n++)t.push(this.convertToLineString(e._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(t)}convertToMultiPolygon(e){const t=[];for(let n=0;n<e._geometries.length;n++)t.push(this.convertToPolygon(e._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(t)}convertToCollection(e){const t=[];for(let n=0;n<e._geometries.length;n++)t.push(this.write(e._geometries[n]));return new this.ol.geom.GeometryCollection(t)}}class hl{constructor(){hl.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._deList=new se,this._lowestEdge=null,this._ring=null,this._locator=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1,this._factory=arguments[0]}static findEdgeRingContaining(e,t){const n=e.getRing(),s=n.getEnvelopeInternal();let r=n.getCoordinateN(0),o=null,a=null;for(let l=t.iterator();l.hasNext();){const c=l.next(),u=c.getRing().getEnvelopeInternal();!u.equals(s)&&u.contains(s)&&(r=Pt.ptNotInList(n.getCoordinates(),c.getCoordinates()),c.isInRing(r)&&(null===o||a.contains(u))&&(o=c,a=o.getRing().getEnvelopeInternal()))}return o}static addEdge(e,t,n){if(t)for(let s=0;s<e.length;s++)n.add(e[s],!1);else for(let s=e.length-1;s>=0;s--)n.add(e[s],!1)}static findDirEdgesInRing(e){let t=e;const n=new se;do{n.add(t),t=t.getNext(),Oe.isTrue(null!==t,"found null DE in ring"),Oe.isTrue(t===e||!t.isInRing(),"found DE already in ring")}while(t!==e);return n}isIncluded(){return this._isIncluded}getCoordinates(){if(null===this._ringPts){const e=new $r;for(let t=this._deList.iterator();t.hasNext();){const n=t.next(),s=n.getEdge();hl.addEdge(s.getLine().getCoordinates(),n.getEdgeDirection(),e)}this._ringPts=e.toCoordinateArray()}return this._ringPts}build(e){let t=e;do{this.add(t),t.setRing(this),t=t.getNext(),Oe.isTrue(null!==t,"found null DE in ring"),Oe.isTrue(t===e||!t.isInRing(),"found DE already in ring")}while(t!==e)}isInRing(e){return S.EXTERIOR!==this.getLocator().locate(e)}addHole(){if(arguments[0]instanceof wr){const e=arguments[0];null===this._holes&&(this._holes=new se),this._holes.add(e)}else if(arguments[0]instanceof hl){const e=arguments[0];e.setShell(this);const t=e.getRing();null===this._holes&&(this._holes=new se),this._holes.add(t)}}computeHole(){const e=this.getRing();this._isHole=Pe.isCCW(e.getCoordinates())}getLocator(){return null===this._locator&&(this._locator=new Ih(this.getRing())),this._locator}getShell(){return this.isHole()?this._shell:this}updateIncluded(){if(this.isHole())return null;for(let e=0;e<this._deList.size();e++){const n=this._deList.get(e).getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}}setShell(e){this._shell=e}setProcessed(e){this._isProcessed=e}isIncludedSet(){return this._isIncludedSet}isValid(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),zo.isValid(this._ring))}isOuterHole(){return!!this._isHole&&!this.hasShell()}getPolygon(){let e=null;if(null!==this._holes){e=new Array(this._holes.size()).fill(null);for(let n=0;n<this._holes.size();n++)e[n]=this._holes.get(n)}return this._factory.createPolygon(this._ring,e)}isHole(){return this._isHole}isProcessed(){return this._isProcessed}setIncluded(e){this._isIncluded=e,this._isIncludedSet=!0}getOuterHole(){if(this.isHole())return null;for(let e=0;e<this._deList.size();e++){const n=this._deList.get(e).getSym().getRing();if(n.isOuterHole())return n}return null}hasShell(){return null!==this._shell}isOuterShell(){return null!==this.getOuterHole()}getLineString(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}toString(){return Oo.toLineString(new Yr(this.getCoordinates()))}add(e){this._deList.add(e)}getRing(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&is.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(e){if(!(e instanceof vr))throw e;is.out.println(this._ringPts)}return this._ring}}hl.EnvelopeComparator=class ffe{compare(e,t){const s=t;return e.getRing().getEnvelope().compareTo(s.getRing().getEnvelope())}get interfaces_(){return[il]}};class $y{constructor(){$y.constructor_.apply(this,arguments)}static constructor_(){this._shells=null,this._shellIndex=null,this._shells=arguments[0],this.buildIndex()}static assignHolesToShells(e,t){new $y(t).assignHolesToShells(e)}assignHolesToShells(e){for(let t=e.iterator();t.hasNext();){const n=t.next();this.assignHoleToShell(n)}}buildIndex(){this._shellIndex=new zn;for(const e of this._shells)this._shellIndex.insert(e.getRing().getEnvelopeInternal(),e)}queryOverlappingShells(e){return this._shellIndex.query(e)}findShellContaining(e){const t=e.getRing().getEnvelopeInternal(),n=this.queryOverlappingShells(t);return hl.findEdgeRingContaining(e,n)}assignHoleToShell(e){const t=this.findShellContaining(e);null!==t&&t.addHole(e)}}class Wf{constructor(){Wf.constructor_.apply(this,arguments)}static constructor_(){this._isMarked=!1,this._isVisited=!1,this._data=null}static setMarked(e,t){for(;e.hasNext();)e.next().setMarked(t)}static setVisited(e,t){for(;e.hasNext();)e.next().setVisited(t)}static getComponentWithVisitedState(e,t){for(;e.hasNext();){const n=e.next();if(n.isVisited()===t)return n}return null}setVisited(e){this._isVisited=e}isMarked(){return this._isMarked}setData(e){this._data=e}getData(){return this._data}setMarked(e){this._isMarked=e}getContext(){return this._data}isVisited(){return this._isVisited}setContext(e){this._data=e}}class ya extends Wf{constructor(){super(),ya.constructor_.apply(this,arguments)}static constructor_(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0!==arguments.length&&4===arguments.length){const e=arguments[0],t=arguments[1],n=arguments[2],s=arguments[3];this._from=e,this._to=t,this._edgeDirection=s,this._p0=e.getCoordinate(),this._p1=n;const r=this._p1.x-this._p0.x,o=this._p1.y-this._p0.y;this._quadrant=Qr.quadrant(r,o),this._angle=Math.atan2(o,r)}}static toEdges(e){const t=new se;for(let n=e.iterator();n.hasNext();)t.add(n.next()._parentEdge);return t}isRemoved(){return null===this._parentEdge}compareDirection(e){return this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:Pe.index(e._p0,e._p1,this._p1)}getCoordinate(){return this._from.getCoordinate()}print(e){const t=this.getClass().getName(),n=t.lastIndexOf("."),s=t.substring(n+1);e.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}getDirectionPt(){return this._p1}getAngle(){return this._angle}getSym(){return this._sym}getEdge(){return this._parentEdge}getToNode(){return this._to}getEdgeDirection(){return this._edgeDirection}compareTo(e){return this.compareDirection(e)}getFromNode(){return this._from}setEdge(e){this._parentEdge=e}remove(){this._sym=null,this._parentEdge=null}getQuadrant(){return this._quadrant}setSym(e){this._sym=e}get interfaces_(){return[Cs]}}class Yy extends ya{constructor(){super(),Yy.constructor_.apply(this,arguments)}static constructor_(){this._edgeRing=null,this._next=null,this._label=-1,ya.constructor_.call(this,arguments[0],arguments[1],arguments[2],arguments[3])}getNext(){return this._next}isInRing(){return null!==this._edgeRing}setRing(e){this._edgeRing=e}setLabel(e){this._label=e}getLabel(){return this._label}setNext(e){this._next=e}getRing(){return this._edgeRing}}class z4{constructor(){z4.constructor_.apply(this,arguments)}static constructor_(){this._outEdges=new se,this._sorted=!1}getNextEdge(e){const t=this.getIndex(e);return this._outEdges.get(this.getIndex(t+1))}getCoordinate(){const e=this.iterator();return e.hasNext()?e.next().getCoordinate():null}iterator(){return this.sortEdges(),this._outEdges.iterator()}sortEdges(){this._sorted||(pa.sort(this._outEdges),this._sorted=!0)}remove(e){this._outEdges.remove(e)}getEdges(){return this.sortEdges(),this._outEdges}getNextCWEdge(e){const t=this.getIndex(e);return this._outEdges.get(this.getIndex(t-1))}getIndex(){if(arguments[0]instanceof Ph){const e=arguments[0];this.sortEdges();for(let t=0;t<this._outEdges.size();t++)if(this._outEdges.get(t).getEdge()===e)return t;return-1}if(arguments[0]instanceof ya){const e=arguments[0];this.sortEdges();for(let t=0;t<this._outEdges.size();t++)if(this._outEdges.get(t)===e)return t;return-1}if(Number.isInteger(arguments[0])){let t=arguments[0]%this._outEdges.size();return t<0&&(t+=this._outEdges.size()),t}}add(e){this._outEdges.add(e),this._sorted=!1}getDegree(){return this._outEdges.size()}}class Lh extends Wf{constructor(){super(),Lh.constructor_.apply(this,arguments)}static constructor_(){if(this._pt=null,this._deStar=null,1===arguments.length)Lh.constructor_.call(this,arguments[0],new z4);else if(2===arguments.length){const t=arguments[1];this._pt=arguments[0],this._deStar=t}}static getEdgesBetween(e,t){const n=ya.toEdges(e.getOutEdges().getEdges()),s=new sl(n),r=ya.toEdges(t.getOutEdges().getEdges());return s.retainAll(r),s}isRemoved(){return null===this._pt}addOutEdge(e){this._deStar.add(e)}getCoordinate(){return this._pt}getOutEdges(){return this._deStar}remove(){0===arguments.length?this._pt=null:1===arguments.length&&this._deStar.remove(arguments[0])}getIndex(e){return this._deStar.getIndex(e)}getDegree(){return this._deStar.getDegree()}}class Ph extends Wf{constructor(){super(),Ph.constructor_.apply(this,arguments)}static constructor_(){this._dirEdge=null,0!==arguments.length&&2===arguments.length&&this.setDirectedEdges(arguments[0],arguments[1])}isRemoved(){return null===this._dirEdge}setDirectedEdges(e,t){this._dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)}getDirEdge(){if(Number.isInteger(arguments[0]))return this._dirEdge[arguments[0]];if(arguments[0]instanceof Lh){const e=arguments[0];return this._dirEdge[0].getFromNode()===e?this._dirEdge[0]:this._dirEdge[1].getFromNode()===e?this._dirEdge[1]:null}}remove(){this._dirEdge=null}getOppositeNode(e){return this._dirEdge[0].getFromNode()===e?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===e?this._dirEdge[1].getToNode():null}}class H4 extends Ph{constructor(){super(),H4.constructor_.apply(this,arguments)}static constructor_(){this._line=null,this._line=arguments[0]}getLine(){return this._line}}class B4{constructor(){B4.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new No}find(e){return this._nodeMap.get(e)}iterator(){return this._nodeMap.values().iterator()}remove(e){return this._nodeMap.remove(e)}values(){return this._nodeMap.values()}add(e){return this._nodeMap.put(e.getCoordinate(),e),e}}class j4{constructor(){j4.constructor_.apply(this,arguments)}static constructor_(){this._edges=new sl,this._dirEdges=new sl,this._nodeMap=new B4}findNodesOfDegree(e){const t=new se;for(let n=this.nodeIterator();n.hasNext();){const s=n.next();s.getDegree()===e&&t.add(s)}return t}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}getEdges(){return this._edges}nodeIterator(){return this._nodeMap.iterator()}contains(){return arguments[0]instanceof Ph?this._edges.contains(arguments[0]):arguments[0]instanceof ya?this._dirEdges.contains(arguments[0]):void 0}add(){if(arguments[0]instanceof Lh)this._nodeMap.add(arguments[0]);else if(arguments[0]instanceof Ph){const e=arguments[0];this._edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else arguments[0]instanceof ya&&this._dirEdges.add(arguments[0])}getNodes(){return this._nodeMap.values()}remove(){if(arguments[0]instanceof Ph){const e=arguments[0];this.remove(e.getDirEdge(0)),this.remove(e.getDirEdge(1)),this._edges.remove(e),e.remove()}else if(arguments[0]instanceof ya){const e=arguments[0],t=e.getSym();null!==t&&t.setSym(null),e.getFromNode().remove(e),e.remove(),this._dirEdges.remove(e)}else if(arguments[0]instanceof Lh){const e=arguments[0];for(let n=e.getOutEdges().getEdges().iterator();n.hasNext();){const s=n.next(),r=s.getSym();null!==r&&this.remove(r),this._dirEdges.remove(s);const o=s.getEdge();null!==o&&this._edges.remove(o)}this._nodeMap.remove(e.getCoordinate()),e.remove()}}findNode(e){return this._nodeMap.find(e)}}class Sr extends j4{constructor(){super(),Sr.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._factory=arguments[0]}static findLabeledEdgeRings(e){const t=new se;let n=1;for(let s=e.iterator();s.hasNext();){const r=s.next();if(r.isMarked()||r.getLabel()>=0)continue;t.add(r);const o=hl.findDirEdgesInRing(r);Sr.label(o,n),n++}return t}static getDegreeNonDeleted(e){let n=0;for(let s=e.getOutEdges().getEdges().iterator();s.hasNext();)s.next().isMarked()||n++;return n}static deleteAllEdges(e){for(let n=e.getOutEdges().getEdges().iterator();n.hasNext();){const s=n.next();s.setMarked(!0);const r=s.getSym();null!==r&&r.setMarked(!0)}}static label(e,t){for(let n=e.iterator();n.hasNext();)n.next().setLabel(t)}static computeNextCWEdges(e){let n=null,s=null;for(let r=e.getOutEdges().getEdges().iterator();r.hasNext();){const o=r.next();o.isMarked()||(null===n&&(n=o),null!==s&&s.getSym().setNext(o),s=o)}null!==s&&s.getSym().setNext(n)}static computeNextCCWEdges(e,t){let s=null,r=null;const o=e.getOutEdges().getEdges();for(let a=o.size()-1;a>=0;a--){const l=o.get(a),c=l.getSym();let h=null;l.getLabel()===t&&(h=l);let u=null;c.getLabel()===t&&(u=c),(null!==h||null!==u)&&(null!==u&&(r=u),null!==h&&(null!==r&&(r.setNext(h),r=null),null===s&&(s=h)))}null!==r&&(Oe.isTrue(null!==s),r.setNext(s))}static getDegree(e,t){let s=0;for(let r=e.getOutEdges().getEdges().iterator();r.hasNext();)r.next().getLabel()===t&&s++;return s}static findIntersectionNodes(e,t){let n=e,s=null;do{const r=n.getFromNode();Sr.getDegree(r,t)>1&&(null===s&&(s=new se),s.add(r)),n=n.getNext(),Oe.isTrue(null!==n,"found null DE in ring"),Oe.isTrue(n===e||!n.isInRing(),"found DE already in ring")}while(n!==e);return s}findEdgeRing(e){const t=new hl(this._factory);return t.build(e),t}computeDepthParity(){if(0===arguments.length)for(;;)return null}computeNextCWEdges(){for(let e=this.nodeIterator();e.hasNext();){const t=e.next();Sr.computeNextCWEdges(t)}}addEdge(e){if(e.isEmpty())return null;const t=Pt.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return null;const s=t[t.length-1],r=this.getNode(t[0]),o=this.getNode(s),a=new Yy(r,o,t[1],!0),l=new Yy(o,r,t[t.length-2],!1),c=new H4(e);c.setDirectedEdges(a,l),this.add(c)}deleteCutEdges(){this.computeNextCWEdges(),Sr.findLabeledEdgeRings(this._dirEdges);const e=new se;for(let t=this._dirEdges.iterator();t.hasNext();){const n=t.next();if(n.isMarked())continue;const s=n.getSym();if(n.getLabel()===s.getLabel()){n.setMarked(!0),s.setMarked(!0);const r=n.getEdge();e.add(r.getLine())}}return e}getEdgeRings(){this.computeNextCWEdges(),Sr.label(this._dirEdges,-1);const e=Sr.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(e);const t=new se;for(let n=this._dirEdges.iterator();n.hasNext();){const s=n.next();if(s.isMarked()||s.isInRing())continue;const r=this.findEdgeRing(s);t.add(r)}return t}getNode(e){let t=this.findNode(e);return null===t&&(t=new Lh(e),this.add(t)),t}convertMaximalToMinimalEdgeRings(e){for(let t=e.iterator();t.hasNext();){const n=t.next(),s=n.getLabel(),r=Sr.findIntersectionNodes(n,s);if(null!==r)for(let o=r.iterator();o.hasNext();){const a=o.next();Sr.computeNextCCWEdges(a,s)}}}deleteDangles(){const e=this.findNodesOfDegree(1),t=new sl,n=new x4;for(let s=e.iterator();s.hasNext();)n.push(s.next());for(;!n.isEmpty();){const s=n.pop();Sr.deleteAllEdges(s);for(let o=s.getOutEdges().getEdges().iterator();o.hasNext();){const a=o.next();a.setMarked(!0);const l=a.getSym();null!==l&&l.setMarked(!0);const c=a.getEdge();t.add(c.getLine());const h=a.getToNode();1===Sr.getDegreeNonDeleted(h)&&n.push(h)}}return t}}class ul{constructor(){ul.constructor_.apply(this,arguments)}static constructor_(){this._lineStringAdder=new Ky(this),this._graph=null,this._dangles=new se,this._cutEdges=new se,this._invalidRingLines=new se,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length?ul.constructor_.call(this,!1):1===arguments.length&&(this._extractOnlyPolygonal=arguments[0])}static findOuterShells(e){for(let t=e.iterator();t.hasNext();){const n=t.next(),s=n.getOuterHole();null!==s&&!s.isProcessed()&&(n.setIncluded(!0),s.setProcessed(!0))}}static extractPolygons(e,t){const n=new se;for(let s=e.iterator();s.hasNext();){const r=s.next();(t||r.isIncluded())&&n.add(r.getPolygon())}return n}static findDisjointShells(e){ul.findOuterShells(e);let t=null;do{t=!1;for(let n=e.iterator();n.hasNext();){const s=n.next();s.isIncludedSet()||(s.updateIncluded(),s.isIncludedSet()||(t=!0))}}while(t)}getGeometry(){return null===this._geomFactory&&(this._geomFactory=new wn),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(wn.toGeometryArray(this._polyList))}getInvalidRingLines(){return this.polygonize(),this._invalidRingLines}findValidRings(e,t,n){for(let s=e.iterator();s.hasNext();){const r=s.next();r.isValid()?t.add(r):n.add(r.getLineString())}}polygonize(){if(null!==this._polyList||(this._polyList=new se,null===this._graph))return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();const e=this._graph.getEdgeRings();let t=new se;this._invalidRingLines=new se,this._isCheckingRingsValid?this.findValidRings(e,t,this._invalidRingLines):t=e,this.findShellsAndHoles(t),$y.assignHolesToShells(this._holeList,this._shellList),pa.sort(this._shellList,new hl.EnvelopeComparator);let n=!0;this._extractOnlyPolygonal&&(ul.findDisjointShells(this._shellList),n=!1),this._polyList=ul.extractPolygons(this._shellList,n)}getDangles(){return this.polygonize(),this._dangles}add(){if(De(arguments[0],Gn))for(let t=arguments[0].iterator();t.hasNext();){const n=t.next();this.add(n)}else if(arguments[0]instanceof At){const e=arguments[0];this._geomFactory=e.getFactory(),null===this._graph&&(this._graph=new Sr(this._geomFactory)),this._graph.addEdge(e)}else arguments[0]instanceof ge&&arguments[0].apply(this._lineStringAdder)}setCheckRingsValid(e){this._isCheckingRingsValid=e}findShellsAndHoles(e){this._holeList=new se,this._shellList=new se;for(let t=e.iterator();t.hasNext();){const n=t.next();n.computeHole(),n.isHole()?this._holeList.add(n):this._shellList.add(n)}}getCutEdges(){return this.polygonize(),this._cutEdges}getPolygons(){return this.polygonize(),this._polyList}}class Ky{constructor(){Ky.constructor_.apply(this,arguments)}static constructor_(){this.p=null,this.p=arguments[0]}filter(e){e instanceof At&&this.p.add(e)}get interfaces_(){return[kh]}}ul.LineStringAdder=Ky;let gfe=(()=>{class i{constructor(t){this._mapService=t,this.polIndex=0,this.drawnVectorSource=this._mapService.getDrawnVectorSource(),this.lineVectorSource=this._mapService.getLineVectorSource()}cortarPoligonosConLinea(t,n){if(null===n)return this.lineVectorSource.removeFeature(t),void alert("No intersecta ningun feature");const s=new wn,r=new V4(s);r.inject(ui,ia,Xp,Io,gd,md,yd,_f);let o=r.read(n.getGeometry()),a=r.read(t.getGeometry()),l=o._holes,h=(a.intersection(o),o.getExteriorRing().union(a)),u=new ul;u.add(h);let d=a.intersection(o),f=o.getBoundary().union(d),g=Rh.union(f);(new ul).add(g);const y=u.getPolygons();if(y.size()>=2){let _=y.iterator();for(;_.hasNext();){let v=_.next();l.forEach(I=>{let b=[];for(let D in I.getCoordinates())b.push([I.getCoordinates()[D].x,I.getCoordinates()[D].y]);I=r.read(new Io([b])),v=v.difference(I)});const k=r.write(v);let w=new Tn({geometry:k,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,w.set("__originalStyle",jt[0].polygon),w.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(w)}}this._mapService.removeFeatureFromDrawnVectorSource(n),this._mapService.removeFeatureFromLineVectorSource(t)}cortarPoligonoConPoligono(t,n,s){let r=new wn;const o=new V4(r);o.inject(ui,ia,Xp,Io,gd,md,yd,_f);let a=o.read(t.getGeometry()).buffer(0),l=o.read(n.getGeometry()).buffer(0),h=a.getBoundary(),d=l.getBoundary().intersects(h);if(d&&"substract"===s){console.log("SI se cortan - SUBSTRACT");let p=gn.difference(a,l),f=o.write(p);if("MultiPolygon"===f.getType())f.getPolygons().forEach(m=>{let y=new Tn({geometry:m,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,y.set("__originalStyle",jt[0].polygon),y.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(y)});else{let g=new Tn({geometry:f,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,g.set("__originalStyle",jt[0].polygon),g.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(g)}this._mapService.removeFeatureFromDrawnVectorSource(t)}else if(d&&"exclude"===s){console.log("SI se cortan - EXCLUDE");let p=gn.symDifference(a,l);o.write(p).getPolygons().forEach(m=>{let y=new Tn({geometry:m,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,y.set("__originalStyle",jt[0].polygon),y.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(y),console.log("Hola")}),this._mapService.removeFeatureFromDrawnVectorSource(t),this._mapService.removeFeatureFromDrawnVectorSource(n)}else{let p=gn.difference(a,l),f=o.write(p),g=new Tn({geometry:f,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,g.set("__originalStyle",jt[0].polygon),g.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(g),this._mapService.removeFeatureFromDrawnVectorSource(t),this._mapService.removeFeatureFromDrawnVectorSource(n)}}unirPoligonoConPoligono(t,n){if(null===t||null===n)return void alert("No hay poligonos que unir");let s=new wn;const r=new V4(s);r.inject(ui,ia,Xp,Io,gd,md,yd,_f);let o=r.read(t.getGeometry()).buffer(0),a=r.read(n.getGeometry()).buffer(0),l=gn.union(o,a),c=r.write(l);if("MultiPolygon"===c.getType())c.getPolygons().forEach(u=>{let d=new Tn({geometry:u,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,d.set("__originalStyle",jt[0].polygon),d.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(d)});else{let h=new Tn({geometry:c,style:jt[0].polygon,name:"Pol_"+this.polIndex});this.polIndex++,h.set("__originalStyle",jt[0].polygon),h.set("selected",!1),this._mapService.addFeatureToDrawnVectorSource(h)}this._mapService.removeFeatureFromDrawnVectorSource(t),this._mapService.removeFeatureFromDrawnVectorSource(n)}}return i.\u0275fac=function(t){return new(t||i)(be(wf))},i.\u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mfe=["letreroTexto"];function yfe(i,e){1&i&&(B(0,"div",7),ke(1,"Arrastrar Archivo GeoJson al mapa"),H())}let _fe=(()=>{class i{constructor(t,n,s,r){this._covidData=t,this._mapService=n,this._menusService=s,this._toolsService=r,this.countriesData=[],this.statesInfo=[],this.cities=[],this.selectedState="",this.ctrlDisabled=!1,this.selected=!1,this.isDrawing=!1,this.polIndex=0,this.tool="none",this.estadosTocadosArray=[],this.borradoPoligono=!1,this.modificado=!1,this.transformado=!1,this.fileUpload=!1,this.layerNames=[],this.drawArrayLength=0,this.viewMenu=!1}ngOnInit(){this.map=this._mapService.getMap(),this.lineVectorSource=this._mapService.getLineVectorSource(),this.lineVectorLayer=this._mapService.getLineVectorLayer(),this.drawnVectorSource=this._mapService.getDrawnVectorSource(),this.drawVectorLayer=this._mapService.getDrawnVectorLayer(),this._covidData.getCovidData().subscribe(t=>{this.countriesData=t}),this._covidData.getStatesInfo().subscribe(t=>{this.statesInfo=t,this.statesInfo.forEach(n=>{this.cities.push(n.name)})}),this._mapService.layerVisibility$.subscribe(t=>{this.layerNames.forEach((n,s)=>{n.name===t.name&&this.map.getLayers().getArray().find(o=>o.get("name")===n.name)?.setVisible(n.selected)})})}ngAfterViewInit(){this.etiqueta=this.letreroTexto.nativeElement,this.map.setTarget("map");const n=new h1e({element:this.etiqueta,positioning:"top-center",stopEvent:!1});this.map.addOverlay(n),this.letreroTextoOverlay=n,this.map.on("pointermove",_=>{let v=this.map.hasFeatureAtPixel(_.pixel),k=this.map.getFeaturesAtPixel(_.pixel);if(v&&k[0].get("ste_name")){let w=k[0].get("ste_name");this.letreroTextoOverlay.setPosition(_.coordinate),this.etiqueta.innerHTML=w?.[0],this.map.getViewport().style.cursor="pointer"}else this.letreroTextoOverlay.setPosition(void 0),this.map.getViewport().style.cursor=""}),this.usSource=new rh({url:"../../assets/data/us-states.geojson",format:new _d});const s=new lh({source:this.usSource,style:jt[0].polygon,visible:!0,zIndex:1});s.set("name","US-States-Layer"),this.layerNames.push({name:s.get("name"),selected:!0}),this.map.addLayer(s),s.setVisible(!0),this.usSource.on("featuresloadend",()=>{setTimeout(()=>{this.usSource.getFeatures().forEach((_,v)=>{_.set("selected",!1),_.set("name",_.get("ste_name"));const k=_.get("ste_stusps_code"),w=this.countriesData.find(b=>b.getState()===k),I=w?.getPositive();_ instanceof Tn&&w&&(I>=0&&I<=2e5?(_.setStyle(jt[0].green),_.set("__originalStyle",_.getStyle())):I>2e5&&I<=4e5?(_.setStyle(jt[0].yellow),_.set("__originalStyle",_.getStyle())):(_.setStyle(jt[0].red),_.set("__originalStyle",_.getStyle())))})},1)}),this.map.on("click",_=>{if(!this.isDrawing){const v=this.map.getFeaturesAtPixel(_.pixel)||[];if(this.drawnFeatureAtPixel=this.map.getFeaturesAtPixel(_.pixel,{layerFilter:b=>b===this.drawVectorLayer})||[],1===this.drawnFeatureAtPixel.length){let b=this.drawnFeatureAtPixel[0].getGeometry().getCoordinates(),D=[],P=[];b[0].forEach(Z=>{D.push(Z[0]),P.push(Z[1])});let z=this.calculatePolygonArea(D,P);this._mapService.setPolygonArea(z)}if(console.log("Features en drawnVectorSource:",this.drawnVectorSource.getFeatures(),this.drawnVectorSource.getFeatures()),this.drawnFeatureAtPixel.length>0){this.subControlBar.setVisible(!0),p.setActive(!1),this.selected=!this.drawnFeatureAtPixel[0].get("selected"),this.drawnFeatureAtPixel[0].set("selected",this.selected);const b=this.drawnFeatureAtPixel[0].getGeometry();if(this.polygonAnterior)if(this.featureAnterior.get("name")!==this.drawnFeatureAtPixel[0].get("name")){this.borradoPoligono||(this.estadosTocados(this.polygonAnterior),this.borradoPoligono=!1),this.polygonAnterior=b,this.featureAnterior.setStyle(this.featureAnterior.get("__originalStyle")),this.featureAnterior.set("selected",!1),this.featureAnterior=this.drawnFeatureAtPixel[0];let D=b.getInteriorPoint().getCoordinates();this.map.getView().animate({center:D},{zoom:5},{duration:600}),this.estadosTocados(b)}else{this.polygonAnterior=b;let P=b.getInteriorPoint().getCoordinates();this.map.getView().animate({center:P},{zoom:5},{duration:600}),this.estadosTocados(b)}else{this.featureAnterior=this.drawnFeatureAtPixel[0],this.polygonAnterior=b;let P=b.getInteriorPoint().getCoordinates();this.map.getView().animate({center:P},{zoom:5},{duration:600}),this.estadosTocados(b)}}else this.subControlBar.setVisible(!1);!0===v[0].get("selected")&&0===this.drawnFeatureAtPixel.length?this._covidData.setSelectedState(v[0].get("ste_stusps_code"),!1):this._covidData.setSelectedState(v[0].get("ste_stusps_code"),!0);const k=v[0];let w=k.get("__originalStyle");k.getStyle()===jt[0].rosa?(k.setStyle(w),k.set("selected",!1)):(k.setStyle(jt[0].rosa),k.set("selected",!0));const I=this.statesInfo.findIndex(b=>b.state===k.get("ste_stusps_code"));-1!==I&&(this.statesInfo[I].selected=!this.statesInfo[I].selected)}}),this._covidData.resetStyle$.subscribe(({value:_,codigo:v,selected:k})=>{if(_){const w=this.usSource.getFeatures().find(I=>I.get("ste_stusps_code")===v);if(w&&k)w.setStyle(jt[0].rosa),w.set("selected",!0);else{const I=w?.get("__originalStyle");w?.setStyle(I),w?.set("selected",!1)}}}),this.drawVectorLayer.set("name","Drawn-Features-Layer"),this.layerNames.push({name:this.drawVectorLayer.get("name"),selected:!0}),this.controlBar=new F4({className:"mapControls",group:!0,toggleOne:!0}),this.drawInteraction=new uC({type:"Polygon",source:this.drawVectorLayer.getSource(),style:jt[0].polygon});const r=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil-line-icon lucide-pencil-line"><path d="M13 21h8"/><path d="m15 5 4 4"/><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"/></svg>',className:"ctrl-button",title:"Draw",active:!1,onToggle:_=>{this.isDrawing=_,this.subControlBar.setVisible(!1),_?(this.tool="draw",this.map.addInteraction(this.drawInteraction)):(this.map.removeInteraction(this.drawInteraction),this.tool="none")}});this.drawInteraction.on("drawend",_=>{this.drawEndInteractionEvent=_,_.feature.set("name","pol_"+this.polIndex),_.feature.set("id",this.polIndex),this.polIndex++,_.feature.set("__originalStyle",jt[0].polygon),this.drawnVectorSource.getFeatures();let k=_.feature,w=k.getGeometry().getExtent();switch(this.tool){case"draw":let I=_.feature.getGeometry().getCoordinates(),b=[],D=[];I[0].forEach(Z=>{b.push(Z[0]),D.push(Z[1])});let P=this.calculatePolygonArea(b,D);this._mapService.setPolygonArea(P);break;case"substract":this.drawnVectorSource.forEachFeatureIntersectingExtent(w,Z=>{Z?.get("name")!==k.get("name")&&this._toolsService.cortarPoligonoConPoligono(Z,k,"substract")}),this.tool="none",this.map.removeInteraction(this.drawInteraction),this.controlBar.getControlsByName("cutPolygonsBetween")[0].setActive(!1),setTimeout(()=>{this.drawnVectorSource.removeFeature(k)},.1),console.log("isDrawing lo pongo a false aqui"),this.isDrawing=!1;break;case"exclude":const z=this.drawnVectorSource.forEachFeatureIntersectingExtent(w,Z=>Z)||null;z?.get("name")!==k.get("name")?this._toolsService.cortarPoligonoConPoligono(z,k,"exclude"):alert("Es el mismo poligono o no intersecta ningun poligono!!!"),this.map.removeInteraction(this.drawInteraction),setTimeout(()=>{this.drawnVectorSource.removeFeature(k)},.1),this.controlBar.getControlsByName("excludePolygonsBetween")[0].setActive(!1)}}),this.controlBar.addControl(r),this.modifyInteraction=new b1e({source:this.drawVectorLayer.getSource(),style:jt[0].polygon});const o=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-minimize2-icon lucide-minimize-2"><path d="m14 10 7-7"/><path d="M20 10h-6V4"/><path d="m3 21 7-7"/><path d="M4 14h6v6"/></svg>',className:"ctrl-button",title:"Modify",interaction:this.modifyInteraction,active:!1,onToggle:_=>{this.isDrawing=_,this.subControlBar.setVisible(!1),this.modificado=!0,this.map.removeInteraction(this.drawInteraction),this.map.removeInteraction(this.cutInteraction)}});this.modifyInteraction.on("modifyend",_=>{let v=_.features.item(0);v.get("selected")&&this.estadosTocados(v.getGeometry())}),this.controlBar.addControl(o),this.transformInteraction=new ufe({enableRotation:!0,enableScaling:!0,keepAspectRatio:_=>_.originalEvent.shiftKey,features:this.drawnFeatureAtPixel,filter:(_,v)=>(this.featureSeleccionada=_,v===this.drawVectorLayer)});const a=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-expand-icon lucide-expand"><path d="m15 15 6 6"/><path d="m15 9 6-6"/><path d="M21 16v5h-5"/><path d="M21 8V3h-5"/><path d="M3 16v5h5"/><path d="m3 21 6-6"/><path d="M3 8V3h5"/><path d="M9 9 3 3"/></svg>',className:"ctrl-button",title:"Transform",interaction:this.transformInteraction,active:!1,onToggle:_=>{this.subControlBar.setVisible(!1),this.isDrawing=_,this.map.removeInteraction(this.drawInteraction),this.map.removeInteraction(this.cutInteraction),_&&this.featureSeleccionada&&this.transformInteraction.select(this.featureSeleccionada)}});this.transformInteraction.on(["rotateend","scaleend","translateend"],_=>{_.features.item(0),this.featureSeleccionada.get("selected")&&this.estadosTocados(this.featureSeleccionada.getGeometry())}),this.controlBar.addControl(a),this.cutInteraction=new uC({type:"LineString",source:this.lineVectorSource,style:jt[0].lineBlue});const l=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scissors-icon lucide-scissors"><circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/></svg>',className:"ctrl-button",title:"Cut Polygon",name:"cutPolygon",active:!1,onToggle:_=>{this.subControlBar.setVisible(!1),this.isDrawing=_,_?(this.map.removeInteraction(this.drawInteraction),this.map.addInteraction(this.cutInteraction)):this.map.removeInteraction(this.cutInteraction)}});this.cutInteraction.on("drawend",_=>{const v=_.feature;if(v.set("name","lineaDeCorte"),this.drawnVectorSource.getFeatures().length>0&&v){const k=v.getGeometry().getExtent();this.drawnVectorSource.forEachFeatureIntersectingExtent(k,w=>{this._toolsService.cortarPoligonosConLinea(v,w)})}this.controlBar.getControlsByName("cutPolygon")[0].setActive(!1),this.map.removeInteraction(this.cutInteraction),this.map.removeInteraction(this.drawInteraction),setTimeout(()=>this.lineVectorSource.clear(),.1),this.isDrawing=!1,console.log("Toggle de corte desactivado")}),this.controlBar.addControl(l),this.cutWithPolygon=new uC({type:"Polygon",source:this.drawnVectorSource,style:jt[0].polygon});const c=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-squares-subtract-icon lucide-squares-subtract"><path d="M10 22a2 2 0 0 1-2-2"/><path d="M16 22h-2"/><path d="M16 4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-5a2 2 0 0 1 2-2h5a1 1 0 0 0 1-1z"/><path d="M20 8a2 2 0 0 1 2 2"/><path d="M22 14v2"/><path d="M22 20a2 2 0 0 1-2 2"/></svg>',className:"ctrl-button",title:"Substract Polygons",name:"cutPolygonsBetween",active:!1,onToggle:_=>{this.subControlBar.setVisible(!1),this.isDrawing=_,_?(this.tool="substract",this.drawArrayLength=this.drawnVectorSource.getFeatures().length,this.subControlBar.setVisible(!1),this.isDrawing=_,this.map.addInteraction(this.drawInteraction)):(this.map.removeInteraction(this.drawInteraction),this.tool="none",this.drawnVectorSource.removeFeature(this.drawedInteractionFeature))}});this.controlBar.addControl(c);const h=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-squares-unite-icon lucide-squares-unite"><path d="M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 0 1 1h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-3a1 1 0 0 0-1-1z"/></svg>',className:"ctrl-button",title:"Unite Polygons",name:"unitePolygonsBetween",active:!1,onToggle:_=>{if(this.subControlBar.setVisible(!1),this.isDrawing=_,console.log("Toggle Unir Poligonos Activo",_),_)this.tool="unite",this.drawArrayLength=this.drawnVectorSource.getFeatures().length,this.map.addInteraction(this.drawInteraction);else{if(this.map.removeInteraction(this.drawInteraction),this.tool="none",this.drawArrayLength===this.drawnVectorSource.getFeatures().length)return;let v=this.drawnVectorSource.getFeatures().length-1;console.log("Feature dibujada",this.drawEndInteractionEvent?.feature.get("name"));for(let k=v;k>=0;k--){const w=this.drawnVectorSource.getFeatures()[k],I=this.drawEndInteractionEvent?.feature,b=I.getGeometry().getExtent(),D=this.drawnVectorSource.forEachFeatureInExtent(b,P=>P);if(D?.get("name")===I.get("name"))return alert("No se puede unir el poligono consigo mismo"),void this._mapService.removeFeatureFromDrawnVectorSource(I);console.log("FeatureTocada corte por poligonos:",D?.get("name")),this._toolsService.unirPoligonoConPoligono(D,w)}}}});this.controlBar.addControl(h);const u=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-squares-exclude-icon lucide-squares-exclude"><path d="M16 12v2a2 2 0 0 1-2 2H9a1 1 0 0 0-1 1v3a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h0"/><path d="M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 1-1 1h-5a2 2 0 0 0-2 2v2"/></svg>',className:"ctrl-button",title:"Substract part of Polygon",name:"excludePolygonsBetween",active:!1,onToggle:_=>{this.subControlBar.setVisible(!1),this.isDrawing=_,_?(this.tool="exclude",this.drawArrayLength=this.drawnVectorSource.getFeatures().length,this.map.addInteraction(this.drawInteraction)):(this.tool="none",this.map.removeInteraction(this.drawInteraction))}});this.controlBar.addControl(u),this.fileVectorSource=new rh({format:new _d}),this.fileVectorLayer=new lh({source:this.fileVectorSource,visible:!0,zIndex:5,style:jt[0].lineRed}),this.fileVectorLayer.set("name","Lines-File-Layer"),this.layerNames.push({name:this.fileVectorLayer.get("name"),selected:!0}),this.map.addLayer(this.fileVectorLayer),this.dragAndDropInteraction=new f1e({formatConstructors:[_d],source:this.fileVectorSource});const d=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-plus-corner-icon lucide-file-plus-corner"><path d="M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35"/><path d="M14 2v5a1 1 0 0 0 1 1h5"/><path d="M14 19h6"/><path d="M17 16v6"/></svg>',className:"ctrl-button",title:"Upload GEOJson File",interaction:this.dragAndDropInteraction,active:!1,onToggle:_=>{this.subControlBar.setVisible(!1),this.isDrawing=_,this.fileUpload=!!_}});this.controlBar.addControl(d),this.subControlBar=new F4({className:"sub-toolbar",toggleOne:!0,group:!0}),this.subControlBar.setVisible(!1);const p=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2-icon lucide-trash-2"><path d="M10 11v6"/><path d="M14 11v6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>',className:"sub-button",title:"Delete Polygon",active:!1,onToggle:_=>{if(_){r.setActive(!1),this.borradoPoligono=!0,this.isDrawing=!0;const v=this.drawnFeatureAtPixel.find(k=>k.get("name")===this.drawnFeatureAtPixel[0].get("name"));v&&(v.getGeometry(),this.estadosTocadosArray.length>0&&this.estadosTocadosArray.forEach(w=>{const I=w.get("__originalStyle");w.setStyle(I),w.set("selected",!1),this.statesInfo.forEach(b=>{b.name===w.get("ste_name").toString()&&(this._covidData.setSelectedState(b.state,!1),b.selected=!1)})}),this.drawnVectorSource.removeFeature(v),this.estadosTocadosArray=[],this.map.getView().animate({center:PM([-99.92,35.56])},{zoom:4.5},{duration:600}))}this.subControlBar.setVisible(!1),this.isDrawing=!1}}),f=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-column-stacked-icon lucide-chart-column-stacked"><path d="M11 13H7"/><path d="M19 9h-4"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/><rect x="15" y="5" width="4" height="12" rx="1"/><rect x="7" y="8" width="4" height="9" rx="1"/></svg>',className:"sub-button",title:"Compare States",active:!1,onToggle:()=>{this.drawnFeatureAtPixel&&this._covidData.setCompare(!0)}});this.subControlBar.addControl(p),this.subControlBar.addControl(f),this.controlBar.addControl(this.subControlBar),this.map.addControl(this.controlBar),this.subControlBarNavBar=new F4({className:"sub-toolbar-2",toggleOne:!0,group:!0}),this.subControlBarNavBar.setVisible(!0),this.subControlBarNavBar.setPosition("bottom-left");const g=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-icon lucide-list"><path d="M3 5h.01"/><path d="M3 12h.01"/><path d="M3 19h.01"/><path d="M8 5h13"/><path d="M8 12h13"/><path d="M8 19h13"/></svg>',className:"sub-button",title:"View US states table",active:!0,onToggle:()=>{this._mapService.setNavToShow("default"),this.fileUpload=!1}});this.subControlBarNavBar.addControl(g);const m=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ruler-dimension-line-icon lucide-ruler-dimension-line"><path d="M10 15v-3"/><path d="M14 15v-3"/><path d="M18 15v-3"/><path d="M2 8V4"/><path d="M22 6H2"/><path d="M22 8V4"/><path d="M6 15v-3"/><rect x="2" y="12" width="20" height="8" rx="2"/></svg>',className:"sub-button",title:"View Polygon Area",active:!1,onToggle:()=>{this._mapService.setNavToShow("areaCalc"),this.fileUpload=!1}});this.subControlBarNavBar.addControl(m);const y=new Er({html:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layers-icon lucide-layers"><path d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"/><path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"/><path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"/></svg>',className:"sub-button",title:"View Layers Control",active:!1,onToggle:()=>{this._mapService.setNavToShow("layers"),this.fileUpload=!1}});this.subControlBarNavBar.addControl(y),this.map.addControl(this.subControlBarNavBar),this.resetStyles(),this._mapService.setLayerArray(this.layerNames)}toggleMenu(){this.viewMenu=!this.viewMenu,this._menusService.toggleMenu(this.viewMenu)}resetStyles(){this._covidData.resetStyles$.subscribe(t=>{t&&(this.usSource.getFeatures().forEach(n=>{n.setStyle(n.get("__originalStyle")),n.set("selected",!1)}),this.statesInfo.forEach(n=>n.selected=!1),this.drawnVectorSource.getFeatures().forEach(n=>{n.setStyle(n.get("__originalStyle")),n.set("selected",!1)}),this.estadosTocadosArray=[],this.isDrawing=!1)}),this.subControlBar.setVisible(!1)}searchStates(t){const n=t.query.toLowerCase();this.filteredStates=this.cities.filter(s=>s.toLowerCase().includes(n))}onStateSelected(t){const n=t,s=this.usSource.getFeatures().find(c=>c.get("ste_name").toString()===n);if(this.estadoAnterior)if(this.estadoAnterior.get("ste_name")!==s.get("ste_name"))this.estadoAnterior=s;else{const c=this.estadoAnterior.get("__originalStyle");this.estadoAnterior.setStyle(c)}else this.estadoAnterior=s;const r=s?.get("geo_point_2d"),o=r.lon,a=r.lat;if(!s.get("selected")||s){const c=this.estadoAnterior.get("__originalStyle");this.estadoAnterior.setStyle(c),this.estadoAnterior.set("selected",!1),this.map.getView().animate({center:PM([o,a])},{zoom:5}),s.set("selected",!0),s.setStyle(jt[0].rosa),this._covidData.setSelectedState(s.get("ste_stusps_code"),!0)}}estadosTocados(t){t.getExtent(),this.estadosTocadosArray=[],this.usSource.forEachFeature(r=>{const o=new _d,a=o.writeFeatureObject(this.drawnFeatureAtPixel[0],{featureProjection:this.map.getView().getProjection(),dataProjection:"EPSG:4326"}),l=o.writeFeatureObject(r,{featureProjection:this.map.getView().getProjection(),dataProjection:"EPSG:4326"});try{!function wpe(i,e,{ignoreSelfIntersections:t=!0}={}){let n=!1;return yh(i,s=>{yh(e,r=>{if(!0===n)return!0;n=!function gpe(i,e,{ignoreSelfIntersections:t=!0}={ignoreSelfIntersections:!0}){let n=!0;return yh(i,s=>{yh(e,r=>{if(!1===n)return!1;n=function mpe(i,e,t){switch(i.type){case"Point":switch(e.type){case"Point":return!function kpe(i,e){return i[0]===e[0]&&i[1]===e[1]}(i.coordinates,e.coordinates);case"LineString":return!cP(e,i);case"Polygon":return!Sf(i,e)}break;case"LineString":switch(e.type){case"Point":return!cP(i,e);case"LineString":return!function ype(i,e,t){return jC(i,e,{ignoreSelfIntersections:t}).features.length>0}(i,e,t);case"Polygon":return!hP(e,i,t)}break;case"Polygon":switch(e.type){case"Point":return!Sf(e,i);case"LineString":return!hP(i,e,t);case"Polygon":return!function _pe(i,e,t){for(const s of i.coordinates[0])if(Sf(s,e))return!0;for(const s of e.coordinates[0])if(Sf(s,i))return!0;return jC(qC(i),qC(e),{ignoreSelfIntersections:t}).features.length>0}(e,i,t)}}return!1}(s.geometry,r.geometry,t)})}),n}(s.geometry,r.geometry,{ignoreSelfIntersections:t})})}),n}(a,l)?(r.setStyle(r.get("__originalStyle")),r.set("selected",!1),this._covidData.setSelectedState(r.get("ste_stusps_code"),!1),this.statesInfo.forEach(c=>{c.name===r.get("ste_name").toString()&&(c.selected=!1)})):(this.estadosTocadosArray.push(r),!0===this.drawnFeatureAtPixel[0].get("selected")&&!0!==r.get("selected")?(r.setStyle(jt[0].rosa),r.set("selected",!0),this._covidData.setSelectedState(r.get("ste_stusps_code"),!0),this.statesInfo.forEach(c=>{c.name===r.get("ste_name").toString()&&(c.selected=!1)})):!1===this.drawnFeatureAtPixel[0].get("selected")&&!0===r.get("selected")&&(r.setStyle(r.get("__originalStyle")),r.set("selected",!1),this._covidData.setSelectedState(r.get("ste_stusps_code"),!1),this.statesInfo.forEach(c=>{r.get("ste_name").toString()}),this.subControlBar.setVisible(!1)))}catch{}}),this.modificado=!1,this.transformado=!1}calculatePolygonArea(t,n){let s=0;const r=t.length;for(let o=0;o<r;o++){const a=(o+1)%r;s+=t[o]*n[a]-t[a]*n[o]}return Math.abs(s/2)}}return i.\u0275fac=function(t){return new(t||i)(Y(WP),Y(wf),Y(xL),Y(gfe))},i.\u0275cmp=$t({type:i,selectors:[["app-map"]],viewQuery:function(t,n){if(1&t&&dt(mfe,5),2&t){let s;Re(s=Ae())&&(n.letreroTexto=s.first)}},decls:8,vars:6,consts:[[1,"navMenu",3,"click"],["id","map",1,"map"],["placeholder","Buscar estado...",3,"ngModel","suggestions","dropdown","forceSelection","minLength","ngModelChange","completeMethod","onSelect"],[1,"letrero-info"],["id","letreroTexto"],["letreroTexto",""],["class","fileUpload",4,"ngIf"],[1,"fileUpload"]],template:function(t,n){1&t&&(B(0,"button",0),le("click",function(){return n.toggleMenu()}),ke(1,"Menu"),H(),B(2,"div",1)(3,"p-autoComplete",2),le("ngModelChange",function(r){return n.selectedState=r})("completeMethod",function(r){return n.searchStates(r)})("onSelect",function(r){return n.onStateSelected(r)}),H()(),B(4,"div",3),Ze(5,"p",4,5),H(),A(7,yfe,2,0,"div",6)),2&t&&(C(3),M("ngModel",n.selectedState)("suggestions",n.filteredStates)("dropdown",!0)("forceSelection",!0)("minLength",1),C(4),M("ngIf",n.fileUpload))},dependencies:[Nn,hp,Oc,D7],styles:['@charset "UTF-8";.map[_ngcontent-%COMP%]{width:102%;height:100%;display:block;position:relative;z-index:0;bottom:2rem}.letrero-info[_ngcontent-%COMP%]{width:10vw;height:10vw}#letreroTexto[_ngcontent-%COMP%]{position:absolute;background-color:#000;font-size:1rem;color:#fff;padding:.5rem;border-radius:.5rem}  .mapControls{position:absolute!important;top:unset!important;bottom:1.5rem;height:2.4em;align-items:center;left:0%!important;z-index:1000000;pointer-events:auto;display:flex;flex-direction:row;gap:.5rem;background:rgba(255,255,255,.85);padding:.5rem;border-radius:6px;box-shadow:-6px 6px 6px #0000004d;transform:translate(5%)!important}  .mapControls .ctrl-button{padding:.5em!important;background-color:#fff;color:#00f;padding:10px}  .mapControls .ctrl-button svg{box-sizing:content-box!important}  .sub-toolbar{position:absolute!important;bottom:13.1em!important;height:3.6em;align-items:center;left:0rem!important;z-index:1000000;pointer-events:auto;display:flex;flex-direction:row;gap:.5rem;background:rgba(255,255,255,.85);padding:.5rem!important;border-radius:6px;box-shadow:-6px 6px 6px #0000004d;background-color:#fff!important}  .sub-toolbar .sub-button{padding:.5em!important;background-color:#fff!important;color:#00f;padding:10px}  .sub-toolbar .sub-button svg{box-sizing:content-box!important}  .sub-toolbar-2{position:absolute!important;bottom:5rem!important;align-items:center;left:1.4rem!important;z-index:1000000;pointer-events:auto;display:flex;flex-direction:column;gap:.5rem;background:rgba(255,255,255,.85);padding:.5rem!important;border-radius:6px;box-shadow:-6px 6px 6px #0000004d;background-color:#fff!important;width:fit-content}  .sub-toolbar-2 .sub-button{background-color:#fff!important;color:#00f}  .sub-toolbar-2 .sub-button svg{box-sizing:content-box!important}@media (max-width: 768px){  .mapControls{bottom:.5rem;gap:.25rem;padding:.25rem}  .mapControls .ctrl-button{padding:.3em!important}  .mapControls .ctrl-button svg{width:20px;height:20px}  .sub-toolbar{bottom:11rem!important;height:3.6rem!important}  .sub-toolbar-2{bottom:4rem!important}}  .p-autocomplete{display:inline-flex!important;position:absolute!important;z-index:2;left:3rem;top:1rem;box-shadow:-6px 6px 6px #0000004d}  .p-autocomplete .p-autocomplete-panel{min-width:100%;top:1rem!important;left:0rem!important}  p-autocomplete span{border-radius:10px}  .ol-zoom{top:1em;left:.5em;box-shadow:-5px 6px 6px #0000004d}  .ol-control button{border-radius:5px!important;height:1.75em!important;width:1.75rem!important}  .ol-control.ol-bar .ol-control{margin:0!important}.drawControls[_ngcontent-%COMP%]{position:absolute;top:10rem;left:1rem;z-index:1000000;pointer-events:auto;flex-direction:row;gap:.5rem;background:rgba(255,255,255,.85);padding:.5rem;border-radius:6px;box-shadow:0 2px 6px #0000004d}.drawControls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{height:1rem;width:1rem}.ctrl-button[_ngcontent-%COMP%]{background-color:#fff;color:#00f;padding:10px}.fileUpload[_ngcontent-%COMP%]{text-align:center;align-content:center;height:4em;width:8em;position:relative;bottom:30em;left:1em;background-color:#fafafae6;border-radius:10px}.navMenu[_ngcontent-%COMP%]{width:75px;height:26px;position:relative;top:7rem;left:.5rem;z-index:1000;background-color:#fff;border-radius:10px;border:none;box-shadow:-6px 6px 6px #0000004d}']}),i})(),vfe=(()=>{class i{constructor(t){this.el=t}onkeydown(t){if(!0!==this.pFocusTrapDisabled){t.preventDefault();let n=q.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let s=n.indexOf(n[0].ownerDocument.activeElement);t.shiftKey?-1==s||0===s?n[n.length-1].focus():n[s-1].focus():-1==s||s===n.length-1?n[0].focus():n[s+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(t){return new(t||i)(Y(rn))},i.\u0275dir=Ve({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(t,n){1&t&&le("keydown.tab",function(r){return n.onkeydown(r)})("keydown.shift.tab",function(r){return n.onkeydown(r)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),kfe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn]}),i})();const wfe=["titlebar"],xfe=["content"],Mfe=["footer"];function bfe(i,e){if(1&i){const t=Te();B(0,"div",11),le("mousedown",function(s){return U(t),W(x(3).initResize(s))}),H()}}function Cfe(i,e){if(1&i&&(B(0,"span",18),ke(1),H()),2&i){const t=x(4);tt("id",t.id+"-label"),C(1),zt(t.header)}}function Efe(i,e){1&i&&(B(0,"span",18),Yi(1,1),H()),2&i&&tt("id",x(4).id+"-label")}function Sfe(i,e){1&i&&_e(0)}const Ife=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Tfe(i,e){if(1&i){const t=Te();B(0,"button",19),le("click",function(){return U(t),W(x(4).maximize())})("keydown.enter",function(){return U(t),W(x(4).maximize())}),Ze(1,"span",20),H()}if(2&i){const t=x(4);M("ngClass",Ki(2,Ife)),C(1),M("ngClass",t.maximized?t.minimizeIcon:t.maximizeIcon)}}const Dfe=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Rfe(i,e){if(1&i){const t=Te();B(0,"button",21),le("click",function(s){return U(t),W(x(4).close(s))})("keydown.enter",function(s){return U(t),W(x(4).close(s))}),Ze(1,"span",22),H()}if(2&i){const t=x(4);M("ngClass",Ki(4,Dfe)),tt("aria-label",t.closeAriaLabel)("tabindex",t.closeTabindex),C(1),M("ngClass",t.closeIcon)}}function Afe(i,e){if(1&i){const t=Te();B(0,"div",12,13),le("mousedown",function(s){return U(t),W(x(3).initDrag(s))}),A(2,Cfe,2,2,"span",14),A(3,Efe,2,1,"span",14),A(4,Sfe,1,0,"ng-container",9),B(5,"div",15),A(6,Tfe,2,3,"button",16),A(7,Rfe,2,5,"button",17),H()()}if(2&i){const t=x(3);C(2),M("ngIf",!t.headerFacet&&!t.headerTemplate),C(1),M("ngIf",t.headerFacet),C(1),M("ngTemplateOutlet",t.headerTemplate),C(2),M("ngIf",t.maximizable),C(1),M("ngIf",t.closable)}}function Lfe(i,e){1&i&&_e(0)}function Pfe(i,e){1&i&&_e(0)}function Ofe(i,e){if(1&i&&(B(0,"div",23,24),Yi(2,2),A(3,Pfe,1,0,"ng-container",9),H()),2&i){const t=x(3);C(3),M("ngTemplateOutlet",t.footerTemplate)}}const Nfe=function(i,e,t,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":e,"p-dialog-resizable":t,"p-dialog-maximized":n}},Ffe=function(i,e){return{transform:i,transition:e}},Vfe=function(i){return{value:"visible",params:i}};function zfe(i,e){if(1&i){const t=Te();B(0,"div",3,4),le("@animation.start",function(s){return U(t),W(x(2).onAnimationStart(s))})("@animation.done",function(s){return U(t),W(x(2).onAnimationEnd(s))}),A(2,bfe,1,0,"div",5),A(3,Afe,8,5,"div",6),B(4,"div",7,8),Yi(6),A(7,Lfe,1,0,"ng-container",9),H(),A(8,Ofe,4,1,"div",10),H()}if(2&i){const t=x(2);ut(t.styleClass),M("ngClass",Ra(15,Nfe,t.rtl,t.draggable,t.resizable,t.maximized))("ngStyle",t.style)("pFocusTrapDisabled",!1===t.focusTrap)("@animation",xe(23,Vfe,Lt(20,Ffe,t.transformOptions,t.transitionOptions))),tt("aria-labelledby",t.id+"-label"),C(2),M("ngIf",t.resizable),C(1),M("ngIf",t.showHeader),C(1),ut(t.contentStyleClass),M("ngClass","p-dialog-content")("ngStyle",t.contentStyle),C(3),M("ngTemplateOutlet",t.contentTemplate),C(1),M("ngIf",t.footerFacet||t.footerTemplate)}}const Hfe=function(i,e,t,n,s,r,o,a,l,c){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":e,"p-dialog-left":t,"p-dialog-right":n,"p-dialog-top":s,"p-dialog-top-left":r,"p-dialog-top-right":o,"p-dialog-bottom":a,"p-dialog-bottom-left":l,"p-dialog-bottom-right":c}};function Bfe(i,e){if(1&i&&(B(0,"div",1),A(1,zfe,9,25,"div",2),H()),2&i){const t=x();ut(t.maskStyleClass),M("ngClass",yk(4,Hfe,[t.modal,t.modal||t.blockScroll,"left"===t.position,"right"===t.position,"top"===t.position,"topleft"===t.position||"top-left"===t.position,"topright"===t.position||"top-right"===t.position,"bottom"===t.position,"bottomleft"===t.position||"bottom-left"===t.position,"bottomright"===t.position||"bottom-right"===t.position])),C(1),M("ngIf",t.visible)}}const jfe=["*",[["p-header"]],[["p-footer"]]],qfe=["*","p-header","p-footer"],Gfe=D0([_i({transform:"{{transform}}",opacity:0}),Fs("{{transition}}")]),Ufe=D0([Fs("{{transition}}",_i({transform:"{{transform}}",opacity:0}))]);let Wfe=(()=>{class i{constructor(t,n,s,r,o){this.el=t,this.renderer=n,this.zone=s,this.cd=r,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new ie,this.onHide=new ie,this.visibleChange=new ie,this.onResizeInit=new ie,this.onResizeEnd=new ie,this.onDragEnd=new ie,this.onMaximize=new ie,this.id=Iu(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(t){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(t){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(t){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(t){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(t){this._visible=t,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(t){t&&(this._style={...t},this.originalStyle=t)}get position(){return this._position}set position(t){switch(this._position=t,t){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let t=q.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}close(t){this.visibleChange.emit(!1),t.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",t=>{this.wrapper&&this.wrapper.isSameNode(t.target)&&this.close(t)})),this.modal&&q.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&q.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?q.addClass(document.body,"p-overflow-hidden"):q.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Si.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let n in this.breakpoints)t+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=t}}initDrag(t){q.hasClass(t.target,"p-dialog-header-icon")||q.hasClass(t.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=t.pageX,this.lastPageY=t.pageY,this.container.style.margin="0",q.addClass(document.body,"p-unselectable-text"))}onKeydown(t){if(this.focusTrap&&9===t.which){t.preventDefault();let n=q.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let s=n.indexOf(n[0].ownerDocument.activeElement);t.shiftKey?-1==s||0===s?n[n.length-1].focus():n[s-1].focus():-1==s||s===n.length-1?n[0].focus():n[s+1].focus()}else n[0].focus()}}onDrag(t){if(this.dragging){let n=q.getOuterWidth(this.container),s=q.getOuterHeight(this.container),r=t.pageX-this.lastPageX,o=t.pageY-this.lastPageY,a=this.container.getBoundingClientRect(),l=a.left+r,c=a.top+o,h=q.getViewport();this.container.style.position="fixed",this.keepInViewport?(l>=this.minX&&l+n<h.width&&(this._style.left=l+"px",this.lastPageX=t.pageX,this.container.style.left=l+"px"),c>=this.minY&&c+s<h.height&&(this._style.top=c+"px",this.lastPageY=t.pageY,this.container.style.top=c+"px")):(this.lastPageX=t.pageX,this.container.style.left=l+"px",this.lastPageY=t.pageY,this.container.style.top=c+"px")}}endDrag(t){this.dragging&&(this.dragging=!1,q.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(t))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(t){this.resizable&&(this.resizing=!0,this.lastPageX=t.pageX,this.lastPageY=t.pageY,q.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(t))}onResize(t){if(this.resizing){let n=t.pageX-this.lastPageX,s=t.pageY-this.lastPageY,r=q.getOuterWidth(this.container),o=q.getOuterHeight(this.container),a=q.getOuterHeight(this.contentViewChild.nativeElement),l=r+n,c=o+s,h=this.container.style.minWidth,u=this.container.style.minHeight,d=this.container.getBoundingClientRect(),p=q.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(l+=n,c+=s),(!h||l>parseInt(h))&&d.left+l<p.width&&(this._style.width=l+"px",this.container.style.width=this._style.width),(!u||c>parseInt(u))&&d.top+c<p.height&&(this.contentViewChild.nativeElement.style.height=a+c-o+"px",this._style.height&&(this._style.height=c+"px",this.container.style.height=this._style.height)),this.lastPageX=t.pageX,this.lastPageY=t.pageY}}resizeEnd(t){this.resizing&&(this.resizing=!1,q.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(t))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):q.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(t){switch(t.toState){case"visible":this.container=t.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&q.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&q.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(t){switch(t.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(q.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&q.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Si.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(Ps),Y(an),Y(qn),Y(Ba))},i.\u0275cmp=$t({type:i,selectors:[["p-dialog"]],contentQueries:function(t,n,s){if(1&t&&(Qn(s,mx,5),Qn(s,l7,5),Qn(s,Ni,4)),2&t){let r;Re(r=Ae())&&(n.headerFacet=r.first),Re(r=Ae())&&(n.footerFacet=r.first),Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&(dt(wfe,5),dt(xfe,5),dt(Mfe,5)),2&t){let s;Re(s=Ae())&&(n.headerViewChild=s.first),Re(s=Ae())&&(n.contentViewChild=s.first),Re(s=Ae())&&(n.footerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:qfe,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(t,n){1&t&&(go(jfe),A(0,Bfe,2,15,"div",0)),2&t&&M("ngIf",n.maskVisible)},dependencies:[ei,Nn,Xi,Ei,vfe,ja],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[Dc("animation",[fs("void => visible",[R0(Gfe)]),fs("visible => void",[R0(Ufe)])])]},changeDetection:0}),i})(),$P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,kfe,Yo,Fi]}),i})();function $fe(i,e){if(1&i&&(B(0,"span",9),ke(1),H()),2&i){const t=x();C(1),_n(" ",t.header," ")}}function Yfe(i,e){1&i&&_e(0)}function Kfe(i,e){1&i&&Yi(0,1,["*ngIf","hasHeaderFacet"])}function Xfe(i,e){1&i&&_e(0)}function Zfe(i,e){if(1&i&&(ze(0),A(1,Xfe,1,0,"ng-container",5),He()),2&i){const t=x();C(1),M("ngTemplateOutlet",t.contentTemplate)}}const Qfe=["*",[["p-header"]]],Jfe=function(i){return{"p-accordion-tab-active":i}},ege=function(i,e){return{"p-highlight":i,"p-disabled":e}},YP=function(i){return{transitionParams:i}},tge=function(i){return{value:"visible",params:i}},nge=function(i){return{value:"hidden",params:i}},ige=["*","p-header"],sge=["*"];let rge=0,KP=(()=>{class i{constructor(t,n){this.changeDetector=n,this.cache=!0,this.selectedChange=new ie,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-accordiontab-"+rge++,this.accordion=t}get selected(){return this._selected}set selected(t){this._selected=t,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.detectChanges())}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"header":this.headerTemplate=t.template}})}toggle(t){if(this.disabled)return!1;let n=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:t,index:n});else{if(!this.accordion.multiple)for(var s=0;s<this.accordion.tabs.length;s++)this.accordion.tabs[s].selected&&(this.accordion.tabs[s].selected=!1,this.accordion.tabs[s].selectedChange.emit(!1),this.accordion.tabs[s].changeDetector.markForCheck());this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:t,index:n})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),t.preventDefault()}findTabIndex(){let t=-1;for(var n=0;n<this.accordion.tabs.length;n++)if(this.accordion.tabs[n]==this){t=n;break}return t}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(t){(32===t.which||13===t.which)&&(this.toggle(t),t.preventDefault())}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}}return i.\u0275fac=function(t){return new(t||i)(Y(Ct(()=>XP)),Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-accordionTab"]],contentQueries:function(t,n,s){if(1&t&&(Qn(s,mx,4),Qn(s,Ni,4)),2&t){let r;Re(r=Ae())&&(n.headerFacet=r),Re(r=Ae())&&(n.templates=r)}},hostAttrs:[1,"p-element"],inputs:{header:"header",disabled:"disabled",cache:"cache",transitionOptions:"transitionOptions",selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:ige,decls:11,vars:28,consts:[[1,"p-accordion-tab",3,"ngClass"],[1,"p-accordion-header",3,"ngClass"],["role","tab",1,"p-accordion-header-link",3,"click","keydown"],[1,"p-accordion-toggle-icon",3,"ngClass"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],[4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content"],[1,"p-accordion-header-text"]],template:function(t,n){1&t&&(go(Qfe),B(0,"div",0)(1,"div",1)(2,"a",2),le("click",function(r){return n.toggle(r)})("keydown",function(r){return n.onKeydown(r)}),Ze(3,"span",3),A(4,$fe,2,1,"span",4),A(5,Yfe,1,0,"ng-container",5),A(6,Kfe,1,0,"ng-content",6),H()(),B(7,"div",7)(8,"div",8),Yi(9),A(10,Zfe,2,1,"ng-container",6),H()()()),2&t&&(M("ngClass",xe(15,Jfe,n.selected)),C(1),M("ngClass",Lt(17,ege,n.selected,n.disabled)),C(1),tt("tabindex",n.disabled?null:0)("id",n.id)("aria-controls",n.id+"-content")("aria-expanded",n.selected),C(1),M("ngClass",n.selected?n.accordion.collapseIcon:n.accordion.expandIcon),C(1),M("ngIf",!n.hasHeaderFacet),C(1),M("ngTemplateOutlet",n.headerTemplate),C(1),M("ngIf",n.hasHeaderFacet),C(1),M("@tabContent",n.selected?xe(22,tge,xe(20,YP,n.transitionOptions)):xe(26,nge,xe(24,YP,n.transitionOptions))),tt("id",n.id+"-content")("aria-hidden",!n.selected)("aria-labelledby",n.id),C(3),M("ngIf",n.contentTemplate&&(n.cache?n.loaded:n.selected)))},dependencies:[ei,Nn,Xi],styles:[".p-accordion-header-link{cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}.p-accordion .p-toggleable-content{overflow:hidden}.p-accordion .p-accordion-tab-active>.p-toggleable-content:not(.ng-animating){overflow:inherit}\n"],encapsulation:2,data:{animation:[Dc("tabContent",[T0("hidden",_i({height:"0"})),T0("visible",_i({height:"*"})),fs("visible <=> hidden",[Fs("{{transitionParams}}")]),fs("void => *",Fs(0))])]},changeDetection:0}),i})(),XP=(()=>{class i{constructor(t,n){this.el=t,this.changeDetector=n,this.onClose=new ie,this.onOpen=new ie,this.expandIcon="pi pi-fw pi-chevron-right",this.collapseIcon="pi pi-fw pi-chevron-down",this.activeIndexChange=new ie,this.tabs=[]}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(t=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}updateSelectionState(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(let t=0;t<this.tabs.length;t++){let n=this.multiple?this._activeIndex.includes(t):t===this._activeIndex;n!==this.tabs[t].selected&&(this.tabs[t].selected=n,this.tabs[t].selectedChange.emit(n),this.tabs[t].changeDetector.markForCheck())}}updateActiveIndex(){let t=this.multiple?[]:null;this.tabs.forEach((n,s)=>{if(n.selected){if(!this.multiple)return void(t=s);t.push(s)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(t)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(Y(rn),Y(qn))},i.\u0275cmp=$t({type:i,selectors:[["p-accordion"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,KP,4),2&t){let r;Re(r=Ae())&&(n.tabList=r)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:sge,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(t,n){1&t&&(go(),B(0,"div",0),Yi(1),H()),2&t&&(ut(n.styleClass),M("ngClass","p-accordion p-component")("ngStyle",n.style))},dependencies:[ei,Ei],encapsulation:2,changeDetection:0}),i})(),ZP=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Fi]}),i})();const QP=["container"],oge=function(i,e,t,n){return{"pi-info-circle":i,"pi-exclamation-triangle":e,"pi-times-circle":t,"pi-check":n}};function age(i,e){if(1&i&&(ze(0),Ze(1,"span",6),B(2,"div",7)(3,"div",8),ke(4),H(),B(5,"div",9),ke(6),H()(),He()),2&i){const t=x();C(1),ut("p-toast-message-icon pi"+(t.message.icon?" "+t.message.icon:"")),M("ngClass",Ra(5,oge,"info"==t.message.severity,"warn"==t.message.severity,"error"==t.message.severity,"success"==t.message.severity)),C(3),zt(t.message.summary),C(2),zt(t.message.detail)}}function lge(i,e){1&i&&_e(0)}function cge(i,e){if(1&i){const t=Te();B(0,"button",10),le("click",function(s){return U(t),W(x().onCloseIconClick(s))})("keydown.enter",function(s){return U(t),W(x().onCloseIconClick(s))}),Ze(1,"span",11),H()}}const hge=function(i){return[i,"p-toast-message"]},uge=function(i,e,t,n){return{showTransformParams:i,hideTransformParams:e,showTransitionParams:t,hideTransitionParams:n}},dge=function(i){return{value:"visible",params:i}},pge=function(i){return{$implicit:i}};function fge(i,e){if(1&i){const t=Te();B(0,"p-toastItem",3),le("onClose",function(s){return U(t),W(x().onMessageClose(s))})("@toastAnimation.start",function(s){return U(t),W(x().onAnimationStart(s))})("@toastAnimation.done",function(s){return U(t),W(x().onAnimationEnd(s))}),H()}if(2&i){const t=e.$implicit,n=e.index,s=x();M("message",t)("index",n)("template",s.template)("@toastAnimation",void 0)("showTransformOptions",s.showTransformOptions)("hideTransformOptions",s.hideTransformOptions)("showTransitionOptions",s.showTransitionOptions)("hideTransitionOptions",s.hideTransitionOptions)}}let gge=(()=>{class i{constructor(t){this.zone=t,this.onClose=new ie}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(t){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),t.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(t){return new(t||i)(Y(an))},i.\u0275cmp=$t({type:i,selectors:[["p-toastItem"]],viewQuery:function(t,n){if(1&t&&dt(QP,5),2&t){let s;Re(s=Ae())&&(n.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(t,n){1&t&&(B(0,"div",0,1),le("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),B(2,"div",2),A(3,age,7,10,"ng-container",3),A(4,lge,1,0,"ng-container",4),A(5,cge,2,0,"button",5),H()()),2&t&&(ut(n.message.styleClass),M("ngClass",xe(10,hge,"p-toast-message-"+n.message.severity))("@messageState",xe(17,dge,Ra(12,uge,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),tt("id",n.message.id),C(2),M("ngClass",n.message.contentStyleClass),C(1),M("ngIf",!n.template),C(1),M("ngTemplateOutlet",n.template)("ngTemplateOutletContext",xe(19,pge,n.message)),C(1),M("ngIf",!1!==n.message.closable))},dependencies:[ei,Nn,Xi,ja],encapsulation:2,data:{animation:[Dc("messageState",[T0("visible",_i({transform:"translateY(0)",opacity:1})),fs("void => *",[_i({transform:"{{showTransformParams}}",opacity:0}),Fs("{{showTransitionParams}}")]),fs("* => void",[Fs("{{hideTransitionParams}}",_i({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),mge=(()=>{class i{constructor(t,n,s){this.messageService=t,this.cd=n,this.config=s,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new ie,this.id=Iu()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t)if(t instanceof Array){const n=t.filter(s=>this.canAdd(s));this.add(n)}else this.canAdd(t)&&this.add([t])}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(t){this.messages=this.messages?[...this.messages,...t]:[...t],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...t]:[...t]),this.cd.markForCheck()}canAdd(t){let n=this.key===t.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,t)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,t)),n}containsMessage(t,n){return!!t&&null!=t.find(s=>s.summary===n.summary&&s.detail==n.detail&&s.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.template=t.template})}onMessageClose(t){this.messages.splice(t.index,1),this.onClose.emit({message:t.message}),this.cd.detectChanges()}onAnimationStart(t){"void"===t.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Si.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(t){"void"===t.toState&&this.autoZIndex&&pe.isEmpty(this.messages)&&Si.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let n in this.breakpoints){let s="";for(let r in this.breakpoints[n])s+=r+":"+this.breakpoints[n][r]+" !important;";t+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${s}\n                        }\n                    }\n                `}this.styleElement.innerHTML=t}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Si.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(t){return new(t||i)(Y(gx),Y(qn),Y(Ba))},i.\u0275cmp=$t({type:i,selectors:[["p-toast"]],contentQueries:function(t,n,s){if(1&t&&Qn(s,Ni,4),2&t){let r;Re(r=Ae())&&(n.templates=r)}},viewQuery:function(t,n){if(1&t&&dt(QP,5),2&t){let s;Re(s=Ae())&&(n.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(t,n){1&t&&(B(0,"div",0,1),A(2,fge,1,8,"p-toastItem",2),H()),2&t&&(ut(n.styleClass),M("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),C(2),M("ngForOf",n.messages))},dependencies:[ei,xo,Ei,gge],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[Dc("toastAnimation",[fs(":enter, :leave",[s$("@*",i$())])])]},changeDetection:0}),i})(),JP=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Yo,Fi]}),i})();function yge(i,e){1&i&&(B(0,"tr")(1,"th"),ke(2,"Select"),H(),B(3,"th"),ke(4,"State"),H(),B(5,"th"),ke(6,"Detail"),H()())}function _ge(i,e){if(1&i){const t=Te();B(0,"tr")(1,"td",5)(2,"p-checkbox",6),le("ngModelChange",function(s){return W(U(t).$implicit.selected=s)})("click",function(s){const r=U(t),o=r.$implicit,a=r.rowIndex;return W(x().onClick(o,s,a))}),H()(),B(3,"td",5),ke(4),H(),B(5,"td",5)(6,"i",7),le("click",function(s){const r=U(t),o=r.$implicit,a=r.rowIndex;return W(x().detail(o,s,a))}),H()()()}if(2&i){const t=e.$implicit,n=e.rowIndex;C(2),M("ngModel",t.selected)("binary",!0)("inputId","binary"+n),C(2),_n(" ",t.name," ")}}function vge(i,e){1&i&&(B(0,"span"),ke(1," %"),H())}function kge(i,e){if(1&i&&(B(0,"div")(1,"p",17),ke(2),A(3,vge,2,0,"span",15),H(),B(4,"p"),ke(5),H()()),2&i){const t=x().$implicit,n=x(2);C(2),zt(t.getStateName()),C(1),M("ngIf",n.comparar&&2===n.compareArray.length),C(2),_n("",t.getPopulation()," people")}}function wge(i,e){if(1&i&&(B(0,"span",19),ke(1),Jg(2,"number"),H()),2&i){const t=x(2),n=t.index,s=t.$implicit;M("ngClass",x(2).compararDosEstadosCase(n)),C(1),_n("(% ",e0(2,2,null==s?null:s.getCasePerc(),"1.2-2")," )")}}function xge(i,e){if(1&i&&(B(0,"p"),ke(1,"Cases "),A(2,wge,3,5,"span",18),H()),2&i){const t=x(3);C(2),M("ngIf",t.comparar&&2===t.compareArray.length)}}function Mge(i,e){if(1&i&&(B(0,"span",19),ke(1),Jg(2,"number"),H()),2&i){const t=x(2),n=t.index,s=t.$implicit;M("ngClass",x(2).compararDosEstadosHosp(n)),C(1),_n("(% ",e0(2,2,null==s?null:s.getHospPerc(),"1.2-2")," )")}}function bge(i,e){if(1&i&&(B(0,"p"),ke(1,"Hospitalization "),A(2,Mge,3,5,"span",18),H()),2&i){const t=x(3);C(2),M("ngIf",t.comparar&&2===t.compareArray.length)}}const Cge=function(){return[0,1,2]};function Ege(i,e){if(1&i&&(ze(0),B(1,"div",13)(2,"p-accordion",14),A(3,kge,6,3,"div",15),B(4,"p-accordionTab"),A(5,xge,3,1,"ng-template",1),B(6,"p")(7,"b"),ke(8,"Total Cases:"),H(),ke(9),H(),B(10,"p")(11,"b"),ke(12,"New Cases Today:"),H(),ke(13),H()(),B(14,"p-accordionTab"),A(15,bge,3,1,"ng-template",1),B(16,"p")(17,"b"),ke(18,"Total Hospitalizated:"),H(),ke(19),H(),B(20,"p")(21,"b"),ke(22,"New Hospitalizated:"),H(),ke(23),H()(),B(24,"p-accordionTab",16)(25,"p")(26,"b"),ke(27,"Total Tests:"),H(),ke(28),H()()()(),He()),2&i){const t=e.$implicit,n=x(2);C(2),M("activeIndex",Ki(8,Cge))("multiple",!0),C(1),M("ngIf",n.comparar),C(6),_n(" ",t.getTotal(),""),C(4),_n(" ",t.getPositiveIncrease(),""),C(6),_n(" ",t.getHospitalizedCumulative(),""),C(4),_n(" ",t.getHospitalizedCurrently(),""),C(5),_n(" ",t.getTotalTestResults(),"")}}const Sge=function(){return{"1199px":"75vw","575px":"90vw"}},Ige=function(){return{"background-color":"white",color:"blue",border:"none","align-self":"flex-end"}};function Tge(i,e){if(1&i){const t=Te();B(0,"p-dialog",8),le("visibleChange",function(s){return U(t),W(x().visible=s)}),B(1,"div",9),A(2,Ege,29,9,"ng-container",10),H(),B(3,"div",11)(4,"p-button",12),le("onClick",function(){return U(t),W(x().resetArray())}),H()()()}if(2&i){const t=x();ai(t.dialogStyles),rk("header",t.headerName),M("modal",!0)("visible",t.visible)("breakpoints",Ki(12,Sge))("dismissableMask",!0)("closable",!1)("resizable",!0),C(2),M("ngForOf",t.compareArray),C(2),ai(Ki(13,Ige))}}const Dge=function(){return{"min-width":"100%",height:"50%"}};let Rge=(()=>{class i{constructor(t,n){this._covidData=t,this._messageService=n,this.statesInfo=[],this.color="black",this.visible=!1,this.covidDataArray=[],this.comparar=!1,this.population=[],this.porcentajeCasos=0,this.porcentajeHosp=0,this.estado1=0,this.estado=0,this.classChange=!1,this.rounded=!0,this.text=!0,this.compareArray=[],this.messages=[{error:"Error message"}],this.compareOk=!1,this.dialogStyles={width:"70rem",display:"flex","flex-direction":"column"}}ngOnInit(){this._covidData.getStatesInfo().subscribe(t=>{this.statesInfo=t}),this._covidData.getCovidData().subscribe(t=>{this.covidDataArray=t,this.statesInfo.forEach((n,s)=>{this.covidDataArray[s].setStateName(n.name)}),this._covidData.getPopulationData().subscribe(n=>{this.population=n,this.population.forEach((s,r)=>{let o=Number(s.population),a=this.covidDataArray[r].getTotal(),l=this.covidDataArray[r].getHospitalizedCumulative();this.covidDataArray[r].setPopulation(o),this.covidDataArray[r].setCasePerc(this.getPorcentaje(o,a)),this.covidDataArray[r].setHospPerc(this.getPorcentaje(o,l))})})})}ngAfterViewInit(){this._covidData.selectedState$.subscribe(t=>{if(t.codigo){const n=t.codigo,s=t.value,r=this.statesInfo.find(a=>a.state===n),o=this.statesInfo.findIndex(a=>a.state===n);this.statesInfo[o].selected=s,-1!==o&&!0===s?(this.statesInfo.splice(o,1),this.statesInfo=[r,...this.statesInfo],this.compareArray.find(l=>l.getState()===r.state)||this.arrayComparacion(r,o)):-1!==o&&!1===s&&this.compareArray.forEach((a,l)=>{a.getState()===r.state&&this.compareArray.splice(l,1)})}}),this._covidData.activateCompare.subscribe(t=>{t&&this.compare()})}onClick(t,n,s){const r=this.compareArray.find(o=>o.getState()===t.state);t.selected&&!r?this.arrayComparacion(t,s):this.compareArray.forEach((o,a)=>{o.getState()===t.state&&this.compareArray.splice(a,1)}),this._covidData.setOriginalStyle(!0,t.state,t.selected),console.log("Array de comparacion:",this.compareArray),console.log("Click desde el checkbox-NAV state.selected",t.selected)}detail(t,n,s){console.log("Detalle del estado:",t),console.log("Array de comparacion:",this.compareArray),this.headerName=t.name;const r=this.compareArray.find(o=>o.getState()===t.state);r?(this.compareArray=[],this.arrayComparacion(t,s),this.compareOk=!0,t.__selected=!0,console.log("Array de comparacion:",this.compareArray),this.compareOk=!0,t.__selected=!0,console.log("Opcion1")):r?(this.compareOk=!1,t.__selected=!1,console.log("Opcion3")):(this.compareArray=[],this.arrayComparacion(t,s),this.compareOk=!0,t.__selected=!0,console.log("Opcion2")),this.visible=!this.visible,console.log(this.visible)}compare(){this.headerName="Comparaci\xf3n de Estados",this.compareArray.length<2?(this._messageService.add({severity:"error",summary:"Error",detail:"Seleccione al menos dos estados para comparar."}),this.compareOk=!1,this.visible=!1):(this.comparar=!0,this.visible=!this.visible,this.compareOk=!0,console.log("Estados a comparar:",this.compareArray))}resetArray(){this.compareArray=[],this.compareOk=!1,this.visible=!1,this.statesInfo.forEach(t=>t.selected=!1),this._covidData.setOriginalStyles(!0)}arrayComparacion(t,n){this.compareArray.push(this.covidDataArray.find(s=>s.getState()===t._state))}getPorcentaje(t,n){return t?100*n/t:0}compararDosEstadosCase(t){const n=this.compareArray[0].getCasePerc(),s=this.compareArray[1].getCasePerc();return 2===this.compareArray.length&&0===t?n>s?"rojo":"verde":2===this.compareArray.length&&1===t?n<s?"rojo":"verde":""}compararDosEstadosHosp(t){const n=this.compareArray[0].getHospPerc(),s=this.compareArray[1].getHospPerc();return 2===this.compareArray.length&&0===t?n>s?"rojo":"verde":2===this.compareArray.length&&1===t?n<s?"rojo":"verde":""}}return i.\u0275fac=function(t){return new(t||i)(Y(WP),Y(gx))},i.\u0275cmp=$t({type:i,selectors:[["app-nav-bar"]],features:[Et([gx])],decls:8,vars:7,consts:[[3,"value","paginator","rows","responsive","tableStyle"],["pTemplate","header"],["pTemplate","body"],["label","Compare",3,"onClick"],["class","ancho",3,"header","modal","visible","style","breakpoints","dismissableMask","closable","resizable","visibleChange",4,"ngIf"],[1,"ancho"],[3,"ngModel","binary","inputId","ngModelChange","click"],["role","button","title","view",1,"pi","pi-eye",3,"click"],[1,"ancho",3,"header","modal","visible","breakpoints","dismissableMask","closable","resizable","visibleChange"],[1,"dialogContent"],[4,"ngFor","ngForOf"],[1,"botonOk"],["icon","pi pi-check","label","ok","severity","success",3,"onClick"],[1,"col","flex","align-items-center","justify-content-center"],[3,"activeIndex","multiple"],[4,"ngIf"],["header","Tests"],[1,"nombreEstado"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,n){1&t&&(B(0,"div")(1,"article")(2,"p-table",0),A(3,yge,7,0,"ng-template",1),A(4,_ge,7,4,"ng-template",2),H(),B(5,"p-button",3),le("onClick",function(){return n.compare()}),H()(),A(6,Tge,5,14,"p-dialog",4),Ze(7,"p-toast"),H()),2&t&&(C(2),M("value",n.statesInfo)("paginator",!0)("rows",8)("responsive",!0)("tableStyle",Ki(6,Dge)),C(4),M("ngIf",n.compareOk))},dependencies:[ei,xo,Nn,hp,Oc,Ix,Ni,Tx,AX,Wfe,XP,KP,mge,sw],styles:["div[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}article[_ngcontent-%COMP%]{height:100%!important;text-align:center}p-table[_ngcontent-%COMP%]{width:99%}.nombreEstado[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:-.5rem;width:max-content}  .ancho{max-width:fit-content!important}  .ancho i{width:1.3rem;background-color:red;border-radius:11px;text-align:center;padding:2px}  .dialogContent{display:flex!important;flex-direction:row!important;align-items:baseline!important}  .botonOk{align-items:end!important}  p-accordion{margin-left:10px!important;height:75%!important}  p-button{margin-top:10px}  .p-paginator .p-paginator-pages .p-paginator-page{background-color:#f0f0f0;border:1px solid #ddd;color:#333;min-width:1.5rem;height:1.5rem;margin:.5rem;border-radius:20px}  .p-paginator .p-paginator-pages .p-paginator-page .p-paginator-first,   .p-paginator .p-paginator-pages .p-paginator-page .p-paginator .p-paginator-prev,   .p-paginator .p-paginator-pages .p-paginator-page .p-paginator .p-paginator-next,   .p-paginator .p-paginator-pages .p-paginator-page .p-paginator .p-paginator-last{min-width:1rem}  .p-dialog{max-height:99vh!important;position:absolute}  .p-dialog .p-dialog-content{width:fit-content!important;border-radius:0 6px 6px 10px!important;max-width:80vw;padding:9px 1.5rem 2rem}  .p-dialog-draggable .p-dialog-header{width:fit-content!important}  .p-accordion .p-accordion-header:not(.p-disabled).p-highlight .p-accordion-header-link{padding:.5rem!important;margin-bottom:.2rem!important}  .p-accordion .p-accordion-header-link .p-accordion-toggle-icon{margin-right:.5rem;margin-left:.5rem}  .p-accordion .p-accordion-content{padding:.2rem!important;width:max-content!important;border:none!important}  .p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.rojo[_ngcontent-%COMP%]{color:red}.verde[_ngcontent-%COMP%]{color:#3ce93c}"]}),i})();function Age(i,e){1&i&&(B(0,"tr")(1,"th"),ke(2,"Select"),H(),B(3,"th"),ke(4,"State"),H()())}function Lge(i,e){if(1&i){const t=Te();B(0,"tr")(1,"td",3)(2,"p-checkbox",4),le("ngModelChange",function(s){return W(U(t).$implicit.selected=s)})("click",function(s){const r=U(t),o=r.$implicit,a=r.rowIndex;return W(x().onClick(o,s,a))}),H()(),B(3,"td",3),ke(4),H()()}if(2&i){const t=e.$implicit,n=e.rowIndex;C(2),M("ngModel",t.selected)("binary",!0)("inputId","binary"+n),C(2),_n(" ",t.name," ")}}const Pge=function(){return{"min-width":"100%"}};let Oge=(()=>{class i{constructor(t){this._mapService=t,this.layers=[]}ngOnInit(){this._mapService.layerArray$.subscribe(t=>{t.length>0&&(this.layers=t)})}onClick(t,n,s){console.log("AppLayersComponent - onClick",n),console.log("Layer seleccionado:",t,"I:",s),console.log(this.layers),this._mapService.toggleLayerVisibility(t)}}return i.\u0275fac=function(t){return new(t||i)(Y(wf))},i.\u0275cmp=$t({type:i,selectors:[["app-layers"]],decls:3,vars:3,consts:[[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"ancho"],[3,"ngModel","binary","inputId","ngModelChange","click"]],template:function(t,n){1&t&&(B(0,"p-table",0),A(1,Age,5,0,"ng-template",1),A(2,Lge,5,4,"ng-template",2),H()),2&t&&M("value",n.layers)("tableStyle",Ki(2,Pge))},dependencies:[hp,Oc,Ix,Ni,Tx]}),i})();function Nge(i,e){if(1&i&&(B(0,"p"),ke(1),Jg(2,"number"),H()),2&i){const t=x();C(1),_n(" ",e0(2,1,t.areaCalcResult,"1.2-2")," m\xb2.\n")}}let Fge=(()=>{class i{constructor(t){this._mapService=t,this.areaCalcResult=null}ngOnInit(){this._mapService.polArea$.subscribe(t=>{this.areaCalcResult=t})}}return i.\u0275fac=function(t){return new(t||i)(Y(wf))},i.\u0275cmp=$t({type:i,selectors:[["app-area-calc"]],decls:3,vars:1,consts:[[1,"title"],[4,"ngIf"]],template:function(t,n){1&t&&(B(0,"h2",0),ke(1,"Polygon Area:"),H(),A(2,Nge,3,4,"p",1)),2&t&&(C(2),M("ngIf",null!==n.areaCalcResult))},dependencies:[Nn,sw],styles:["p[_ngcontent-%COMP%]{text-align:right}"]}),i})();function Vge(i,e){1&i&&Ze(0,"app-nav-bar")}function zge(i,e){1&i&&Ze(0,"app-layers")}function Hge(i,e){1&i&&Ze(0,"app-area-calc")}function Bge(i,e){1&i&&Ze(0,"app-nav-bar")}function jge(i,e){1&i&&(B(0,"div",2),A(1,Vge,1,0,"app-nav-bar",3),A(2,zge,1,0,"app-layers",3),A(3,Hge,1,0,"app-area-calc",3),A(4,Bge,1,0,"app-nav-bar",4),H()),2&i&&(M("ngSwitch",x().selectedNavBar),C(1),M("ngSwitchCase","default"),C(1),M("ngSwitchCase","layers"),C(1),M("ngSwitchCase","areaCalc"))}let qge=(()=>{class i{constructor(t,n){this._mapService=t,this._menusService=n,this.title="ejercicio_covid",this.viewStates=!0,this.viewLayers=!1,this.viewAreaCalc=!1,this.selectedNavBar="",this.viewMenu=!1}ngOnInit(){console.log("AppComponent initialized"),this._mapService.navToShow$.subscribe(t=>{this.selectedNavBar=t,console.log("Navegacion seleccionada:",this.selectedNavBar)}),this._menusService.menu$.subscribe(t=>{this.viewMenu=t})}}return i.\u0275fac=function(t){return new(t||i)(Y(wf),Y(xL))},i.\u0275cmp=$t({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[["class","nav",3,"ngSwitch",4,"ngIf"],[1,"app-map"],[1,"nav",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(A(0,jge,5,4,"div",0),Ze(1,"app-map",1)(2,"router-outlet")),2&t&&M("ngIf",n.viewMenu)},dependencies:[Nn,w0,kI,wI,Kx,_fe,Rge,Oge,Fge],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:95vh;width:98vw;overflow:hidden}.nav[_ngcontent-%COMP%]{width:25%;height:100%;min-width:160px;background:#ffffff;display:flex;align-items:flex-start;justify-content:flex-start;align-content:flex-start;flex-wrap:nowrap;flex-direction:column;overflow:auto}app-map[_ngcontent-%COMP%]{width:98%;height:101%}  app-area-calc{width:200px!important;height:auto;margin-top:1rem;padding:.5rem}.navMenu[_ngcontent-%COMP%]{width:75px;height:26px;position:absolute;top:5rem;left:.5rem;z-index:1000;background-color:#fff;border-radius:10px;border:none;box-shadow:-6px 6px 6px #0000004d}"]}),i})();const Gge=[];let Uge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[Pm.forChild(Gge),Pm]}),i})(),eO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Yo]}),i})(),tO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Fi]}),i})(),o0e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[pn,Ll,eO,Uge,$P,ZP,tO,JP,Bw,pn,Ll,eO,$P,ZP,tO,JP,Bw]}),i})();const nO=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],iO=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],sO=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],rO=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],oO=[["path",{d:"M16 12v2a2 2 0 0 1-2 2H9a1 1 0 0 0-1 1v3a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h0",key:"1mcohs"}],["path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 1-1 1h-5a2 2 0 0 0-2 2v2",key:"1r1efp"}]],aO=[["path",{d:"M10 22a2 2 0 0 1-2-2",key:"i7yj1i"}],["path",{d:"M16 22h-2",key:"18d249"}],["path",{d:"M16 4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-5a2 2 0 0 1 2-2h5a1 1 0 0 0 1-1z",key:"1njgbb"}],["path",{d:"M20 8a2 2 0 0 1 2 2",key:"1770vt"}],["path",{d:"M22 14v2",key:"iot8ja"}],["path",{d:"M22 20a2 2 0 0 1-2 2",key:"qj8q6g"}]],lO=[["path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 0 1 1h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-3a1 1 0 0 0-1-1z",key:"17jnth"}]],cO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hO=[["path",{d:"M19.5 7a24 24 0 0 1 0 10",key:"8n60xe"}],["path",{d:"M4.5 7a24 24 0 0 0 0 10",key:"2lmadr"}],["path",{d:"M7 19.5a24 24 0 0 0 10 0",key:"1q94o2"}],["path",{d:"M7 4.5a24 24 0 0 1 10 0",key:"2z8ypa"}],["rect",{x:"17",y:"17",width:"5",height:"5",rx:"1",key:"1ac74s"}],["rect",{x:"17",y:"2",width:"5",height:"5",rx:"1",key:"1e7h5j"}],["rect",{x:"2",y:"17",width:"5",height:"5",rx:"1",key:"1t4eah"}],["rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",key:"940dhs"}]],uO=new Fe("LucideIcons",{factory:()=>new q4({})});class q4{constructor(e){this.icons=e}getIcon(e){return this.hasIcon(e)?this.icons[e]:null}hasIcon(e){return"object"==typeof this.icons&&e in this.icons}}class wNe{constructor(e){this.icons=e}}const xNe=i=>new q4(i??{});let MNe=(()=>{class i{static pick(t){return{ngModule:i,providers:[{provide:uO,multi:!0,useValue:new q4(t)},{provide:uO,multi:!0,useFactory:xNe,deps:[[new tu,wNe]]}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i}),i.\u0275inj=ct({imports:[[]]}),i})(),bNe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=vt({type:i,bootstrap:[qge]}),i.\u0275inj=ct({imports:[WI,uoe,mK,Bw,rm,Ute,Qte,Ll,o0e,zne,Hie,MNe.pick({VectorSquare:hO,Minimize2:iO,Move:sO,Scissors:rO,SquaresSubtract:aO,SquaresUnite:lO,SquaresExclude:oO,FilePlusCorner:nO,Trash2:cO})]}),i})();const ENe=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(i,e){return"2d"===i&&(e={...e,willReadFrequently:!0}),ENe.call(this,i,e)},function fG(){G6=!1}(),WW().bootstrapModule(bNe).catch(i=>console.error(i))},475:so=>{var Ir=function(me,it){return me<it};function Ut(me){if(!(this instanceof Ut))return new Ut(me);this.array=[],this.size=0,this.compare=me||Ir}Ut.prototype.clone=function(){var me=new Ut(this.compare);return me.size=this.size,me.array=this.array.slice(0,this.size),me},Ut.prototype.add=function(me){var Ln,Yn,it=this.size;for(this.array[this.size]=me,this.size+=1;it>0&&this.compare(me,Yn=this.array[Ln=it-1>>1]);)this.array[it]=Yn,it=Ln;this.array[it]=me},Ut.prototype.heapify=function(me){var it;for(this.array=me,this.size=me.length,it=this.size>>1;it>=0;it--)this._percolateDown(it)},Ut.prototype._percolateUp=function(me,it){for(var Yn,nn,Ln=this.array[me];me>0&&(nn=this.array[Yn=me-1>>1],it||this.compare(Ln,nn));)this.array[me]=nn,me=Yn;this.array[me]=Ln},Ut.prototype._percolateDown=function(me){for(var nn,ro,Tr,it=this.size,Ln=this.size>>>1,Yn=this.array[me];me<Ln&&(Tr=this.array[nn=1+(me<<1)],(ro=nn+1)<it&&this.compare(this.array[ro],Tr)&&(nn=ro,Tr=this.array[ro]),this.compare(Tr,Yn));)this.array[me]=Tr,me=nn;this.array[me]=Yn},Ut.prototype._removeAt=function(me){if(!(me>this.size-1||me<0))return this._percolateUp(me,!0),this.poll()},Ut.prototype.remove=function(me){for(var it=0;it<this.size;it++)if(!this.compare(this.array[it],me)&&!this.compare(me,this.array[it]))return this._removeAt(it),!0;return!1},Ut.prototype.removeOne=function(me){if("function"==typeof me)for(var it=0;it<this.size;it++)if(me(this.array[it]))return this._removeAt(it)},Ut.prototype.removeMany=function(me,it){if("function"!=typeof me||this.size<1)return[];it=it?Math.min(it,this.size):this.size;for(var Ln=0,Yn=new Array(it),nn=0,ro=new Array(this.size);Ln<it&&!this.isEmpty();){var Tr=this.poll();me(Tr)?Yn[Ln++]=Tr:ro[nn++]=Tr}Yn.length=Ln;for(var e1=0;e1<nn;)this.add(ro[e1++]);return Yn},Ut.prototype.peek=function(){if(0!=this.size)return this.array[0]},Ut.prototype.poll=function(){if(0!=this.size){var me=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,me}},Ut.prototype.replaceTop=function(me){if(0!=this.size){var it=this.array[0];return this.array[0]=me,this._percolateDown(0),it}},Ut.prototype.trim=function(){this.array=this.array.slice(0,this.size)},Ut.prototype.isEmpty=function(){return 0===this.size},Ut.prototype.forEach=function(me){if(!this.isEmpty()&&"function"==typeof me)for(var it=0,Ln=this.clone();!Ln.isEmpty();)me(Ln.poll(),it++)},Ut.prototype.kSmallest=function(me){if(0==this.size||me<=0)return[];me=Math.min(this.size,me);const it=Math.min(this.size,2**(me-1)+1);if(it<2)return[this.peek()];const Ln=new Ut(this.compare);Ln.size=it,Ln.array=this.array.slice(0,it);const Yn=new Array(me);for(let nn=0;nn<me;nn++)Yn[nn]=Ln.poll();return Yn},so.exports=Ut}},so=>{so(so.s=40)}]);